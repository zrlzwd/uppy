(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/* global define */

(function () {
	'use strict';

	var hasOwn = {}.hasOwnProperty;

	function classNames () {
		var classes = [];

		for (var i = 0; i < arguments.length; i++) {
			var arg = arguments[i];
			if (!arg) continue;

			var argType = typeof arg;

			if (argType === 'string' || argType === 'number') {
				classes.push(arg);
			} else if (Array.isArray(arg) && arg.length) {
				var inner = classNames.apply(null, arg);
				if (inner) {
					classes.push(inner);
				}
			} else if (argType === 'object') {
				for (var key in arg) {
					if (hasOwn.call(arg, key) && arg[key]) {
						classes.push(key);
					}
				}
			}
		}

		return classes.join(' ');
	}

	if (typeof module !== 'undefined' && module.exports) {
		classNames.default = classNames;
		module.exports = classNames;
	} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {
		// register as 'classnames', consistent with npm package name
		define('classnames', [], function () {
			return classNames;
		});
	} else {
		window.classNames = classNames;
	}
}());

},{}],2:[function(require,module,exports){
/**
 * cuid.js
 * Collision-resistant UID generator for browsers and node.
 * Sequential for fast db lookups and recency sorting.
 * Safe for element IDs and server-side lookups.
 *
 * Extracted from CLCTR
 *
 * Copyright (c) Eric Elliott 2012
 * MIT License
 */

var fingerprint = require('./lib/fingerprint.js');
var pad = require('./lib/pad.js');

var c = 0,
  blockSize = 4,
  base = 36,
  discreteValues = Math.pow(base, blockSize);

function randomBlock () {
  return pad((Math.random() *
    discreteValues << 0)
    .toString(base), blockSize);
}

function safeCounter () {
  c = c < discreteValues ? c : 0;
  c++; // this is not subliminal
  return c - 1;
}

function cuid () {
  // Starting with a lowercase letter makes
  // it HTML element ID friendly.
  var letter = 'c', // hard-coded allows for sequential access

    // timestamp
    // warning: this exposes the exact date and time
    // that the uid was created.
    timestamp = (new Date().getTime()).toString(base),

    // Prevent same-machine collisions.
    counter = pad(safeCounter().toString(base), blockSize),

    // A few chars to generate distinct ids for different
    // clients (so different computers are far less
    // likely to generate the same id)
    print = fingerprint(),

    // Grab some more chars from Math.random()
    random = randomBlock() + randomBlock();

  return letter + timestamp + counter + print + random;
}

cuid.slug = function slug () {
  var date = new Date().getTime().toString(36),
    counter = safeCounter().toString(36).slice(-4),
    print = fingerprint().slice(0, 1) +
      fingerprint().slice(-1),
    random = randomBlock().slice(-2);

  return date.slice(-2) +
    counter + print + random;
};

cuid.fingerprint = fingerprint;

module.exports = cuid;

},{"./lib/fingerprint.js":3,"./lib/pad.js":4}],3:[function(require,module,exports){
var pad = require('./pad.js');

var env = typeof window === 'object' ? window : self;
var globalCount = Object.keys(env).length;
var mimeTypesLength = navigator.mimeTypes ? navigator.mimeTypes.length : 0;
var clientId = pad((mimeTypesLength +
  navigator.userAgent.length).toString(36) +
  globalCount.toString(36), 4);

module.exports = function fingerprint () {
  return clientId;
};

},{"./pad.js":4}],4:[function(require,module,exports){
module.exports = function pad (num, size) {
  var s = '000000000' + num;
  return s.substr(s.length - size);
};

},{}],5:[function(require,module,exports){
module.exports = dragDrop

var flatten = require('flatten')
var parallel = require('run-parallel')

function dragDrop (elem, listeners) {
  if (typeof elem === 'string') {
    var selector = elem
    elem = window.document.querySelector(elem)
    if (!elem) {
      throw new Error('"' + selector + '" does not match any HTML elements')
    }
  }

  if (!elem) {
    throw new Error('"' + elem + '" is not a valid HTML element')
  }

  if (typeof listeners === 'function') {
    listeners = { onDrop: listeners }
  }

  var timeout

  elem.addEventListener('dragenter', onDragEnter, false)
  elem.addEventListener('dragover', onDragOver, false)
  elem.addEventListener('dragleave', onDragLeave, false)
  elem.addEventListener('drop', onDrop, false)

  // Function to remove drag-drop listeners
  return function remove () {
    removeDragClass()
    elem.removeEventListener('dragenter', onDragEnter, false)
    elem.removeEventListener('dragover', onDragOver, false)
    elem.removeEventListener('dragleave', onDragLeave, false)
    elem.removeEventListener('drop', onDrop, false)
  }

  function onDragEnter (e) {
    if (listeners.onDragEnter) {
      listeners.onDragEnter(e)
    }

    // Prevent event
    e.stopPropagation()
    e.preventDefault()
    return false
  }

  function onDragOver (e) {
    e.stopPropagation()
    e.preventDefault()
    if (e.dataTransfer.items) {
      // Only add "drag" class when `items` contains items that are able to be
      // handled by the registered listeners (files vs. text)
      var items = toArray(e.dataTransfer.items)
      var fileItems = items.filter(function (item) { return item.kind === 'file' })
      var textItems = items.filter(function (item) { return item.kind === 'string' })

      if (fileItems.length === 0 && !listeners.onDropText) return
      if (textItems.length === 0 && !listeners.onDrop) return
      if (fileItems.length === 0 && textItems.length === 0) return
    }

    elem.classList.add('drag')
    clearTimeout(timeout)

    if (listeners.onDragOver) {
      listeners.onDragOver(e)
    }

    e.dataTransfer.dropEffect = 'copy'
    return false
  }

  function onDragLeave (e) {
    e.stopPropagation()
    e.preventDefault()

    if (listeners.onDragLeave) {
      listeners.onDragLeave(e)
    }

    clearTimeout(timeout)
    timeout = setTimeout(removeDragClass, 50)

    return false
  }

  function onDrop (e) {
    e.stopPropagation()
    e.preventDefault()

    if (listeners.onDragLeave) {
      listeners.onDragLeave(e)
    }

    clearTimeout(timeout)
    removeDragClass()

    var pos = {
      x: e.clientX,
      y: e.clientY
    }

    // text drop support
    var text = e.dataTransfer.getData('text')
    if (text && listeners.onDropText) {
      listeners.onDropText(text, pos)
    }

    // file drop support
    if (e.dataTransfer.files) {
      console.log('e.dataTransfer.files')
      var files = toArray(e.dataTransfer.files)

      if (files.length === 0) return

      files.forEach(function (file) {
        file.fullPath = '/' + file.name
      })

      if (listeners.onDrop) {
        listeners.onDrop(files, pos)
      }
    } else if (e.dataTransfer.items) {
      console.log('e.dataTransfer.items')
      // Handle directories in Chrome using the proprietary FileSystem API
      var items = toArray(e.dataTransfer.items).filter(function (item) {
        return item.kind === 'file'
      })

      if (items.length === 0) return

      parallel(items.map(function (item) {
        return function (cb) {
          processEntry(item.webkitGetAsEntry(), cb)
        }
      }), function (err, results) {
        // This catches permission errors with file:// in Chrome. This should never
        // throw in production code, so the user does not need to use try-catch.
        if (err) throw err
        if (listeners.onDrop) {
          listeners.onDrop(flatten(results), pos)
        }
      })
    }

    return false
  }

  function removeDragClass () {
    elem.classList.remove('drag')
  }
}

function processEntry (entry, cb) {
  var entries = []

  if (entry.isFile) {
    entry.file(function (file) {
      file.fullPath = entry.fullPath // preserve pathing for consumer
      cb(null, file)
    }, function (err) {
      cb(err)
    })
  } else if (entry.isDirectory) {
    var reader = entry.createReader()
    readEntries()
  }

  function readEntries () {
    reader.readEntries(function (entries_) {
      if (entries_.length > 0) {
        entries = entries.concat(toArray(entries_))
        readEntries() // continue reading entries until `readEntries` returns no more
      } else {
        doneEntries()
      }
    })
  }

  function doneEntries () {
    parallel(entries.map(function (entry) {
      return function (cb) {
        processEntry(entry, cb)
      }
    }), cb)
  }
}

function toArray (list) {
  return Array.prototype.slice.call(list || [], 0)
}

},{"flatten":7,"run-parallel":14}],6:[function(require,module,exports){
'use strict';

var hasOwn = Object.prototype.hasOwnProperty;
var toStr = Object.prototype.toString;

var isArray = function isArray(arr) {
	if (typeof Array.isArray === 'function') {
		return Array.isArray(arr);
	}

	return toStr.call(arr) === '[object Array]';
};

var isPlainObject = function isPlainObject(obj) {
	if (!obj || toStr.call(obj) !== '[object Object]') {
		return false;
	}

	var hasOwnConstructor = hasOwn.call(obj, 'constructor');
	var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');
	// Not own constructor property must be Object
	if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {
		return false;
	}

	// Own properties are enumerated firstly, so to speed up,
	// if last one is own, then all properties are own.
	var key;
	for (key in obj) { /**/ }

	return typeof key === 'undefined' || hasOwn.call(obj, key);
};

module.exports = function extend() {
	var options, name, src, copy, copyIsArray, clone;
	var target = arguments[0];
	var i = 1;
	var length = arguments.length;
	var deep = false;

	// Handle a deep copy situation
	if (typeof target === 'boolean') {
		deep = target;
		target = arguments[1] || {};
		// skip the boolean and the target
		i = 2;
	}
	if (target == null || (typeof target !== 'object' && typeof target !== 'function')) {
		target = {};
	}

	for (; i < length; ++i) {
		options = arguments[i];
		// Only deal with non-null/undefined values
		if (options != null) {
			// Extend the base object
			for (name in options) {
				src = target[name];
				copy = options[name];

				// Prevent never-ending loop
				if (target !== copy) {
					// Recurse if we're merging plain objects or arrays
					if (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {
						if (copyIsArray) {
							copyIsArray = false;
							clone = src && isArray(src) ? src : [];
						} else {
							clone = src && isPlainObject(src) ? src : {};
						}

						// Never move original objects, clone them
						target[name] = extend(deep, clone, copy);

					// Don't bring in undefined values
					} else if (typeof copy !== 'undefined') {
						target[name] = copy;
					}
				}
			}
		}
	}

	// Return the modified object
	return target;
};

},{}],7:[function(require,module,exports){
module.exports = function flatten(list, depth) {
  depth = (typeof depth == 'number') ? depth : Infinity;

  if (!depth) {
    if (Array.isArray(list)) {
      return list.map(function(i) { return i; });
    }
    return list;
  }

  return _flatten(list, 1);

  function _flatten(list, d) {
    return list.reduce(function (acc, item) {
      if (Array.isArray(item) && d < depth) {
        return acc.concat(_flatten(item, d + 1));
      }
      else {
        return acc.concat(item);
      }
    }, []);
  }
};

},{}],8:[function(require,module,exports){
(function (global){
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/** Used to match leading and trailing whitespace. */
var reTrim = /^\s+|\s+$/g;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        result = wait - timeSinceLastCall;

    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

/**
 * Creates a throttled function that only invokes `func` at most once per
 * every `wait` milliseconds. The throttled function comes with a `cancel`
 * method to cancel delayed `func` invocations and a `flush` method to
 * immediately invoke them. Provide `options` to indicate whether `func`
 * should be invoked on the leading and/or trailing edge of the `wait`
 * timeout. The `func` is invoked with the last arguments provided to the
 * throttled function. Subsequent calls to the throttled function return the
 * result of the last `func` invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the throttled function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.throttle` and `_.debounce`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to throttle.
 * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=true]
 *  Specify invoking on the leading edge of the timeout.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new throttled function.
 * @example
 *
 * // Avoid excessively updating the position while scrolling.
 * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
 *
 * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.
 * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });
 * jQuery(element).on('click', throttled);
 *
 * // Cancel the trailing throttled invocation.
 * jQuery(window).on('popstate', throttled.cancel);
 */
function throttle(func, wait, options) {
  var leading = true,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  if (isObject(options)) {
    leading = 'leading' in options ? !!options.leading : leading;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }
  return debounce(func, wait, {
    'leading': leading,
    'maxWait': wait,
    'trailing': trailing
  });
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && objectToString.call(value) == symbolTag);
}

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = value.replace(reTrim, '');
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = throttle;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],9:[function(require,module,exports){
var wildcard = require('wildcard');
var reMimePartSplit = /[\/\+\.]/;

/**
  # mime-match

  A simple function to checker whether a target mime type matches a mime-type
  pattern (e.g. image/jpeg matches image/jpeg OR image/*).

  ## Example Usage

  <<< example.js

**/
module.exports = function(target, pattern) {
  function test(pattern) {
    var result = wildcard(pattern, target, reMimePartSplit);

    // ensure that we have a valid mime type (should have two parts)
    return result && result.length >= 2;
  }

  return pattern ? test(pattern.split(';')[0]) : test;
};

},{"wildcard":23}],10:[function(require,module,exports){
/**
* Create an event emitter with namespaces
* @name createNamespaceEmitter
* @example
* var emitter = require('./index')()
*
* emitter.on('*', function () {
*   console.log('all events emitted', this.event)
* })
*
* emitter.on('example', function () {
*   console.log('example event emitted')
* })
*/
module.exports = function createNamespaceEmitter () {
  var emitter = {}
  var _fns = emitter._fns = {}

  /**
  * Emit an event. Optionally namespace the event. Handlers are fired in the order in which they were added with exact matches taking precedence. Separate the namespace and event with a `:`
  * @name emit
  * @param {String} event – the name of the event, with optional namespace
  * @param {...*} data – up to 6 arguments that are passed to the event listener
  * @example
  * emitter.emit('example')
  * emitter.emit('demo:test')
  * emitter.emit('data', { example: true}, 'a string', 1)
  */
  emitter.emit = function emit (event, arg1, arg2, arg3, arg4, arg5, arg6) {
    var toEmit = getListeners(event)

    if (toEmit.length) {
      emitAll(event, toEmit, [arg1, arg2, arg3, arg4, arg5, arg6])
    }
  }

  /**
  * Create en event listener.
  * @name on
  * @param {String} event
  * @param {Function} fn
  * @example
  * emitter.on('example', function () {})
  * emitter.on('demo', function () {})
  */
  emitter.on = function on (event, fn) {
    if (!_fns[event]) {
      _fns[event] = []
    }

    _fns[event].push(fn)
  }

  /**
  * Create en event listener that fires once.
  * @name once
  * @param {String} event
  * @param {Function} fn
  * @example
  * emitter.once('example', function () {})
  * emitter.once('demo', function () {})
  */
  emitter.once = function once (event, fn) {
    function one () {
      fn.apply(this, arguments)
      emitter.off(event, one)
    }
    this.on(event, one)
  }

  /**
  * Stop listening to an event. Stop all listeners on an event by only passing the event name. Stop a single listener by passing that event handler as a callback.
  * You must be explicit about what will be unsubscribed: `emitter.off('demo')` will unsubscribe an `emitter.on('demo')` listener,
  * `emitter.off('demo:example')` will unsubscribe an `emitter.on('demo:example')` listener
  * @name off
  * @param {String} event
  * @param {Function} [fn] – the specific handler
  * @example
  * emitter.off('example')
  * emitter.off('demo', function () {})
  */
  emitter.off = function off (event, fn) {
    var keep = []

    if (event && fn) {
      var fns = this._fns[event]
      var i = 0
      var l = fns ? fns.length : 0

      for (i; i < l; i++) {
        if (fns[i] !== fn) {
          keep.push(fns[i])
        }
      }
    }

    keep.length ? this._fns[event] = keep : delete this._fns[event]
  }

  function getListeners (e) {
    var out = _fns[e] ? _fns[e] : []
    var idx = e.indexOf(':')
    var args = (idx === -1) ? [e] : [e.substring(0, idx), e.substring(idx + 1)]

    var keys = Object.keys(_fns)
    var i = 0
    var l = keys.length

    for (i; i < l; i++) {
      var key = keys[i]
      if (key === '*') {
        out = out.concat(_fns[key])
      }

      if (args.length === 2 && args[0] === key) {
        out = out.concat(_fns[key])
        break
      }
    }

    return out
  }

  function emitAll (e, fns, args) {
    var i = 0
    var l = fns.length

    for (i; i < l; i++) {
      if (!fns[i]) break
      fns[i].event = e
      fns[i].apply(fns[i], args)
    }
  }

  return emitter
}

},{}],11:[function(require,module,exports){
!function() {
    'use strict';
    function VNode() {}
    function h(nodeName, attributes) {
        var lastSimple, child, simple, i, children = EMPTY_CHILDREN;
        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);
        if (attributes && null != attributes.children) {
            if (!stack.length) stack.push(attributes.children);
            delete attributes.children;
        }
        while (stack.length) if ((child = stack.pop()) && void 0 !== child.pop) for (i = child.length; i--; ) stack.push(child[i]); else {
            if ('boolean' == typeof child) child = null;
            if (simple = 'function' != typeof nodeName) if (null == child) child = ''; else if ('number' == typeof child) child = String(child); else if ('string' != typeof child) simple = !1;
            if (simple && lastSimple) children[children.length - 1] += child; else if (children === EMPTY_CHILDREN) children = [ child ]; else children.push(child);
            lastSimple = simple;
        }
        var p = new VNode();
        p.nodeName = nodeName;
        p.children = children;
        p.attributes = null == attributes ? void 0 : attributes;
        p.key = null == attributes ? void 0 : attributes.key;
        if (void 0 !== options.vnode) options.vnode(p);
        return p;
    }
    function extend(obj, props) {
        for (var i in props) obj[i] = props[i];
        return obj;
    }
    function cloneElement(vnode, props) {
        return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);
    }
    function enqueueRender(component) {
        if (!component.__d && (component.__d = !0) && 1 == items.push(component)) (options.debounceRendering || defer)(rerender);
    }
    function rerender() {
        var p, list = items;
        items = [];
        while (p = list.pop()) if (p.__d) renderComponent(p);
    }
    function isSameNodeType(node, vnode, hydrating) {
        if ('string' == typeof vnode || 'number' == typeof vnode) return void 0 !== node.splitText;
        if ('string' == typeof vnode.nodeName) return !node._componentConstructor && isNamedNode(node, vnode.nodeName); else return hydrating || node._componentConstructor === vnode.nodeName;
    }
    function isNamedNode(node, nodeName) {
        return node.__n === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();
    }
    function getNodeProps(vnode) {
        var props = extend({}, vnode.attributes);
        props.children = vnode.children;
        var defaultProps = vnode.nodeName.defaultProps;
        if (void 0 !== defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];
        return props;
    }
    function createNode(nodeName, isSvg) {
        var node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);
        node.__n = nodeName;
        return node;
    }
    function removeNode(node) {
        var parentNode = node.parentNode;
        if (parentNode) parentNode.removeChild(node);
    }
    function setAccessor(node, name, old, value, isSvg) {
        if ('className' === name) name = 'class';
        if ('key' === name) ; else if ('ref' === name) {
            if (old) old(null);
            if (value) value(node);
        } else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {
            if (!value || 'string' == typeof value || 'string' == typeof old) node.style.cssText = value || '';
            if (value && 'object' == typeof value) {
                if ('string' != typeof old) for (var i in old) if (!(i in value)) node.style[i] = '';
                for (var i in value) node.style[i] = 'number' == typeof value[i] && !1 === IS_NON_DIMENSIONAL.test(i) ? value[i] + 'px' : value[i];
            }
        } else if ('dangerouslySetInnerHTML' === name) {
            if (value) node.innerHTML = value.__html || '';
        } else if ('o' == name[0] && 'n' == name[1]) {
            var useCapture = name !== (name = name.replace(/Capture$/, ''));
            name = name.toLowerCase().substring(2);
            if (value) {
                if (!old) node.addEventListener(name, eventProxy, useCapture);
            } else node.removeEventListener(name, eventProxy, useCapture);
            (node.__l || (node.__l = {}))[name] = value;
        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {
            setProperty(node, name, null == value ? '' : value);
            if (null == value || !1 === value) node.removeAttribute(name);
        } else {
            var ns = isSvg && name !== (name = name.replace(/^xlink:?/, ''));
            if (null == value || !1 === value) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase()); else node.removeAttribute(name); else if ('function' != typeof value) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value); else node.setAttribute(name, value);
        }
    }
    function setProperty(node, name, value) {
        try {
            node[name] = value;
        } catch (e) {}
    }
    function eventProxy(e) {
        return this.__l[e.type](options.event && options.event(e) || e);
    }
    function flushMounts() {
        var c;
        while (c = mounts.pop()) {
            if (options.afterMount) options.afterMount(c);
            if (c.componentDidMount) c.componentDidMount();
        }
    }
    function diff(dom, vnode, context, mountAll, parent, componentRoot) {
        if (!diffLevel++) {
            isSvgMode = null != parent && void 0 !== parent.ownerSVGElement;
            hydrating = null != dom && !('__preactattr_' in dom);
        }
        var ret = idiff(dom, vnode, context, mountAll, componentRoot);
        if (parent && ret.parentNode !== parent) parent.appendChild(ret);
        if (!--diffLevel) {
            hydrating = !1;
            if (!componentRoot) flushMounts();
        }
        return ret;
    }
    function idiff(dom, vnode, context, mountAll, componentRoot) {
        var out = dom, prevSvgMode = isSvgMode;
        if (null == vnode || 'boolean' == typeof vnode) vnode = '';
        if ('string' == typeof vnode || 'number' == typeof vnode) {
            if (dom && void 0 !== dom.splitText && dom.parentNode && (!dom._component || componentRoot)) {
                if (dom.nodeValue != vnode) dom.nodeValue = vnode;
            } else {
                out = document.createTextNode(vnode);
                if (dom) {
                    if (dom.parentNode) dom.parentNode.replaceChild(out, dom);
                    recollectNodeTree(dom, !0);
                }
            }
            out.__preactattr_ = !0;
            return out;
        }
        var vnodeName = vnode.nodeName;
        if ('function' == typeof vnodeName) return buildComponentFromVNode(dom, vnode, context, mountAll);
        isSvgMode = 'svg' === vnodeName ? !0 : 'foreignObject' === vnodeName ? !1 : isSvgMode;
        vnodeName = String(vnodeName);
        if (!dom || !isNamedNode(dom, vnodeName)) {
            out = createNode(vnodeName, isSvgMode);
            if (dom) {
                while (dom.firstChild) out.appendChild(dom.firstChild);
                if (dom.parentNode) dom.parentNode.replaceChild(out, dom);
                recollectNodeTree(dom, !0);
            }
        }
        var fc = out.firstChild, props = out.__preactattr_, vchildren = vnode.children;
        if (null == props) {
            props = out.__preactattr_ = {};
            for (var a = out.attributes, i = a.length; i--; ) props[a[i].name] = a[i].value;
        }
        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && null != fc && void 0 !== fc.splitText && null == fc.nextSibling) {
            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];
        } else if (vchildren && vchildren.length || null != fc) innerDiffNode(out, vchildren, context, mountAll, hydrating || null != props.dangerouslySetInnerHTML);
        diffAttributes(out, vnode.attributes, props);
        isSvgMode = prevSvgMode;
        return out;
    }
    function innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {
        var j, c, f, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren ? vchildren.length : 0;
        if (0 !== len) for (var i = 0; i < len; i++) {
            var _child = originalChildren[i], props = _child.__preactattr_, key = vlen && props ? _child._component ? _child._component.__k : props.key : null;
            if (null != key) {
                keyedLen++;
                keyed[key] = _child;
            } else if (props || (void 0 !== _child.splitText ? isHydrating ? _child.nodeValue.trim() : !0 : isHydrating)) children[childrenLen++] = _child;
        }
        if (0 !== vlen) for (var i = 0; i < vlen; i++) {
            vchild = vchildren[i];
            child = null;
            var key = vchild.key;
            if (null != key) {
                if (keyedLen && void 0 !== keyed[key]) {
                    child = keyed[key];
                    keyed[key] = void 0;
                    keyedLen--;
                }
            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) if (void 0 !== children[j] && isSameNodeType(c = children[j], vchild, isHydrating)) {
                child = c;
                children[j] = void 0;
                if (j === childrenLen - 1) childrenLen--;
                if (j === min) min++;
                break;
            }
            child = idiff(child, vchild, context, mountAll);
            f = originalChildren[i];
            if (child && child !== dom && child !== f) if (null == f) dom.appendChild(child); else if (child === f.nextSibling) removeNode(f); else dom.insertBefore(child, f);
        }
        if (keyedLen) for (var i in keyed) if (void 0 !== keyed[i]) recollectNodeTree(keyed[i], !1);
        while (min <= childrenLen) if (void 0 !== (child = children[childrenLen--])) recollectNodeTree(child, !1);
    }
    function recollectNodeTree(node, unmountOnly) {
        var component = node._component;
        if (component) unmountComponent(component); else {
            if (null != node.__preactattr_ && node.__preactattr_.ref) node.__preactattr_.ref(null);
            if (!1 === unmountOnly || null == node.__preactattr_) removeNode(node);
            removeChildren(node);
        }
    }
    function removeChildren(node) {
        node = node.lastChild;
        while (node) {
            var next = node.previousSibling;
            recollectNodeTree(node, !0);
            node = next;
        }
    }
    function diffAttributes(dom, attrs, old) {
        var name;
        for (name in old) if ((!attrs || null == attrs[name]) && null != old[name]) setAccessor(dom, name, old[name], old[name] = void 0, isSvgMode);
        for (name in attrs) if (!('children' === name || 'innerHTML' === name || name in old && attrs[name] === ('value' === name || 'checked' === name ? dom[name] : old[name]))) setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);
    }
    function collectComponent(component) {
        var name = component.constructor.name;
        (components[name] || (components[name] = [])).push(component);
    }
    function createComponent(Ctor, props, context) {
        var inst, list = components[Ctor.name];
        if (Ctor.prototype && Ctor.prototype.render) {
            inst = new Ctor(props, context);
            Component.call(inst, props, context);
        } else {
            inst = new Component(props, context);
            inst.constructor = Ctor;
            inst.render = doRender;
        }
        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {
            inst.__b = list[i].__b;
            list.splice(i, 1);
            break;
        }
        return inst;
    }
    function doRender(props, state, context) {
        return this.constructor(props, context);
    }
    function setComponentProps(component, props, opts, context, mountAll) {
        if (!component.__x) {
            component.__x = !0;
            if (component.__r = props.ref) delete props.ref;
            if (component.__k = props.key) delete props.key;
            if (!component.base || mountAll) {
                if (component.componentWillMount) component.componentWillMount();
            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);
            if (context && context !== component.context) {
                if (!component.__c) component.__c = component.context;
                component.context = context;
            }
            if (!component.__p) component.__p = component.props;
            component.props = props;
            component.__x = !1;
            if (0 !== opts) if (1 === opts || !1 !== options.syncComponentUpdates || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);
            if (component.__r) component.__r(component);
        }
    }
    function renderComponent(component, opts, mountAll, isChild) {
        if (!component.__x) {
            var rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.__p || props, previousState = component.__s || state, previousContext = component.__c || context, isUpdate = component.base, nextBase = component.__b, initialBase = isUpdate || nextBase, initialChildComponent = component._component, skip = !1;
            if (isUpdate) {
                component.props = previousProps;
                component.state = previousState;
                component.context = previousContext;
                if (2 !== opts && component.shouldComponentUpdate && !1 === component.shouldComponentUpdate(props, state, context)) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);
                component.props = props;
                component.state = state;
                component.context = context;
            }
            component.__p = component.__s = component.__c = component.__b = null;
            component.__d = !1;
            if (!skip) {
                rendered = component.render(props, state, context);
                if (component.getChildContext) context = extend(extend({}, context), component.getChildContext());
                var toUnmount, base, childComponent = rendered && rendered.nodeName;
                if ('function' == typeof childComponent) {
                    var childProps = getNodeProps(rendered);
                    inst = initialChildComponent;
                    if (inst && inst.constructor === childComponent && childProps.key == inst.__k) setComponentProps(inst, childProps, 1, context, !1); else {
                        toUnmount = inst;
                        component._component = inst = createComponent(childComponent, childProps, context);
                        inst.__b = inst.__b || nextBase;
                        inst.__u = component;
                        setComponentProps(inst, childProps, 0, context, !1);
                        renderComponent(inst, 1, mountAll, !0);
                    }
                    base = inst.base;
                } else {
                    cbase = initialBase;
                    toUnmount = initialChildComponent;
                    if (toUnmount) cbase = component._component = null;
                    if (initialBase || 1 === opts) {
                        if (cbase) cbase._component = null;
                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);
                    }
                }
                if (initialBase && base !== initialBase && inst !== initialChildComponent) {
                    var baseParent = initialBase.parentNode;
                    if (baseParent && base !== baseParent) {
                        baseParent.replaceChild(base, initialBase);
                        if (!toUnmount) {
                            initialBase._component = null;
                            recollectNodeTree(initialBase, !1);
                        }
                    }
                }
                if (toUnmount) unmountComponent(toUnmount);
                component.base = base;
                if (base && !isChild) {
                    var componentRef = component, t = component;
                    while (t = t.__u) (componentRef = t).base = base;
                    base._component = componentRef;
                    base._componentConstructor = componentRef.constructor;
                }
            }
            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {
                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);
                if (options.afterUpdate) options.afterUpdate(component);
            }
            if (null != component.__h) while (component.__h.length) component.__h.pop().call(component);
            if (!diffLevel && !isChild) flushMounts();
        }
    }
    function buildComponentFromVNode(dom, vnode, context, mountAll) {
        var c = dom && dom._component, originalComponent = c, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);
        while (c && !isOwner && (c = c.__u)) isOwner = c.constructor === vnode.nodeName;
        if (c && isOwner && (!mountAll || c._component)) {
            setComponentProps(c, props, 3, context, mountAll);
            dom = c.base;
        } else {
            if (originalComponent && !isDirectOwner) {
                unmountComponent(originalComponent);
                dom = oldDom = null;
            }
            c = createComponent(vnode.nodeName, props, context);
            if (dom && !c.__b) {
                c.__b = dom;
                oldDom = null;
            }
            setComponentProps(c, props, 1, context, mountAll);
            dom = c.base;
            if (oldDom && dom !== oldDom) {
                oldDom._component = null;
                recollectNodeTree(oldDom, !1);
            }
        }
        return dom;
    }
    function unmountComponent(component) {
        if (options.beforeUnmount) options.beforeUnmount(component);
        var base = component.base;
        component.__x = !0;
        if (component.componentWillUnmount) component.componentWillUnmount();
        component.base = null;
        var inner = component._component;
        if (inner) unmountComponent(inner); else if (base) {
            if (base.__preactattr_ && base.__preactattr_.ref) base.__preactattr_.ref(null);
            component.__b = base;
            removeNode(base);
            collectComponent(component);
            removeChildren(base);
        }
        if (component.__r) component.__r(null);
    }
    function Component(props, context) {
        this.__d = !0;
        this.context = context;
        this.props = props;
        this.state = this.state || {};
    }
    function render(vnode, parent, merge) {
        return diff(merge, vnode, {}, !1, parent, !1);
    }
    var options = {};
    var stack = [];
    var EMPTY_CHILDREN = [];
    var defer = 'function' == typeof Promise ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;
    var IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;
    var items = [];
    var mounts = [];
    var diffLevel = 0;
    var isSvgMode = !1;
    var hydrating = !1;
    var components = {};
    extend(Component.prototype, {
        setState: function(state, callback) {
            var s = this.state;
            if (!this.__s) this.__s = extend({}, s);
            extend(s, 'function' == typeof state ? state(s, this.props) : state);
            if (callback) (this.__h = this.__h || []).push(callback);
            enqueueRender(this);
        },
        forceUpdate: function(callback) {
            if (callback) (this.__h = this.__h || []).push(callback);
            renderComponent(this, 2);
        },
        render: function() {}
    });
    var preact = {
        h: h,
        createElement: h,
        cloneElement: cloneElement,
        Component: Component,
        render: render,
        rerender: rerender,
        options: options
    };
    if ('undefined' != typeof module) module.exports = preact; else self.preact = preact;
}();

},{}],12:[function(require,module,exports){
module.exports = prettierBytes

function prettierBytes (num) {
  if (typeof num !== 'number' || isNaN(num)) {
    throw new TypeError('Expected a number, got ' + typeof num)
  }

  var neg = num < 0
  var units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']

  if (neg) {
    num = -num
  }

  if (num < 1) {
    return (neg ? '-' : '') + num + ' B'
  }

  var exponent = Math.min(Math.floor(Math.log(num) / Math.log(1000)), units.length - 1)
  num = Number(num / Math.pow(1000, exponent))
  var unit = units[exponent]

  if (num >= 10 || num % 1 === 0) {
    // Do not show decimals when the number is two-digit, or if the number has no
    // decimal component.
    return (neg ? '-' : '') + num.toFixed(0) + ' ' + unit
  } else {
    return (neg ? '-' : '') + num.toFixed(1) + ' ' + unit
  }
}

},{}],13:[function(require,module,exports){
// Copyright 2014 Simon Lydell
// X11 (“MIT”) Licensed. (See LICENSE.)

void (function(root, factory) {
  if (typeof define === "function" && define.amd) {
    define(factory)
  } else if (typeof exports === "object") {
    module.exports = factory()
  } else {
    root.resolveUrl = factory()
  }
}(this, function() {

  function resolveUrl(/* ...urls */) {
    var numUrls = arguments.length

    if (numUrls === 0) {
      throw new Error("resolveUrl requires at least one argument; got none.")
    }

    var base = document.createElement("base")
    base.href = arguments[0]

    if (numUrls === 1) {
      return base.href
    }

    var head = document.getElementsByTagName("head")[0]
    head.insertBefore(base, head.firstChild)

    var a = document.createElement("a")
    var resolved

    for (var index = 1; index < numUrls; index++) {
      a.href = arguments[index]
      resolved = a.href
      base.href = resolved
    }

    head.removeChild(base)

    return resolved
  }

  return resolveUrl

}));

},{}],14:[function(require,module,exports){
(function (process){
module.exports = runParallel

function runParallel (tasks, cb) {
  var results, pending, keys
  var isSync = true

  if (Array.isArray(tasks)) {
    results = []
    pending = tasks.length
  } else {
    keys = Object.keys(tasks)
    results = {}
    pending = keys.length
  }

  function done (err) {
    function end () {
      if (cb) cb(err, results)
      cb = null
    }
    if (isSync) process.nextTick(end)
    else end()
  }

  function each (i, err, result) {
    results[i] = result
    if (--pending === 0 || err) {
      done(err)
    }
  }

  if (!pending) {
    // empty
    done(null)
  } else if (keys) {
    // object
    keys.forEach(function (key) {
      tasks[key](function (err, result) { each(key, err, result) })
    })
  } else {
    // array
    tasks.forEach(function (task, i) {
      task(function (err, result) { each(i, err, result) })
    })
  }

  isSync = false
}

}).call(this,require('_process'))

},{"_process":96}],15:[function(require,module,exports){
// Generated by Babel
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.encode = encode;
/* global: window */

var _window = window;
var btoa = _window.btoa;
function encode(data) {
  return btoa(unescape(encodeURIComponent(data)));
}

var isSupported = exports.isSupported = "btoa" in window;
},{}],16:[function(require,module,exports){
// Generated by Babel
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.newRequest = newRequest;
exports.resolveUrl = resolveUrl;

var _resolveUrl = require("resolve-url");

var _resolveUrl2 = _interopRequireDefault(_resolveUrl);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function newRequest() {
  return new window.XMLHttpRequest();
} /* global window */


function resolveUrl(origin, link) {
  return (0, _resolveUrl2.default)(origin, link);
}
},{"resolve-url":13}],17:[function(require,module,exports){
// Generated by Babel
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getSource = getSource;

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var FileSource = function () {
  function FileSource(file) {
    _classCallCheck(this, FileSource);

    this._file = file;
    this.size = file.size;
  }

  _createClass(FileSource, [{
    key: "slice",
    value: function slice(start, end) {
      return this._file.slice(start, end);
    }
  }, {
    key: "close",
    value: function close() {}
  }]);

  return FileSource;
}();

function getSource(input) {
  // Since we emulate the Blob type in our tests (not all target browsers
  // support it), we cannot use `instanceof` for testing whether the input value
  // can be handled. Instead, we simply check is the slice() function and the
  // size property are available.
  if (typeof input.slice === "function" && typeof input.size !== "undefined") {
    return new FileSource(input);
  }

  throw new Error("source object may only be an instance of File or Blob in this environment");
}
},{}],18:[function(require,module,exports){
// Generated by Babel
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setItem = setItem;
exports.getItem = getItem;
exports.removeItem = removeItem;
/* global window, localStorage */

var hasStorage = false;
try {
  hasStorage = "localStorage" in window;

  // Attempt to store and read entries from the local storage to detect Private
  // Mode on Safari on iOS (see #49)
  var key = "tusSupport";
  localStorage.setItem(key, localStorage.getItem(key));
} catch (e) {
  // If we try to access localStorage inside a sandboxed iframe, a SecurityError
  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is
  // thrown (see #49)
  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {
    hasStorage = false;
  } else {
    throw e;
  }
}

var canStoreURLs = exports.canStoreURLs = hasStorage;

function setItem(key, value) {
  if (!hasStorage) return;
  return localStorage.setItem(key, value);
}

function getItem(key) {
  if (!hasStorage) return;
  return localStorage.getItem(key);
}

function removeItem(key) {
  if (!hasStorage) return;
  return localStorage.removeItem(key);
}
},{}],19:[function(require,module,exports){
// Generated by Babel
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var DetailedError = function (_Error) {
  _inherits(DetailedError, _Error);

  function DetailedError(error) {
    var causingErr = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];
    var xhr = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];

    _classCallCheck(this, DetailedError);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(DetailedError).call(this, error.message));

    _this.originalRequest = xhr;
    _this.causingError = causingErr;

    var message = error.message;
    if (causingErr != null) {
      message += ", caused by " + causingErr.toString();
    }
    if (xhr != null) {
      message += ", originated from request (response code: " + xhr.status + ", response text: " + xhr.responseText + ")";
    }
    _this.message = message;
    return _this;
  }

  return DetailedError;
}(Error);

exports.default = DetailedError;
},{}],20:[function(require,module,exports){
// Generated by Babel
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = fingerprint;
/**
 * Generate a fingerprint for a file which will be used the store the endpoint
 *
 * @param {File} file
 * @return {String}
 */
function fingerprint(file, options) {
  return ["tus", file.name, file.type, file.size, file.lastModified, options.endpoint].join("-");
}
},{}],21:[function(require,module,exports){
// Generated by Babel
"use strict";

var _upload = require("./upload");

var _upload2 = _interopRequireDefault(_upload);

var _storage = require("./node/storage");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* global window */
var defaultOptions = _upload2.default.defaultOptions;


if (typeof window !== "undefined") {
  // Browser environment using XMLHttpRequest
  var _window = window;
  var XMLHttpRequest = _window.XMLHttpRequest;
  var Blob = _window.Blob;


  var isSupported = XMLHttpRequest && Blob && typeof Blob.prototype.slice === "function";
} else {
  // Node.js environment using http module
  var isSupported = true;
}

// The usage of the commonjs exporting syntax instead of the new ECMAScript
// one is actually inteded and prevents weird behaviour if we are trying to
// import this module in another module using Babel.
module.exports = {
  Upload: _upload2.default,
  isSupported: isSupported,
  canStoreURLs: _storage.canStoreURLs,
  defaultOptions: defaultOptions
};
},{"./node/storage":18,"./upload":22}],22:[function(require,module,exports){
// Generated by Babel
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global window */


// We import the files used inside the Node environment which are rewritten
// for browsers using the rules defined in the package.json


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _fingerprint = require("./fingerprint");

var _fingerprint2 = _interopRequireDefault(_fingerprint);

var _error = require("./error");

var _error2 = _interopRequireDefault(_error);

var _extend = require("extend");

var _extend2 = _interopRequireDefault(_extend);

var _request = require("./node/request");

var _source = require("./node/source");

var _base = require("./node/base64");

var Base64 = _interopRequireWildcard(_base);

var _storage = require("./node/storage");

var Storage = _interopRequireWildcard(_storage);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var defaultOptions = {
  endpoint: null,
  fingerprint: _fingerprint2.default,
  resume: true,
  onProgress: null,
  onChunkComplete: null,
  onSuccess: null,
  onError: null,
  headers: {},
  chunkSize: Infinity,
  withCredentials: false,
  uploadUrl: null,
  uploadSize: null,
  overridePatchMethod: false,
  retryDelays: null,
  removeFingerprintOnSuccess: false
};

var Upload = function () {
  function Upload(file, options) {
    _classCallCheck(this, Upload);

    this.options = (0, _extend2.default)(true, {}, defaultOptions, options);

    // The underlying File/Blob object
    this.file = file;

    // The URL against which the file will be uploaded
    this.url = null;

    // The underlying XHR object for the current PATCH request
    this._xhr = null;

    // The fingerpinrt for the current file (set after start())
    this._fingerprint = null;

    // The offset used in the current PATCH request
    this._offset = null;

    // True if the current PATCH request has been aborted
    this._aborted = false;

    // The file's size in bytes
    this._size = null;

    // The Source object which will wrap around the given file and provides us
    // with a unified interface for getting its size and slice chunks from its
    // content allowing us to easily handle Files, Blobs, Buffers and Streams.
    this._source = null;

    // The current count of attempts which have been made. Null indicates none.
    this._retryAttempt = 0;

    // The timeout's ID which is used to delay the next retry
    this._retryTimeout = null;

    // The offset of the remote upload before the latest attempt was started.
    this._offsetBeforeRetry = 0;
  }

  _createClass(Upload, [{
    key: "start",
    value: function start() {
      var _this = this;

      var file = this.file;

      if (!file) {
        this._emitError(new Error("tus: no file or stream to upload provided"));
        return;
      }

      if (!this.options.endpoint && !this.options.uploadUrl) {
        this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));
        return;
      }

      var source = this._source = (0, _source.getSource)(file, this.options.chunkSize);

      // Firstly, check if the caller has supplied a manual upload size or else
      // we will use the calculated size by the source object.
      if (this.options.uploadSize != null) {
        var size = +this.options.uploadSize;
        if (isNaN(size)) {
          throw new Error("tus: cannot convert `uploadSize` option into a number");
        }

        this._size = size;
      } else {
        var size = source.size;

        // The size property will be null if we cannot calculate the file's size,
        // for example if you handle a stream.
        if (size == null) {
          throw new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option");
        }

        this._size = size;
      }

      var retryDelays = this.options.retryDelays;
      if (retryDelays != null) {
        if (Object.prototype.toString.call(retryDelays) !== "[object Array]") {
          throw new Error("tus: the `retryDelays` option must either be an array or null");
        } else {
          (function () {
            var errorCallback = _this.options.onError;
            _this.options.onError = function (err) {
              // Restore the original error callback which may have been set.
              _this.options.onError = errorCallback;

              // We will reset the attempt counter if
              // - we were already able to connect to the server (offset != null) and
              // - we were able to upload a small chunk of data to the server
              var shouldResetDelays = _this._offset != null && _this._offset > _this._offsetBeforeRetry;
              if (shouldResetDelays) {
                _this._retryAttempt = 0;
              }

              var isOnline = true;
              if (typeof window !== "undefined" && "navigator" in window && window.navigator.onLine === false) {
                isOnline = false;
              }

              // We only attempt a retry if
              // - we didn't exceed the maxium number of retries, yet, and
              // - this error was caused by a request or it's response and
              // - the error is not a client error (status 4xx) and
              // - the browser does not indicate that we are offline
              var shouldRetry = _this._retryAttempt < retryDelays.length && err.originalRequest != null && !inStatusCategory(err.originalRequest.status, 400) && isOnline;

              if (!shouldRetry) {
                _this._emitError(err);
                return;
              }

              var delay = retryDelays[_this._retryAttempt++];

              _this._offsetBeforeRetry = _this._offset;
              _this.options.uploadUrl = _this.url;

              _this._retryTimeout = setTimeout(function () {
                _this.start();
              }, delay);
            };
          })();
        }
      }

      // Reset the aborted flag when the upload is started or else the
      // _startUpload will stop before sending a request if the upload has been
      // aborted previously.
      this._aborted = false;

      // The upload had been started previously and we should reuse this URL.
      if (this.url != null) {
        this._resumeUpload();
        return;
      }

      // A URL has manually been specified, so we try to resume
      if (this.options.uploadUrl != null) {
        this.url = this.options.uploadUrl;
        this._resumeUpload();
        return;
      }

      // Try to find the endpoint for the file in the storage
      if (this.options.resume) {
        this._fingerprint = this.options.fingerprint(file, this.options);
        var resumedUrl = Storage.getItem(this._fingerprint);

        if (resumedUrl != null) {
          this.url = resumedUrl;
          this._resumeUpload();
          return;
        }
      }

      // An upload has not started for the file yet, so we start a new one
      this._createUpload();
    }
  }, {
    key: "abort",
    value: function abort() {
      if (this._xhr !== null) {
        this._xhr.abort();
        this._source.close();
        this._aborted = true;
      }

      if (this._retryTimeout != null) {
        clearTimeout(this._retryTimeout);
        this._retryTimeout = null;
      }
    }
  }, {
    key: "_emitXhrError",
    value: function _emitXhrError(xhr, err, causingErr) {
      this._emitError(new _error2.default(err, causingErr, xhr));
    }
  }, {
    key: "_emitError",
    value: function _emitError(err) {
      if (typeof this.options.onError === "function") {
        this.options.onError(err);
      } else {
        throw err;
      }
    }
  }, {
    key: "_emitSuccess",
    value: function _emitSuccess() {
      if (typeof this.options.onSuccess === "function") {
        this.options.onSuccess();
      }
    }

    /**
     * Publishes notification when data has been sent to the server. This
     * data may not have been accepted by the server yet.
     * @param  {number} bytesSent  Number of bytes sent to the server.
     * @param  {number} bytesTotal Total number of bytes to be sent to the server.
     */

  }, {
    key: "_emitProgress",
    value: function _emitProgress(bytesSent, bytesTotal) {
      if (typeof this.options.onProgress === "function") {
        this.options.onProgress(bytesSent, bytesTotal);
      }
    }

    /**
     * Publishes notification when a chunk of data has been sent to the server
     * and accepted by the server.
     * @param  {number} chunkSize  Size of the chunk that was accepted by the
     *                             server.
     * @param  {number} bytesAccepted Total number of bytes that have been
     *                                accepted by the server.
     * @param  {number} bytesTotal Total number of bytes to be sent to the server.
     */

  }, {
    key: "_emitChunkComplete",
    value: function _emitChunkComplete(chunkSize, bytesAccepted, bytesTotal) {
      if (typeof this.options.onChunkComplete === "function") {
        this.options.onChunkComplete(chunkSize, bytesAccepted, bytesTotal);
      }
    }

    /**
     * Set the headers used in the request and the withCredentials property
     * as defined in the options
     *
     * @param {XMLHttpRequest} xhr
     */

  }, {
    key: "_setupXHR",
    value: function _setupXHR(xhr) {
      this._xhr = xhr;

      xhr.setRequestHeader("Tus-Resumable", "1.0.0");
      var headers = this.options.headers;

      for (var name in headers) {
        xhr.setRequestHeader(name, headers[name]);
      }

      xhr.withCredentials = this.options.withCredentials;
    }

    /**
     * Create a new upload using the creation extension by sending a POST
     * request to the endpoint. After successful creation the file will be
     * uploaded
     *
     * @api private
     */

  }, {
    key: "_createUpload",
    value: function _createUpload() {
      var _this2 = this;

      if (!this.options.endpoint) {
        this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));
        return;
      }

      var xhr = (0, _request.newRequest)();
      xhr.open("POST", this.options.endpoint, true);

      xhr.onload = function () {
        if (!inStatusCategory(xhr.status, 200)) {
          _this2._emitXhrError(xhr, new Error("tus: unexpected response while creating upload"));
          return;
        }

        var location = xhr.getResponseHeader("Location");
        if (location == null) {
          _this2._emitXhrError(xhr, new Error("tus: invalid or missing Location header"));
          return;
        }

        _this2.url = (0, _request.resolveUrl)(_this2.options.endpoint, location);

        if (_this2._size === 0) {
          // Nothing to upload and file was successfully created
          _this2._emitSuccess();
          _this2._source.close();
          return;
        }

        if (_this2.options.resume) {
          Storage.setItem(_this2._fingerprint, _this2.url);
        }

        _this2._offset = 0;
        _this2._startUpload();
      };

      xhr.onerror = function (err) {
        _this2._emitXhrError(xhr, new Error("tus: failed to create upload"), err);
      };

      this._setupXHR(xhr);
      xhr.setRequestHeader("Upload-Length", this._size);

      // Add metadata if values have been added
      var metadata = encodeMetadata(this.options.metadata);
      if (metadata !== "") {
        xhr.setRequestHeader("Upload-Metadata", metadata);
      }

      xhr.send(null);
    }

    /*
     * Try to resume an existing upload. First a HEAD request will be sent
     * to retrieve the offset. If the request fails a new upload will be
     * created. In the case of a successful response the file will be uploaded.
     *
     * @api private
     */

  }, {
    key: "_resumeUpload",
    value: function _resumeUpload() {
      var _this3 = this;

      var xhr = (0, _request.newRequest)();
      xhr.open("HEAD", this.url, true);

      xhr.onload = function () {
        if (!inStatusCategory(xhr.status, 200)) {
          if (_this3.options.resume && inStatusCategory(xhr.status, 400)) {
            // Remove stored fingerprint and corresponding endpoint,
            // on client errors since the file can not be found
            Storage.removeItem(_this3._fingerprint);
          }

          // If the upload is locked (indicated by the 423 Locked status code), we
          // emit an error instead of directly starting a new upload. This way the
          // retry logic can catch the error and will retry the upload. An upload
          // is usually locked for a short period of time and will be available
          // afterwards.
          if (xhr.status === 423) {
            _this3._emitXhrError(xhr, new Error("tus: upload is currently locked; retry later"));
            return;
          }

          if (!_this3.options.endpoint) {
            // Don't attempt to create a new upload if no endpoint is provided.
            _this3._emitXhrError(xhr, new Error("tus: unable to resume upload (new upload cannot be created without an endpoint)"));
            return;
          }

          // Try to create a new upload
          _this3.url = null;
          _this3._createUpload();
          return;
        }

        var offset = parseInt(xhr.getResponseHeader("Upload-Offset"), 10);
        if (isNaN(offset)) {
          _this3._emitXhrError(xhr, new Error("tus: invalid or missing offset value"));
          return;
        }

        var length = parseInt(xhr.getResponseHeader("Upload-Length"), 10);
        if (isNaN(length)) {
          _this3._emitXhrError(xhr, new Error("tus: invalid or missing length value"));
          return;
        }

        // Upload has already been completed and we do not need to send additional
        // data to the server
        if (offset === length) {
          _this3._emitProgress(length, length);
          _this3._emitSuccess();
          return;
        }

        _this3._offset = offset;
        _this3._startUpload();
      };

      xhr.onerror = function (err) {
        _this3._emitXhrError(xhr, new Error("tus: failed to resume upload"), err);
      };

      this._setupXHR(xhr);
      xhr.send(null);
    }

    /**
     * Start uploading the file using PATCH requests. The file will be divided
     * into chunks as specified in the chunkSize option. During the upload
     * the onProgress event handler may be invoked multiple times.
     *
     * @api private
     */

  }, {
    key: "_startUpload",
    value: function _startUpload() {
      var _this4 = this;

      // If the upload has been aborted, we will not send the next PATCH request.
      // This is important if the abort method was called during a callback, such
      // as onChunkComplete or onProgress.
      if (this._aborted) {
        return;
      }

      var xhr = (0, _request.newRequest)();

      // Some browser and servers may not support the PATCH method. For those
      // cases, you can tell tus-js-client to use a POST request with the
      // X-HTTP-Method-Override header for simulating a PATCH request.
      if (this.options.overridePatchMethod) {
        xhr.open("POST", this.url, true);
        xhr.setRequestHeader("X-HTTP-Method-Override", "PATCH");
      } else {
        xhr.open("PATCH", this.url, true);
      }

      xhr.onload = function () {
        if (!inStatusCategory(xhr.status, 200)) {
          _this4._emitXhrError(xhr, new Error("tus: unexpected response while uploading chunk"));
          return;
        }

        var offset = parseInt(xhr.getResponseHeader("Upload-Offset"), 10);
        if (isNaN(offset)) {
          _this4._emitXhrError(xhr, new Error("tus: invalid or missing offset value"));
          return;
        }

        _this4._emitProgress(offset, _this4._size);
        _this4._emitChunkComplete(offset - _this4._offset, offset, _this4._size);

        _this4._offset = offset;

        if (offset == _this4._size) {
          if (_this4.options.removeFingerprintOnSuccess && _this4.options.resume) {
            // Remove stored fingerprint and corresponding endpoint. This causes
            // new upload of the same file must be treated as a different file.
            Storage.removeItem(_this4._fingerprint);
          }

          // Yay, finally done :)
          _this4._emitSuccess();
          _this4._source.close();
          return;
        }

        _this4._startUpload();
      };

      xhr.onerror = function (err) {
        // Don't emit an error if the upload was aborted manually
        if (_this4._aborted) {
          return;
        }

        _this4._emitXhrError(xhr, new Error("tus: failed to upload chunk at offset " + _this4._offset), err);
      };

      // Test support for progress events before attaching an event listener
      if ("upload" in xhr) {
        xhr.upload.onprogress = function (e) {
          if (!e.lengthComputable) {
            return;
          }

          _this4._emitProgress(start + e.loaded, _this4._size);
        };
      }

      this._setupXHR(xhr);

      xhr.setRequestHeader("Upload-Offset", this._offset);
      xhr.setRequestHeader("Content-Type", "application/offset+octet-stream");

      var start = this._offset;
      var end = this._offset + this.options.chunkSize;

      // The specified chunkSize may be Infinity or the calcluated end position
      // may exceed the file's size. In both cases, we limit the end position to
      // the input's total size for simpler calculations and correctness.
      if (end === Infinity || end > this._size) {
        end = this._size;
      }

      xhr.send(this._source.slice(start, end));

      // Emit an progress event when a new chunk begins being uploaded.
      this._emitProgress(this._offset, this._size);
    }
  }]);

  return Upload;
}();

function encodeMetadata(metadata) {
  if (!Base64.isSupported) {
    return "";
  }

  var encoded = [];

  for (var key in metadata) {
    encoded.push(key + " " + Base64.encode(metadata[key]));
  }

  return encoded.join(",");
}

/**
 * Checks whether a given status is in the range of the expected category.
 * For example, only a status between 200 and 299 will satisfy the category 200.
 *
 * @api private
 */
function inStatusCategory(status, category) {
  return status >= category && status < category + 100;
}

Upload.defaultOptions = defaultOptions;

exports.default = Upload;
},{"./error":19,"./fingerprint":20,"./node/base64":15,"./node/request":16,"./node/source":17,"./node/storage":18,"extend":6}],23:[function(require,module,exports){
/* jshint node: true */
'use strict';

/**
  # wildcard

  Very simple wildcard matching, which is designed to provide the same
  functionality that is found in the
  [eve](https://github.com/adobe-webplatform/eve) eventing library.

  ## Usage

  It works with strings:

  <<< examples/strings.js

  Arrays:

  <<< examples/arrays.js

  Objects (matching against keys):

  <<< examples/objects.js

  While the library works in Node, if you are are looking for file-based
  wildcard matching then you should have a look at:

  <https://github.com/isaacs/node-glob>
**/

function WildcardMatcher(text, separator) {
  this.text = text = text || '';
  this.hasWild = ~text.indexOf('*');
  this.separator = separator;
  this.parts = text.split(separator);
}

WildcardMatcher.prototype.match = function(input) {
  var matches = true;
  var parts = this.parts;
  var ii;
  var partsCount = parts.length;
  var testParts;

  if (typeof input == 'string' || input instanceof String) {
    if (!this.hasWild && this.text != input) {
      matches = false;
    } else {
      testParts = (input || '').split(this.separator);
      for (ii = 0; matches && ii < partsCount; ii++) {
        if (parts[ii] === '*')  {
          continue;
        } else if (ii < testParts.length) {
          matches = parts[ii] === testParts[ii];
        } else {
          matches = false;
        }
      }

      // If matches, then return the component parts
      matches = matches && testParts;
    }
  }
  else if (typeof input.splice == 'function') {
    matches = [];

    for (ii = input.length; ii--; ) {
      if (this.match(input[ii])) {
        matches[matches.length] = input[ii];
      }
    }
  }
  else if (typeof input == 'object') {
    matches = {};

    for (var key in input) {
      if (this.match(key)) {
        matches[key] = input[key];
      }
    }
  }

  return matches;
};

module.exports = function(text, test, separator) {
  var matcher = new WildcardMatcher(text, separator || /[\/\.]/);
  if (typeof test != 'undefined') {
    return matcher.match(test);
  }

  return matcher;
};

},{}],24:[function(require,module,exports){
var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

var preact = require('preact');
var findDOMElement = require('./../../utils/lib/findDOMElement');

/**
 * Defer a frequent call to the microtask queue.
 */
function debounce(fn) {
  var calling = null;
  var latestArgs = null;
  return function () {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    latestArgs = args;
    if (!calling) {
      calling = Promise.resolve().then(function () {
        calling = null;
        // At this point `args` may be different from the most
        // recent state, if multiple calls happened since this task
        // was queued. So we use the `latestArgs`, which definitely
        // is the most recent call.
        return fn.apply(undefined, latestArgs);
      });
    }
    return calling;
  };
}

/**
 * Boilerplate that all Plugins share - and should not be used
 * directly. It also shows which methods final plugins should implement/override,
 * this deciding on structure.
 *
 * @param {object} main Uppy core object
 * @param {object} object with plugin options
 * @return {array | string} files or success/fail message
 */
module.exports = function () {
  function Plugin(uppy, opts) {
    _classCallCheck(this, Plugin);

    this.uppy = uppy;
    this.opts = opts || {};

    this.update = this.update.bind(this);
    this.mount = this.mount.bind(this);
    this.install = this.install.bind(this);
    this.uninstall = this.uninstall.bind(this);
  }

  Plugin.prototype.getPluginState = function getPluginState() {
    var _uppy$getState = this.uppy.getState(),
        plugins = _uppy$getState.plugins;

    return plugins[this.id];
  };

  Plugin.prototype.setPluginState = function setPluginState(update) {
    var plugins = _extends({}, this.uppy.getState().plugins);
    plugins[this.id] = _extends({}, plugins[this.id], update);

    this.uppy.setState({
      plugins: plugins
    });
  };

  Plugin.prototype.update = function update(state) {
    if (typeof this.el === 'undefined') {
      return;
    }

    if (this._updateUI) {
      this._updateUI(state);
    }
  };

  /**
   * Check if supplied `target` is a DOM element or an `object`.
   * If it’s an object — target is a plugin, and we search `plugins`
   * for a plugin with same name and return its target.
   *
   * @param {String|Object} target
   *
   */

  Plugin.prototype.mount = function mount(target, plugin) {
    var _this = this;

    var callerPluginName = plugin.id;

    var targetElement = findDOMElement(target);

    if (targetElement) {
      this.isTargetDOMEl = true;

      // API for plugins that require a synchronous rerender.
      this.rerender = function (state) {
        // plugin could be removed, but this.rerender is debounced below,
        // so it could still be called even after uppy.removePlugin or uppy.close
        // hence the check
        if (!_this.uppy.getPlugin(_this.id)) return;
        _this.el = preact.render(_this.render(state), targetElement, _this.el);
      };
      this._updateUI = debounce(this.rerender);

      this.uppy.log('Installing ' + callerPluginName + ' to a DOM element');

      // clear everything inside the target container
      if (this.opts.replaceTargetContent) {
        targetElement.innerHTML = '';
      }

      this.el = preact.render(this.render(this.uppy.getState()), targetElement);

      return this.el;
    }

    var targetPlugin = void 0;
    if ((typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target instanceof Plugin) {
      // Targeting a plugin *instance*
      targetPlugin = target;
    } else if (typeof target === 'function') {
      // Targeting a plugin type
      var Target = target;
      // Find the target plugin instance.
      this.uppy.iteratePlugins(function (plugin) {
        if (plugin instanceof Target) {
          targetPlugin = plugin;
          return false;
        }
      });
    }

    if (targetPlugin) {
      var targetPluginName = targetPlugin.id;
      this.uppy.log('Installing ' + callerPluginName + ' to ' + targetPluginName);
      this.el = targetPlugin.addTarget(plugin);
      return this.el;
    }

    this.uppy.log('Not installing ' + callerPluginName);
    throw new Error('Invalid target option given to ' + callerPluginName);
  };

  Plugin.prototype.render = function render(state) {
    throw new Error('Extend the render method to add your plugin to a DOM element');
  };

  Plugin.prototype.addTarget = function addTarget(plugin) {
    throw new Error('Extend the addTarget method to add your plugin to another plugin\'s target');
  };

  Plugin.prototype.unmount = function unmount() {
    if (this.isTargetDOMEl && this.el && this.el.parentNode) {
      this.el.parentNode.removeChild(this.el);
    }
  };

  Plugin.prototype.install = function install() {};

  Plugin.prototype.uninstall = function uninstall() {
    this.unmount();
  };

  return Plugin;
}();

},{"./../../utils/lib/findDOMElement":70,"preact":11}],25:[function(require,module,exports){
var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

var _createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
    }
  }return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
  };
}();

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

var Translator = require('./../../utils/lib/Translator');
var ee = require('namespace-emitter');
var cuid = require('cuid');
// const throttle = require('lodash.throttle')
var prettyBytes = require('prettier-bytes');
var match = require('mime-match');
var DefaultStore = require('./../../store-default');
var getFileType = require('./../../utils/lib/getFileType');
var getFileNameAndExtension = require('./../../utils/lib/getFileNameAndExtension');
var generateFileID = require('./../../utils/lib/generateFileID');
var isObjectURL = require('./../../utils/lib/isObjectURL');
var getTimeStamp = require('./../../utils/lib/getTimeStamp');
var Plugin = require('./Plugin'); // Exported from here.

/**
 * Uppy Core module.
 * Manages plugins, state updates, acts as an event bus,
 * adds/removes files and metadata.
 */

var Uppy = function () {
  /**
  * Instantiate Uppy
  * @param {object} opts — Uppy options
  */
  function Uppy(opts) {
    var _this = this;

    _classCallCheck(this, Uppy);

    var defaultLocale = {
      strings: {
        youCanOnlyUploadX: {
          0: 'You can only upload %{smart_count} file',
          1: 'You can only upload %{smart_count} files'
        },
        youHaveToAtLeastSelectX: {
          0: 'You have to select at least %{smart_count} file',
          1: 'You have to select at least %{smart_count} files'
        },
        exceedsSize: 'This file exceeds maximum allowed size of',
        youCanOnlyUploadFileTypes: 'You can only upload:',
        uppyServerError: 'Connection with Uppy Server failed',
        failedToUpload: 'Failed to upload %{file}',
        noInternetConnection: 'No Internet connection',
        connectedToInternet: 'Connected to the Internet',
        // Strings for remote providers
        noFilesFound: 'You have no files or folders here',
        selectXFiles: {
          0: 'Select %{smart_count} file',
          1: 'Select %{smart_count} files'
        },
        cancel: 'Cancel',
        logOut: 'Log out'

        // set default options
      } };var defaultOptions = {
      id: 'uppy',
      autoProceed: true,
      debug: false,
      restrictions: {
        maxFileSize: null,
        maxNumberOfFiles: null,
        minNumberOfFiles: null,
        allowedFileTypes: null
      },
      meta: {},
      onBeforeFileAdded: function onBeforeFileAdded(currentFile, files) {
        return currentFile;
      },
      onBeforeUpload: function onBeforeUpload(files) {
        return files;
      },
      locale: defaultLocale,
      store: DefaultStore()

      // Merge default options with the ones set by user
    };this.opts = _extends({}, defaultOptions, opts);
    this.opts.restrictions = _extends({}, defaultOptions.restrictions, this.opts.restrictions);

    this.locale = _extends({}, defaultLocale, this.opts.locale);
    this.locale.strings = _extends({}, defaultLocale.strings, this.opts.locale.strings);

    // i18n
    this.translator = new Translator({ locale: this.locale });
    this.i18n = this.translator.translate.bind(this.translator);

    // Container for different types of plugins
    this.plugins = {};

    this.getState = this.getState.bind(this);
    this.getPlugin = this.getPlugin.bind(this);
    this.setFileMeta = this.setFileMeta.bind(this);
    this.setFileState = this.setFileState.bind(this);
    this.log = this.log.bind(this);
    this.info = this.info.bind(this);
    this.hideInfo = this.hideInfo.bind(this);
    this.addFile = this.addFile.bind(this);
    this.removeFile = this.removeFile.bind(this);
    this.pauseResume = this.pauseResume.bind(this);
    this._calculateProgress = this._calculateProgress.bind(this);
    this.updateOnlineStatus = this.updateOnlineStatus.bind(this);
    this.resetProgress = this.resetProgress.bind(this);

    this.pauseAll = this.pauseAll.bind(this);
    this.resumeAll = this.resumeAll.bind(this);
    this.retryAll = this.retryAll.bind(this);
    this.cancelAll = this.cancelAll.bind(this);
    this.retryUpload = this.retryUpload.bind(this);
    this.upload = this.upload.bind(this);

    this.emitter = ee();
    this.on = this.on.bind(this);
    this.off = this.off.bind(this);
    this.once = this.emitter.once.bind(this.emitter);
    this.emit = this.emitter.emit.bind(this.emitter);

    this.preProcessors = [];
    this.uploaders = [];
    this.postProcessors = [];

    this.store = this.opts.store;
    this.setState({
      plugins: {},
      files: {},
      currentUploads: {},
      capabilities: {
        resumableUploads: false
      },
      totalProgress: 0,
      meta: _extends({}, this.opts.meta),
      info: {
        isHidden: true,
        type: 'info',
        message: ''
      }
    });

    this._storeUnsubscribe = this.store.subscribe(function (prevState, nextState, patch) {
      _this.emit('state-update', prevState, nextState, patch);
      _this.updateAll(nextState);
    });

    // for debugging and testing
    // this.updateNum = 0
    if (this.opts.debug && typeof window !== 'undefined') {
      window['uppyLog'] = '';
      window[this.opts.id] = this;
    }

    this._addListeners();
  }

  Uppy.prototype.on = function on(event, callback) {
    this.emitter.on(event, callback);
    return this;
  };

  Uppy.prototype.off = function off(event, callback) {
    this.emitter.off(event, callback);
    return this;
  };

  /**
   * Iterate on all plugins and run `update` on them.
   * Called each time state changes.
   *
   */

  Uppy.prototype.updateAll = function updateAll(state) {
    this.iteratePlugins(function (plugin) {
      plugin.update(state);
    });
  };

  /**
   * Updates state with a patch
   *
   * @param {object} patch {foo: 'bar'}
   */

  Uppy.prototype.setState = function setState(patch) {
    this.store.setState(patch);
  };

  /**
   * Returns current state.
   * @return {object}
   */

  Uppy.prototype.getState = function getState() {
    return this.store.getState();
  };

  /**
  * Back compat for when uppy.state is used instead of uppy.getState().
  */

  /**
  * Shorthand to set state for a specific file.
  */
  Uppy.prototype.setFileState = function setFileState(fileID, state) {
    var _extends2;

    if (!this.getState().files[fileID]) {
      throw new Error("Can\u2019t set state for " + fileID + ' (the file could have been removed)');
    }

    this.setState({
      files: _extends({}, this.getState().files, (_extends2 = {}, _extends2[fileID] = _extends({}, this.getState().files[fileID], state), _extends2))
    });
  };

  Uppy.prototype.resetProgress = function resetProgress() {
    var defaultProgress = {
      percentage: 0,
      bytesUploaded: 0,
      uploadComplete: false,
      uploadStarted: false
    };
    var files = _extends({}, this.getState().files);
    var updatedFiles = {};
    Object.keys(files).forEach(function (fileID) {
      var updatedFile = _extends({}, files[fileID]);
      updatedFile.progress = _extends({}, updatedFile.progress, defaultProgress);
      updatedFiles[fileID] = updatedFile;
    });

    this.setState({
      files: updatedFiles,
      totalProgress: 0
    });

    // TODO Document on the website
    this.emit('reset-progress');
  };

  Uppy.prototype.addPreProcessor = function addPreProcessor(fn) {
    this.preProcessors.push(fn);
  };

  Uppy.prototype.removePreProcessor = function removePreProcessor(fn) {
    var i = this.preProcessors.indexOf(fn);
    if (i !== -1) {
      this.preProcessors.splice(i, 1);
    }
  };

  Uppy.prototype.addPostProcessor = function addPostProcessor(fn) {
    this.postProcessors.push(fn);
  };

  Uppy.prototype.removePostProcessor = function removePostProcessor(fn) {
    var i = this.postProcessors.indexOf(fn);
    if (i !== -1) {
      this.postProcessors.splice(i, 1);
    }
  };

  Uppy.prototype.addUploader = function addUploader(fn) {
    this.uploaders.push(fn);
  };

  Uppy.prototype.removeUploader = function removeUploader(fn) {
    var i = this.uploaders.indexOf(fn);
    if (i !== -1) {
      this.uploaders.splice(i, 1);
    }
  };

  Uppy.prototype.setMeta = function setMeta(data) {
    var updatedMeta = _extends({}, this.getState().meta, data);
    var updatedFiles = _extends({}, this.getState().files);

    Object.keys(updatedFiles).forEach(function (fileID) {
      updatedFiles[fileID] = _extends({}, updatedFiles[fileID], {
        meta: _extends({}, updatedFiles[fileID].meta, data)
      });
    });

    this.log('Adding metadata:');
    this.log(data);

    this.setState({
      meta: updatedMeta,
      files: updatedFiles
    });
  };

  Uppy.prototype.setFileMeta = function setFileMeta(fileID, data) {
    var updatedFiles = _extends({}, this.getState().files);
    if (!updatedFiles[fileID]) {
      this.log('Was trying to set metadata for a file that’s not with us anymore: ', fileID);
      return;
    }
    var newMeta = _extends({}, updatedFiles[fileID].meta, data);
    updatedFiles[fileID] = _extends({}, updatedFiles[fileID], {
      meta: newMeta
    });
    this.setState({ files: updatedFiles });
  };

  /**
   * Get a file object.
   *
   * @param {string} fileID The ID of the file object to return.
   */

  Uppy.prototype.getFile = function getFile(fileID) {
    return this.getState().files[fileID];
  };

  /**
   * Get all files in an array.
   */

  Uppy.prototype.getFiles = function getFiles() {
    var _getState = this.getState(),
        files = _getState.files;

    return Object.keys(files).map(function (fileID) {
      return files[fileID];
    });
  };

  /**
  * Check if minNumberOfFiles restriction is reached before uploading.
  *
  * @private
  */

  Uppy.prototype._checkMinNumberOfFiles = function _checkMinNumberOfFiles(files) {
    var minNumberOfFiles = this.opts.restrictions.minNumberOfFiles;

    if (Object.keys(files).length < minNumberOfFiles) {
      throw new Error('' + this.i18n('youHaveToAtLeastSelectX', { smart_count: minNumberOfFiles }));
    }
  };

  /**
  * Check if file passes a set of restrictions set in options: maxFileSize,
  * maxNumberOfFiles and allowedFileTypes.
  *
  * @param {object} file object to check
  * @private
  */

  Uppy.prototype._checkRestrictions = function _checkRestrictions(file) {
    var _opts$restrictions = this.opts.restrictions,
        maxFileSize = _opts$restrictions.maxFileSize,
        maxNumberOfFiles = _opts$restrictions.maxNumberOfFiles,
        allowedFileTypes = _opts$restrictions.allowedFileTypes;

    if (maxNumberOfFiles) {
      if (Object.keys(this.getState().files).length + 1 > maxNumberOfFiles) {
        throw new Error('' + this.i18n('youCanOnlyUploadX', { smart_count: maxNumberOfFiles }));
      }
    }

    if (allowedFileTypes) {
      var isCorrectFileType = allowedFileTypes.filter(function (type) {
        // if (!file.type) return false

        // is this is a mime-type
        if (type.indexOf('/') > -1) {
          if (!file.type) return false;
          return match(file.type, type);
        }

        // otherwise this is likely an extension
        if (type[0] === '.') {
          if (file.extension === type.substr(1)) {
            return file.extension;
          }
        }
      }).length > 0;

      if (!isCorrectFileType) {
        var allowedFileTypesString = allowedFileTypes.join(', ');
        throw new Error(this.i18n('youCanOnlyUploadFileTypes') + ' ' + allowedFileTypesString);
      }
    }

    if (maxFileSize) {
      if (file.data.size > maxFileSize) {
        throw new Error(this.i18n('exceedsSize') + ' ' + prettyBytes(maxFileSize));
      }
    }
  };

  /**
  * Add a new file to `state.files`. This will run `onBeforeFileAdded`,
  * try to guess file type in a clever way, check file against restrictions,
  * and start an upload if `autoProceed === true`.
  *
  * @param {object} file object to add
  */

  Uppy.prototype.addFile = function addFile(file) {
    var _this2 = this,
        _extends3;

    var _getState2 = this.getState(),
        files = _getState2.files;

    var onError = function onError(msg) {
      var err = (typeof msg === 'undefined' ? 'undefined' : _typeof(msg)) === 'object' ? msg : new Error(msg);
      _this2.log(err.message);
      _this2.info(err.message, 'error', 5000);
      throw err;
    };

    var onBeforeFileAddedResult = this.opts.onBeforeFileAdded(file, files);

    if (onBeforeFileAddedResult === false) {
      this.log('Not adding file because onBeforeFileAdded returned false');
      return;
    }

    if ((typeof onBeforeFileAddedResult === 'undefined' ? 'undefined' : _typeof(onBeforeFileAddedResult)) === 'object' && onBeforeFileAddedResult) {
      // warning after the change in 0.24
      if (onBeforeFileAddedResult.then) {
        throw new TypeError('onBeforeFileAdded() returned a Promise, but this is no longer supported. It must be synchronous.');
      }
      file = onBeforeFileAddedResult;
    }

    var fileType = getFileType(file);
    var fileName = void 0;
    if (file.name) {
      fileName = file.name;
    } else if (fileType.split('/')[0] === 'image') {
      fileName = fileType.split('/')[0] + '.' + fileType.split('/')[1];
    } else {
      fileName = 'noname';
    }
    var fileExtension = getFileNameAndExtension(fileName).extension;
    var isRemote = file.isRemote || false;

    var fileID = generateFileID(file);

    var meta = file.meta || {};
    meta.name = fileName;
    meta.type = fileType;

    var newFile = {
      source: file.source || '',
      id: fileID,
      name: fileName,
      extension: fileExtension || '',
      meta: _extends({}, this.getState().meta, meta),
      type: fileType,
      data: file.data,
      progress: {
        percentage: 0,
        bytesUploaded: 0,
        bytesTotal: file.data.size || 0,
        uploadComplete: false,
        uploadStarted: false
      },
      size: file.data.size || 0,
      isRemote: isRemote,
      remote: file.remote || '',
      preview: file.preview
    };

    try {
      this._checkRestrictions(newFile);
    } catch (err) {
      onError(err);
    }

    this.setState({
      files: _extends({}, files, (_extends3 = {}, _extends3[fileID] = newFile, _extends3))
    });

    this.emit('file-added', newFile);
    this.log('Added file: ' + fileName + ', ' + fileID + ', mime type: ' + fileType);

    if (this.opts.autoProceed && !this.scheduledAutoProceed) {
      this.scheduledAutoProceed = setTimeout(function () {
        _this2.scheduledAutoProceed = null;
        _this2.upload().catch(function (err) {
          console.error(err.stack || err.message || err);
        });
      }, 4);
    }
  };

  Uppy.prototype.removeFile = function removeFile(fileID) {
    var _this3 = this;

    var _getState3 = this.getState(),
        files = _getState3.files,
        currentUploads = _getState3.currentUploads;

    var updatedFiles = _extends({}, files);
    var removedFile = updatedFiles[fileID];
    delete updatedFiles[fileID];

    // Remove this file from its `currentUpload`.
    var updatedUploads = _extends({}, currentUploads);
    var removeUploads = [];
    Object.keys(updatedUploads).forEach(function (uploadID) {
      var newFileIDs = currentUploads[uploadID].fileIDs.filter(function (uploadFileID) {
        return uploadFileID !== fileID;
      });
      // Remove the upload if no files are associated with it anymore.
      if (newFileIDs.length === 0) {
        removeUploads.push(uploadID);
        return;
      }

      updatedUploads[uploadID] = _extends({}, currentUploads[uploadID], {
        fileIDs: newFileIDs
      });
    });

    this.setState({
      currentUploads: updatedUploads,
      files: updatedFiles
    });

    removeUploads.forEach(function (uploadID) {
      _this3._removeUpload(uploadID);
    });

    this._calculateTotalProgress();
    this.emit('file-removed', removedFile);
    this.log('File removed: ' + removedFile.id);

    // Clean up object URLs.
    if (removedFile.preview && isObjectURL(removedFile.preview)) {
      URL.revokeObjectURL(removedFile.preview);
    }

    this.log('Removed file: ' + fileID);
  };

  Uppy.prototype.pauseResume = function pauseResume(fileID) {
    if (this.getFile(fileID).uploadComplete) return;

    var wasPaused = this.getFile(fileID).isPaused || false;
    var isPaused = !wasPaused;

    this.setFileState(fileID, {
      isPaused: isPaused
    });

    this.emit('upload-pause', fileID, isPaused);

    return isPaused;
  };

  Uppy.prototype.pauseAll = function pauseAll() {
    var updatedFiles = _extends({}, this.getState().files);
    var inProgressUpdatedFiles = Object.keys(updatedFiles).filter(function (file) {
      return !updatedFiles[file].progress.uploadComplete && updatedFiles[file].progress.uploadStarted;
    });

    inProgressUpdatedFiles.forEach(function (file) {
      var updatedFile = _extends({}, updatedFiles[file], {
        isPaused: true
      });
      updatedFiles[file] = updatedFile;
    });
    this.setState({ files: updatedFiles });

    this.emit('pause-all');
  };

  Uppy.prototype.resumeAll = function resumeAll() {
    var updatedFiles = _extends({}, this.getState().files);
    var inProgressUpdatedFiles = Object.keys(updatedFiles).filter(function (file) {
      return !updatedFiles[file].progress.uploadComplete && updatedFiles[file].progress.uploadStarted;
    });

    inProgressUpdatedFiles.forEach(function (file) {
      var updatedFile = _extends({}, updatedFiles[file], {
        isPaused: false,
        error: null
      });
      updatedFiles[file] = updatedFile;
    });
    this.setState({ files: updatedFiles });

    this.emit('resume-all');
  };

  Uppy.prototype.retryAll = function retryAll() {
    var updatedFiles = _extends({}, this.getState().files);
    var filesToRetry = Object.keys(updatedFiles).filter(function (file) {
      return updatedFiles[file].error;
    });

    filesToRetry.forEach(function (file) {
      var updatedFile = _extends({}, updatedFiles[file], {
        isPaused: false,
        error: null
      });
      updatedFiles[file] = updatedFile;
    });
    this.setState({
      files: updatedFiles,
      error: null
    });

    this.emit('retry-all', filesToRetry);

    var uploadID = this._createUpload(filesToRetry);
    return this._runUpload(uploadID);
  };

  Uppy.prototype.cancelAll = function cancelAll() {
    var _this4 = this;

    this.emit('cancel-all');

    // TODO Or should we just call removeFile on all files?

    var _getState4 = this.getState(),
        currentUploads = _getState4.currentUploads;

    var uploadIDs = Object.keys(currentUploads);

    uploadIDs.forEach(function (id) {
      _this4._removeUpload(id);
    });

    this.setState({
      files: {},
      totalProgress: 0,
      error: null
    });
  };

  Uppy.prototype.retryUpload = function retryUpload(fileID) {
    var updatedFiles = _extends({}, this.getState().files);
    var updatedFile = _extends({}, updatedFiles[fileID], { error: null, isPaused: false });
    updatedFiles[fileID] = updatedFile;
    this.setState({
      files: updatedFiles
    });

    this.emit('upload-retry', fileID);

    var uploadID = this._createUpload([fileID]);
    return this._runUpload(uploadID);
  };

  Uppy.prototype.reset = function reset() {
    this.cancelAll();
  };

  Uppy.prototype._calculateProgress = function _calculateProgress(file, data) {
    if (!this.getFile(file.id)) {
      this.log('Not setting progress for a file that has been removed: ' + file.id);
      return;
    }

    this.setFileState(file.id, {
      progress: _extends({}, this.getFile(file.id).progress, {
        bytesUploaded: data.bytesUploaded,
        bytesTotal: data.bytesTotal,
        percentage: Math.floor((data.bytesUploaded / data.bytesTotal * 100).toFixed(2))
      })
    });

    this._calculateTotalProgress();
  };

  Uppy.prototype._calculateTotalProgress = function _calculateTotalProgress() {
    // calculate total progress, using the number of files currently uploading,
    // multiplied by 100 and the summ of individual progress of each file
    var files = _extends({}, this.getState().files);

    var inProgress = Object.keys(files).filter(function (file) {
      return files[file].progress.uploadStarted;
    });
    var progressMax = inProgress.length * 100;
    var progressAll = 0;
    inProgress.forEach(function (file) {
      progressAll = progressAll + files[file].progress.percentage;
    });

    var totalProgress = progressMax === 0 ? 0 : Math.floor((progressAll * 100 / progressMax).toFixed(2));

    this.setState({
      totalProgress: totalProgress
    });
  };

  /**
   * Registers listeners for all global actions, like:
   * `error`, `file-removed`, `upload-progress`
   */

  Uppy.prototype._addListeners = function _addListeners() {
    var _this5 = this;

    this.on('error', function (error) {
      _this5.setState({ error: error.message });
    });

    this.on('upload-error', function (file, error) {
      _this5.setFileState(file.id, { error: error.message });
      _this5.setState({ error: error.message });

      var message = _this5.i18n('failedToUpload', { file: file.name });
      if ((typeof error === 'undefined' ? 'undefined' : _typeof(error)) === 'object' && error.message) {
        message = { message: message, details: error.message };
      }
      _this5.info(message, 'error', 5000);
    });

    this.on('upload', function () {
      _this5.setState({ error: null });
    });

    this.on('upload-started', function (file, upload) {
      if (!_this5.getFile(file.id)) {
        _this5.log('Not setting progress for a file that has been removed: ' + file.id);
        return;
      }
      _this5.setFileState(file.id, {
        progress: {
          uploadStarted: Date.now(),
          uploadComplete: false,
          percentage: 0,
          bytesUploaded: 0,
          bytesTotal: file.size
        }
      });
    });

    // upload progress events can occur frequently, especially when you have a good
    // connection to the remote server. Therefore, we are throtteling them to
    // prevent accessive function calls.
    // see also: https://github.com/tus/tus-js-client/commit/9940f27b2361fd7e10ba58b09b60d82422183bbb
    // const _throttledCalculateProgress = throttle(this._calculateProgress, 100, { leading: true, trailing: true })

    this.on('upload-progress', this._calculateProgress);

    this.on('upload-success', function (file, uploadResp, uploadURL) {
      var currentProgress = _this5.getFile(file.id).progress;
      _this5.setFileState(file.id, {
        progress: _extends({}, currentProgress, {
          uploadComplete: true,
          percentage: 100,
          bytesUploaded: currentProgress.bytesTotal
        }),
        uploadURL: uploadURL,
        isPaused: false
      });

      _this5._calculateTotalProgress();
    });

    this.on('preprocess-progress', function (file, progress) {
      if (!_this5.getFile(file.id)) {
        _this5.log('Not setting progress for a file that has been removed: ' + file.id);
        return;
      }
      _this5.setFileState(file.id, {
        progress: _extends({}, _this5.getFile(file.id).progress, {
          preprocess: progress
        })
      });
    });

    this.on('preprocess-complete', function (file) {
      if (!_this5.getFile(file.id)) {
        _this5.log('Not setting progress for a file that has been removed: ' + file.id);
        return;
      }
      var files = _extends({}, _this5.getState().files);
      files[file.id] = _extends({}, files[file.id], {
        progress: _extends({}, files[file.id].progress)
      });
      delete files[file.id].progress.preprocess;

      _this5.setState({ files: files });
    });

    this.on('postprocess-progress', function (file, progress) {
      if (!_this5.getFile(file.id)) {
        _this5.log('Not setting progress for a file that has been removed: ' + file.id);
        return;
      }
      _this5.setFileState(file.id, {
        progress: _extends({}, _this5.getState().files[file.id].progress, {
          postprocess: progress
        })
      });
    });

    this.on('postprocess-complete', function (file) {
      if (!_this5.getFile(file.id)) {
        _this5.log('Not setting progress for a file that has been removed: ' + file.id);
        return;
      }
      var files = _extends({}, _this5.getState().files);
      files[file.id] = _extends({}, files[file.id], {
        progress: _extends({}, files[file.id].progress)
      });
      delete files[file.id].progress.postprocess;
      // TODO should we set some kind of `fullyComplete` property on the file object
      // so it's easier to see that the file is upload…fully complete…rather than
      // what we have to do now (`uploadComplete && !postprocess`)

      _this5.setState({ files: files });
    });

    this.on('restored', function () {
      // Files may have changed--ensure progress is still accurate.
      _this5._calculateTotalProgress();
    });

    // show informer if offline
    if (typeof window !== 'undefined') {
      window.addEventListener('online', function () {
        return _this5.updateOnlineStatus();
      });
      window.addEventListener('offline', function () {
        return _this5.updateOnlineStatus();
      });
      setTimeout(function () {
        return _this5.updateOnlineStatus();
      }, 3000);
    }
  };

  Uppy.prototype.updateOnlineStatus = function updateOnlineStatus() {
    var online = typeof window.navigator.onLine !== 'undefined' ? window.navigator.onLine : true;
    if (!online) {
      this.emit('is-offline');
      this.info(this.i18n('noInternetConnection'), 'error', 0);
      this.wasOffline = true;
    } else {
      this.emit('is-online');
      if (this.wasOffline) {
        this.emit('back-online');
        this.info(this.i18n('connectedToInternet'), 'success', 3000);
        this.wasOffline = false;
      }
    }
  };

  Uppy.prototype.getID = function getID() {
    return this.opts.id;
  };

  /**
   * Registers a plugin with Core.
   *
   * @param {object} Plugin object
   * @param {object} [opts] object with options to be passed to Plugin
   * @return {Object} self for chaining
   */

  Uppy.prototype.use = function use(Plugin, opts) {
    if (typeof Plugin !== 'function') {
      var msg = 'Expected a plugin class, but got ' + (Plugin === null ? 'null' : typeof Plugin === 'undefined' ? 'undefined' : _typeof(Plugin)) + '.' + ' Please verify that the plugin was imported and spelled correctly.';
      throw new TypeError(msg);
    }

    // Instantiate
    var plugin = new Plugin(this, opts);
    var pluginId = plugin.id;
    this.plugins[plugin.type] = this.plugins[plugin.type] || [];

    if (!pluginId) {
      throw new Error('Your plugin must have an id');
    }

    if (!plugin.type) {
      throw new Error('Your plugin must have a type');
    }

    var existsPluginAlready = this.getPlugin(pluginId);
    if (existsPluginAlready) {
      var _msg = 'Already found a plugin named \'' + existsPluginAlready.id + '\'. ' + ('Tried to use: \'' + pluginId + '\'.\n') + 'Uppy plugins must have unique \'id\' options. See https://uppy.io/docs/plugins/#id.';
      throw new Error(_msg);
    }

    this.plugins[plugin.type].push(plugin);
    plugin.install();

    return this;
  };

  /**
   * Find one Plugin by name.
   *
   * @param {string} name description
   * @return {object | boolean}
   */

  Uppy.prototype.getPlugin = function getPlugin(name) {
    var foundPlugin = null;
    this.iteratePlugins(function (plugin) {
      var pluginName = plugin.id;
      if (pluginName === name) {
        foundPlugin = plugin;
        return false;
      }
    });
    return foundPlugin;
  };

  /**
   * Iterate through all `use`d plugins.
   *
   * @param {function} method that will be run on each plugin
   */

  Uppy.prototype.iteratePlugins = function iteratePlugins(method) {
    var _this6 = this;

    Object.keys(this.plugins).forEach(function (pluginType) {
      _this6.plugins[pluginType].forEach(method);
    });
  };

  /**
   * Uninstall and remove a plugin.
   *
   * @param {object} instance The plugin instance to remove.
   */

  Uppy.prototype.removePlugin = function removePlugin(instance) {
    this.log('Removing plugin ' + instance.id);
    this.emit('plugin-remove', instance);

    if (instance.uninstall) {
      instance.uninstall();
    }

    var list = this.plugins[instance.type].slice();
    var index = list.indexOf(instance);
    if (index !== -1) {
      list.splice(index, 1);
      this.plugins[instance.type] = list;
    }

    var updatedState = this.getState();
    delete updatedState.plugins[instance.id];
    this.setState(updatedState);
  };

  /**
   * Uninstall all plugins and close down this Uppy instance.
   */

  Uppy.prototype.close = function close() {
    var _this7 = this;

    this.log('Closing Uppy instance ' + this.opts.id + ': removing all files and uninstalling plugins');

    this.reset();

    this._storeUnsubscribe();

    this.iteratePlugins(function (plugin) {
      _this7.removePlugin(plugin);
    });
  };

  /**
  * Set info message in `state.info`, so that UI plugins like `Informer`
  * can display the message.
  *
  * @param {string | object} message Message to be displayed by the informer
  * @param {string} [type]
  * @param {number} [duration]
  */

  Uppy.prototype.info = function info(message) {
    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'info';
    var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 3000;

    var isComplexMessage = (typeof message === 'undefined' ? 'undefined' : _typeof(message)) === 'object';

    this.setState({
      info: {
        isHidden: false,
        type: type,
        message: isComplexMessage ? message.message : message,
        details: isComplexMessage ? message.details : null
      }
    });

    this.emit('info-visible');

    clearTimeout(this.infoTimeoutID);
    if (duration === 0) {
      this.infoTimeoutID = undefined;
      return;
    }

    // hide the informer after `duration` milliseconds
    this.infoTimeoutID = setTimeout(this.hideInfo, duration);
  };

  Uppy.prototype.hideInfo = function hideInfo() {
    var newInfo = _extends({}, this.getState().info, {
      isHidden: true
    });
    this.setState({
      info: newInfo
    });
    this.emit('info-hidden');
  };

  /**
   * Logs stuff to console, only if `debug` is set to true. Silent in production.
   *
   * @param {String|Object} msg to log
   * @param {String} [type] optional `error` or `warning`
   */

  Uppy.prototype.log = function log(msg, type) {
    if (!this.opts.debug) {
      return;
    }

    var message = '[Uppy] [' + getTimeStamp() + '] ' + msg;

    window['uppyLog'] = window['uppyLog'] + '\n' + 'DEBUG LOG: ' + msg;

    if (type === 'error') {
      console.error(message);
      return;
    }

    if (type === 'warning') {
      console.warn(message);
      return;
    }

    if (msg === '' + msg) {
      console.log(message);
    } else {
      message = '[Uppy] [' + getTimeStamp() + ']';
      console.log(message);
      console.dir(msg);
    }
  };

  /**
   * Obsolete, event listeners are now added in the constructor.
   */

  Uppy.prototype.run = function run() {
    this.log('Calling run() is no longer necessary.', 'warning');
    return this;
  };

  /**
   * Restore an upload by its ID.
   */

  Uppy.prototype.restore = function restore(uploadID) {
    this.log('Core: attempting to restore upload "' + uploadID + '"');

    if (!this.getState().currentUploads[uploadID]) {
      this._removeUpload(uploadID);
      return Promise.reject(new Error('Nonexistent upload'));
    }

    return this._runUpload(uploadID);
  };

  /**
   * Create an upload for a bunch of files.
   *
   * @param {Array<string>} fileIDs File IDs to include in this upload.
   * @return {string} ID of this upload.
   */

  Uppy.prototype._createUpload = function _createUpload(fileIDs) {
    var _extends4;

    var uploadID = cuid();

    this.emit('upload', {
      id: uploadID,
      fileIDs: fileIDs
    });

    this.setState({
      currentUploads: _extends({}, this.getState().currentUploads, (_extends4 = {}, _extends4[uploadID] = {
        fileIDs: fileIDs,
        step: 0,
        result: {}
      }, _extends4))
    });

    return uploadID;
  };

  Uppy.prototype._getUpload = function _getUpload(uploadID) {
    return this.getState().currentUploads[uploadID];
  };

  /**
   * Add data to an upload's result object.
   *
   * @param {string} uploadID The ID of the upload.
   * @param {object} data Data properties to add to the result object.
   */

  Uppy.prototype.addResultData = function addResultData(uploadID, data) {
    var _extends5;

    if (!this._getUpload(uploadID)) {
      this.log('Not setting result for an upload that has been removed: ' + uploadID);
      return;
    }
    var currentUploads = this.getState().currentUploads;
    var currentUpload = _extends({}, currentUploads[uploadID], {
      result: _extends({}, currentUploads[uploadID].result, data)
    });
    this.setState({
      currentUploads: _extends({}, currentUploads, (_extends5 = {}, _extends5[uploadID] = currentUpload, _extends5))
    });
  };

  /**
   * Remove an upload, eg. if it has been canceled or completed.
   *
   * @param {string} uploadID The ID of the upload.
   */

  Uppy.prototype._removeUpload = function _removeUpload(uploadID) {
    var currentUploads = _extends({}, this.getState().currentUploads);
    delete currentUploads[uploadID];

    this.setState({
      currentUploads: currentUploads
    });
  };

  /**
   * Run an upload. This picks up where it left off in case the upload is being restored.
   *
   * @private
   */

  Uppy.prototype._runUpload = function _runUpload(uploadID) {
    var _this8 = this;

    var uploadData = this.getState().currentUploads[uploadID];
    var fileIDs = uploadData.fileIDs;
    var restoreStep = uploadData.step;

    var steps = [].concat(this.preProcessors, this.uploaders, this.postProcessors);
    var lastStep = Promise.resolve();
    steps.forEach(function (fn, step) {
      // Skip this step if we are restoring and have already completed this step before.
      if (step < restoreStep) {
        return;
      }

      lastStep = lastStep.then(function () {
        var _extends6;

        var _getState5 = _this8.getState(),
            currentUploads = _getState5.currentUploads;

        var currentUpload = _extends({}, currentUploads[uploadID], {
          step: step
        });
        _this8.setState({
          currentUploads: _extends({}, currentUploads, (_extends6 = {}, _extends6[uploadID] = currentUpload, _extends6))
        });
        // TODO give this the `currentUpload` object as its only parameter maybe?
        // Otherwise when more metadata may be added to the upload this would keep getting more parameters
        return fn(fileIDs, uploadID);
      }).then(function (result) {
        return null;
      });
    });

    // Not returning the `catch`ed promise, because we still want to return a rejected
    // promise from this method if the upload failed.
    lastStep.catch(function (err) {
      _this8.emit('error', err, uploadID);

      _this8._removeUpload(uploadID);
    });

    return lastStep.then(function () {
      var files = fileIDs.map(function (fileID) {
        return _this8.getFile(fileID);
      });
      var successful = files.filter(function (file) {
        return file && !file.error;
      });
      var failed = files.filter(function (file) {
        return file && file.error;
      });
      _this8.addResultData(uploadID, { successful: successful, failed: failed, uploadID: uploadID });

      var _getState6 = _this8.getState(),
          currentUploads = _getState6.currentUploads;

      if (!currentUploads[uploadID]) {
        _this8.log('Not setting result for an upload that has been removed: ' + uploadID);
        return;
      }

      var result = currentUploads[uploadID].result;
      _this8.emit('complete', result);

      _this8._removeUpload(uploadID);

      return result;
    });
  };

  /**
   * Start an upload for all the files that are not currently being uploaded.
   *
   * @return {Promise}
   */

  Uppy.prototype.upload = function upload() {
    var _this9 = this;

    if (!this.plugins.uploader) {
      this.log('No uploader type plugins are used', 'warning');
    }

    var files = this.getState().files;
    var onBeforeUploadResult = this.opts.onBeforeUpload(files);

    if (onBeforeUploadResult === false) {
      return Promise.reject(new Error('Not starting the upload because onBeforeUpload returned false'));
    }

    if (onBeforeUploadResult && (typeof onBeforeUploadResult === 'undefined' ? 'undefined' : _typeof(onBeforeUploadResult)) === 'object') {
      // warning after the change in 0.24
      if (onBeforeUploadResult.then) {
        throw new TypeError('onBeforeUpload() returned a Promise, but this is no longer supported. It must be synchronous.');
      }

      files = onBeforeUploadResult;
    }

    return Promise.resolve().then(function () {
      return _this9._checkMinNumberOfFiles(files);
    }).then(function () {
      var _getState7 = _this9.getState(),
          currentUploads = _getState7.currentUploads;
      // get a list of files that are currently assigned to uploads


      var currentlyUploadingFiles = Object.keys(currentUploads).reduce(function (prev, curr) {
        return prev.concat(currentUploads[curr].fileIDs);
      }, []);

      var waitingFileIDs = [];
      Object.keys(files).forEach(function (fileID) {
        var file = _this9.getFile(fileID);
        // if the file hasn't started uploading and hasn't already been assigned to an upload..
        if (!file.progress.uploadStarted && currentlyUploadingFiles.indexOf(fileID) === -1) {
          waitingFileIDs.push(file.id);
        }
      });

      var uploadID = _this9._createUpload(waitingFileIDs);
      return _this9._runUpload(uploadID);
    }).catch(function (err) {
      var message = (typeof err === 'undefined' ? 'undefined' : _typeof(err)) === 'object' ? err.message : err;
      var details = (typeof err === 'undefined' ? 'undefined' : _typeof(err)) === 'object' ? err.details : null;
      _this9.log(message + ' ' + details);
      _this9.info({ message: message, details: details }, 'error', 4000);
      return Promise.reject((typeof err === 'undefined' ? 'undefined' : _typeof(err)) === 'object' ? err : new Error(err));
    });
  };

  _createClass(Uppy, [{
    key: 'state',
    get: function get() {
      return this.getState();
    }
  }]);

  return Uppy;
}();

module.exports = function (opts) {
  return new Uppy(opts);
};

// Expose class constructor.
module.exports.Uppy = Uppy;
module.exports.Plugin = Plugin;

},{"./../../store-default":60,"./../../utils/lib/Translator":65,"./../../utils/lib/generateFileID":71,"./../../utils/lib/getFileNameAndExtension":73,"./../../utils/lib/getFileType":74,"./../../utils/lib/getTimeStamp":78,"./../../utils/lib/isObjectURL":80,"./Plugin":24,"cuid":2,"mime-match":9,"namespace-emitter":10,"prettier-bytes":12}],26:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('preact'),
    h = _require.h,
    Component = _require.Component;

var ActionBrowseTagline = function (_Component) {
  _inherits(ActionBrowseTagline, _Component);

  function ActionBrowseTagline(props) {
    _classCallCheck(this, ActionBrowseTagline);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.handleClick = _this.handleClick.bind(_this);
    return _this;
  }

  ActionBrowseTagline.prototype.handleClick = function handleClick(ev) {
    this.input.click();
  };

  ActionBrowseTagline.prototype.render = function render() {
    var _this2 = this;

    var browse = h("button", { type: "button", "class": "uppy-Dashboard-browse", onclick: this.handleClick }, this.props.i18n('browse'));

    // empty value="" on file input, so that the input is cleared after a file is selected,
    // because Uppy will be handling the upload and so we can select same file
    // after removing — otherwise browser thinks it’s already selected
    return h("span", null, this.props.acquirers.length === 0 ? this.props.i18nArray('dropPaste', { browse: browse }) : this.props.i18nArray('dropPasteImport', { browse: browse }), h("input", { "class": "uppy-Dashboard-input",
      hidden: true,
      "aria-hidden": "true",
      tabindex: -1,
      type: "file",
      name: "files[]",
      multiple: this.props.maxNumberOfFiles !== 1,
      onchange: this.props.handleInputChange,
      accept: this.props.allowedFileTypes,
      value: "",
      ref: function ref(input) {
        _this2.input = input;
      } }));
  };

  return ActionBrowseTagline;
}(Component);

module.exports = ActionBrowseTagline;

},{"preact":11}],27:[function(require,module,exports){
var FileList = require('./FileList');
var Tabs = require('./Tabs');
var FileCard = require('./FileCard');
var classNames = require('classnames');
var isTouchDevice = require('./../../utils/lib/isTouchDevice');

var _require = require('preact'),
    h = _require.h;

// http://dev.edenspiekermann.com/2016/02/11/introducing-accessible-modal-dialog
// https://github.com/ghosh/micromodal

var PanelContent = function PanelContent(props) {
  return h('div', { style: { width: '100%', height: '100%' } }, h('div', { 'class': 'uppy-DashboardContent-bar' }, h('div', { 'class': 'uppy-DashboardContent-title', role: 'heading', 'aria-level': 'h1' }, props.i18n('importFrom', { name: props.activePanel.name })), h('button', { 'class': 'uppy-DashboardContent-back',
    type: 'button',
    onclick: props.hideAllPanels }, props.i18n('done'))), props.getPlugin(props.activePanel.id).render(props.state));
};

module.exports = function Dashboard(props) {
  var dashboardClassName = classNames({ 'uppy-Root': props.isTargetDOMEl }, 'uppy-Dashboard', { 'Uppy--isTouchDevice': isTouchDevice() }, { 'uppy-Dashboard--animateOpenClose': props.animateOpenClose }, { 'uppy-Dashboard--isClosing': props.isClosing }, { 'uppy-Dashboard--modal': !props.inline }, { 'uppy-Dashboard--wide': props.isWide });

  return h('div', { 'class': dashboardClassName,
    'aria-hidden': props.inline ? 'false' : props.modal.isHidden,
    'aria-label': !props.inline ? props.i18n('dashboardWindowTitle') : props.i18n('dashboardTitle'),
    onpaste: props.handlePaste }, h('div', { 'class': 'uppy-Dashboard-overlay', tabindex: -1, onclick: props.handleClickOutside }), h('div', { 'class': 'uppy-Dashboard-inner',
    'aria-modal': !props.inline && 'true',
    role: !props.inline && 'dialog',
    style: {
      width: props.inline && props.width ? props.width : '',
      height: props.inline && props.height ? props.height : ''
    } }, h('button', { 'class': 'uppy-Dashboard-close',
    type: 'button',
    'aria-label': props.i18n('closeModal'),
    title: props.i18n('closeModal'),
    onclick: props.closeModal }, h('span', { 'aria-hidden': 'true' }, '\xD7')), h('div', { 'class': 'uppy-Dashboard-innerWrap' }, h(Tabs, props), h(FileCard, props), h('div', { 'class': 'uppy-Dashboard-filesContainer' }, h(FileList, props)), h('div', { 'class': 'uppy-DashboardContent-panel',
    role: 'tabpanel',
    id: props.activePanel && 'uppy-DashboardContent-panel--' + props.activePanel.id,
    'aria-hidden': props.activePanel ? 'false' : 'true' }, props.activePanel && h(PanelContent, props)), h('div', { 'class': 'uppy-Dashboard-progressindicators' }, props.progressindicators.map(function (target) {
    return props.getPlugin(target.id).render(props.state);
  })))));
};

},{"./../../utils/lib/isTouchDevice":82,"./FileCard":28,"./FileList":31,"./Tabs":33,"classnames":1,"preact":11}],28:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var getFileTypeIcon = require('./getFileTypeIcon');
var FilePreview = require('./FilePreview');

var _require = require('preact'),
    h = _require.h,
    Component = _require.Component;

module.exports = function (_Component) {
  _inherits(FileCard, _Component);

  function FileCard(props) {
    _classCallCheck(this, FileCard);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.meta = {};

    _this.tempStoreMetaOrSubmit = _this.tempStoreMetaOrSubmit.bind(_this);
    _this.renderMetaFields = _this.renderMetaFields.bind(_this);
    _this.handleSave = _this.handleSave.bind(_this);
    _this.handleCancel = _this.handleCancel.bind(_this);
    return _this;
  }

  FileCard.prototype.tempStoreMetaOrSubmit = function tempStoreMetaOrSubmit(ev) {
    var file = this.props.files[this.props.fileCardFor];

    if (ev.keyCode === 13) {
      ev.stopPropagation();
      ev.preventDefault();
      this.props.saveFileCard(this.meta, file.id);
      return;
    }

    var value = ev.target.value;
    var name = ev.target.dataset.name;
    this.meta[name] = value;
  };

  FileCard.prototype.renderMetaFields = function renderMetaFields(file) {
    var _this2 = this;

    var metaFields = this.props.metaFields || [];
    return metaFields.map(function (field) {
      return h('fieldset', { 'class': 'uppy-DashboardFileCard-fieldset' }, h('label', { 'class': 'uppy-DashboardFileCard-label' }, field.name), h('input', { 'class': 'uppy-c-textInput uppy-DashboardFileCard-input',
        type: 'text',
        'data-name': field.id,
        value: file.meta[field.id],
        placeholder: field.placeholder,
        onkeyup: _this2.tempStoreMetaOrSubmit,
        onkeydown: _this2.tempStoreMetaOrSubmit,
        onkeypress: _this2.tempStoreMetaOrSubmit }));
    });
  };

  FileCard.prototype.handleSave = function handleSave(ev) {
    var fileID = this.props.fileCardFor;
    this.props.saveFileCard(this.meta, fileID);
  };

  FileCard.prototype.handleCancel = function handleCancel(ev) {
    this.meta = {};
    this.props.toggleFileCard();
  };

  FileCard.prototype.render = function render() {
    if (!this.props.fileCardFor) {
      return h('div', { 'class': 'uppy-DashboardFileCard', 'aria-hidden': true });
    }

    var file = this.props.files[this.props.fileCardFor];

    return h('div', { 'class': 'uppy-DashboardFileCard', 'aria-hidden': !this.props.fileCardFor }, h('div', { style: { width: '100%', height: '100%' } }, h('div', { 'class': 'uppy-DashboardContent-bar' }, h('div', { 'class': 'uppy-DashboardContent-title', role: 'heading', 'aria-level': 'h1' }, this.props.i18nArray('editing', {
      file: h('span', { 'class': 'uppy-DashboardContent-titleFile' }, file.meta ? file.meta.name : file.name)
    })), h('button', { 'class': 'uppy-DashboardContent-back', type: 'button', title: this.props.i18n('finishEditingFile'),
      onclick: this.handleSave }, this.props.i18n('done'))), h('div', { 'class': 'uppy-DashboardFileCard-inner' }, h('div', { 'class': 'uppy-DashboardFileCard-preview', style: { backgroundColor: getFileTypeIcon(file.type).color } }, h(FilePreview, { file: file })), h('div', { 'class': 'uppy-DashboardFileCard-info' }, this.renderMetaFields(file)), h('div', { 'class': 'uppy-Dashboard-actions' }, h('button', { 'class': 'uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-actionsBtn',
      type: 'button',
      onclick: this.handleSave }, this.props.i18n('saveChanges')), h('button', { 'class': 'uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-actionsBtn',
      type: 'button',
      onclick: this.handleCancel }, this.props.i18n('cancel'))))));
  };

  return FileCard;
}(Component);

},{"./FilePreview":32,"./getFileTypeIcon":35,"preact":11}],29:[function(require,module,exports){
var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

var getFileNameAndExtension = require('./../../utils/lib/getFileNameAndExtension');
var truncateString = require('./truncateString');
var copyToClipboard = require('./copyToClipboard');
var prettyBytes = require('prettier-bytes');
var FileItemProgress = require('./FileItemProgress');
var getFileTypeIcon = require('./getFileTypeIcon');
var FilePreview = require('./FilePreview');

var _require = require('./icons'),
    iconEdit = _require.iconEdit,
    iconCopy = _require.iconCopy,
    iconRetry = _require.iconRetry;

var classNames = require('classnames');

var _require2 = require('preact'),
    h = _require2.h;

var FileItemProgressWrapper = function FileItemProgressWrapper(props) {
  if (props.hideRetryButton && props.error) {
    return;
  }

  if (props.isUploaded || props.bundled || props.hidePauseResumeCancelButtons && !props.error) {
    return h('div', { 'class': 'uppy-DashboardItem-progressIndicator' }, h(FileItemProgress, {
      progress: props.file.progress.percentage,
      fileID: props.file.id,
      hidePauseResumeCancelButtons: props.hidePauseResumeCancelButtons,
      bundled: props.bundled
    }));
  }

  return h('button', {
    'class': 'uppy-DashboardItem-progressIndicator',
    type: 'button',
    'aria-label': props.progressIndicatorTitle,
    title: props.progressIndicatorTitle,
    onclick: props.onPauseResumeCancelRetry }, props.error ? props.hideRetryButton ? null : iconRetry() : h(FileItemProgress, {
    progress: props.file.progress.percentage,
    fileID: props.file.id,
    hidePauseResumeCancelButtons: props.hidePauseResumeCancelButtons
  }));
};

module.exports = function fileItem(props) {
  var file = props.file;
  var acquirers = props.acquirers;

  var isProcessing = file.progress.preprocess || file.progress.postprocess;
  var isUploaded = file.progress.uploadComplete && !isProcessing && !file.error;
  var uploadInProgressOrComplete = file.progress.uploadStarted || isProcessing;
  var uploadInProgress = file.progress.uploadStarted && !file.progress.uploadComplete || isProcessing;
  var isPaused = file.isPaused || false;
  var error = file.error || false;

  var fileName = getFileNameAndExtension(file.meta.name).name;
  var truncatedFileName = props.isWide ? truncateString(fileName, 14) : fileName;

  var onPauseResumeCancelRetry = function onPauseResumeCancelRetry(ev) {
    if (isUploaded) return;

    if (error && !props.hideRetryButton) {
      props.retryUpload(file.id);
      return;
    }

    if (props.hidePauseResumeCancelButtons) {
      return;
    }

    if (props.resumableUploads) {
      props.pauseUpload(file.id);
    } else {
      props.cancelUpload(file.id);
    }
  };

  var dashboardItemClass = classNames('uppy-DashboardItem', { 'is-inprogress': uploadInProgress }, { 'is-processing': isProcessing }, { 'is-complete': isUploaded }, { 'is-paused': isPaused }, { 'is-error': error }, { 'is-resumable': props.resumableUploads }, { 'is-bundled': props.bundledUpload });

  var progressIndicatorTitle = isUploaded ? props.i18n('uploadComplete') : props.resumableUploads ? file.isPaused ? props.i18n('resumeUpload') : props.i18n('pauseUpload') : error ? props.i18n('retryUpload') : props.i18n('cancelUpload');

  return h('li', { 'class': dashboardItemClass, id: 'uppy_' + file.id, title: file.meta.name }, h('div', { 'class': 'uppy-DashboardItem-preview' }, h('div', { 'class': 'uppy-DashboardItem-previewInnerWrap', style: { backgroundColor: getFileTypeIcon(file.type).color } }, props.showLinkToFileUploadResult && file.uploadURL ? h('a', { 'class': 'uppy-DashboardItem-previewLink', href: file.uploadURL, rel: 'noreferrer noopener', target: '_blank' }) : null, h(FilePreview, { file: file })), h('div', { 'class': 'uppy-DashboardItem-progress' }, h(FileItemProgressWrapper, _extends({
    progressIndicatorTitle: progressIndicatorTitle,
    onPauseResumeCancelRetry: onPauseResumeCancelRetry,
    file: file,
    error: error
  }, props)))), h('div', { 'class': 'uppy-DashboardItem-info' }, h('div', { 'class': 'uppy-DashboardItem-name', title: fileName }, props.showLinkToFileUploadResult && file.uploadURL ? h('a', { href: file.uploadURL, rel: 'noreferrer noopener', target: '_blank' }, file.extension ? truncatedFileName + '.' + file.extension : truncatedFileName) : file.extension ? truncatedFileName + '.' + file.extension : truncatedFileName), h('div', { 'class': 'uppy-DashboardItem-status' }, file.data.size ? h('div', { 'class': 'uppy-DashboardItem-statusSize' }, prettyBytes(file.data.size)) : null, file.source && h('div', { 'class': 'uppy-DashboardItem-sourceIcon' }, acquirers.map(function (acquirer) {
    if (acquirer.id === file.source) {
      return h('span', { title: props.i18n('fileSource', { name: acquirer.name }) }, acquirer.icon());
    }
  }))), !uploadInProgressOrComplete && props.metaFields && props.metaFields.length ? h('button', { 'class': 'uppy-DashboardItem-edit',
    type: 'button',
    'aria-label': props.i18n('editFile'),
    title: props.i18n('editFile'),
    onclick: function onclick(e) {
      return props.toggleFileCard(file.id);
    } }, iconEdit()) : null, props.showLinkToFileUploadResult && file.uploadURL ? h('button', { 'class': 'uppy-DashboardItem-copyLink',
    type: 'button',
    'aria-label': props.i18n('copyLink'),
    title: props.i18n('copyLink'),
    onclick: function onclick() {
      copyToClipboard(file.uploadURL, props.i18n('copyLinkToClipboardFallback')).then(function () {
        props.log('Link copied to clipboard.');
        props.info(props.i18n('copyLinkToClipboardSuccess'), 'info', 3000);
      }).catch(props.log);
    } }, iconCopy()) : ''), h('div', { 'class': 'uppy-DashboardItem-action' }, !isUploaded && h('button', { 'class': 'uppy-DashboardItem-remove',
    type: 'button',
    'aria-label': props.i18n('removeFile'),
    title: props.i18n('removeFile'),
    onclick: function onclick() {
      return props.removeFile(file.id);
    } }, h('svg', { 'aria-hidden': 'true', 'class': 'UppyIcon', width: '60', height: '60', viewBox: '0 0 60 60', xmlns: 'http://www.w3.org/2000/svg' }, h('path', { stroke: '#FFF', 'stroke-width': '1', 'fill-rule': 'nonzero', 'vector-effect': 'non-scaling-stroke', d: 'M30 1C14 1 1 14 1 30s13 29 29 29 29-13 29-29S46 1 30 1z' }), h('path', { fill: '#FFF', 'vector-effect': 'non-scaling-stroke', d: 'M42 39.667L39.667 42 30 32.333 20.333 42 18 39.667 27.667 30 18 20.333 20.333 18 30 27.667 39.667 18 42 20.333 32.333 30z' })))));
};

},{"./../../utils/lib/getFileNameAndExtension":73,"./FileItemProgress":30,"./FilePreview":32,"./copyToClipboard":34,"./getFileTypeIcon":35,"./icons":36,"./truncateString":38,"classnames":1,"preact":11,"prettier-bytes":12}],30:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

// http://codepen.io/Harkko/pen/rVxvNM
// https://css-tricks.com/svg-line-animation-works/
// https://gist.github.com/eswak/ad4ea57bcd5ff7aa5d42

// circle length equals 2 * PI * R


var circleLength = 2 * Math.PI * 15;

// stroke-dashoffset is a percentage of the progress from circleLength,
// substracted from circleLength, because its an offset
module.exports = function (props) {
  return h("svg", { width: "70", height: "70", viewBox: "0 0 36 36", "class": "UppyIcon UppyIcon-progressCircle" }, h("g", { "class": "progress-group" }, h("circle", { "class": "bg", r: "15", cx: "18", cy: "18", "stroke-width": "2", fill: "none" }), h("circle", { "class": "progress", r: "15", cx: "18", cy: "18", transform: "rotate(-90, 18, 18)", "stroke-width": "2", fill: "none",
    "stroke-dasharray": circleLength,
    "stroke-dashoffset": circleLength - circleLength / 100 * props.progress
  })), !props.hidePauseResumeCancelButtons && !props.bundled ? h("g", null, h("polygon", { "class": "play", transform: "translate(3, 3)", points: "12 20 12 10 20 15" }), h("g", { "class": "pause", transform: "translate(14.5, 13)" }, h("rect", { x: "0", y: "0", width: "2", height: "10", rx: "0" }), h("rect", { x: "5", y: "0", width: "2", height: "10", rx: "0" })), h("polygon", { "class": "cancel", transform: "translate(2, 2)", points: "19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12" })) : null, h("polygon", { "class": "check", transform: "translate(2, 3)", points: "14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634" }));
};

},{"preact":11}],31:[function(require,module,exports){
var FileItem = require('./FileItem');
var ActionBrowseTagline = require('./ActionBrowseTagline');
// const { dashboardBgIcon } = require('./icons')
var classNames = require('classnames');

var _require = require('preact'),
    h = _require.h;

var poweredByUppy = function poweredByUppy(props) {
  return h('a', { tabindex: '-1', href: 'https://uppy.io', rel: 'noreferrer noopener', target: '_blank', 'class': 'uppy-Dashboard-poweredBy' }, 'Powered by ', h('svg', { 'aria-hidden': 'true', 'class': 'UppyIcon uppy-Dashboard-poweredByIcon', width: '11', height: '11', viewBox: '0 0 11 11', xmlns: 'http://www.w3.org/2000/svg' }, h('path', { d: 'M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z', 'fill-rule': 'evenodd' })), h('span', { 'class': 'uppy-Dashboard-poweredByUppy' }, 'Uppy'));
};

module.exports = function (props) {
  var noFiles = props.totalFileCount === 0;
  var dashboardFilesClass = classNames('uppy-Dashboard-files', { 'uppy-Dashboard-files--noFiles': noFiles });

  return h('ul', { 'class': dashboardFilesClass }, noFiles && h('div', { 'class': 'uppy-Dashboard-bgIcon' }, h('div', { 'class': 'uppy-Dashboard-dropFilesTitle' }, h(ActionBrowseTagline, {
    acquirers: props.acquirers,
    handleInputChange: props.handleInputChange,
    i18n: props.i18n,
    i18nArray: props.i18nArray,
    allowedFileTypes: props.allowedFileTypes,
    maxNumberOfFiles: props.maxNumberOfFiles
  })), props.note && h('div', { 'class': 'uppy-Dashboard-note' }, props.note), props.proudlyDisplayPoweredByUppy && poweredByUppy(props)), Object.keys(props.files).map(function (fileID) {
    return h(FileItem, {
      acquirers: props.acquirers,
      file: props.files[fileID],
      toggleFileCard: props.toggleFileCard,
      showProgressDetails: props.showProgressDetails,
      info: props.info,
      log: props.log,
      i18n: props.i18n,
      removeFile: props.removeFile,
      pauseUpload: props.pauseUpload,
      cancelUpload: props.cancelUpload,
      retryUpload: props.retryUpload,
      hidePauseResumeCancelButtons: props.hidePauseResumeCancelButtons,
      hideRetryButton: props.hideRetryButton,
      resumableUploads: props.resumableUploads,
      bundled: props.bundled,
      isWide: props.isWide,
      showLinkToFileUploadResult: props.showLinkToFileUploadResult,
      metaFields: props.metaFields
    });
  }));
};

},{"./ActionBrowseTagline":26,"./FileItem":29,"classnames":1,"preact":11}],32:[function(require,module,exports){
var getFileTypeIcon = require('./getFileTypeIcon');

var _require = require('preact'),
    h = _require.h;

module.exports = function FilePreview(props) {
  var file = props.file;

  if (file.preview) {
    return h('img', { 'class': 'uppy-DashboardItem-previewImg', alt: file.name, src: file.preview });
  }

  var _getFileTypeIcon = getFileTypeIcon(file.type),
      color = _getFileTypeIcon.color,
      icon = _getFileTypeIcon.icon;

  return h('div', { 'class': 'uppy-DashboardItem-previewIconWrap' }, h('span', { 'class': 'uppy-DashboardItem-previewIcon', style: { color: color } }, icon), h('svg', { 'class': 'uppy-DashboardItem-previewIconBg', width: '72', height: '93', viewBox: '0 0 72 93' }, h('g', null, h('path', { d: 'M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z', fill: '#FFF' }), h('path', { d: 'M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z', fill: '#E4E4E4' }))));
};

// <span class="uppy-DashboardItem-previewType">{file.extension && file.extension.length < 5 ? file.extension : null}</span>

},{"./getFileTypeIcon":35,"preact":11}],33:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var ActionBrowseTagline = require('./ActionBrowseTagline');

var _require = require('./icons'),
    localIcon = _require.localIcon;

var _require2 = require('preact'),
    h = _require2.h,
    Component = _require2.Component;

var Tabs = function (_Component) {
  _inherits(Tabs, _Component);

  function Tabs(props) {
    _classCallCheck(this, Tabs);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.handleClick = _this.handleClick.bind(_this);
    return _this;
  }

  Tabs.prototype.handleClick = function handleClick(ev) {
    this.input.click();
  };

  Tabs.prototype.render = function render() {
    var _this2 = this;

    var isHidden = Object.keys(this.props.files).length === 0;
    var hasAcquirers = this.props.acquirers.length !== 0;

    if (!hasAcquirers) {
      return h('div', { 'class': 'uppy-DashboardTabs', 'aria-hidden': isHidden }, h('div', { 'class': 'uppy-DashboardTabs-title' }, h(ActionBrowseTagline, {
        acquirers: this.props.acquirers,
        handleInputChange: this.props.handleInputChange,
        i18n: this.props.i18n,
        i18nArray: this.props.i18nArray })));
    }

    // empty value="" on file input, so that the input is cleared after a file is selected,
    // because Uppy will be handling the upload and so we can select same file
    // after removing — otherwise browser thinks it’s already selected
    return h('div', { 'class': 'uppy-DashboardTabs' }, h('ul', { 'class': 'uppy-DashboardTabs-list', role: 'tablist' }, h('li', { 'class': 'uppy-DashboardTab', role: 'presentation' }, h('button', { type: 'button',
      'class': 'uppy-DashboardTab-btn',
      role: 'tab',
      tabindex: 0,
      onclick: this.handleClick }, localIcon(), h('div', { 'class': 'uppy-DashboardTab-name' }, this.props.i18n('myDevice'))), h('input', { 'class': 'uppy-Dashboard-input',
      hidden: true,
      'aria-hidden': 'true',
      tabindex: -1,
      type: 'file',
      name: 'files[]',
      multiple: this.props.maxNumberOfFiles !== 1,
      accept: this.props.allowedFileTypes,
      onchange: this.props.handleInputChange,
      value: '',
      ref: function ref(input) {
        _this2.input = input;
      } })), this.props.acquirers.map(function (target) {
      return h('li', { 'class': 'uppy-DashboardTab', role: 'presentation' }, h('button', { 'class': 'uppy-DashboardTab-btn',
        type: 'button',
        role: 'tab',
        tabindex: 0,
        'aria-controls': 'uppy-DashboardContent-panel--' + target.id,
        'aria-selected': _this2.props.activePanel.id === target.id,
        onclick: function onclick() {
          return _this2.props.showPanel(target.id);
        } }, target.icon(), h('div', { 'class': 'uppy-DashboardTab-name' }, target.name)));
    })));
  };

  return Tabs;
}(Component);

module.exports = Tabs;

},{"./ActionBrowseTagline":26,"./icons":36,"preact":11}],34:[function(require,module,exports){
/**
 * Copies text to clipboard by creating an almost invisible textarea,
 * adding text there, then running execCommand('copy').
 * Falls back to prompt() when the easy way fails (hello, Safari!)
 * From http://stackoverflow.com/a/30810322
 *
 * @param {String} textToCopy
 * @param {String} fallbackString
 * @return {Promise}
 */
module.exports = function copyToClipboard(textToCopy, fallbackString) {
  fallbackString = fallbackString || 'Copy the URL below';

  return new Promise(function (resolve) {
    var textArea = document.createElement('textarea');
    textArea.setAttribute('style', {
      position: 'fixed',
      top: 0,
      left: 0,
      width: '2em',
      height: '2em',
      padding: 0,
      border: 'none',
      outline: 'none',
      boxShadow: 'none',
      background: 'transparent'
    });

    textArea.value = textToCopy;
    document.body.appendChild(textArea);
    textArea.select();

    var magicCopyFailed = function magicCopyFailed() {
      document.body.removeChild(textArea);
      window.prompt(fallbackString, textToCopy);
      resolve();
    };

    try {
      var successful = document.execCommand('copy');
      if (!successful) {
        return magicCopyFailed('copy command unavailable');
      }
      document.body.removeChild(textArea);
      return resolve();
    } catch (err) {
      document.body.removeChild(textArea);
      return magicCopyFailed(err);
    }
  });
};

},{}],35:[function(require,module,exports){
var _require = require('./icons'),
    iconText = _require.iconText,
    iconAudio = _require.iconAudio,
    iconVideo = _require.iconVideo,
    iconPDF = _require.iconPDF;

module.exports = function getIconByMime(fileType) {
  var defaultChoice = {
    color: '#cbcbcb',
    icon: ''
  };

  if (!fileType) return defaultChoice;

  var fileTypeGeneral = fileType.split('/')[0];
  var fileTypeSpecific = fileType.split('/')[1];

  if (fileTypeGeneral === 'text') {
    return {
      color: '#cbcbcb',
      icon: iconText()
    };
  }

  if (fileTypeGeneral === 'audio') {
    return {
      color: '#1abc9c',
      icon: iconAudio()
    };
  }

  if (fileTypeGeneral === 'video') {
    return {
      color: '#2980b9',
      icon: iconVideo()
    };
  }

  if (fileTypeGeneral === 'application' && fileTypeSpecific === 'pdf') {
    return {
      color: '#e74c3c',
      icon: iconPDF()
    };
  }

  if (fileTypeGeneral === 'image') {
    return {
      color: '#f2f2f2',
      icon: ''
    };
  }

  return defaultChoice;
};

},{"./icons":36}],36:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

// https://css-tricks.com/creating-svg-icon-system-react/

function defaultTabIcon() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "30", height: "30", viewBox: "0 0 30 30" }, h("path", { d: "M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z" }));
}

function iconCopy() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "51", height: "51", viewBox: "0 0 51 51" }, h("path", { d: "M17.21 45.765a5.394 5.394 0 0 1-7.62 0l-4.12-4.122a5.393 5.393 0 0 1 0-7.618l6.774-6.775-2.404-2.404-6.775 6.776c-3.424 3.427-3.424 9 0 12.426l4.12 4.123a8.766 8.766 0 0 0 6.216 2.57c2.25 0 4.5-.858 6.214-2.57l13.55-13.552a8.72 8.72 0 0 0 2.575-6.213 8.73 8.73 0 0 0-2.575-6.213l-4.123-4.12-2.404 2.404 4.123 4.12a5.352 5.352 0 0 1 1.58 3.81c0 1.438-.562 2.79-1.58 3.808l-13.55 13.55z" }), h("path", { d: "M44.256 2.858A8.728 8.728 0 0 0 38.043.283h-.002a8.73 8.73 0 0 0-6.212 2.574l-13.55 13.55a8.725 8.725 0 0 0-2.575 6.214 8.73 8.73 0 0 0 2.574 6.216l4.12 4.12 2.405-2.403-4.12-4.12a5.357 5.357 0 0 1-1.58-3.812c0-1.437.562-2.79 1.58-3.808l13.55-13.55a5.348 5.348 0 0 1 3.81-1.58c1.44 0 2.792.562 3.81 1.58l4.12 4.12c2.1 2.1 2.1 5.518 0 7.617L39.2 23.775l2.404 2.404 6.775-6.777c3.426-3.427 3.426-9 0-12.426l-4.12-4.12z" }));
}

function iconResume() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "25", height: "25", viewBox: "0 0 44 44" }, h("polygon", { "class": "play", transform: "translate(6, 5.5)", points: "13 21.6666667 13 11 21 16.3333333" }));
}

function iconPause() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "25px", height: "25px", viewBox: "0 0 44 44" }, h("g", { transform: "translate(18, 17)", "class": "pause" }, h("rect", { x: "0", y: "0", width: "2", height: "10", rx: "0" }), h("rect", { x: "6", y: "0", width: "2", height: "10", rx: "0" })));
}

function iconEdit() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "28", height: "28", viewBox: "0 0 28 28" }, h("path", { d: "M25.436 2.566a7.98 7.98 0 0 0-2.078-1.51C22.638.703 21.906.5 21.198.5a3 3 0 0 0-1.023.17 2.436 2.436 0 0 0-.893.562L2.292 18.217.5 27.5l9.28-1.796 16.99-16.99c.255-.254.444-.56.562-.888a3 3 0 0 0 .17-1.023c0-.708-.205-1.44-.555-2.16a8 8 0 0 0-1.51-2.077zM9.01 24.252l-4.313.834c0-.03.008-.06.012-.09.007-.944-.74-1.715-1.67-1.723-.04 0-.078.007-.118.01l.83-4.29L17.72 5.024l5.264 5.264L9.01 24.252zm16.84-16.96a.818.818 0 0 1-.194.31l-1.57 1.57-5.26-5.26 1.57-1.57a.82.82 0 0 1 .31-.194 1.45 1.45 0 0 1 .492-.074c.397 0 .917.126 1.468.397.55.27 1.13.678 1.656 1.21.53.53.94 1.11 1.208 1.655.272.55.397 1.07.393 1.468.004.193-.027.358-.074.488z" }));
}

function localIcon() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "27", height: "25", viewBox: "0 0 27 25" }, h("path", { d: "M5.586 9.288a.313.313 0 0 0 .282.176h4.84v3.922c0 1.514 1.25 2.24 2.792 2.24 1.54 0 2.79-.726 2.79-2.24V9.464h4.84c.122 0 .23-.068.284-.176a.304.304 0 0 0-.046-.324L13.735.106a.316.316 0 0 0-.472 0l-7.63 8.857a.302.302 0 0 0-.047.325z" }), h("path", { d: "M24.3 5.093c-.218-.76-.54-1.187-1.208-1.187h-4.856l1.018 1.18h3.948l2.043 11.038h-7.193v2.728H9.114v-2.725h-7.36l2.66-11.04h3.33l1.018-1.18H3.907c-.668 0-1.06.46-1.21 1.186L0 16.456v7.062C0 24.338.676 25 1.51 25h23.98c.833 0 1.51-.663 1.51-1.482v-7.062L24.3 5.093z" }));
}

function iconRetry() {
  return h("svg", { "class": "UppyIcon retry", width: "28", height: "31", viewBox: "0 0 16 19", xmlns: "http://www.w3.org/2000/svg" }, h("path", { d: "M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z" }), h("path", { d: "M7.9 3H10v2H7.9z" }), h("path", { d: "M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z" }), h("path", { d: "M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z" }));
}

function checkIcon() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon UppyIcon-check", width: "13", height: "9", viewBox: "0 0 13 9" }, h("polygon", { points: "5 7.293 1.354 3.647 0.646 4.354 5 8.707 12.354 1.354 11.646 0.647" }));
}

function iconAudio() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "55", height: "55", viewBox: "0 0 55 55" }, h("path", { d: "M52.66.25c-.216-.19-.5-.276-.79-.242l-31 4.01a1 1 0 0 0-.87.992V40.622C18.174 38.428 15.273 37 12 37c-5.514 0-10 4.037-10 9s4.486 9 10 9 10-4.037 10-9c0-.232-.02-.46-.04-.687.014-.065.04-.124.04-.192V16.12l29-3.753v18.257C49.174 28.428 46.273 27 43 27c-5.514 0-10 4.037-10 9s4.486 9 10 9c5.464 0 9.913-3.966 9.993-8.867 0-.013.007-.024.007-.037V1a.998.998 0 0 0-.34-.75zM12 53c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zm31-10c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zM22 14.1V5.89l29-3.753v8.21l-29 3.754z" }));
}

function iconVideo() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", viewBox: "0 0 58 58" }, h("path", { d: "M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z" }), h("path", { d: "M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z" }));
}

function iconPDF() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", viewBox: "0 0 342 335" }, h("path", { d: "M329.337 227.84c-2.1 1.3-8.1 2.1-11.9 2.1-12.4 0-27.6-5.7-49.1-14.9 8.3-.6 15.8-.9 22.6-.9 12.4 0 16 0 28.2 3.1 12.1 3 12.2 9.3 10.2 10.6zm-215.1 1.9c4.8-8.4 9.7-17.3 14.7-26.8 12.2-23.1 20-41.3 25.7-56.2 11.5 20.9 25.8 38.6 42.5 52.8 2.1 1.8 4.3 3.5 6.7 5.3-34.1 6.8-63.6 15-89.6 24.9zm39.8-218.9c6.8 0 10.7 17.06 11 33.16.3 16-3.4 27.2-8.1 35.6-3.9-12.4-5.7-31.8-5.7-44.5 0 0-.3-24.26 2.8-24.26zm-133.4 307.2c3.9-10.5 19.1-31.3 41.6-49.8 1.4-1.1 4.9-4.4 8.1-7.4-23.5 37.6-39.3 52.5-49.7 57.2zm315.2-112.3c-6.8-6.7-22-10.2-45-10.5-15.6-.2-34.3 1.2-54.1 3.9-8.8-5.1-17.9-10.6-25.1-17.3-19.2-18-35.2-42.9-45.2-70.3.6-2.6 1.2-4.8 1.7-7.1 0 0 10.8-61.5 7.9-82.3-.4-2.9-.6-3.7-1.4-5.9l-.9-2.5c-2.9-6.76-8.7-13.96-17.8-13.57l-5.3-.17h-.1c-10.1 0-18.4 5.17-20.5 12.84-6.6 24.3.2 60.5 12.5 107.4l-3.2 7.7c-8.8 21.4-19.8 43-29.5 62l-1.3 2.5c-10.2 20-19.5 37-27.9 51.4l-8.7 4.6c-.6.4-15.5 8.2-19 10.3-29.6 17.7-49.28 37.8-52.54 53.8-1.04 5-.26 11.5 5.01 14.6l8.4 4.2c3.63 1.8 7.53 2.7 11.43 2.7 21.1 0 45.6-26.2 79.3-85.1 39-12.7 83.4-23.3 122.3-29.1 29.6 16.7 66 28.3 89 28.3 4.1 0 7.6-.4 10.5-1.2 4.4-1.1 8.1-3.6 10.4-7.1 4.4-6.7 5.4-15.9 4.1-25.4-.3-2.8-2.6-6.3-5-8.7z" }));
}

function iconFile() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "44", height: "58", viewBox: "0 0 44 58" }, h("path", { d: "M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z" }));
}

function iconText() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "62", height: "62", viewBox: "0 0 62 62", xmlns: "http://www.w3.org/2000/svg" }, h("path", { d: "M4.309 4.309h24.912v53.382h-6.525v3.559h16.608v-3.559h-6.525V4.309h24.912v10.676h3.559V.75H.75v14.235h3.559z", "fill-rule": "nonzero", fill: "#000" }));
}

function dashboardBgIcon() {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "48", height: "69", viewBox: "0 0 48 69" }, h("path", { d: "M.5 1.5h5zM10.5 1.5h5zM20.5 1.5h5zM30.504 1.5h5zM45.5 11.5v5zM45.5 21.5v5zM45.5 31.5v5zM45.5 41.502v5zM45.5 51.502v5zM45.5 61.5v5zM45.5 66.502h-4.998zM35.503 66.502h-5zM25.5 66.502h-5zM15.5 66.502h-5zM5.5 66.502h-5zM.5 66.502v-5zM.5 56.502v-5zM.5 46.503V41.5zM.5 36.5v-5zM.5 26.5v-5zM.5 16.5v-5zM.5 6.5V1.498zM44.807 11H36V2.195z" }));
}

module.exports = {
  defaultTabIcon: defaultTabIcon,
  iconCopy: iconCopy,
  iconResume: iconResume,
  iconPause: iconPause,
  iconRetry: iconRetry,
  iconEdit: iconEdit,
  localIcon: localIcon,
  checkIcon: checkIcon,
  iconAudio: iconAudio,
  iconVideo: iconVideo,
  iconPDF: iconPDF,
  iconFile: iconFile,
  iconText: iconText,
  dashboardBgIcon: dashboardBgIcon
};

},{"preact":11}],37:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('./../../core'),
    Plugin = _require.Plugin;

var Translator = require('./../../utils/lib/Translator');
var dragDrop = require('drag-drop');
var DashboardUI = require('./Dashboard');
var StatusBar = require('./../../status-bar');
var Informer = require('./../../informer');
var ThumbnailGenerator = require('./../../thumbnail-generator');
var findAllDOMElements = require('./../../utils/lib/findAllDOMElements');
var toArray = require('./../../utils/lib/toArray');
var prettyBytes = require('prettier-bytes');

var _require2 = require('./icons'),
    defaultTabIcon = _require2.defaultTabIcon;

// Some code for managing focus was adopted from https://github.com/ghosh/micromodal
// MIT licence, https://github.com/ghosh/micromodal/blob/master/LICENSE.md
// Copyright (c) 2017 Indrashish Ghosh


var FOCUSABLE_ELEMENTS = ['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])', 'area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])', 'input:not([disabled]):not([inert]):not([aria-hidden])', 'select:not([disabled]):not([inert]):not([aria-hidden])', 'textarea:not([disabled]):not([inert]):not([aria-hidden])', 'button:not([disabled]):not([inert]):not([aria-hidden])', 'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])', 'object:not([tabindex^="-"]):not([inert]):not([aria-hidden])', 'embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])', '[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])', '[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];

var TAB_KEY = 9;
var ESC_KEY = 27;

/**
 * Dashboard UI with previews, metadata editing, tabs for various services and more
 */
module.exports = function (_Plugin) {
  _inherits(Dashboard, _Plugin);

  function Dashboard(uppy, opts) {
    _classCallCheck(this, Dashboard);

    var _this = _possibleConstructorReturn(this, _Plugin.call(this, uppy, opts));

    _this.id = _this.opts.id || 'Dashboard';
    _this.title = 'Dashboard';
    _this.type = 'orchestrator';
    _this.modalName = 'uppy-Dashboard';

    var defaultLocale = {
      strings: {
        selectToUpload: 'Select files to upload',
        closeModal: 'Close Modal',
        upload: 'Upload',
        importFrom: 'Import from %{name}',
        dashboardWindowTitle: 'Uppy Dashboard Window (Press escape to close)',
        dashboardTitle: 'Uppy Dashboard',
        copyLinkToClipboardSuccess: 'Link copied to clipboard',
        copyLinkToClipboardFallback: 'Copy the URL below',
        copyLink: 'Copy link',
        fileSource: 'File source: %{name}',
        done: 'Done',
        name: 'Name',
        removeFile: 'Remove file',
        editFile: 'Edit file',
        editing: 'Editing %{file}',
        finishEditingFile: 'Finish editing file',
        saveChanges: 'Save changes',
        cancel: 'Cancel',
        localDisk: 'Local Disk',
        myDevice: 'My Device',
        dropPasteImport: 'Drop files here, paste, import from one of the locations above or %{browse}',
        dropPaste: 'Drop files here, paste or %{browse}',
        browse: 'browse',
        fileProgress: 'File progress: upload speed and ETA',
        numberOfSelectedFiles: 'Number of selected files',
        uploadAllNewFiles: 'Upload all new files',
        emptyFolderAdded: 'No files were added from empty folder',
        uploadComplete: 'Upload complete',
        resumeUpload: 'Resume upload',
        pauseUpload: 'Pause upload',
        retryUpload: 'Retry upload',
        uploadXFiles: {
          0: 'Upload %{smart_count} file',
          1: 'Upload %{smart_count} files'
        },
        uploadXNewFiles: {
          0: 'Upload +%{smart_count} file',
          1: 'Upload +%{smart_count} files'
        },
        folderAdded: {
          0: 'Added %{smart_count} file from %{folder}',
          1: 'Added %{smart_count} files from %{folder}'
        }

        // set default options
      } };var defaultOptions = {
      target: 'body',
      metaFields: [],
      trigger: '#uppy-select-files',
      inline: false,
      width: 750,
      height: 550,
      thumbnailWidth: 280,
      defaultTabIcon: defaultTabIcon,
      showLinkToFileUploadResult: true,
      showProgressDetails: false,
      hideUploadButton: false,
      hideRetryButton: false,
      hidePauseResumeCancelButtons: false,
      hideProgressAfterFinish: false,
      note: null,
      closeModalOnClickOutside: false,
      disableStatusBar: false,
      disableInformer: false,
      disableThumbnailGenerator: false,
      disablePageScrollWhenModalOpen: true,
      animateOpenClose: true,
      proudlyDisplayPoweredByUppy: true,
      onRequestCloseModal: function onRequestCloseModal() {
        return _this.closeModal();
      },
      locale: defaultLocale,
      browserBackButtonClose: false

      // merge default options with the ones set by user
    };_this.opts = _extends({}, defaultOptions, opts);

    _this.locale = _extends({}, defaultLocale, _this.opts.locale);
    _this.locale.strings = _extends({}, defaultLocale.strings, _this.opts.locale.strings);

    _this.translator = new Translator({ locale: _this.locale });
    _this.i18n = _this.translator.translate.bind(_this.translator);
    _this.i18nArray = _this.translator.translateArray.bind(_this.translator);

    _this.openModal = _this.openModal.bind(_this);
    _this.closeModal = _this.closeModal.bind(_this);
    _this.requestCloseModal = _this.requestCloseModal.bind(_this);
    _this.isModalOpen = _this.isModalOpen.bind(_this);

    _this.addTarget = _this.addTarget.bind(_this);
    _this.removeTarget = _this.removeTarget.bind(_this);
    _this.hideAllPanels = _this.hideAllPanels.bind(_this);
    _this.showPanel = _this.showPanel.bind(_this);
    _this.getFocusableNodes = _this.getFocusableNodes.bind(_this);
    _this.setFocusToFirstNode = _this.setFocusToFirstNode.bind(_this);
    _this.handlePopState = _this.handlePopState.bind(_this);
    _this.maintainFocus = _this.maintainFocus.bind(_this);

    _this.initEvents = _this.initEvents.bind(_this);
    _this.onKeydown = _this.onKeydown.bind(_this);
    _this.handleClickOutside = _this.handleClickOutside.bind(_this);
    _this.toggleFileCard = _this.toggleFileCard.bind(_this);
    _this.handleDrop = _this.handleDrop.bind(_this);
    _this.handlePaste = _this.handlePaste.bind(_this);
    _this.handleInputChange = _this.handleInputChange.bind(_this);
    _this.updateDashboardElWidth = _this.updateDashboardElWidth.bind(_this);
    _this.render = _this.render.bind(_this);
    _this.install = _this.install.bind(_this);
    return _this;
  }

  Dashboard.prototype.removeTarget = function removeTarget(plugin) {
    var pluginState = this.getPluginState();
    // filter out the one we want to remove
    var newTargets = pluginState.targets.filter(function (target) {
      return target.id !== plugin.id;
    });

    this.setPluginState({
      targets: newTargets
    });
  };

  Dashboard.prototype.addTarget = function addTarget(plugin) {
    var callerPluginId = plugin.id || plugin.constructor.name;
    var callerPluginName = plugin.title || callerPluginId;
    var callerPluginType = plugin.type;

    if (callerPluginType !== 'acquirer' && callerPluginType !== 'progressindicator' && callerPluginType !== 'presenter') {
      var msg = 'Dashboard: Modal can only be used by plugins of types: acquirer, progressindicator, presenter';
      this.uppy.log(msg);
      return;
    }

    var target = {
      id: callerPluginId,
      name: callerPluginName,
      type: callerPluginType
    };

    var state = this.getPluginState();
    var newTargets = state.targets.slice();
    newTargets.push(target);

    this.setPluginState({
      targets: newTargets
    });

    return this.el;
  };

  Dashboard.prototype.hideAllPanels = function hideAllPanels() {
    this.setPluginState({
      activePanel: false
    });
  };

  Dashboard.prototype.showPanel = function showPanel(id) {
    var _getPluginState = this.getPluginState(),
        targets = _getPluginState.targets;

    var activePanel = targets.filter(function (target) {
      return target.type === 'acquirer' && target.id === id;
    })[0];

    this.setPluginState({
      activePanel: activePanel
    });
  };

  Dashboard.prototype.requestCloseModal = function requestCloseModal() {
    if (this.opts.onRequestCloseModal) {
      return this.opts.onRequestCloseModal();
    } else {
      this.closeModal();
    }
  };

  Dashboard.prototype.getFocusableNodes = function getFocusableNodes() {
    var nodes = this.el.querySelectorAll(FOCUSABLE_ELEMENTS);
    return Object.keys(nodes).map(function (key) {
      return nodes[key];
    });
  };

  Dashboard.prototype.setFocusToFirstNode = function setFocusToFirstNode() {
    var focusableNodes = this.getFocusableNodes();
    if (focusableNodes.length) focusableNodes[0].focus();
  };

  Dashboard.prototype.updateBrowserHistory = function updateBrowserHistory() {
    // Ensure history state does not already contain our modal name to avoid double-pushing
    if (!history.state || !history.state[this.modalName]) {
      var _history$pushState;

      // Push to history so that the page is not lost on browser back button press
      history.pushState((_history$pushState = {}, _history$pushState[this.modalName] = true, _history$pushState), '');
    }

    // Listen for back button presses
    window.addEventListener('popstate', this.handlePopState, false);
  };

  Dashboard.prototype.handlePopState = function handlePopState(event) {
    // Close the modal if the history state no longer contains our modal name
    if (!event.state || !event.state[this.modalName]) {
      this.closeModal({ manualClose: false });
    }

    // When the browser back button is pressed and uppy is now the latest entry in the history but the modal is closed, fix the history by removing the uppy history entry
    // This occurs when another entry is added into the history state while the modal is open, and then the modal gets manually closed
    // Solves PR #575 (https://github.com/transloadit/uppy/pull/575)
    if (!this.isModalOpen() && event.state && event.state[this.modalName]) {
      history.go(-1);
    }
  };

  Dashboard.prototype.setFocusToBrowse = function setFocusToBrowse() {
    var browseBtn = this.el.querySelector('.uppy-Dashboard-browse');
    if (browseBtn) browseBtn.focus();
  };

  Dashboard.prototype.maintainFocus = function maintainFocus(event) {
    var focusableNodes = this.getFocusableNodes();
    var focusedItemIndex = focusableNodes.indexOf(document.activeElement);

    if (event.shiftKey && focusedItemIndex === 0) {
      focusableNodes[focusableNodes.length - 1].focus();
      event.preventDefault();
    }

    if (!event.shiftKey && focusedItemIndex === focusableNodes.length - 1) {
      focusableNodes[0].focus();
      event.preventDefault();
    }
  };

  Dashboard.prototype.openModal = function openModal() {
    this.setPluginState({
      isHidden: false
    });

    // save scroll position
    this.savedScrollPosition = window.scrollY;
    // save active element, so we can restore focus when modal is closed
    this.savedActiveElement = document.activeElement;

    if (this.opts.disablePageScrollWhenModalOpen) {
      document.body.classList.add('uppy-Dashboard-isFixed');
    }

    if (this.opts.browserBackButtonClose) {
      this.updateBrowserHistory();
    }

    // handle ESC and TAB keys in modal dialog
    document.addEventListener('keydown', this.onKeydown);

    this.rerender(this.uppy.getState());
    this.updateDashboardElWidth();
    this.setFocusToBrowse();
  };

  Dashboard.prototype.closeModal = function closeModal() {
    var _this2 = this;

    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var _opts$manualClose = opts.manualClose,
        manualClose = _opts$manualClose === undefined ? true : _opts$manualClose;

    if (this.opts.disablePageScrollWhenModalOpen) {
      document.body.classList.remove('uppy-Dashboard-isFixed');
    }

    if (this.opts.animateOpenClose) {
      this.setPluginState({
        isClosing: true
      });
      var handler = function handler() {
        _this2.setPluginState({
          isHidden: true,
          isClosing: false
        });
        _this2.el.removeEventListener('animationend', handler, false);
      };
      this.el.addEventListener('animationend', handler, false);
    } else {
      this.setPluginState({
        isHidden: true
      });
    }

    // handle ESC and TAB keys in modal dialog
    document.removeEventListener('keydown', this.onKeydown);

    this.savedActiveElement.focus();

    if (manualClose) {
      if (this.opts.browserBackButtonClose) {
        // Make sure that the latest entry in the history state is our modal name
        if (history.state && history.state[this.modalName]) {
          // Go back in history to clear out the entry we created (ultimately closing the modal)
          history.go(-1);
        }
      }
    }
  };

  Dashboard.prototype.isModalOpen = function isModalOpen() {
    return !this.getPluginState().isHidden || false;
  };

  Dashboard.prototype.onKeydown = function onKeydown(event) {
    // close modal on esc key press
    if (event.keyCode === ESC_KEY) this.requestCloseModal(event);
    // maintainFocus on tab key press
    if (event.keyCode === TAB_KEY) this.maintainFocus(event);
  };

  Dashboard.prototype.handleClickOutside = function handleClickOutside() {
    if (this.opts.closeModalOnClickOutside) this.requestCloseModal();
  };

  Dashboard.prototype.handlePaste = function handlePaste(ev) {
    var _this3 = this;

    var files = toArray(ev.clipboardData.items);
    files.forEach(function (file) {
      if (file.kind !== 'file') return;

      var blob = file.getAsFile();
      if (!blob) {
        _this3.uppy.log('[Dashboard] File pasted, but the file blob is empty');
        _this3.uppy.info('Error pasting file', 'error');
        return;
      }
      _this3.uppy.log('[Dashboard] File pasted');
      try {
        _this3.uppy.addFile({
          source: _this3.id,
          name: file.name,
          type: file.type,
          data: blob
        });
      } catch (err) {
        // Nothing, restriction errors handled in Core
      }
    });
  };

  Dashboard.prototype.handleInputChange = function handleInputChange(ev) {
    var _this4 = this;

    ev.preventDefault();
    var files = toArray(ev.target.files);

    files.forEach(function (file) {
      try {
        _this4.uppy.addFile({
          source: _this4.id,
          name: file.name,
          type: file.type,
          data: file
        });
      } catch (err) {
        // Nothing, restriction errors handled in Core
      }
    });
  };

  Dashboard.prototype.initEvents = function initEvents() {
    var _this5 = this;

    // Modal open button
    var showModalTrigger = findAllDOMElements(this.opts.trigger);
    if (!this.opts.inline && showModalTrigger) {
      showModalTrigger.forEach(function (trigger) {
        return trigger.addEventListener('click', _this5.openModal);
      });
    }

    if (!this.opts.inline && !showModalTrigger) {
      this.uppy.log('Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options unless you are planning to call openModal() method yourself');
    }

    // Drag Drop
    this.removeDragDropListener = dragDrop(this.el, function (files) {
      _this5.handleDrop(files);
    });

    this.updateDashboardElWidth();
    window.addEventListener('resize', this.updateDashboardElWidth);

    this.uppy.on('plugin-remove', this.removeTarget);
  };

  Dashboard.prototype.removeEvents = function removeEvents() {
    var _this6 = this;

    var showModalTrigger = findAllDOMElements(this.opts.trigger);
    if (!this.opts.inline && showModalTrigger) {
      showModalTrigger.forEach(function (trigger) {
        return trigger.removeEventListener('click', _this6.openModal);
      });
    }

    this.removeDragDropListener();
    window.removeEventListener('resize', this.updateDashboardElWidth);
    window.removeEventListener('popstate', this.handlePopState, false);
    this.uppy.off('plugin-remove', this.removeTarget);
  };

  Dashboard.prototype.updateDashboardElWidth = function updateDashboardElWidth() {
    var dashboardEl = this.el.querySelector('.uppy-Dashboard-inner');
    this.uppy.log('Dashboard width: ' + dashboardEl.offsetWidth);

    this.setPluginState({
      containerWidth: dashboardEl.offsetWidth
    });
  };

  Dashboard.prototype.toggleFileCard = function toggleFileCard(fileId) {
    this.setPluginState({
      fileCardFor: fileId || false
    });
  };

  Dashboard.prototype.handleDrop = function handleDrop(files) {
    var _this7 = this;

    this.uppy.log('[Dashboard] Files were dropped');

    files.forEach(function (file) {
      try {
        _this7.uppy.addFile({
          source: _this7.id,
          name: file.name,
          type: file.type,
          data: file
        });
      } catch (err) {
        // Nothing, restriction errors handled in Core
      }
    });
  };

  Dashboard.prototype.render = function render(state) {
    var _this8 = this;

    var pluginState = this.getPluginState();
    var files = state.files,
        capabilities = state.capabilities;

    var newFiles = Object.keys(files).filter(function (file) {
      return !files[file].progress.uploadStarted;
    });
    var inProgressFiles = Object.keys(files).filter(function (file) {
      return !files[file].progress.uploadComplete && files[file].progress.uploadStarted && !files[file].isPaused;
    });

    var inProgressFilesArray = [];
    inProgressFiles.forEach(function (file) {
      inProgressFilesArray.push(files[file]);
    });

    var totalSize = 0;
    var totalUploadedSize = 0;
    inProgressFilesArray.forEach(function (file) {
      totalSize = totalSize + (file.progress.bytesTotal || 0);
      totalUploadedSize = totalUploadedSize + (file.progress.bytesUploaded || 0);
    });
    totalSize = prettyBytes(totalSize);
    totalUploadedSize = prettyBytes(totalUploadedSize);

    var attachRenderFunctionToTarget = function attachRenderFunctionToTarget(target) {
      var plugin = _this8.uppy.getPlugin(target.id);
      return _extends({}, target, {
        icon: plugin.icon || _this8.opts.defaultTabIcon,
        render: plugin.render
      });
    };

    var isSupported = function isSupported(target) {
      var plugin = _this8.uppy.getPlugin(target.id);
      // If the plugin does not provide a `supported` check, assume the plugin works everywhere.
      if (typeof plugin.isSupported !== 'function') {
        return true;
      }
      return plugin.isSupported();
    };

    var acquirers = pluginState.targets.filter(function (target) {
      return target.type === 'acquirer' && isSupported(target);
    }).map(attachRenderFunctionToTarget);

    var progressindicators = pluginState.targets.filter(function (target) {
      return target.type === 'progressindicator';
    }).map(attachRenderFunctionToTarget);

    var startUpload = function startUpload(ev) {
      _this8.uppy.upload().catch(function (err) {
        // Log error.
        _this8.uppy.log(err.stack || err.message || err);
      });
    };

    var cancelUpload = function cancelUpload(fileID) {
      _this8.uppy.emit('upload-cancel', fileID);
      _this8.uppy.removeFile(fileID);
    };

    var saveFileCard = function saveFileCard(meta, fileID) {
      _this8.uppy.setFileMeta(fileID, meta);
      _this8.toggleFileCard();
    };

    return DashboardUI({
      state: state,
      modal: pluginState,
      newFiles: newFiles,
      files: files,
      totalFileCount: Object.keys(files).length,
      totalProgress: state.totalProgress,
      acquirers: acquirers,
      activePanel: pluginState.activePanel,
      animateOpenClose: this.opts.animateOpenClose,
      isClosing: pluginState.isClosing,
      getPlugin: this.uppy.getPlugin,
      progressindicators: progressindicators,
      autoProceed: this.uppy.opts.autoProceed,
      hideUploadButton: this.opts.hideUploadButton,
      hideRetryButton: this.opts.hideRetryButton,
      hidePauseResumeCancelButtons: this.opts.hidePauseResumeCancelButtons,
      id: this.id,
      closeModal: this.requestCloseModal,
      handleClickOutside: this.handleClickOutside,
      handleInputChange: this.handleInputChange,
      handlePaste: this.handlePaste,
      inline: this.opts.inline,
      showPanel: this.showPanel,
      hideAllPanels: this.hideAllPanels,
      log: this.uppy.log,
      i18n: this.i18n,
      i18nArray: this.i18nArray,
      addFile: this.uppy.addFile,
      removeFile: this.uppy.removeFile,
      info: this.uppy.info,
      note: this.opts.note,
      metaFields: pluginState.metaFields,
      resumableUploads: capabilities.resumableUploads || false,
      bundled: capabilities.bundled || false,
      startUpload: startUpload,
      pauseUpload: this.uppy.pauseResume,
      retryUpload: this.uppy.retryUpload,
      cancelUpload: cancelUpload,
      fileCardFor: pluginState.fileCardFor,
      toggleFileCard: this.toggleFileCard,
      saveFileCard: saveFileCard,
      updateDashboardElWidth: this.updateDashboardElWidth,
      width: this.opts.width,
      height: this.opts.height,
      showLinkToFileUploadResult: this.opts.showLinkToFileUploadResult,
      proudlyDisplayPoweredByUppy: this.opts.proudlyDisplayPoweredByUppy,
      currentWidth: pluginState.containerWidth,
      isWide: pluginState.containerWidth > 400,
      isTargetDOMEl: this.isTargetDOMEl,
      allowedFileTypes: this.uppy.opts.restrictions.allowedFileTypes,
      maxNumberOfFiles: this.uppy.opts.restrictions.maxNumberOfFiles
    });
  };

  Dashboard.prototype.discoverProviderPlugins = function discoverProviderPlugins() {
    var _this9 = this;

    this.uppy.iteratePlugins(function (plugin) {
      if (plugin && !plugin.target && plugin.opts && plugin.opts.target === _this9.constructor) {
        _this9.addTarget(plugin);
      }
    });
  };

  Dashboard.prototype.install = function install() {
    var _this10 = this;

    // Set default state for Dashboard
    this.setPluginState({
      isHidden: true,
      showFileCard: false,
      activePanel: false,
      metaFields: this.opts.metaFields,
      targets: []
    });

    var target = this.opts.target;
    if (target) {
      this.mount(target, this);
    }

    var plugins = this.opts.plugins || [];
    plugins.forEach(function (pluginID) {
      var plugin = _this10.uppy.getPlugin(pluginID);
      if (plugin) plugin.mount(_this10, plugin);
    });

    if (!this.opts.disableStatusBar) {
      this.uppy.use(StatusBar, {
        id: this.id + ':StatusBar',
        target: this,
        hideUploadButton: this.opts.hideUploadButton,
        hideRetryButton: this.opts.hideRetryButton,
        hidePauseResumeCancelButtons: this.opts.hidePauseResumeCancelButtons,
        showProgressDetails: this.opts.showProgressDetails,
        hideAfterFinish: this.opts.hideProgressAfterFinish,
        locale: this.opts.locale
      });
    }

    if (!this.opts.disableInformer) {
      this.uppy.use(Informer, {
        id: this.id + ':Informer',
        target: this
      });
    }

    if (!this.opts.disableThumbnailGenerator) {
      this.uppy.use(ThumbnailGenerator, {
        id: this.id + ':ThumbnailGenerator',
        thumbnailWidth: this.opts.thumbnailWidth
      });
    }

    this.discoverProviderPlugins();

    this.initEvents();
  };

  Dashboard.prototype.uninstall = function uninstall() {
    var _this11 = this;

    if (!this.opts.disableInformer) {
      var informer = this.uppy.getPlugin(this.id + ':Informer');
      // Checking if this plugin exists, in case it was removed by uppy-core
      // before the Dashboard was.
      if (informer) this.uppy.removePlugin(informer);
    }

    if (!this.opts.disableStatusBar) {
      var statusBar = this.uppy.getPlugin(this.id + ':StatusBar');
      if (statusBar) this.uppy.removePlugin(statusBar);
    }

    if (!this.opts.disableThumbnailGenerator) {
      var thumbnail = this.uppy.getPlugin(this.id + ':ThumbnailGenerator');
      if (thumbnail) this.uppy.removePlugin(thumbnail);
    }

    var plugins = this.opts.plugins || [];
    plugins.forEach(function (pluginID) {
      var plugin = _this11.uppy.getPlugin(pluginID);
      if (plugin) plugin.unmount();
    });

    this.unmount();
    this.removeEvents();
  };

  return Dashboard;
}(Plugin);

},{"./../../core":25,"./../../informer":42,"./../../status-bar":59,"./../../thumbnail-generator":61,"./../../utils/lib/Translator":65,"./../../utils/lib/findAllDOMElements":69,"./../../utils/lib/toArray":88,"./Dashboard":27,"./icons":36,"drag-drop":5,"prettier-bytes":12}],38:[function(require,module,exports){
module.exports = function truncateString(str, length) {
  if (str.length > length) {
    return str.substr(0, length / 2) + '...' + str.substr(str.length - length / 4, str.length);
  }
  return str;

  // more precise version if needed
  // http://stackoverflow.com/a/831583
};

},{}],39:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

module.exports = {
  folder: function folder() {
    return h("svg", { "aria-hidden": "true", "class": "UppyIcon", style: { width: 16, marginRight: 3 }, viewBox: "0 0 276.157 276.157" }, h("path", { d: "M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z" }));
  },
  file: function file() {
    return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: 11, height: 14.5, viewBox: "0 0 44 58" }, h("path", { d: "M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z" }));
  }
};

},{"preact":11}],40:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('./../../core'),
    Plugin = _require.Plugin;

var _require2 = require('./../../server-utils'),
    Provider = _require2.Provider;

var ProviderViews = require('./../../provider-views');
var icons = require('./icons');

var _require3 = require('preact'),
    h = _require3.h;

module.exports = function (_Plugin) {
  _inherits(Dropbox, _Plugin);

  function Dropbox(uppy, opts) {
    _classCallCheck(this, Dropbox);

    var _this = _possibleConstructorReturn(this, _Plugin.call(this, uppy, opts));

    _this.type = 'acquirer';
    _this.id = _this.opts.id || 'Dropbox';
    _this.title = 'Dropbox';
    _this.icon = function () {
      return h('svg', { 'class': 'UppyIcon', width: '128', height: '118', viewBox: '0 0 128 118' }, h('path', { d: 'M38.145.777L1.108 24.96l25.608 20.507 37.344-23.06z' }), h('path', { d: 'M1.108 65.975l37.037 24.183L64.06 68.525l-37.343-23.06zM64.06 68.525l25.917 21.633 37.036-24.183-25.61-20.51z' }), h('path', { d: 'M127.014 24.96L89.977.776 64.06 22.407l37.345 23.06zM64.136 73.18l-25.99 21.567-11.122-7.262v8.142l37.112 22.256 37.114-22.256v-8.142l-11.12 7.262z' }));
    };

    // writing out the key explicitly for readability the key used to store
    // the provider instance must be equal to this.id.
    _this[_this.id] = new Provider(uppy, {
      serverUrl: _this.opts.serverUrl,
      serverHeaders: _this.opts.serverHeaders,
      provider: 'dropbox'
    });

    _this.files = [];

    _this.onAuth = _this.onAuth.bind(_this);
    _this.render = _this.render.bind(_this);

    // set default options
    var defaultOptions = {};

    // merge default options with the ones set by user
    _this.opts = _extends({}, defaultOptions, opts);
    _this.opts.serverPattern = opts.serverPattern || opts.serverUrl;
    return _this;
  }

  Dropbox.prototype.install = function install() {
    this.view = new ProviderViews(this);
    // Set default state for Dropbox
    this.setPluginState({
      authenticated: false,
      files: [],
      folders: [],
      directories: [],
      activeRow: -1,
      filterInput: '',
      isSearchVisible: false
    });

    var target = this.opts.target;
    if (target) {
      this.mount(target, this);
    }
  };

  Dropbox.prototype.uninstall = function uninstall() {
    this.view.tearDown();
    this.unmount();
  };

  Dropbox.prototype.onAuth = function onAuth(authenticated) {
    this.setPluginState({ authenticated: authenticated });
    if (authenticated) {
      this.view.getFolder();
    }
  };

  Dropbox.prototype.getUsername = function getUsername(data) {
    return data.user_email;
  };

  Dropbox.prototype.isFolder = function isFolder(item) {
    return item['.tag'] === 'folder';
  };

  Dropbox.prototype.getItemData = function getItemData(item) {
    return item;
  };

  Dropbox.prototype.getItemIcon = function getItemIcon(item) {
    return icons[item['.tag']]();
  };

  Dropbox.prototype.getItemSubList = function getItemSubList(item) {
    return item.entries;
  };

  Dropbox.prototype.getItemName = function getItemName(item) {
    return item.name || '';
  };

  Dropbox.prototype.getMimeType = function getMimeType(item) {
    // mime types aren't supported.
    return null;
  };

  Dropbox.prototype.getItemId = function getItemId(item) {
    return item.id;
  };

  Dropbox.prototype.getItemRequestPath = function getItemRequestPath(item) {
    return encodeURIComponent(item.path_lower);
  };

  Dropbox.prototype.getItemModifiedDate = function getItemModifiedDate(item) {
    return item.server_modified;
  };

  Dropbox.prototype.getItemThumbnailUrl = function getItemThumbnailUrl(item) {
    return this.opts.serverUrl + '/' + this.Dropbox.id + '/thumbnail/' + this.getItemRequestPath(item);
  };

  Dropbox.prototype.render = function render(state) {
    return this.view.render(state);
  };

  return Dropbox;
}(Plugin);

},{"./../../core":25,"./../../provider-views":52,"./../../server-utils":56,"./icons":39,"preact":11}],41:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('./../../core'),
    Plugin = _require.Plugin;

var _require2 = require('./../../server-utils'),
    Provider = _require2.Provider;

var ProviderViews = require('./../../provider-views');

var _require3 = require('preact'),
    h = _require3.h;

module.exports = function (_Plugin) {
  _inherits(GoogleDrive, _Plugin);

  function GoogleDrive(uppy, opts) {
    _classCallCheck(this, GoogleDrive);

    var _this = _possibleConstructorReturn(this, _Plugin.call(this, uppy, opts));

    _this.type = 'acquirer';
    _this.id = _this.opts.id || 'GoogleDrive';
    _this.title = 'Google Drive';
    _this.icon = function () {
      return h('svg', { 'aria-hidden': 'true', 'class': 'UppyIcon UppyModalTab-icon', width: '28', height: '28', viewBox: '0 0 16 16' }, h('path', { d: 'M2.955 14.93l2.667-4.62H16l-2.667 4.62H2.955zm2.378-4.62l-2.666 4.62L0 10.31l5.19-8.99 2.666 4.62-2.523 4.37zm10.523-.25h-5.333l-5.19-8.99h5.334l5.19 8.99z' }));
    };

    _this[_this.id] = new Provider(uppy, {
      serverUrl: _this.opts.serverUrl,
      serverHeaders: _this.opts.serverHeaders,
      provider: 'drive',
      authProvider: 'google'
    });

    _this.files = [];

    _this.onAuth = _this.onAuth.bind(_this);
    _this.render = _this.render.bind(_this);

    // set default options
    var defaultOptions = {};

    // merge default options with the ones set by user
    _this.opts = _extends({}, defaultOptions, opts);
    _this.opts.serverPattern = opts.serverPattern || opts.serverUrl;
    return _this;
  }

  GoogleDrive.prototype.install = function install() {
    this.view = new ProviderViews(this);
    // Set default state for Google Drive
    this.setPluginState({
      authenticated: false,
      files: [],
      folders: [],
      directories: [],
      activeRow: -1,
      filterInput: '',
      isSearchVisible: false
    });

    var target = this.opts.target;
    if (target) {
      this.mount(target, this);
    }
  };

  GoogleDrive.prototype.uninstall = function uninstall() {
    this.view.tearDown();
    this.unmount();
  };

  GoogleDrive.prototype.onAuth = function onAuth(authenticated) {
    this.setPluginState({ authenticated: authenticated });
    if (authenticated) {
      this.view.getFolder('root');
    }
  };

  GoogleDrive.prototype.getUsername = function getUsername(data) {
    for (var _iterator = data.items, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
      var _ref;

      if (_isArray) {
        if (_i >= _iterator.length) break;
        _ref = _iterator[_i++];
      } else {
        _i = _iterator.next();
        if (_i.done) break;
        _ref = _i.value;
      }

      var item = _ref;

      if (item.userPermission.role === 'owner') {
        for (var _iterator2 = item.owners, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var owner = _ref2;

          if (owner.isAuthenticatedUser) {
            return owner.emailAddress;
          }
        }
      }
    }
  };

  GoogleDrive.prototype.isFolder = function isFolder(item) {
    return item.mimeType === 'application/vnd.google-apps.folder';
  };

  GoogleDrive.prototype.getItemData = function getItemData(item) {
    return _extends({}, item, { size: parseFloat(item.fileSize) });
  };

  GoogleDrive.prototype.getItemIcon = function getItemIcon(item) {
    return h('img', { src: item.iconLink });
  };

  GoogleDrive.prototype.getItemSubList = function getItemSubList(item) {
    var _this2 = this;

    return item.items.filter(function (i) {
      return _this2.isFolder(i) || !i.mimeType.startsWith('application/vnd.google');
    });
  };

  GoogleDrive.prototype.getItemName = function getItemName(item) {
    return item.title ? item.title : '/';
  };

  GoogleDrive.prototype.getMimeType = function getMimeType(item) {
    return item.mimeType;
  };

  GoogleDrive.prototype.getItemId = function getItemId(item) {
    return item.id;
  };

  GoogleDrive.prototype.getItemRequestPath = function getItemRequestPath(item) {
    return this.getItemId(item);
  };

  GoogleDrive.prototype.getItemModifiedDate = function getItemModifiedDate(item) {
    return item.modifiedByMeDate;
  };

  GoogleDrive.prototype.getItemThumbnailUrl = function getItemThumbnailUrl(item) {
    return this.opts.serverUrl + '/' + this.GoogleDrive.id + '/thumbnail/' + this.getItemRequestPath(item);
  };

  GoogleDrive.prototype.render = function render(state) {
    return this.view.render(state);
  };

  return GoogleDrive;
}(Plugin);

},{"./../../core":25,"./../../provider-views":52,"./../../server-utils":56,"preact":11}],42:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('./../../core'),
    Plugin = _require.Plugin;

var _require2 = require('preact'),
    h = _require2.h;

/**
 * Informer
 * Shows rad message bubbles
 * used like this: `uppy.info('hello world', 'info', 5000)`
 * or for errors: `uppy.info('Error uploading img.jpg', 'error', 5000)`
 *
 */

module.exports = function (_Plugin) {
  _inherits(Informer, _Plugin);

  function Informer(uppy, opts) {
    _classCallCheck(this, Informer);

    var _this = _possibleConstructorReturn(this, _Plugin.call(this, uppy, opts));

    _this.type = 'progressindicator';
    _this.id = _this.opts.id || 'Informer';
    _this.title = 'Informer';

    // set default options
    var defaultOptions = {
      typeColors: {
        info: {
          text: '#fff',
          bg: '#000'
        },
        warning: {
          text: '#fff',
          bg: '#F6A623'
        },
        error: {
          text: '#fff',
          bg: '#D32F2F'
        },
        success: {
          text: '#fff',
          bg: '#1BB240'
        }

        // merge default options with the ones set by user
      } };_this.opts = _extends({}, defaultOptions, opts);

    _this.render = _this.render.bind(_this);
    return _this;
  }

  Informer.prototype.render = function render(state) {
    var _state$info = state.info,
        isHidden = _state$info.isHidden,
        type = _state$info.type,
        message = _state$info.message,
        details = _state$info.details;

    var style = {
      backgroundColor: this.opts.typeColors[type].bg,
      color: this.opts.typeColors[type].text
    };

    return h('div', { 'class': 'uppy uppy-Informer',
      style: style,
      'aria-hidden': isHidden }, h('p', { role: 'alert' }, message, ' ', details && h('span', { style: { color: this.opts.typeColors[type].bg },
      'aria-label': details,
      'data-microtip-position': 'top',
      'data-microtip-size': 'large',
      role: 'tooltip' }, '?')));
  };

  Informer.prototype.install = function install() {
    var target = this.opts.target;
    if (target) {
      this.mount(target, this);
    }
  };

  return Informer;
}(Plugin);

},{"./../../core":25,"preact":11}],43:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('./../../core'),
    Plugin = _require.Plugin;

var _require2 = require('./../../server-utils'),
    Provider = _require2.Provider;

var ProviderViews = require('./../../provider-views');

var _require3 = require('preact'),
    h = _require3.h;

module.exports = function (_Plugin) {
  _inherits(Instagram, _Plugin);

  function Instagram(uppy, opts) {
    _classCallCheck(this, Instagram);

    var _this = _possibleConstructorReturn(this, _Plugin.call(this, uppy, opts));

    _this.type = 'acquirer';
    _this.id = _this.opts.id || 'Instagram';
    _this.title = 'Instagram';
    _this.icon = function () {
      return h('svg', { 'aria-hidden': 'true', 'class': 'UppyIcon', width: '28', height: '28', viewBox: '0 0 512 512' }, h('path', { d: 'M256,49.471c67.266,0,75.233.257,101.8,1.469,24.562,1.121,37.9,5.224,46.778,8.674a78.052,78.052,0,0,1,28.966,18.845,78.052,78.052,0,0,1,18.845,28.966c3.45,8.877,7.554,22.216,8.674,46.778,1.212,26.565,1.469,34.532,1.469,101.8s-0.257,75.233-1.469,101.8c-1.121,24.562-5.225,37.9-8.674,46.778a83.427,83.427,0,0,1-47.811,47.811c-8.877,3.45-22.216,7.554-46.778,8.674-26.56,1.212-34.527,1.469-101.8,1.469s-75.237-.257-101.8-1.469c-24.562-1.121-37.9-5.225-46.778-8.674a78.051,78.051,0,0,1-28.966-18.845,78.053,78.053,0,0,1-18.845-28.966c-3.45-8.877-7.554-22.216-8.674-46.778-1.212-26.564-1.469-34.532-1.469-101.8s0.257-75.233,1.469-101.8c1.121-24.562,5.224-37.9,8.674-46.778A78.052,78.052,0,0,1,78.458,78.458a78.053,78.053,0,0,1,28.966-18.845c8.877-3.45,22.216-7.554,46.778-8.674,26.565-1.212,34.532-1.469,101.8-1.469m0-45.391c-68.418,0-77,.29-103.866,1.516-26.815,1.224-45.127,5.482-61.151,11.71a123.488,123.488,0,0,0-44.62,29.057A123.488,123.488,0,0,0,17.3,90.982C11.077,107.007,6.819,125.319,5.6,152.134,4.369,179,4.079,187.582,4.079,256S4.369,333,5.6,359.866c1.224,26.815,5.482,45.127,11.71,61.151a123.489,123.489,0,0,0,29.057,44.62,123.486,123.486,0,0,0,44.62,29.057c16.025,6.228,34.337,10.486,61.151,11.71,26.87,1.226,35.449,1.516,103.866,1.516s77-.29,103.866-1.516c26.815-1.224,45.127-5.482,61.151-11.71a128.817,128.817,0,0,0,73.677-73.677c6.228-16.025,10.486-34.337,11.71-61.151,1.226-26.87,1.516-35.449,1.516-103.866s-0.29-77-1.516-103.866c-1.224-26.815-5.482-45.127-11.71-61.151a123.486,123.486,0,0,0-29.057-44.62A123.487,123.487,0,0,0,421.018,17.3C404.993,11.077,386.681,6.819,359.866,5.6,333,4.369,324.418,4.079,256,4.079h0Z' }), h('path', { d: 'M256,126.635A129.365,129.365,0,1,0,385.365,256,129.365,129.365,0,0,0,256,126.635Zm0,213.338A83.973,83.973,0,1,1,339.974,256,83.974,83.974,0,0,1,256,339.973Z' }), h('circle', { cx: '390.476', cy: '121.524', r: '30.23' }));
    };

    _this[_this.id] = new Provider(uppy, {
      serverUrl: _this.opts.serverUrl,
      serverHeaders: _this.opts.serverHeaders,
      provider: 'instagram',
      authProvider: 'instagram'
    });

    _this.files = [];

    _this.onAuth = _this.onAuth.bind(_this);
    _this.render = _this.render.bind(_this);

    // set default options
    var defaultOptions = {};

    // merge default options with the ones set by user
    _this.opts = _extends({}, defaultOptions, opts);
    _this.opts.serverPattern = opts.serverPattern || opts.serverUrl;
    return _this;
  }

  Instagram.prototype.install = function install() {
    this.view = new ProviderViews(this, {
      viewType: 'grid',
      showTitles: false,
      showFilter: false,
      showBreadcrumbs: false
    });
    // Set default state for Instagram
    this.setPluginState({
      authenticated: false,
      files: [],
      folders: [],
      directories: [],
      activeRow: -1,
      filterInput: '',
      isSearchVisible: false
    });

    var target = this.opts.target;
    if (target) {
      this.mount(target, this);
    }
  };

  Instagram.prototype.uninstall = function uninstall() {
    this.view.tearDown();
    this.unmount();
  };

  Instagram.prototype.onAuth = function onAuth(authenticated) {
    this.setPluginState({ authenticated: authenticated });
    if (authenticated) {
      this.view.getFolder('recent');
    }
  };

  Instagram.prototype.getUsername = function getUsername(data) {
    return data.data[0].user.username;
  };

  Instagram.prototype.isFolder = function isFolder(item) {
    return false;
  };

  Instagram.prototype.getItemData = function getItemData(item) {
    return item;
  };

  Instagram.prototype.getItemIcon = function getItemIcon(item) {
    if (!item.images) {
      return h('svg', { viewBox: '0 0 58 58', opacity: '0.6' }, h('path', { d: 'M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z' }), h('path', { d: 'M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z' }));
    }
    return h('img', { src: item.images.low_resolution.url });
  };

  Instagram.prototype.getItemSubList = function getItemSubList(item) {
    var subItems = [];
    item.data.forEach(function (subItem) {
      if (subItem.carousel_media) {
        subItem.carousel_media.forEach(function (i, index) {
          var id = subItem.id,
              created_time = subItem.created_time;

          var newSubItem = _extends({}, i, { id: id, created_time: created_time });
          newSubItem.carousel_id = index;
          subItems.push(newSubItem);
        });
      } else {
        subItems.push(subItem);
      }
    });
    return subItems;
  };

  Instagram.prototype.getItemName = function getItemName(item) {
    if (item && item['created_time']) {
      var ext = item.type === 'video' ? 'mp4' : 'jpeg';
      var date = new Date(item['created_time'] * 1000);
      date = date.toLocaleDateString([], {
        year: 'numeric',
        month: 'short',
        day: 'numeric',
        hour: 'numeric',
        minute: 'numeric'
      });
      // adding both date and carousel_id, so the name is unique
      return 'Instagram ' + date + ' ' + (item.carousel_id || '') + '.' + ext;
    }
    return '';
  };

  Instagram.prototype.getMimeType = function getMimeType(item) {
    return item.type === 'video' ? 'video/mp4' : 'image/jpeg';
  };

  Instagram.prototype.getItemId = function getItemId(item) {
    return '' + item.id + (item.carousel_id || '');
  };

  Instagram.prototype.getItemRequestPath = function getItemRequestPath(item) {
    var suffix = isNaN(item.carousel_id) ? '' : '?carousel_id=' + item.carousel_id;
    return '' + item.id + suffix;
  };

  Instagram.prototype.getItemModifiedDate = function getItemModifiedDate(item) {
    return item.created_time;
  };

  Instagram.prototype.getItemThumbnailUrl = function getItemThumbnailUrl(item) {
    return item.images.thumbnail.url;
  };

  Instagram.prototype.getNextPagePath = function getNextPagePath() {
    var _getPluginState = this.getPluginState(),
        files = _getPluginState.files;

    return 'recent?max_id=' + this.getItemId(files[files.length - 1]);
  };

  Instagram.prototype.render = function render(state) {
    return this.view.render(state);
  };

  return Instagram;
}(Plugin);

},{"./../../core":25,"./../../provider-views":52,"./../../server-utils":56,"preact":11}],44:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var LoaderView = require('./Loader');

var _require = require('preact'),
    h = _require.h,
    Component = _require.Component;

var AuthBlock = function (_Component) {
  _inherits(AuthBlock, _Component);

  function AuthBlock() {
    _classCallCheck(this, AuthBlock);

    return _possibleConstructorReturn(this, _Component.apply(this, arguments));
  }

  AuthBlock.prototype.componentDidMount = function componentDidMount() {
    var _this2 = this;

    setTimeout(function () {
      if (!_this2.connectButton) return;
      _this2.connectButton.focus({ preventScroll: true });
    }, 150);
  };

  AuthBlock.prototype.render = function render() {
    var _this3 = this;

    return h('div', { 'class': 'uppy-Provider-auth' }, h('div', { 'class': 'uppy-Provider-authIcon' }, this.props.pluginIcon()), h('h1', { 'class': 'uppy-Provider-authTitle' }, 'Please authenticate with ', h('span', { 'class': 'uppy-Provider-authTitleName' }, this.props.pluginName), h('br', null), ' to select files'), h('button', {
      type: 'button',
      'class': 'uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn',
      onclick: this.props.handleAuth,
      ref: function ref(el) {
        _this3.connectButton = el;
      }
    }, 'Connect to ', this.props.pluginName), this.props.demo && h('button', { 'class': 'uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn', onclick: this.props.handleDemoAuth }, 'Proceed with Demo Account'));
  };

  return AuthBlock;
}(Component);

var AuthView = function (_Component2) {
  _inherits(AuthView, _Component2);

  function AuthView() {
    _classCallCheck(this, AuthView);

    return _possibleConstructorReturn(this, _Component2.apply(this, arguments));
  }

  AuthView.prototype.componentDidMount = function componentDidMount() {
    this.props.checkAuth();
  };

  AuthView.prototype.render = function render() {
    return h('div', { style: { height: '100%' } }, this.props.checkAuthInProgress ? h(LoaderView, null) : h(AuthBlock, this.props));
  };

  return AuthView;
}(Component);

module.exports = AuthView;

},{"./Loader":51,"preact":11}],45:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

var Breadcrumb = function Breadcrumb(props) {
  return h("li", null, h("button", { type: "button", onclick: props.getFolder }, props.title));
};

module.exports = function (props) {
  return h("ul", { "class": "uppy-Provider-breadcrumbs" }, props.directories.map(function (directory, i) {
    return Breadcrumb({
      getFolder: function getFolder() {
        return props.getFolder(directory.id);
      },
      title: i === 0 ? props.title : directory.title
    });
  }));
};

},{"preact":11}],46:[function(require,module,exports){
var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

var classNames = require('classnames');
var Breadcrumbs = require('./Breadcrumbs');
var Filter = require('./Filter');
var Table = require('./ItemList');
var FooterActions = require('./FooterActions');

var _require = require('preact'),
    h = _require.h;

var Browser = function Browser(props) {
  var filteredFolders = props.folders;
  var filteredFiles = props.files;

  if (props.filterInput !== '') {
    filteredFolders = props.filterItems(props.folders);
    filteredFiles = props.filterItems(props.files);
  }

  var selected = props.currentSelection.length;

  return h('div', { 'class': classNames('uppy-ProviderBrowser', 'uppy-ProviderBrowser-viewType--' + props.viewType) }, h('div', { 'class': 'uppy-ProviderBrowser-header' }, h('div', { 'class': classNames('uppy-ProviderBrowser-headerBar', !props.showBreadcrumbs && 'uppy-ProviderBrowser-headerBar--simple') }, h('div', { 'class': 'uppy-Provider-breadcrumbsIcon' }, props.pluginIcon && props.pluginIcon()), props.showBreadcrumbs && Breadcrumbs({
    getFolder: props.getFolder,
    directories: props.directories,
    title: props.title
  }), h('span', { 'class': 'uppy-ProviderBrowser-user' }, props.username), h('button', { type: 'button', onclick: props.logout, 'class': 'uppy-ProviderBrowser-userLogout' }, props.i18n('logOut')))), props.showFilter && h(Filter, props), h(Table, {
    columns: [{
      name: 'Name',
      key: 'title'
    }],
    folders: filteredFolders,
    files: filteredFiles,
    activeRow: props.isActiveRow,
    sortByTitle: props.sortByTitle,
    sortByDate: props.sortByDate,
    isChecked: props.isChecked,
    handleFolderClick: props.getNextFolder,
    toggleCheckbox: props.toggleCheckbox,
    getItemName: props.getItemName,
    getItemIcon: props.getItemIcon,
    handleScroll: props.handleScroll,
    title: props.title,
    showTitles: props.showTitles,
    getItemId: props.getItemId,
    i18n: props.i18n
  }), selected > 0 && h(FooterActions, _extends({ selected: selected }, props)));
};

module.exports = Browser;

},{"./Breadcrumbs":45,"./Filter":47,"./FooterActions":48,"./ItemList":50,"classnames":1,"preact":11}],47:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('preact'),
    h = _require.h,
    Component = _require.Component;

module.exports = function (_Component) {
  _inherits(Filter, _Component);

  function Filter(props) {
    _classCallCheck(this, Filter);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.isEmpty = true;
    _this.handleKeyPress = _this.handleKeyPress.bind(_this);
    _this.handleClear = _this.handleClear.bind(_this);
    return _this;
  }

  // componentDidMount () {
  //   this.isEmpty = true
  //   // this.input.focus()
  // }

  Filter.prototype.handleKeyPress = function handleKeyPress(ev) {
    if (ev.keyCode === 13) {
      ev.stopPropagation();
      ev.preventDefault();
      return;
    }
    this.isEmpty = !this.input.value.length > 0;
    this.props.filterQuery(ev);
  };

  Filter.prototype.handleClear = function handleClear(ev) {
    this.input.value = '';
    this.props.filterQuery();
  };

  Filter.prototype.render = function render() {
    var _this2 = this;

    return h('div', { 'class': 'uppy-u-reset uppy-ProviderBrowser-search' }, h('svg', { 'class': 'UppyIcon uppy-ProviderBrowser-searchIcon', viewBox: '0 0 100 100' }, h('path', { d: 'M87.533 80.03L62.942 55.439c3.324-4.587 5.312-10.207 5.312-16.295 0-.312-.043-.611-.092-.908.05-.301.093-.605.093-.922 0-15.36-12.497-27.857-27.857-27.857-.273 0-.536.043-.799.08-.265-.037-.526-.08-.799-.08-15.361 0-27.858 12.497-27.858 27.857 0 .312.042.611.092.909a5.466 5.466 0 0 0-.093.921c0 15.36 12.496 27.858 27.857 27.858.273 0 .535-.043.8-.081.263.038.524.081.798.081 5.208 0 10.071-1.464 14.245-3.963L79.582 87.98a5.603 5.603 0 0 0 3.976 1.647 5.621 5.621 0 0 0 3.975-9.597zM39.598 55.838c-.265-.038-.526-.081-.8-.081-9.16 0-16.612-7.452-16.612-16.612 0-.312-.042-.611-.092-.908.051-.301.093-.605.093-.922 0-9.16 7.453-16.612 16.613-16.612.272 0 .534-.042.799-.079.263.037.525.079.799.079 9.16 0 16.612 7.452 16.612 16.612 0 .312.043.611.092.909-.05.301-.094.604-.094.921 0 9.16-7.452 16.612-16.612 16.612-.274 0-.536.043-.798.081z' })), h('input', {
      'class': 'uppy-u-reset uppy-ProviderBrowser-searchInput',
      type: 'text',
      placeholder: 'Filter',
      'aria-label': 'Filter',
      onkeyup: this.handleKeyPress,
      onkeydown: this.handleKeyPress,
      onkeypress: this.handleKeyPress,
      value: this.props.filterInput,
      ref: function ref(input) {
        _this2.input = input;
      } }), !this.isEmpty && h('button', {
      'class': 'uppy-u-reset uppy-ProviderBrowser-searchClose',
      type: 'button',
      onclick: this.handleClear }, h('svg', { 'class': 'UppyIcon', viewBox: '0 0 19 19' }, h('path', { d: 'M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z' }))));
  };

  return Filter;
}(Component);

},{"preact":11}],48:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

module.exports = function (props) {
  return h("div", { "class": "uppy-ProviderBrowser-footer" }, h("button", { "class": "uppy-u-reset uppy-c-btn uppy-c-btn-primary", onclick: props.done }, props.i18n('selectXFiles', {
    smart_count: props.selected
  })), h("button", { "class": "uppy-u-reset uppy-c-btn uppy-c-btn-link", onclick: props.cancel }, props.i18n('cancel')));
};

},{"preact":11}],49:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

module.exports = function (props) {
  var stop = function stop(ev) {
    if (ev.keyCode === 13) {
      ev.stopPropagation();
      ev.preventDefault();
    }
  };

  var handleItemClick = function handleItemClick(ev) {
    ev.preventDefault();
    // when file is clicked, select it, but when folder is clicked, open it
    if (props.type === 'folder') {
      return props.handleFolderClick(ev);
    }
    props.handleClick(ev);
  };

  return h('li', { 'class': 'uppy-ProviderBrowserItem' + (props.isChecked ? ' uppy-ProviderBrowserItem--selected' : '') }, h('div', { 'class': 'uppy-ProviderBrowserItem-checkbox' }, h('input', { type: 'checkbox',
    role: 'option',
    tabindex: 0,
    'aria-label': 'Select ' + props.title,
    id: props.id,
    checked: props.isChecked,
    disabled: props.isDisabled,
    onchange: props.handleClick,
    onkeyup: stop,
    onkeydown: stop,
    onkeypress: stop }), h('label', {
    'for': props.id,
    onclick: props.handleClick
  })), h('button', { type: 'button',
    'class': 'uppy-ProviderBrowserItem-inner',
    'aria-label': 'Select ' + props.title,
    tabindex: 0,
    onclick: handleItemClick }, props.getItemIcon(), ' ', props.showTitles && props.title));
};

},{"preact":11}],50:[function(require,module,exports){
var Row = require('./Item');

var _require = require('preact'),
    h = _require.h;

module.exports = function (props) {
  if (!props.folders.length && !props.files.length) {
    return h('div', { 'class': 'uppy-Provider-empty' }, props.i18n('noFilesFound'));
  }

  return h('div', { 'class': 'uppy-ProviderBrowser-body' }, h('ul', { 'class': 'uppy-ProviderBrowser-list',
    onscroll: props.handleScroll,
    role: 'listbox',
    'aria-label': 'List of files from ' + props.title }, props.folders.map(function (folder) {
    var isDisabled = false;
    var isChecked = props.isChecked(folder);
    if (isChecked) {
      isDisabled = isChecked.loading;
    }
    return Row({
      title: props.getItemName(folder),
      id: props.getItemId(folder),
      type: 'folder',
      // active: props.activeRow(folder),
      getItemIcon: function getItemIcon() {
        return props.getItemIcon(folder);
      },
      isDisabled: isDisabled,
      isChecked: isChecked,
      handleFolderClick: function handleFolderClick() {
        return props.handleFolderClick(folder);
      },
      handleClick: function handleClick(e) {
        return props.toggleCheckbox(e, folder);
      },
      columns: props.columns,
      showTitles: props.showTitles
    });
  }), props.files.map(function (file) {
    return Row({
      title: props.getItemName(file),
      id: props.getItemId(file),
      type: 'file',
      // active: props.activeRow(file),
      getItemIcon: function getItemIcon() {
        return props.getItemIcon(file);
      },
      isDisabled: false,
      isChecked: props.isChecked(file),
      handleClick: function handleClick(e) {
        return props.toggleCheckbox(e, file);
      },
      columns: props.columns,
      showTitles: props.showTitles
    });
  })));
};

},{"./Item":49,"preact":11}],51:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

module.exports = function (props) {
  return h("div", { "class": "uppy-Provider-loading" }, h("span", null, "Loading..."));
};

},{"preact":11}],52:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('preact'),
    h = _require.h,
    Component = _require.Component;

var AuthView = require('./AuthView');
var Browser = require('./Browser');
var LoaderView = require('./Loader');
var generateFileID = require('./../../utils/lib/generateFileID');
var getFileType = require('./../../utils/lib/getFileType');
var isPreviewSupported = require('./../../utils/lib/isPreviewSupported');

/**
 * Array.prototype.findIndex ponyfill for old browsers.
 */
function findIndex(array, predicate) {
  for (var i = 0; i < array.length; i++) {
    if (predicate(array[i])) return i;
  }
  return -1;
}

var CloseWrapper = function (_Component) {
  _inherits(CloseWrapper, _Component);

  function CloseWrapper() {
    _classCallCheck(this, CloseWrapper);

    return _possibleConstructorReturn(this, _Component.apply(this, arguments));
  }

  CloseWrapper.prototype.componentWillUnmount = function componentWillUnmount() {
    this.props.onUnmount();
  };

  CloseWrapper.prototype.render = function render() {
    return this.props.children[0];
  };

  return CloseWrapper;
}(Component);

/**
 * Class to easily generate generic views for plugins
 *
 *
 * This class expects the plugin instance using it to have the following
 * accessor methods.
 * Each method takes the item whose property is to be accessed
 * as a param
 *
 * isFolder
 *    @return {Boolean} for if the item is a folder or not
 * getItemData
 *    @return {Object} that is format ready for uppy upload/download
 * getItemIcon
 *    @return {Object} html instance of the item's icon
 * getItemSubList
 *    @return {Array} sub-items in the item. e.g a folder may contain sub-items
 * getItemName
 *    @return {String} display friendly name of the item
 * getMimeType
 *    @return {String} mime type of the item
 * getItemId
 *    @return {String} unique id of the item
 * getItemRequestPath
 *    @return {String} unique request path of the item when making calls to uppy server
 * getItemModifiedDate
 *    @return {object} or {String} date of when last the item was modified
 * getItemThumbnailUrl
 *    @return {String}
 */

module.exports = function () {
  /**
   * @param {object} instance of the plugin
   */
  function ProviderView(plugin, opts) {
    _classCallCheck(this, ProviderView);

    this.plugin = plugin;
    this.Provider = plugin[plugin.id];

    // set default options
    var defaultOptions = {
      viewType: 'list',
      showTitles: true,
      showFilter: true,
      showBreadcrumbs: true

      // merge default options with the ones set by user
    };this.opts = _extends({}, defaultOptions, opts);

    // Logic
    this.addFile = this.addFile.bind(this);
    this.filterItems = this.filterItems.bind(this);
    this.filterQuery = this.filterQuery.bind(this);
    this.toggleSearch = this.toggleSearch.bind(this);
    this.getFolder = this.getFolder.bind(this);
    this.getNextFolder = this.getNextFolder.bind(this);
    this.logout = this.logout.bind(this);
    this.checkAuth = this.checkAuth.bind(this);
    this.handleAuth = this.handleAuth.bind(this);
    this.handleDemoAuth = this.handleDemoAuth.bind(this);
    this.sortByTitle = this.sortByTitle.bind(this);
    this.sortByDate = this.sortByDate.bind(this);
    this.isActiveRow = this.isActiveRow.bind(this);
    this.isChecked = this.isChecked.bind(this);
    this.toggleCheckbox = this.toggleCheckbox.bind(this);
    this.handleError = this.handleError.bind(this);
    this.handleScroll = this.handleScroll.bind(this);
    this.donePicking = this.donePicking.bind(this);
    this.cancelPicking = this.cancelPicking.bind(this);
    this.clearSelection = this.clearSelection.bind(this);

    // Visual
    this.render = this.render.bind(this);

    this.clearSelection();
  }

  ProviderView.prototype.tearDown = function tearDown() {
    // Nothing.
  };

  ProviderView.prototype._updateFilesAndFolders = function _updateFilesAndFolders(res, files, folders) {
    var _this2 = this;

    this.plugin.getItemSubList(res).forEach(function (item) {
      if (_this2.plugin.isFolder(item)) {
        folders.push(item);
      } else {
        files.push(item);
      }
    });

    this.plugin.setPluginState({ folders: folders, files: files });
  };

  ProviderView.prototype.checkAuth = function checkAuth() {
    var _this3 = this;

    this.plugin.setPluginState({ checkAuthInProgress: true });
    this.Provider.checkAuth().then(function (authenticated) {
      _this3.plugin.setPluginState({ checkAuthInProgress: false });
      _this3.plugin.onAuth(authenticated);
    }).catch(function (err) {
      _this3.plugin.setPluginState({ checkAuthInProgress: false });
      _this3.handleError(err);
    });
  };

  /**
   * Based on folder ID, fetch a new folder and update it to state
   * @param  {String} id Folder id
   * @return {Promise}   Folders/files in folder
   */

  ProviderView.prototype.getFolder = function getFolder(id, name) {
    var _this4 = this;

    return this._loaderWrapper(this.Provider.list(id), function (res) {
      var folders = [];
      var files = [];
      var updatedDirectories = void 0;

      var state = _this4.plugin.getPluginState();
      var index = findIndex(state.directories, function (dir) {
        return id === dir.id;
      });

      if (index !== -1) {
        updatedDirectories = state.directories.slice(0, index + 1);
      } else {
        updatedDirectories = state.directories.concat([{ id: id, title: name || _this4.plugin.getItemName(res) }]);
      }

      _this4.username = _this4.username ? _this4.username : _this4.plugin.getUsername(res);
      _this4._updateFilesAndFolders(res, files, folders);
      _this4.plugin.setPluginState({ directories: updatedDirectories });
    }, this.handleError);
  };

  /**
   * Fetches new folder
   * @param  {Object} Folder
   * @param  {String} title Folder title
   */

  ProviderView.prototype.getNextFolder = function getNextFolder(folder) {
    var id = this.plugin.getItemRequestPath(folder);
    this.getFolder(id, this.plugin.getItemName(folder));
    this.lastCheckbox = undefined;
  };

  ProviderView.prototype.addFile = function addFile(file) {
    var tagFile = {
      id: this.providerFileToId(file),
      source: this.plugin.id,
      data: this.plugin.getItemData(file),
      name: this.plugin.getItemName(file) || this.plugin.getItemId(file),
      type: this.plugin.getMimeType(file),
      isRemote: true,
      body: {
        fileId: this.plugin.getItemId(file)
      },
      remote: {
        serverUrl: this.plugin.opts.serverUrl,
        url: '' + this.Provider.fileUrl(this.plugin.getItemRequestPath(file)),
        body: {
          fileId: this.plugin.getItemId(file)
        },
        providerOptions: this.Provider.opts
      }
    };

    var fileType = getFileType(tagFile);
    // TODO Should we just always use the thumbnail URL if it exists?
    if (fileType && isPreviewSupported(fileType)) {
      tagFile.preview = this.plugin.getItemThumbnailUrl(file);
    }
    this.plugin.uppy.log('Adding remote file');
    try {
      this.plugin.uppy.addFile(tagFile);
    } catch (err) {
      // Nothing, restriction errors handled in Core
    }
  };

  ProviderView.prototype.removeFile = function removeFile(id) {
    var _plugin$getPluginStat = this.plugin.getPluginState(),
        currentSelection = _plugin$getPluginStat.currentSelection;

    this.plugin.setPluginState({
      currentSelection: currentSelection.filter(function (file) {
        return file.id !== id;
      })
    });
  };

  /**
   * Removes session token on client side.
   */

  ProviderView.prototype.logout = function logout() {
    var _this5 = this;

    this.Provider.logout(location.href).then(function (res) {
      if (res.ok) {
        var newState = {
          authenticated: false,
          files: [],
          folders: [],
          directories: []
        };
        _this5.plugin.setPluginState(newState);
      }
    }).catch(this.handleError);
  };

  ProviderView.prototype.filterQuery = function filterQuery(e) {
    var state = this.plugin.getPluginState();
    this.plugin.setPluginState(_extends({}, state, {
      filterInput: e ? e.target.value : ''
    }));
  };

  ProviderView.prototype.toggleSearch = function toggleSearch(inputEl) {
    var state = this.plugin.getPluginState();

    this.plugin.setPluginState({
      isSearchVisible: !state.isSearchVisible,
      filterInput: ''
    });
  };

  ProviderView.prototype.filterItems = function filterItems(items) {
    var _this6 = this;

    var state = this.plugin.getPluginState();
    if (state.filterInput === '') {
      return items;
    }
    return items.filter(function (folder) {
      return _this6.plugin.getItemName(folder).toLowerCase().indexOf(state.filterInput.toLowerCase()) !== -1;
    });
  };

  ProviderView.prototype.sortByTitle = function sortByTitle() {
    var _this7 = this;

    var state = _extends({}, this.plugin.getPluginState());
    var files = state.files,
        folders = state.folders,
        sorting = state.sorting;

    var sortedFiles = files.sort(function (fileA, fileB) {
      if (sorting === 'titleDescending') {
        return _this7.plugin.getItemName(fileB).localeCompare(_this7.plugin.getItemName(fileA));
      }
      return _this7.plugin.getItemName(fileA).localeCompare(_this7.plugin.getItemName(fileB));
    });

    var sortedFolders = folders.sort(function (folderA, folderB) {
      if (sorting === 'titleDescending') {
        return _this7.plugin.getItemName(folderB).localeCompare(_this7.plugin.getItemName(folderA));
      }
      return _this7.plugin.getItemName(folderA).localeCompare(_this7.plugin.getItemName(folderB));
    });

    this.plugin.setPluginState(_extends({}, state, {
      files: sortedFiles,
      folders: sortedFolders,
      sorting: sorting === 'titleDescending' ? 'titleAscending' : 'titleDescending'
    }));
  };

  ProviderView.prototype.sortByDate = function sortByDate() {
    var _this8 = this;

    var state = _extends({}, this.plugin.getPluginState());
    var files = state.files,
        folders = state.folders,
        sorting = state.sorting;

    var sortedFiles = files.sort(function (fileA, fileB) {
      var a = new Date(_this8.plugin.getItemModifiedDate(fileA));
      var b = new Date(_this8.plugin.getItemModifiedDate(fileB));

      if (sorting === 'dateDescending') {
        return a > b ? -1 : a < b ? 1 : 0;
      }
      return a > b ? 1 : a < b ? -1 : 0;
    });

    var sortedFolders = folders.sort(function (folderA, folderB) {
      var a = new Date(_this8.plugin.getItemModifiedDate(folderA));
      var b = new Date(_this8.plugin.getItemModifiedDate(folderB));

      if (sorting === 'dateDescending') {
        return a > b ? -1 : a < b ? 1 : 0;
      }

      return a > b ? 1 : a < b ? -1 : 0;
    });

    this.plugin.setPluginState(_extends({}, state, {
      files: sortedFiles,
      folders: sortedFolders,
      sorting: sorting === 'dateDescending' ? 'dateAscending' : 'dateDescending'
    }));
  };

  ProviderView.prototype.sortBySize = function sortBySize() {
    var _this9 = this;

    var state = _extends({}, this.plugin.getPluginState());
    var files = state.files,
        sorting = state.sorting;

    // check that plugin supports file sizes

    if (!files.length || !this.plugin.getItemData(files[0]).size) {
      return;
    }

    var sortedFiles = files.sort(function (fileA, fileB) {
      var a = _this9.plugin.getItemData(fileA).size;
      var b = _this9.plugin.getItemData(fileB).size;

      if (sorting === 'sizeDescending') {
        return a > b ? -1 : a < b ? 1 : 0;
      }
      return a > b ? 1 : a < b ? -1 : 0;
    });

    this.plugin.setPluginState(_extends({}, state, {
      files: sortedFiles,
      sorting: sorting === 'sizeDescending' ? 'sizeAscending' : 'sizeDescending'
    }));
  };

  ProviderView.prototype.isActiveRow = function isActiveRow(file) {
    return this.plugin.getPluginState().activeRow === this.plugin.getItemId(file);
  };

  ProviderView.prototype.isChecked = function isChecked(file) {
    var _plugin$getPluginStat2 = this.plugin.getPluginState(),
        currentSelection = _plugin$getPluginStat2.currentSelection;

    return currentSelection.some(function (item) {
      return item === file;
    });
  };

  /**
   * Adds all files found inside of specified folder.
   *
   * Uses separated state while folder contents are being fetched and
   * mantains list of selected folders, which are separated from files.
   */

  ProviderView.prototype.addFolder = function addFolder(folder) {
    var _this10 = this;

    var folderId = this.providerFileToId(folder);
    var state = this.plugin.getPluginState();
    var folders = state.selectedFolders || {};
    if (folderId in folders && folders[folderId].loading) {
      return;
    }
    folders[folderId] = { loading: true, files: [] };
    this.plugin.setPluginState({ selectedFolders: folders });
    return this.Provider.list(this.plugin.getItemRequestPath(folder)).then(function (res) {
      var files = [];
      _this10.plugin.getItemSubList(res).forEach(function (item) {
        if (!_this10.plugin.isFolder(item)) {
          _this10.addFile(item);
          files.push(_this10.providerFileToId(item));
        }
      });
      state = _this10.plugin.getPluginState();
      state.selectedFolders[folderId] = { loading: false, files: files };
      _this10.plugin.setPluginState({ selectedFolders: folders });
      var dashboard = _this10.plugin.uppy.getPlugin('Dashboard');
      var message = void 0;
      if (files.length) {
        message = dashboard.i18n('folderAdded', {
          smart_count: files.length, folder: _this10.plugin.getItemName(folder)
        });
      } else {
        message = dashboard.i18n('emptyFolderAdded');
      }
      _this10.plugin.uppy.info(message);
    }).catch(function (e) {
      state = _this10.plugin.getPluginState();
      delete state.selectedFolders[folderId];
      _this10.plugin.setPluginState({ selectedFolders: state.selectedFolders });
      _this10.handleError(e);
    });
  };

  /**
   * Toggles file/folder checkbox to on/off state while updating files list.
   *
   * Note that some extra complexity comes from supporting shift+click to
   * toggle multiple checkboxes at once, which is done by getting all files
   * in between last checked file and current one.
   */

  ProviderView.prototype.toggleCheckbox = function toggleCheckbox(e, file) {
    e.stopPropagation();
    e.preventDefault();

    var _plugin$getPluginStat3 = this.plugin.getPluginState(),
        folders = _plugin$getPluginStat3.folders,
        files = _plugin$getPluginStat3.files;

    var items = this.filterItems(folders.concat(files));

    // Shift-clicking selects a single consecutive list of items
    // starting at the previous click and deselects everything else.
    if (this.lastCheckbox && e.shiftKey) {
      var _currentSelection = void 0;
      var prevIndex = items.indexOf(this.lastCheckbox);
      var currentIndex = items.indexOf(file);
      if (prevIndex < currentIndex) {
        _currentSelection = items.slice(prevIndex, currentIndex + 1);
      } else {
        _currentSelection = items.slice(currentIndex, prevIndex + 1);
      }
      this.plugin.setPluginState({ currentSelection: _currentSelection });
      return;
    }

    this.lastCheckbox = file;

    var _plugin$getPluginStat4 = this.plugin.getPluginState(),
        currentSelection = _plugin$getPluginStat4.currentSelection;

    if (this.isChecked(file)) {
      this.plugin.setPluginState({
        currentSelection: currentSelection.filter(function (item) {
          return item !== file;
        })
      });
    } else {
      this.plugin.setPluginState({
        currentSelection: currentSelection.concat([file])
      });
    }
  };

  ProviderView.prototype.providerFileToId = function providerFileToId(file) {
    return generateFileID({
      data: this.plugin.getItemData(file),
      name: this.plugin.getItemName(file) || this.plugin.getItemId(file),
      type: this.plugin.getMimeType(file)
    });
  };

  ProviderView.prototype.handleDemoAuth = function handleDemoAuth() {
    var state = this.plugin.getPluginState();
    this.plugin.setPluginState({}, state, {
      authenticated: true
    });
  };

  ProviderView.prototype.handleAuth = function handleAuth() {
    var _this11 = this;

    var authState = btoa(JSON.stringify({ origin: location.origin }));
    var link = this.Provider.authUrl() + '?state=' + authState;

    var authWindow = window.open(link, '_blank');
    var noProtocol = function noProtocol(url) {
      return url.replace(/^(https?:|)\/\//, '');
    };
    var handleToken = function handleToken(e) {
      var allowedOrigin = new RegExp(noProtocol(_this11.plugin.opts.serverPattern));
      if (!allowedOrigin.test(noProtocol(e.origin)) || e.source !== authWindow) {
        _this11.plugin.uppy.log('rejecting event from ' + e.origin + ' vs allowed pattern ' + _this11.plugin.opts.serverPattern);
        return;
      }
      authWindow.close();
      window.removeEventListener('message', handleToken);
      _this11.Provider.setAuthToken(e.data.token);
      _this11._loaderWrapper(_this11.Provider.checkAuth(), _this11.plugin.onAuth, _this11.handleError);
    };
    window.addEventListener('message', handleToken);
  };

  ProviderView.prototype.handleError = function handleError(error) {
    var uppy = this.plugin.uppy;
    var message = uppy.i18n('uppyServerError');
    uppy.log(error.toString());
    uppy.info({ message: message, details: error.toString() }, 'error', 5000);
  };

  ProviderView.prototype.handleScroll = function handleScroll(e) {
    var _this12 = this;

    var scrollPos = e.target.scrollHeight - (e.target.scrollTop + e.target.offsetHeight);
    var path = this.plugin.getNextPagePath ? this.plugin.getNextPagePath() : null;

    if (scrollPos < 50 && path && !this._isHandlingScroll) {
      this.Provider.list(path).then(function (res) {
        var _plugin$getPluginStat5 = _this12.plugin.getPluginState(),
            files = _plugin$getPluginStat5.files,
            folders = _plugin$getPluginStat5.folders;

        _this12._updateFilesAndFolders(res, files, folders);
      }).catch(this.handleError).then(function () {
        _this12._isHandlingScroll = false;
      }); // always called

      this._isHandlingScroll = true;
    }
  };

  ProviderView.prototype.donePicking = function donePicking() {
    var _this13 = this;

    var _plugin$getPluginStat6 = this.plugin.getPluginState(),
        currentSelection = _plugin$getPluginStat6.currentSelection;

    var promises = currentSelection.map(function (file) {
      if (_this13.plugin.isFolder(file)) {
        return _this13.addFolder(file);
      } else {
        return _this13.addFile(file);
      }
    });

    this._loaderWrapper(Promise.all(promises), function () {
      _this13.clearSelection();

      var dashboard = _this13.plugin.uppy.getPlugin('Dashboard');
      if (dashboard) dashboard.hideAllPanels();
    }, function () {});
  };

  ProviderView.prototype.cancelPicking = function cancelPicking() {
    this.clearSelection();

    var dashboard = this.plugin.uppy.getPlugin('Dashboard');
    if (dashboard) dashboard.hideAllPanels();
  };

  ProviderView.prototype.clearSelection = function clearSelection() {
    this.plugin.setPluginState({ currentSelection: [] });
  };

  // displays loader view while asynchronous request is being made.


  ProviderView.prototype._loaderWrapper = function _loaderWrapper(promise, then, catch_) {
    var _this14 = this;

    promise.then(function (result) {
      _this14.plugin.setPluginState({ loading: false });
      then(result);
    }).catch(function (err) {
      _this14.plugin.setPluginState({ loading: false });
      catch_(err);
    });
    this.plugin.setPluginState({ loading: true });
  };

  ProviderView.prototype.render = function render(state) {
    var _plugin$getPluginStat7 = this.plugin.getPluginState(),
        authenticated = _plugin$getPluginStat7.authenticated,
        checkAuthInProgress = _plugin$getPluginStat7.checkAuthInProgress,
        loading = _plugin$getPluginStat7.loading;

    if (loading) {
      return h(CloseWrapper, { onUnmount: this.clearSelection }, h(LoaderView, null));
    }

    if (!authenticated) {
      return h(CloseWrapper, { onUnmount: this.clearSelection }, h(AuthView, {
        pluginName: this.plugin.title,
        pluginIcon: this.plugin.icon,
        demo: this.plugin.opts.demo,
        checkAuth: this.checkAuth,
        handleAuth: this.handleAuth,
        handleDemoAuth: this.handleDemoAuth,
        checkAuthInProgress: checkAuthInProgress }));
    }

    var browserProps = _extends({}, this.plugin.getPluginState(), {
      username: this.username,
      getNextFolder: this.getNextFolder,
      getFolder: this.getFolder,
      filterItems: this.filterItems,
      filterQuery: this.filterQuery,
      toggleSearch: this.toggleSearch,
      sortByTitle: this.sortByTitle,
      sortByDate: this.sortByDate,
      logout: this.logout,
      demo: this.plugin.opts.demo,
      isActiveRow: this.isActiveRow,
      isChecked: this.isChecked,
      toggleCheckbox: this.toggleCheckbox,
      getItemId: this.plugin.getItemId,
      getItemName: this.plugin.getItemName,
      getItemIcon: this.plugin.getItemIcon,
      handleScroll: this.handleScroll,
      done: this.donePicking,
      cancel: this.cancelPicking,
      title: this.plugin.title,
      viewType: this.opts.viewType,
      showTitles: this.opts.showTitles,
      showFilter: this.opts.showFilter,
      showBreadcrumbs: this.opts.showBreadcrumbs,
      pluginIcon: this.plugin.icon,
      i18n: this.plugin.uppy.i18n
    });

    return h(CloseWrapper, { onUnmount: this.clearSelection }, h(Browser, browserProps));
  };

  return ProviderView;
}();

},{"./../../utils/lib/generateFileID":71,"./../../utils/lib/getFileType":74,"./../../utils/lib/isPreviewSupported":81,"./AuthView":44,"./Browser":46,"./Loader":51,"preact":11}],53:[function(require,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

var _createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
    }
  }return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
  };
}();

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var RequestClient = require('./RequestClient');

var _getName = function _getName(id) {
  return id.split('-').map(function (s) {
    return s.charAt(0).toUpperCase() + s.slice(1);
  }).join(' ');
};

module.exports = function (_RequestClient) {
  _inherits(Provider, _RequestClient);

  function Provider(uppy, opts) {
    _classCallCheck(this, Provider);

    var _this = _possibleConstructorReturn(this, _RequestClient.call(this, uppy, opts));

    _this.provider = opts.provider;
    _this.id = _this.provider;
    _this.authProvider = opts.authProvider || _this.provider;
    _this.name = _this.opts.name || _getName(_this.id);
    _this.tokenKey = 'uppy-server-' + _this.id + '-auth-token';
    return _this;
  }

  // @todo(i.olarewaju) consider whether or not this method should be exposed
  Provider.prototype.setAuthToken = function setAuthToken(token) {
    // @todo(i.olarewaju) add fallback for OOM storage
    localStorage.setItem(this.tokenKey, token);
  };

  Provider.prototype.checkAuth = function checkAuth() {
    return this.get(this.id + '/authorized').then(function (payload) {
      return payload.authenticated;
    });
  };

  Provider.prototype.authUrl = function authUrl() {
    return this.hostname + '/' + this.id + '/connect';
  };

  Provider.prototype.fileUrl = function fileUrl(id) {
    return this.hostname + '/' + this.id + '/get/' + id;
  };

  Provider.prototype.list = function list(directory) {
    return this.get(this.id + '/list/' + (directory || ''));
  };

  Provider.prototype.logout = function logout() {
    var _this2 = this;

    var redirect = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : location.href;

    return this.get(this.id + '/logout?redirect=' + redirect).then(function (res) {
      localStorage.removeItem(_this2.tokenKey);
      return res;
    });
  };

  _createClass(Provider, [{
    key: 'defaultHeaders',
    get: function get() {
      return _extends({}, _RequestClient.prototype.defaultHeaders, { 'uppy-auth-token': localStorage.getItem(this.tokenKey) });
    }
  }]);

  return Provider;
}(RequestClient);

},{"./RequestClient":54}],54:[function(require,module,exports){
'use strict';

// Remove the trailing slash so we can always safely append /xyz.

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

var _createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
    }
  }return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
  };
}();

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function stripSlash(url) {
  return url.replace(/\/$/, '');
}

module.exports = function () {
  function RequestClient(uppy, opts) {
    _classCallCheck(this, RequestClient);

    this.uppy = uppy;
    this.opts = opts;
    this.onReceiveResponse = this.onReceiveResponse.bind(this);
  }

  RequestClient.prototype.onReceiveResponse = function onReceiveResponse(response) {
    var state = this.uppy.getState();
    var uppyServer = state.uppyServer || {};
    var host = this.opts.serverUrl;
    var headers = response.headers;
    // Store the self-identified domain name for the uppy-server we just hit.
    if (headers.has('i-am') && headers.get('i-am') !== uppyServer[host]) {
      var _extends2;

      this.uppy.setState({
        uppyServer: _extends({}, uppyServer, (_extends2 = {}, _extends2[host] = headers.get('i-am'), _extends2))
      });
    }
    return response;
  };

  RequestClient.prototype._getUrl = function _getUrl(url) {
    if (/^(https?:|)\/\//.test(url)) {
      return url;
    }
    return this.hostname + '/' + url;
  };

  RequestClient.prototype.get = function get(path) {
    var _this = this;

    return fetch(this._getUrl(path), {
      method: 'get',
      headers: this.headers
    })
    // @todo validate response status before calling json
    .then(this.onReceiveResponse).then(function (res) {
      return res.json();
    }).catch(function (err) {
      throw new Error('Could not get ' + _this._getUrl(path) + '. ' + err);
    });
  };

  RequestClient.prototype.post = function post(path, data) {
    var _this2 = this;

    return fetch(this._getUrl(path), {
      method: 'post',
      headers: this.headers,
      body: JSON.stringify(data)
    }).then(this.onReceiveResponse).then(function (res) {
      if (res.status < 200 || res.status > 300) {
        throw new Error('Could not post ' + _this2._getUrl(path) + '. ' + res.statusText);
      }
      return res.json();
    }).catch(function (err) {
      throw new Error('Could not post ' + _this2._getUrl(path) + '. ' + err);
    });
  };

  RequestClient.prototype.delete = function _delete(path, data) {
    var _this3 = this;

    return fetch(this.hostname + '/' + path, {
      method: 'delete',
      headers: this.headers,
      body: data ? JSON.stringify(data) : null
    }).then(this.onReceiveResponse)
    // @todo validate response status before calling json
    .then(function (res) {
      return res.json();
    }).catch(function (err) {
      throw new Error('Could not delete ' + _this3._getUrl(path) + '. ' + err);
    });
  };

  _createClass(RequestClient, [{
    key: 'hostname',
    get: function get() {
      var _uppy$getState = this.uppy.getState(),
          uppyServer = _uppy$getState.uppyServer;

      var host = this.opts.serverUrl;
      return stripSlash(uppyServer && uppyServer[host] ? uppyServer[host] : host);
    }
  }, {
    key: 'defaultHeaders',
    get: function get() {
      return {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      };
    }
  }, {
    key: 'headers',
    get: function get() {
      return _extends({}, this.defaultHeaders, this.opts.serverHeaders || {});
    }
  }]);

  return RequestClient;
}();

},{}],55:[function(require,module,exports){
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

var ee = require('namespace-emitter');

module.exports = function () {
  function UppySocket(opts) {
    var _this = this;

    _classCallCheck(this, UppySocket);

    this.queued = [];
    this.isOpen = false;
    this.socket = new WebSocket(opts.target);
    this.emitter = ee();

    this.socket.onopen = function (e) {
      _this.isOpen = true;

      while (_this.queued.length > 0 && _this.isOpen) {
        var first = _this.queued[0];
        _this.send(first.action, first.payload);
        _this.queued = _this.queued.slice(1);
      }
    };

    this.socket.onclose = function (e) {
      _this.isOpen = false;
    };

    this._handleMessage = this._handleMessage.bind(this);

    this.socket.onmessage = this._handleMessage;

    this.close = this.close.bind(this);
    this.emit = this.emit.bind(this);
    this.on = this.on.bind(this);
    this.once = this.once.bind(this);
    this.send = this.send.bind(this);
  }

  UppySocket.prototype.close = function close() {
    return this.socket.close();
  };

  UppySocket.prototype.send = function send(action, payload) {
    // attach uuid

    if (!this.isOpen) {
      this.queued.push({ action: action, payload: payload });
      return;
    }

    this.socket.send(JSON.stringify({
      action: action,
      payload: payload
    }));
  };

  UppySocket.prototype.on = function on(action, handler) {
    this.emitter.on(action, handler);
  };

  UppySocket.prototype.emit = function emit(action, payload) {
    this.emitter.emit(action, payload);
  };

  UppySocket.prototype.once = function once(action, handler) {
    this.emitter.once(action, handler);
  };

  UppySocket.prototype._handleMessage = function _handleMessage(e) {
    try {
      var message = JSON.parse(e.data);
      this.emit(message.action, message.payload);
    } catch (err) {
      console.log(err);
    }
  };

  return UppySocket;
}();

},{"namespace-emitter":10}],56:[function(require,module,exports){
'use-strict';
/**
 * Manages communications with Uppy Server
 */

var RequestClient = require('./RequestClient');
var Provider = require('./Provider');
var Socket = require('./Socket');

module.exports = {
  RequestClient: RequestClient,
  Provider: Provider,
  Socket: Socket
};

},{"./Provider":53,"./RequestClient":54,"./Socket":55}],57:[function(require,module,exports){
var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

var throttle = require('lodash.throttle');
var classNames = require('classnames');
var statusBarStates = require('./StatusBarStates');

var _require = require('preact'),
    h = _require.h;

function calculateProcessingProgress(files) {
  // Collect pre or postprocessing progress states.
  var progresses = [];
  Object.keys(files).forEach(function (fileID) {
    var progress = files[fileID].progress;

    if (progress.preprocess) {
      progresses.push(progress.preprocess);
    }
    if (progress.postprocess) {
      progresses.push(progress.postprocess);
    }
  });

  // In the future we should probably do this differently. For now we'll take the
  // mode and message from the first file…
  var _progresses$ = progresses[0],
      mode = _progresses$.mode,
      message = _progresses$.message;

  var value = progresses.filter(isDeterminate).reduce(function (total, progress, index, all) {
    return total + progress.value / all.length;
  }, 0);
  function isDeterminate(progress) {
    return progress.mode === 'determinate';
  }

  return {
    mode: mode,
    message: message,
    value: value
  };
}

function togglePauseResume(props) {
  if (props.isAllComplete) return;

  if (!props.resumableUploads) {
    return props.cancelAll();
  }

  if (props.isAllPaused) {
    return props.resumeAll();
  }

  return props.pauseAll();
}

module.exports = function (props) {
  props = props || {};

  var uploadState = props.uploadState;

  var progressValue = props.totalProgress;
  var progressMode = void 0;
  var progressBarContent = void 0;

  if (uploadState === statusBarStates.STATE_PREPROCESSING || uploadState === statusBarStates.STATE_POSTPROCESSING) {
    var progress = calculateProcessingProgress(props.files);
    progressMode = progress.mode;
    if (progressMode === 'determinate') {
      progressValue = progress.value * 100;
    }

    progressBarContent = ProgressBarProcessing(progress);
  } else if (uploadState === statusBarStates.STATE_COMPLETE) {
    progressBarContent = ProgressBarComplete(props);
  } else if (uploadState === statusBarStates.STATE_UPLOADING) {
    progressBarContent = ProgressBarUploading(props);
  } else if (uploadState === statusBarStates.STATE_ERROR) {
    progressValue = undefined;
    progressBarContent = ProgressBarError(props);
  }

  var width = typeof progressValue === 'number' ? progressValue : 100;
  var isHidden = uploadState === statusBarStates.STATE_WAITING && props.hideUploadButton || uploadState === statusBarStates.STATE_WAITING && !props.newFiles > 0 || uploadState === statusBarStates.STATE_COMPLETE && props.hideAfterFinish;

  var progressClassNames = 'uppy-StatusBar-progress\n                           ' + (progressMode ? 'is-' + progressMode : '');

  var statusBarClassNames = classNames('uppy', 'uppy-StatusBar', 'is-' + uploadState, { 'uppy-StatusBar--detailedProgress': props.showProgressDetails });

  return h('div', { 'class': statusBarClassNames, 'aria-hidden': isHidden }, h('div', { 'class': progressClassNames,
    style: { width: width + '%' },
    role: 'progressbar',
    'aria-valuemin': '0',
    'aria-valuemax': '100',
    'aria-valuenow': progressValue }), progressBarContent, h('div', { 'class': 'uppy-StatusBar-actions' }, props.newFiles && !props.hideUploadButton ? h(UploadBtn, _extends({}, props, { uploadState: uploadState })) : null, props.error && !props.hideRetryButton ? h(RetryBtn, props) : null, !props.hidePauseResumeCancelButtons && uploadState !== statusBarStates.STATE_WAITING && uploadState !== statusBarStates.STATE_COMPLETE ? h(CancelBtn, props) : null));
};

var UploadBtn = function UploadBtn(props) {
  var uploadBtnClassNames = classNames('uppy-u-reset', 'uppy-c-btn', 'uppy-StatusBar-actionBtn', 'uppy-StatusBar-actionBtn--upload', { 'uppy-c-btn-primary': props.uploadState === statusBarStates.STATE_WAITING });

  return h('button', { type: 'button',
    'class': uploadBtnClassNames,
    'aria-label': props.i18n('uploadXFiles', { smart_count: props.newFiles }),
    onclick: props.startUpload }, props.newFiles && props.uploadStarted ? props.i18n('uploadXNewFiles', { smart_count: props.newFiles }) : props.i18n('uploadXFiles', { smart_count: props.newFiles }));
};

var RetryBtn = function RetryBtn(props) {
  return h('button', { type: 'button',
    'class': 'uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry',
    'aria-label': props.i18n('retryUpload'),
    onclick: props.retryAll }, props.i18n('retry'));
};

var CancelBtn = function CancelBtn(props) {
  return h('button', { type: 'button',
    'class': 'uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--cancel',
    'aria-label': props.i18n('cancel'),
    onclick: props.cancelAll }, props.i18n('cancel'));
};

var PauseResumeButtons = function PauseResumeButtons(props) {
  var resumableUploads = props.resumableUploads,
      isAllPaused = props.isAllPaused,
      i18n = props.i18n;

  var title = resumableUploads ? isAllPaused ? i18n('resumeUpload') : i18n('pauseUpload') : i18n('cancelUpload');

  return h('button', { title: title, 'class': 'uppy-u-reset uppy-StatusBar-statusIndicator', type: 'button', onclick: function onclick() {
      return togglePauseResume(props);
    } }, resumableUploads ? isAllPaused ? h('svg', { 'aria-hidden': 'true', 'class': 'UppyIcon', width: '15', height: '17', viewBox: '0 0 11 13' }, h('path', { d: 'M1.26 12.534a.67.67 0 0 1-.674.012.67.67 0 0 1-.336-.583v-11C.25.724.38.5.586.382a.658.658 0 0 1 .673.012l9.165 5.5a.66.66 0 0 1 .325.57.66.66 0 0 1-.325.573l-9.166 5.5z' })) : h('svg', { 'aria-hidden': 'true', 'class': 'UppyIcon', width: '16', height: '17', viewBox: '0 0 12 13' }, h('path', { d: 'M4.888.81v11.38c0 .446-.324.81-.722.81H2.722C2.324 13 2 12.636 2 12.19V.81c0-.446.324-.81.722-.81h1.444c.398 0 .722.364.722.81zM9.888.81v11.38c0 .446-.324.81-.722.81H7.722C7.324 13 7 12.636 7 12.19V.81c0-.446.324-.81.722-.81h1.444c.398 0 .722.364.722.81z' })) : h('svg', { 'aria-hidden': 'true', 'class': 'UppyIcon', width: '16px', height: '16px', viewBox: '0 0 19 19' }, h('path', { d: 'M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z' })));
};

var ProgressBarProcessing = function ProgressBarProcessing(props) {
  var value = Math.round(props.value * 100);

  return h('div', { 'class': 'uppy-StatusBar-content' }, props.mode === 'determinate' ? value + '% \xB7 ' : '', props.message);
};

var progressDetails = function progressDetails(props) {
  return h('span', { 'class': 'uppy-StatusBar-statusSecondary' }, props.inProgress > 1 && props.i18n('filesUploadedOfTotal', { complete: props.complete, smart_count: props.inProgress }) + ' \xB7 ', props.i18n('dataUploadedOfTotal', { complete: props.totalUploadedSize, total: props.totalSize }) + ' \xB7 ', props.i18n('xTimeLeft', { time: props.totalETA }));
};

var ThrottledProgressDetails = throttle(progressDetails, 500, { leading: true, trailing: true });

var ProgressBarUploading = function ProgressBarUploading(props) {
  if (!props.isUploadStarted || props.isAllComplete) {
    return null;
  }

  var title = props.isAllPaused ? props.i18n('paused') : props.i18n('uploading');

  return h('div', { 'class': 'uppy-StatusBar-content', 'aria-label': title, title: title }, !props.hidePauseResumeCancelButtons && h(PauseResumeButtons, props), h('div', { 'class': 'uppy-StatusBar-status' }, h('span', { 'class': 'uppy-StatusBar-statusPrimary' }, title, ': ', props.totalProgress, '%'), h('br', null), !props.isAllPaused && h(ThrottledProgressDetails, props)));
};

var ProgressBarComplete = function ProgressBarComplete(_ref) {
  var totalProgress = _ref.totalProgress,
      i18n = _ref.i18n;

  return h('div', { 'class': 'uppy-StatusBar-content', role: 'status', title: i18n('complete') }, h('svg', { 'aria-hidden': 'true', 'class': 'uppy-StatusBar-statusIndicator UppyIcon', width: '18', height: '17', viewBox: '0 0 23 17' }, h('path', { d: 'M8.944 17L0 7.865l2.555-2.61 6.39 6.525L20.41 0 23 2.645z' })), i18n('complete'));
};

var ProgressBarError = function ProgressBarError(_ref2) {
  var error = _ref2.error,
      retryAll = _ref2.retryAll,
      hideRetryButton = _ref2.hideRetryButton,
      i18n = _ref2.i18n;

  return h('div', { 'class': 'uppy-StatusBar-content', role: 'alert' }, h('strong', { 'class': 'uppy-StatusBar-contentPadding' }, i18n('uploadFailed'), '.'), !hideRetryButton && h('span', { 'class': 'uppy-StatusBar-contentPadding' }, i18n('pleasePressRetry')), h('span', { 'class': 'uppy-StatusBar-details',
    'aria-label': error,
    'data-microtip-position': 'top',
    'data-microtip-size': 'large',
    role: 'tooltip' }, '?'));
};

},{"./StatusBarStates":58,"classnames":1,"lodash.throttle":8,"preact":11}],58:[function(require,module,exports){
module.exports = {
  'STATE_ERROR': 'error',
  'STATE_WAITING': 'waiting',
  'STATE_PREPROCESSING': 'preprocessing',
  'STATE_UPLOADING': 'uploading',
  'STATE_POSTPROCESSING': 'postprocessing',
  'STATE_COMPLETE': 'complete'
};

},{}],59:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('./../../core'),
    Plugin = _require.Plugin;

var Translator = require('./../../utils/lib/Translator');
var StatusBarUI = require('./StatusBar');
var statusBarStates = require('./StatusBarStates');
var getSpeed = require('./../../utils/lib/getSpeed');
var getBytesRemaining = require('./../../utils/lib/getBytesRemaining');
var prettyETA = require('./../../utils/lib/prettyETA');
var prettyBytes = require('prettier-bytes');

/**
 * StatusBar: renders a status bar with upload/pause/resume/cancel/retry buttons,
 * progress percentage and time remaining.
 */
module.exports = function (_Plugin) {
  _inherits(StatusBar, _Plugin);

  function StatusBar(uppy, opts) {
    _classCallCheck(this, StatusBar);

    var _this = _possibleConstructorReturn(this, _Plugin.call(this, uppy, opts));

    _this.id = _this.opts.id || 'StatusBar';
    _this.title = 'StatusBar';
    _this.type = 'progressindicator';

    var defaultLocale = {
      strings: {
        uploading: 'Uploading',
        complete: 'Complete',
        uploadFailed: 'Upload failed',
        pleasePressRetry: 'Please press Retry to upload again',
        paused: 'Paused',
        error: 'Error',
        retry: 'Retry',
        cancel: 'Cancel',
        pressToRetry: 'Press to retry',
        retryUpload: 'Retry upload',
        resumeUpload: 'Resume upload',
        cancelUpload: 'Cancel upload',
        pauseUpload: 'Pause upload',
        filesUploadedOfTotal: {
          0: '%{complete} of %{smart_count} file uploaded',
          1: '%{complete} of %{smart_count} files uploaded'
        },
        dataUploadedOfTotal: '%{complete} of %{total}',
        xTimeLeft: '%{time} left',
        uploadXFiles: {
          0: 'Upload %{smart_count} file',
          1: 'Upload %{smart_count} files'
        },
        uploadXNewFiles: {
          0: 'Upload +%{smart_count} file',
          1: 'Upload +%{smart_count} files'
        }

        // set default options
      } };var defaultOptions = {
      target: 'body',
      hideUploadButton: false,
      hideRetryButton: false,
      hidePauseResumeCancelButtons: false,
      showProgressDetails: false,
      locale: defaultLocale,
      hideAfterFinish: true

      // merge default options with the ones set by user
    };_this.opts = _extends({}, defaultOptions, opts);

    _this.locale = _extends({}, defaultLocale, _this.opts.locale);
    _this.locale.strings = _extends({}, defaultLocale.strings, _this.opts.locale.strings);

    _this.translator = new Translator({ locale: _this.locale });
    _this.i18n = _this.translator.translate.bind(_this.translator);

    _this.startUpload = _this.startUpload.bind(_this);
    _this.render = _this.render.bind(_this);
    _this.install = _this.install.bind(_this);
    return _this;
  }

  StatusBar.prototype.getTotalSpeed = function getTotalSpeed(files) {
    var totalSpeed = 0;
    files.forEach(function (file) {
      totalSpeed = totalSpeed + getSpeed(file.progress);
    });
    return totalSpeed;
  };

  StatusBar.prototype.getTotalETA = function getTotalETA(files) {
    var totalSpeed = this.getTotalSpeed(files);
    if (totalSpeed === 0) {
      return 0;
    }

    var totalBytesRemaining = files.reduce(function (total, file) {
      return total + getBytesRemaining(file.progress);
    }, 0);

    return Math.round(totalBytesRemaining / totalSpeed * 10) / 10;
  };

  StatusBar.prototype.startUpload = function startUpload() {
    var _this2 = this;

    return this.uppy.upload().catch(function (err) {
      _this2.uppy.log(err.stack || err.message || err);
      // Ignore
    });
  };

  StatusBar.prototype.getUploadingState = function getUploadingState(isAllErrored, isAllComplete, files) {
    if (isAllErrored) {
      return statusBarStates.STATE_ERROR;
    }

    if (isAllComplete) {
      return statusBarStates.STATE_COMPLETE;
    }

    var state = statusBarStates.STATE_WAITING;
    var fileIDs = Object.keys(files);
    for (var i = 0; i < fileIDs.length; i++) {
      var progress = files[fileIDs[i]].progress;
      // If ANY files are being uploaded right now, show the uploading state.
      if (progress.uploadStarted && !progress.uploadComplete) {
        return statusBarStates.STATE_UPLOADING;
      }
      // If files are being preprocessed AND postprocessed at this time, we show the
      // preprocess state. If any files are being uploaded we show uploading.
      if (progress.preprocess && state !== statusBarStates.STATE_UPLOADING) {
        state = statusBarStates.STATE_PREPROCESSING;
      }
      // If NO files are being preprocessed or uploaded right now, but some files are
      // being postprocessed, show the postprocess state.
      if (progress.postprocess && state !== statusBarStates.STATE_UPLOADING && state !== statusBarStates.STATE_PREPROCESSING) {
        state = statusBarStates.STATE_POSTPROCESSING;
      }
    }
    return state;
  };

  StatusBar.prototype.render = function render(state) {
    var files = state.files;

    var uploadStartedFiles = Object.keys(files).filter(function (file) {
      return files[file].progress.uploadStarted;
    });
    var newFiles = Object.keys(files).filter(function (file) {
      return !files[file].progress.uploadStarted && !files[file].progress.preprocess && !files[file].progress.postprocess;
    });
    var completeFiles = Object.keys(files).filter(function (file) {
      return files[file].progress.uploadComplete;
    });
    var erroredFiles = Object.keys(files).filter(function (file) {
      return files[file].error;
    });
    var inProgressFiles = Object.keys(files).filter(function (file) {
      return !files[file].progress.uploadComplete && files[file].progress.uploadStarted && !files[file].isPaused;
    });
    var processingFiles = Object.keys(files).filter(function (file) {
      return files[file].progress.preprocess || files[file].progress.postprocess;
    });

    var inProgressFilesArray = inProgressFiles.map(function (file) {
      return files[file];
    });

    var totalSpeed = prettyBytes(this.getTotalSpeed(inProgressFilesArray));
    var totalETA = prettyETA(this.getTotalETA(inProgressFilesArray));

    // total size and uploaded size
    var totalSize = 0;
    var totalUploadedSize = 0;
    inProgressFilesArray.forEach(function (file) {
      totalSize = totalSize + (file.progress.bytesTotal || 0);
      totalUploadedSize = totalUploadedSize + (file.progress.bytesUploaded || 0);
    });
    totalSize = prettyBytes(totalSize);
    totalUploadedSize = prettyBytes(totalUploadedSize);

    var isUploadStarted = uploadStartedFiles.length > 0;

    var isAllComplete = state.totalProgress === 100 && completeFiles.length === Object.keys(files).length && processingFiles.length === 0;

    var isAllErrored = isUploadStarted && erroredFiles.length === uploadStartedFiles.length;

    var isAllPaused = inProgressFiles.length === 0 && !isAllComplete && !isAllErrored && uploadStartedFiles.length > 0;

    var resumableUploads = state.capabilities.resumableUploads || false;

    return StatusBarUI({
      error: state.error,
      uploadState: this.getUploadingState(isAllErrored, isAllComplete, state.files || {}),
      totalProgress: state.totalProgress,
      totalSize: totalSize,
      totalUploadedSize: totalUploadedSize,
      uploadStarted: uploadStartedFiles.length,
      isAllComplete: isAllComplete,
      isAllPaused: isAllPaused,
      isAllErrored: isAllErrored,
      isUploadStarted: isUploadStarted,
      complete: completeFiles.length,
      newFiles: newFiles.length,
      inProgress: inProgressFiles.length,
      totalSpeed: totalSpeed,
      totalETA: totalETA,
      files: state.files,
      i18n: this.i18n,
      pauseAll: this.uppy.pauseAll,
      resumeAll: this.uppy.resumeAll,
      retryAll: this.uppy.retryAll,
      cancelAll: this.uppy.cancelAll,
      startUpload: this.startUpload,
      resumableUploads: resumableUploads,
      showProgressDetails: this.opts.showProgressDetails,
      hideUploadButton: this.opts.hideUploadButton,
      hideRetryButton: this.opts.hideRetryButton,
      hidePauseResumeCancelButtons: this.opts.hidePauseResumeCancelButtons,
      hideAfterFinish: this.opts.hideAfterFinish
    });
  };

  StatusBar.prototype.install = function install() {
    var target = this.opts.target;
    if (target) {
      this.mount(target, this);
    }
  };

  StatusBar.prototype.uninstall = function uninstall() {
    this.unmount();
  };

  return StatusBar;
}(Plugin);

},{"./../../core":25,"./../../utils/lib/Translator":65,"./../../utils/lib/getBytesRemaining":72,"./../../utils/lib/getSpeed":77,"./../../utils/lib/prettyETA":85,"./StatusBar":57,"./StatusBarStates":58,"prettier-bytes":12}],60:[function(require,module,exports){
var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

/**
 * Default store that keeps state in a simple object.
 */
var DefaultStore = function () {
  function DefaultStore() {
    _classCallCheck(this, DefaultStore);

    this.state = {};
    this.callbacks = [];
  }

  DefaultStore.prototype.getState = function getState() {
    return this.state;
  };

  DefaultStore.prototype.setState = function setState(patch) {
    var prevState = _extends({}, this.state);
    var nextState = _extends({}, this.state, patch);

    this.state = nextState;
    this._publish(prevState, nextState, patch);
  };

  DefaultStore.prototype.subscribe = function subscribe(listener) {
    var _this = this;

    this.callbacks.push(listener);
    return function () {
      // Remove the listener.
      _this.callbacks.splice(_this.callbacks.indexOf(listener), 1);
    };
  };

  DefaultStore.prototype._publish = function _publish() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    this.callbacks.forEach(function (listener) {
      listener.apply(undefined, args);
    });
  };

  return DefaultStore;
}();

module.exports = function defaultStore() {
  return new DefaultStore();
};

},{}],61:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('./../../core'),
    Plugin = _require.Plugin;

var dataURItoBlob = require('./../../utils/lib/dataURItoBlob');
var isPreviewSupported = require('./../../utils/lib/isPreviewSupported');

/**
 * The Thumbnail Generator plugin
 *
 */

module.exports = function (_Plugin) {
  _inherits(ThumbnailGenerator, _Plugin);

  function ThumbnailGenerator(uppy, opts) {
    _classCallCheck(this, ThumbnailGenerator);

    var _this = _possibleConstructorReturn(this, _Plugin.call(this, uppy, opts));

    _this.type = 'thumbnail';
    _this.id = _this.opts.id || 'ThumbnailGenerator';
    _this.title = 'Thumbnail Generator';
    _this.queue = [];
    _this.queueProcessing = false;

    var defaultOptions = {
      thumbnailWidth: 200
    };

    _this.opts = _extends({}, defaultOptions, opts);

    _this.addToQueue = _this.addToQueue.bind(_this);
    _this.onRestored = _this.onRestored.bind(_this);
    return _this;
  }

  /**
   * Create a thumbnail for the given Uppy file object.
   *
   * @param {{data: Blob}} file
   * @param {number} width
   * @return {Promise}
   */

  ThumbnailGenerator.prototype.createThumbnail = function createThumbnail(file, targetWidth) {
    var _this2 = this;

    var originalUrl = URL.createObjectURL(file.data);
    var onload = new Promise(function (resolve, reject) {
      var image = new Image();
      image.src = originalUrl;
      image.onload = function () {
        URL.revokeObjectURL(originalUrl);
        resolve(image);
      };
      image.onerror = function () {
        // The onerror event is totally useless unfortunately, as far as I know
        URL.revokeObjectURL(originalUrl);
        reject(new Error('Could not create thumbnail'));
      };
    });

    return onload.then(function (image) {
      var targetHeight = _this2.getProportionalHeight(image, targetWidth);
      var canvas = _this2.resizeImage(image, targetWidth, targetHeight);
      return _this2.canvasToBlob(canvas, 'image/png');
    }).then(function (blob) {
      return URL.createObjectURL(blob);
    });
  };

  /**
   * Make sure the image doesn’t exceed browser/device canvas limits.
   * For ios with 256 RAM and ie
   */

  ThumbnailGenerator.prototype.protect = function protect(image) {
    // https://stackoverflow.com/questions/6081483/maximum-size-of-a-canvas-element

    var ratio = image.width / image.height;

    var maxSquare = 5000000; // ios max canvas square
    var maxSize = 4096; // ie max canvas dimensions

    var maxW = Math.floor(Math.sqrt(maxSquare * ratio));
    var maxH = Math.floor(maxSquare / Math.sqrt(maxSquare * ratio));
    if (maxW > maxSize) {
      maxW = maxSize;
      maxH = Math.round(maxW / ratio);
    }
    if (maxH > maxSize) {
      maxH = maxSize;
      maxW = Math.round(ratio * maxH);
    }
    if (image.width > maxW) {
      var canvas = document.createElement('canvas');
      canvas.width = maxW;
      canvas.height = maxH;
      canvas.getContext('2d').drawImage(image, 0, 0, maxW, maxH);
      image.src = 'about:blank';
      image.width = 1;
      image.height = 1;
      image = canvas;
    }

    return image;
  };

  /**
   * Resize an image to the target `width` and `height`.
   *
   * Returns a Canvas with the resized image on it.
   */

  ThumbnailGenerator.prototype.resizeImage = function resizeImage(image, targetWidth, targetHeight) {
    // Resizing in steps refactored to use a solution from
    // https://blog.uploadcare.com/image-resize-in-browsers-is-broken-e38eed08df01

    image = this.protect(image);

    // Use the Polyfill for Math.log2() since IE doesn't support log2
    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log2#Polyfill
    var steps = Math.ceil(Math.log(image.width / targetWidth) * Math.LOG2E);
    if (steps < 1) {
      steps = 1;
    }
    var sW = targetWidth * Math.pow(2, steps - 1);
    var sH = targetHeight * Math.pow(2, steps - 1);
    var x = 2;

    while (steps--) {
      var canvas = document.createElement('canvas');
      canvas.width = sW;
      canvas.height = sH;
      canvas.getContext('2d').drawImage(image, 0, 0, sW, sH);
      image = canvas;

      sW = Math.round(sW / x);
      sH = Math.round(sH / x);
    }

    return image;
  };

  /**
   * Save a <canvas> element's content to a Blob object.
   *
   * @param {HTMLCanvasElement} canvas
   * @return {Promise}
   */

  ThumbnailGenerator.prototype.canvasToBlob = function canvasToBlob(canvas, type, quality) {
    if (canvas.toBlob) {
      return new Promise(function (resolve) {
        canvas.toBlob(resolve, type, quality);
      });
    }
    return Promise.resolve().then(function () {
      return dataURItoBlob(canvas.toDataURL(type, quality), {});
    });
  };

  ThumbnailGenerator.prototype.getProportionalHeight = function getProportionalHeight(img, width) {
    var aspect = img.width / img.height;
    return Math.round(width / aspect);
  };

  /**
   * Set the preview URL for a file.
   */

  ThumbnailGenerator.prototype.setPreviewURL = function setPreviewURL(fileID, preview) {
    this.uppy.setFileState(fileID, {
      preview: preview
    });
  };

  ThumbnailGenerator.prototype.addToQueue = function addToQueue(item) {
    this.queue.push(item);
    if (this.queueProcessing === false) {
      this.processQueue();
    }
  };

  ThumbnailGenerator.prototype.processQueue = function processQueue() {
    var _this3 = this;

    this.queueProcessing = true;
    if (this.queue.length > 0) {
      var current = this.queue.shift();
      return this.requestThumbnail(current).catch(function (err) {}) // eslint-disable-line handle-callback-err
      .then(function () {
        return _this3.processQueue();
      });
    } else {
      this.queueProcessing = false;
    }
  };

  ThumbnailGenerator.prototype.requestThumbnail = function requestThumbnail(file) {
    var _this4 = this;

    if (isPreviewSupported(file.type) && !file.isRemote) {
      return this.createThumbnail(file, this.opts.thumbnailWidth).then(function (preview) {
        _this4.setPreviewURL(file.id, preview);
      }).catch(function (err) {
        console.warn(err.stack || err.message);
      });
    }
    return Promise.resolve();
  };

  ThumbnailGenerator.prototype.onRestored = function onRestored() {
    var _this5 = this;

    var fileIDs = Object.keys(this.uppy.getState().files);
    fileIDs.forEach(function (fileID) {
      var file = _this5.uppy.getFile(fileID);
      if (!file.isRestored) return;
      // Only add blob URLs; they are likely invalid after being restored.
      if (!file.preview || /^blob:/.test(file.preview)) {
        _this5.addToQueue(file);
      }
    });
  };

  ThumbnailGenerator.prototype.install = function install() {
    this.uppy.on('file-added', this.addToQueue);
    this.uppy.on('restored', this.onRestored);
  };

  ThumbnailGenerator.prototype.uninstall = function uninstall() {
    this.uppy.off('file-added', this.addToQueue);
    this.uppy.off('restored', this.onRestored);
  };

  return ThumbnailGenerator;
}(Plugin);

},{"./../../core":25,"./../../utils/lib/dataURItoBlob":67,"./../../utils/lib/isPreviewSupported":81}],62:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('./../../core'),
    Plugin = _require.Plugin;

var tus = require('tus-js-client');

var _require2 = require('./../../server-utils'),
    Provider = _require2.Provider,
    RequestClient = _require2.RequestClient,
    Socket = _require2.Socket;

var emitSocketProgress = require('./../../utils/lib/emitSocketProgress');
var getSocketHost = require('./../../utils/lib/getSocketHost');
var settle = require('./../../utils/lib/settle');
var limitPromises = require('./../../utils/lib/limitPromises');

// Extracted from https://github.com/tus/tus-js-client/blob/master/lib/upload.js#L13
// excepted we removed 'fingerprint' key to avoid adding more dependencies
var tusDefaultOptions = {
  endpoint: '',
  resume: true,
  onProgress: null,
  onChunkComplete: null,
  onSuccess: null,
  onError: null,
  headers: {},
  chunkSize: Infinity,
  withCredentials: false,
  uploadUrl: null,
  uploadSize: null,
  overridePatchMethod: false,
  retryDelays: null

  /**
   * Create a wrapper around an event emitter with a `remove` method to remove
   * all events that were added using the wrapped emitter.
   */
};function createEventTracker(emitter) {
  var events = [];
  return {
    on: function on(event, fn) {
      events.push([event, fn]);
      return emitter.on(event, fn);
    },
    remove: function remove() {
      events.forEach(function (_ref) {
        var event = _ref[0],
            fn = _ref[1];

        emitter.off(event, fn);
      });
    }
  };
}

/**
 * Tus resumable file uploader
 *
 */
module.exports = function (_Plugin) {
  _inherits(Tus, _Plugin);

  function Tus(uppy, opts) {
    _classCallCheck(this, Tus);

    var _this = _possibleConstructorReturn(this, _Plugin.call(this, uppy, opts));

    _this.type = 'uploader';
    _this.id = 'Tus';
    _this.title = 'Tus';

    // set default options
    var defaultOptions = {
      resume: true,
      autoRetry: true,
      useFastRemoteRetry: true,
      limit: 0,
      retryDelays: [0, 1000, 3000, 5000]

      // merge default options with the ones set by user
    };_this.opts = _extends({}, defaultOptions, opts);

    // Simultaneous upload limiting is shared across all uploads with this plugin.
    if (typeof _this.opts.limit === 'number' && _this.opts.limit !== 0) {
      _this.limitUploads = limitPromises(_this.opts.limit);
    } else {
      _this.limitUploads = function (fn) {
        return fn;
      };
    }

    _this.uploaders = Object.create(null);
    _this.uploaderEvents = Object.create(null);
    _this.uploaderSockets = Object.create(null);

    _this.handleResetProgress = _this.handleResetProgress.bind(_this);
    _this.handleUpload = _this.handleUpload.bind(_this);
    return _this;
  }

  Tus.prototype.handleResetProgress = function handleResetProgress() {
    var files = _extends({}, this.uppy.getState().files);
    Object.keys(files).forEach(function (fileID) {
      // Only clone the file object if it has a Tus `uploadUrl` attached.
      if (files[fileID].tus && files[fileID].tus.uploadUrl) {
        var tusState = _extends({}, files[fileID].tus);
        delete tusState.uploadUrl;
        files[fileID] = _extends({}, files[fileID], { tus: tusState });
      }
    });

    this.uppy.setState({ files: files });
  };

  /**
   * Clean up all references for a file's upload: the tus.Upload instance,
   * any events related to the file, and the uppy-server WebSocket connection.
   */

  Tus.prototype.resetUploaderReferences = function resetUploaderReferences(fileID) {
    if (this.uploaders[fileID]) {
      this.uploaders[fileID].abort();
      this.uploaders[fileID] = null;
    }
    if (this.uploaderEvents[fileID]) {
      this.uploaderEvents[fileID].remove();
      this.uploaderEvents[fileID] = null;
    }
    if (this.uploaderSockets[fileID]) {
      this.uploaderSockets[fileID].close();
      this.uploaderSockets[fileID] = null;
    }
  };

  /**
   * Create a new Tus upload
   *
   * @param {object} file for use with upload
   * @param {integer} current file in a queue
   * @param {integer} total number of files in a queue
   * @returns {Promise}
   */

  Tus.prototype.upload = function upload(file, current, total) {
    var _this2 = this;

    this.resetUploaderReferences(file.id);

    // Create a new tus upload
    return new Promise(function (resolve, reject) {
      var optsTus = _extends({}, tusDefaultOptions, _this2.opts,
      // Install file-specific upload overrides.
      file.tus || {});

      optsTus.onError = function (err) {
        _this2.uppy.log(err);
        _this2.uppy.emit('upload-error', file, err);
        err.message = 'Failed because: ' + err.message;

        _this2.resetUploaderReferences(file.id);
        reject(err);
      };

      optsTus.onProgress = function (bytesUploaded, bytesTotal) {
        _this2.onReceiveUploadUrl(file, upload.url);
        _this2.uppy.emit('upload-progress', file, {
          uploader: _this2,
          bytesUploaded: bytesUploaded,
          bytesTotal: bytesTotal
        });
      };

      optsTus.onSuccess = function () {
        _this2.uppy.emit('upload-success', file, upload, upload.url);

        if (upload.url) {
          _this2.uppy.log('Download ' + upload.file.name + ' from ' + upload.url);
        }

        _this2.resetUploaderReferences(file.id);
        resolve(upload);
      };

      var copyProp = function copyProp(obj, srcProp, destProp) {
        if (Object.prototype.hasOwnProperty.call(obj, srcProp) && !Object.prototype.hasOwnProperty.call(obj, destProp)) {
          obj[destProp] = obj[srcProp];
        }
      };

      // tusd uses metadata fields 'filetype' and 'filename'
      var meta = _extends({}, file.meta);
      copyProp(meta, 'type', 'filetype');
      copyProp(meta, 'name', 'filename');
      optsTus.metadata = meta;

      var upload = new tus.Upload(file.data, optsTus);
      _this2.uploaders[file.id] = upload;
      _this2.uploaderEvents[file.id] = createEventTracker(_this2.uppy);

      _this2.onFileRemove(file.id, function (targetFileID) {
        _this2.resetUploaderReferences(file.id);
        resolve('upload ' + targetFileID + ' was removed');
      });

      _this2.onPause(file.id, function (isPaused) {
        if (isPaused) {
          upload.abort();
        } else {
          upload.start();
        }
      });

      _this2.onPauseAll(file.id, function () {
        upload.abort();
      });

      _this2.onCancelAll(file.id, function () {
        _this2.resetUploaderReferences(file.id);
      });

      _this2.onResumeAll(file.id, function () {
        if (file.error) {
          upload.abort();
        }
        upload.start();
      });

      if (!file.isPaused) {
        upload.start();
      }
    });
  };

  Tus.prototype.uploadRemote = function uploadRemote(file, current, total) {
    var _this3 = this;

    this.resetUploaderReferences(file.id);

    var opts = _extends({}, this.opts,
    // Install file-specific upload overrides.
    file.tus || {});

    return new Promise(function (resolve, reject) {
      _this3.uppy.log(file.remote.url);
      if (file.serverToken) {
        return _this3.connectToServerSocket(file).then(function () {
          return resolve();
        }).catch(reject);
      }

      _this3.uppy.emit('upload-started', file);
      var Client = file.remote.providerOptions.provider ? Provider : RequestClient;
      var client = new Client(_this3.uppy, file.remote.providerOptions);
      client.post(file.remote.url, _extends({}, file.remote.body, {
        endpoint: opts.endpoint,
        uploadUrl: opts.uploadUrl,
        protocol: 'tus',
        size: file.data.size,
        metadata: file.meta
      })).then(function (res) {
        _this3.uppy.setFileState(file.id, { serverToken: res.token });
        file = _this3.uppy.getFile(file.id);
        return file;
      }).then(function (file) {
        return _this3.connectToServerSocket(file);
      }).then(function () {
        resolve();
      }).catch(function (err) {
        reject(new Error(err));
      });
    });
  };

  Tus.prototype.connectToServerSocket = function connectToServerSocket(file) {
    var _this4 = this;

    return new Promise(function (resolve, reject) {
      var token = file.serverToken;
      var host = getSocketHost(file.remote.serverUrl);
      var socket = new Socket({ target: host + '/api/' + token });
      _this4.uploaderSockets[file.id] = socket;
      _this4.uploaderEvents[file.id] = createEventTracker(_this4.uppy);

      _this4.onFileRemove(file.id, function () {
        socket.send('pause', {});
        resolve('upload ' + file.id + ' was removed');
      });

      _this4.onPause(file.id, function (isPaused) {
        isPaused ? socket.send('pause', {}) : socket.send('resume', {});
      });

      _this4.onPauseAll(file.id, function () {
        return socket.send('pause', {});
      });

      _this4.onCancelAll(file.id, function () {
        return socket.send('pause', {});
      });

      _this4.onResumeAll(file.id, function () {
        if (file.error) {
          socket.send('pause', {});
        }
        socket.send('resume', {});
      });

      _this4.onRetry(file.id, function () {
        socket.send('pause', {});
        socket.send('resume', {});
      });

      _this4.onRetryAll(file.id, function () {
        socket.send('pause', {});
        socket.send('resume', {});
      });

      if (file.isPaused) {
        socket.send('pause', {});
      }

      socket.on('progress', function (progressData) {
        return emitSocketProgress(_this4, progressData, file);
      });

      socket.on('error', function (errData) {
        var message = errData.error.message;

        var error = _extends(new Error(message), { cause: errData.error });

        // If the remote retry optimisation should not be used,
        // close the socket—this will tell uppy-server to clear state and delete the file.
        if (!_this4.opts.useFastRemoteRetry) {
          _this4.resetUploaderReferences(file.id);
          // Remove the serverToken so that a new one will be created for the retry.
          _this4.uppy.setFileState(file.id, {
            serverToken: null
          });
        }

        _this4.uppy.emit('upload-error', file, error);
        reject(error);
      });

      socket.on('success', function (data) {
        _this4.uppy.emit('upload-success', file, data, data.url);
        _this4.resetUploaderReferences(file.id);
        resolve();
      });
    });
  };

  Tus.prototype.onReceiveUploadUrl = function onReceiveUploadUrl(file, uploadURL) {
    var currentFile = this.uppy.getFile(file.id);
    if (!currentFile) return;
    // Only do the update if we didn't have an upload URL yet,
    // or resume: false in options
    if ((!currentFile.tus || currentFile.tus.uploadUrl !== uploadURL) && this.opts.resume) {
      this.uppy.log('[Tus] Storing upload url');
      this.uppy.setFileState(currentFile.id, {
        tus: _extends({}, currentFile.tus, {
          uploadUrl: uploadURL
        })
      });
    }
  };

  Tus.prototype.onFileRemove = function onFileRemove(fileID, cb) {
    this.uploaderEvents[fileID].on('file-removed', function (file) {
      if (fileID === file.id) cb(file.id);
    });
  };

  Tus.prototype.onPause = function onPause(fileID, cb) {
    this.uploaderEvents[fileID].on('upload-pause', function (targetFileID, isPaused) {
      if (fileID === targetFileID) {
        // const isPaused = this.uppy.pauseResume(fileID)
        cb(isPaused);
      }
    });
  };

  Tus.prototype.onRetry = function onRetry(fileID, cb) {
    this.uploaderEvents[fileID].on('upload-retry', function (targetFileID) {
      if (fileID === targetFileID) {
        cb();
      }
    });
  };

  Tus.prototype.onRetryAll = function onRetryAll(fileID, cb) {
    var _this5 = this;

    this.uploaderEvents[fileID].on('retry-all', function (filesToRetry) {
      if (!_this5.uppy.getFile(fileID)) return;
      cb();
    });
  };

  Tus.prototype.onPauseAll = function onPauseAll(fileID, cb) {
    var _this6 = this;

    this.uploaderEvents[fileID].on('pause-all', function () {
      if (!_this6.uppy.getFile(fileID)) return;
      cb();
    });
  };

  Tus.prototype.onCancelAll = function onCancelAll(fileID, cb) {
    var _this7 = this;

    this.uploaderEvents[fileID].on('cancel-all', function () {
      if (!_this7.uppy.getFile(fileID)) return;
      cb();
    });
  };

  Tus.prototype.onResumeAll = function onResumeAll(fileID, cb) {
    var _this8 = this;

    this.uploaderEvents[fileID].on('resume-all', function () {
      if (!_this8.uppy.getFile(fileID)) return;
      cb();
    });
  };

  Tus.prototype.uploadFiles = function uploadFiles(files) {
    var _this9 = this;

    var actions = files.map(function (file, i) {
      var current = parseInt(i, 10) + 1;
      var total = files.length;

      if (file.error) {
        return function () {
          return Promise.reject(new Error(file.error));
        };
      } else if (file.isRemote) {
        // We emit upload-started here, so that it's also emitted for files
        // that have to wait due to the `limit` option.
        _this9.uppy.emit('upload-started', file);
        return _this9.uploadRemote.bind(_this9, file, current, total);
      } else {
        _this9.uppy.emit('upload-started', file);
        return _this9.upload.bind(_this9, file, current, total);
      }
    });

    var promises = actions.map(function (action) {
      var limitedAction = _this9.limitUploads(action);
      return limitedAction();
    });

    return settle(promises);
  };

  Tus.prototype.handleUpload = function handleUpload(fileIDs) {
    var _this10 = this;

    if (fileIDs.length === 0) {
      this.uppy.log('Tus: no files to upload!');
      return Promise.resolve();
    }

    this.uppy.log('Tus is uploading...');
    var filesToUpload = fileIDs.map(function (fileID) {
      return _this10.uppy.getFile(fileID);
    });

    return this.uploadFiles(filesToUpload).then(function () {
      return null;
    });
  };

  Tus.prototype.install = function install() {
    this.uppy.setState({
      capabilities: _extends({}, this.uppy.getState().capabilities, {
        resumableUploads: true
      })
    });
    this.uppy.addUploader(this.handleUpload);

    this.uppy.on('reset-progress', this.handleResetProgress);

    if (this.opts.autoRetry) {
      this.uppy.on('back-online', this.uppy.retryAll);
    }
  };

  Tus.prototype.uninstall = function uninstall() {
    this.uppy.setState({
      capabilities: _extends({}, this.uppy.getState().capabilities, {
        resumableUploads: false
      })
    });
    this.uppy.removeUploader(this.handleUpload);

    if (this.opts.autoRetry) {
      this.uppy.off('back-online', this.uppy.retryAll);
    }
  };

  return Tus;
}(Plugin);

},{"./../../core":25,"./../../server-utils":56,"./../../utils/lib/emitSocketProgress":68,"./../../utils/lib/getSocketHost":76,"./../../utils/lib/limitPromises":83,"./../../utils/lib/settle":87,"tus-js-client":21}],63:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('preact'),
    h = _require.h,
    Component = _require.Component;

var UrlUI = function (_Component) {
  _inherits(UrlUI, _Component);

  function UrlUI(props) {
    _classCallCheck(this, UrlUI);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.handleKeyPress = _this.handleKeyPress.bind(_this);
    _this.handleClick = _this.handleClick.bind(_this);
    return _this;
  }

  UrlUI.prototype.componentDidMount = function componentDidMount() {
    var _this2 = this;

    this.input.value = '';
    // My guess about why browser scrolls to top on focus:
    // Component is mounted right away, but the tab panel might be animating
    // still, so input element is positioned outside viewport. This fixes it.
    setTimeout(function () {
      if (!_this2.input) return;
      _this2.input.focus({ preventScroll: true });
    }, 150);
  };

  UrlUI.prototype.handleKeyPress = function handleKeyPress(ev) {
    if (ev.keyCode === 13) {
      this.props.addFile(this.input.value);
    }
  };

  UrlUI.prototype.handleClick = function handleClick() {
    this.props.addFile(this.input.value);
  };

  UrlUI.prototype.render = function render() {
    var _this3 = this;

    return h('div', { 'class': 'uppy-Url' }, h('input', {
      'class': 'uppy-c-textInput uppy-Url-input',
      type: 'text',
      placeholder: this.props.i18n('enterUrlToImport'),
      onkeyup: this.handleKeyPress,
      ref: function ref(input) {
        _this3.input = input;
      } }), h('button', {
      'class': 'uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Url-importButton',
      type: 'button',
      'aria-label': this.props.i18n('import'),
      onclick: this.handleClick }, this.props.i18n('import')));
  };

  return UrlUI;
}(Component);

module.exports = UrlUI;

},{"preact":11}],64:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('./../../core'),
    Plugin = _require.Plugin;

var Translator = require('./../../utils/lib/Translator');

var _require2 = require('preact'),
    h = _require2.h;

var _require3 = require('./../../server-utils'),
    RequestClient = _require3.RequestClient;

var UrlUI = require('./UrlUI.js');
var toArray = require('./../../utils/lib/toArray');

/**
 * Url
 *
 */
module.exports = function (_Plugin) {
  _inherits(Url, _Plugin);

  function Url(uppy, opts) {
    _classCallCheck(this, Url);

    var _this = _possibleConstructorReturn(this, _Plugin.call(this, uppy, opts));

    _this.id = _this.opts.id || 'Url';
    _this.title = 'Link';
    _this.type = 'acquirer';
    _this.icon = function () {
      return h('svg', { 'aria-hidden': 'true', 'class': 'UppyIcon UppyModalTab-icon', width: '64', height: '64', viewBox: '0 0 64 64' }, h('circle', { cx: '32', cy: '32', r: '31' }), h('g', { 'fill-rule': 'nonzero', fill: '#FFF' }, h('path', { d: 'M25.774 47.357a4.077 4.077 0 0 1-5.76 0L16.9 44.24a4.076 4.076 0 0 1 0-5.758l5.12-5.12-1.817-1.818-5.12 5.122a6.651 6.651 0 0 0 0 9.392l3.113 3.116a6.626 6.626 0 0 0 4.699 1.943c1.7 0 3.401-.649 4.697-1.943l10.241-10.243a6.591 6.591 0 0 0 1.947-4.696 6.599 6.599 0 0 0-1.947-4.696l-3.116-3.114-1.817 1.817 3.116 3.114a4.045 4.045 0 0 1 1.194 2.88 4.045 4.045 0 0 1-1.194 2.878L25.774 47.357z' }), h('path', { d: 'M46.216 14.926a6.597 6.597 0 0 0-4.696-1.946h-.001a6.599 6.599 0 0 0-4.696 1.945L26.582 25.167a6.595 6.595 0 0 0-1.947 4.697 6.599 6.599 0 0 0 1.946 4.698l3.114 3.114 1.818-1.816-3.114-3.114a4.05 4.05 0 0 1-1.194-2.882c0-1.086.424-2.108 1.194-2.878L38.64 16.744a4.042 4.042 0 0 1 2.88-1.194c1.089 0 2.11.425 2.88 1.194l3.114 3.114a4.076 4.076 0 0 1 0 5.758l-5.12 5.12 1.818 1.817 5.12-5.122a6.649 6.649 0 0 0 0-9.393l-3.113-3.114-.003.002z' })));
    };

    // Set default options and locale
    var defaultLocale = {
      strings: {
        import: 'Import',
        enterUrlToImport: 'Enter URL to import a file',
        failedToFetch: 'Uppy Server failed to fetch this URL, please make sure it’s correct',
        enterCorrectUrl: 'Incorrect URL: Please make sure you are entering a direct link to a file'
      }
    };

    var defaultOptions = {
      locale: defaultLocale
    };

    _this.opts = _extends({}, defaultOptions, opts);

    _this.locale = _extends({}, defaultLocale, _this.opts.locale);
    _this.locale.strings = _extends({}, defaultLocale.strings, _this.opts.locale.strings);

    _this.translator = new Translator({ locale: _this.locale });
    _this.i18n = _this.translator.translate.bind(_this.translator);

    _this.hostname = _this.opts.serverUrl;

    if (!_this.hostname) {
      throw new Error('Uppy Server hostname is required, please consult https://uppy.io/docs/server');
    }

    // Bind all event handlers for referencability
    _this.getMeta = _this.getMeta.bind(_this);
    _this.addFile = _this.addFile.bind(_this);
    _this.handleDrop = _this.handleDrop.bind(_this);
    _this.handleDragOver = _this.handleDragOver.bind(_this);
    _this.handleDragLeave = _this.handleDragLeave.bind(_this);

    _this.handlePaste = _this.handlePaste.bind(_this);

    _this.client = new RequestClient(uppy, {
      serverUrl: _this.opts.serverUrl,
      serverHeaders: _this.opts.serverHeaders
    });
    return _this;
  }

  Url.prototype.getFileNameFromUrl = function getFileNameFromUrl(url) {
    return url.substring(url.lastIndexOf('/') + 1);
  };

  Url.prototype.checkIfCorrectURL = function checkIfCorrectURL(url) {
    if (!url) return false;

    var protocol = url.match(/^([a-z0-9]+):\/\//)[1];
    if (protocol !== 'http' && protocol !== 'https') {
      return false;
    }

    return true;
  };

  Url.prototype.addProtocolToURL = function addProtocolToURL(url) {
    var protocolRegex = /^[a-z0-9]+:\/\//;
    var defaultProtocol = 'http://';
    if (protocolRegex.test(url)) {
      return url;
    }

    return defaultProtocol + url;
  };

  Url.prototype.getMeta = function getMeta(url) {
    var _this2 = this;

    return this.client.post('url/meta', { url: url }).then(function (res) {
      if (res.error) {
        _this2.uppy.log('[URL] Error:');
        _this2.uppy.log(res.error);
        throw new Error('Failed to fetch the file');
      }
      return res;
    });
  };

  Url.prototype.addFile = function addFile(url) {
    var _this3 = this;

    url = this.addProtocolToURL(url);
    if (!this.checkIfCorrectURL(url)) {
      this.uppy.log('[URL] Incorrect URL entered: ' + url);
      this.uppy.info(this.i18n('enterCorrectUrl'), 'error', 4000);
      return;
    }

    return this.getMeta(url).then(function (meta) {
      var tagFile = {
        source: _this3.id,
        name: _this3.getFileNameFromUrl(url),
        type: meta.type,
        data: {
          size: meta.size
        },
        isRemote: true,
        body: {
          url: url
        },
        remote: {
          serverUrl: _this3.opts.serverUrl,
          url: _this3.hostname + '/url/get',
          body: {
            fileId: url,
            url: url
          },
          providerOptions: _this3.client.opts
        }
      };
      return tagFile;
    }).then(function (tagFile) {
      _this3.uppy.log('[Url] Adding remote file');
      try {
        _this3.uppy.addFile(tagFile);
      } catch (err) {
        // Nothing, restriction errors handled in Core
      }
    }).then(function () {
      var dashboard = _this3.uppy.getPlugin('Dashboard');
      if (dashboard) dashboard.hideAllPanels();
    }).catch(function (err) {
      _this3.uppy.log(err);
      _this3.uppy.info({
        message: _this3.i18n('failedToFetch'),
        details: err
      }, 'error', 4000);
    });
  };

  Url.prototype.handleDrop = function handleDrop(e) {
    var _this4 = this;

    e.preventDefault();
    if (e.dataTransfer.items) {
      var items = toArray(e.dataTransfer.items);
      items.forEach(function (item) {
        if (item.kind === 'string' && item.type === 'text/uri-list') {
          item.getAsString(function (url) {
            _this4.uppy.log('[URL] Adding file from dropped url: ' + url);
            _this4.addFile(url);
          });
        }
      });
    }
  };

  Url.prototype.handleDragOver = function handleDragOver(e) {
    e.preventDefault();
    this.el.classList.add('drag');
  };

  Url.prototype.handleDragLeave = function handleDragLeave(e) {
    e.preventDefault();
    this.el.classList.remove('drag');
  };

  Url.prototype.handlePaste = function handlePaste(e) {
    var _this5 = this;

    if (e.clipboardData.items) {
      var items = toArray(e.clipboardData.items);

      // When a file is pasted, it appears as two items: file name string, then
      // the file itself; Url then treats file name string as URL, which is wrong.
      // This makes sure Url ignores paste event if it contains an actual file
      var hasFiles = items.filter(function (item) {
        return item.kind === 'file';
      }).length > 0;
      if (hasFiles) return;

      items.forEach(function (item) {
        if (item.kind === 'string' && item.type === 'text/plain') {
          item.getAsString(function (url) {
            _this5.uppy.log('[URL] Adding file from pasted url: ' + url);
            _this5.addFile(url);
          });
        }
      });
    }
  };

  Url.prototype.render = function render(state) {
    return h(UrlUI, {
      i18n: this.i18n,
      addFile: this.addFile });
  };

  Url.prototype.install = function install() {
    var target = this.opts.target;
    if (target) {
      this.mount(target, this);
    }

    this.el.addEventListener('drop', this.handleDrop);
    this.el.addEventListener('dragover', this.handleDragOver);
    this.el.addEventListener('dragleave', this.handleDragLeave);
    this.el.addEventListener('paste', this.handlePaste);
  };

  Url.prototype.uninstall = function uninstall() {
    this.el.removeEventListener('drop', this.handleDrop);
    this.el.removeEventListener('dragover', this.handleDragOver);
    this.el.removeEventListener('dragleave', this.handleDragLeave);
    this.el.removeEventListener('paste', this.handlePaste);

    this.unmount();
  };

  return Url;
}(Plugin);

},{"./../../core":25,"./../../server-utils":56,"./../../utils/lib/Translator":65,"./../../utils/lib/toArray":88,"./UrlUI.js":63,"preact":11}],65:[function(require,module,exports){
var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

/**
 * Translates strings with interpolation & pluralization support.
 * Extensible with custom dictionaries and pluralization functions.
 *
 * Borrows heavily from and inspired by Polyglot https://github.com/airbnb/polyglot.js,
 * basically a stripped-down version of it. Differences: pluralization functions are not hardcoded
 * and can be easily added among with dictionaries, nested objects are used for pluralization
 * as opposed to `||||` delimeter
 *
 * Usage example: `translator.translate('files_chosen', {smart_count: 3})`
 *
 * @param {object} opts
 */
module.exports = function () {
  function Translator(opts) {
    _classCallCheck(this, Translator);

    var defaultOptions = {
      locale: {
        strings: {},
        pluralize: function pluralize(n) {
          if (n === 1) {
            return 0;
          }
          return 1;
        }
      }
    };

    this.opts = _extends({}, defaultOptions, opts);
    this.locale = _extends({}, defaultOptions.locale, opts.locale);
  }

  /**
   * Takes a string with placeholder variables like `%{smart_count} file selected`
   * and replaces it with values from options `{smart_count: 5}`
   *
   * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
   * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
   *
   * @param {string} phrase that needs interpolation, with placeholders
   * @param {object} options with values that will be used to replace placeholders
   * @return {string} interpolated
   */

  Translator.prototype.interpolate = function interpolate(phrase, options) {
    var _String$prototype = String.prototype,
        split = _String$prototype.split,
        replace = _String$prototype.replace;

    var dollarRegex = /\$/g;
    var dollarBillsYall = '$$$$';
    var interpolated = [phrase];

    for (var arg in options) {
      if (arg !== '_' && options.hasOwnProperty(arg)) {
        // Ensure replacement value is escaped to prevent special $-prefixed
        // regex replace tokens. the "$$$$" is needed because each "$" needs to
        // be escaped with "$" itself, and we need two in the resulting output.
        var replacement = options[arg];
        if (typeof replacement === 'string') {
          replacement = replace.call(options[arg], dollarRegex, dollarBillsYall);
        }
        // We create a new `RegExp` each time instead of using a more-efficient
        // string replace so that the same argument can be replaced multiple times
        // in the same phrase.
        interpolated = insertReplacement(interpolated, new RegExp('%\\{' + arg + '\\}', 'g'), replacement);
      }
    }

    return interpolated;

    function insertReplacement(source, rx, replacement) {
      var newParts = [];
      source.forEach(function (chunk) {
        split.call(chunk, rx).forEach(function (raw, i, list) {
          if (raw !== '') {
            newParts.push(raw);
          }

          // Interlace with the `replacement` value
          if (i < list.length - 1) {
            newParts.push(replacement);
          }
        });
      });
      return newParts;
    }
  };

  /**
   * Public translate method
   *
   * @param {string} key
   * @param {object} options with values that will be used later to replace placeholders in string
   * @return {string} translated (and interpolated)
   */

  Translator.prototype.translate = function translate(key, options) {
    return this.translateArray(key, options).join('');
  };

  /**
   * Get a translation and return the translated and interpolated parts as an array.
   * @param {string} key
   * @param {object} options with values that will be used to replace placeholders
   * @return {Array} The translated and interpolated parts, in order.
   */

  Translator.prototype.translateArray = function translateArray(key, options) {
    if (options && typeof options.smart_count !== 'undefined') {
      var plural = this.locale.pluralize(options.smart_count);
      return this.interpolate(this.opts.locale.strings[key][plural], options);
    }

    return this.interpolate(this.opts.locale.strings[key], options);
  };

  return Translator;
}();

},{}],66:[function(require,module,exports){
var dataURItoBlob = require('./dataURItoBlob');

/**
 * Save a <canvas> element's content to a Blob object.
 *
 * @param {HTMLCanvasElement} canvas
 * @return {Promise}
 */
module.exports = function canvasToBlob(canvas, type, quality) {
  if (canvas.toBlob) {
    return new Promise(function (resolve) {
      canvas.toBlob(resolve, type, quality);
    });
  }
  return Promise.resolve().then(function () {
    return dataURItoBlob(canvas.toDataURL(type, quality), {});
  });
};

},{"./dataURItoBlob":67}],67:[function(require,module,exports){
module.exports = function dataURItoBlob(dataURI, opts, toFile) {
  // get the base64 data
  var data = dataURI.split(',')[1];

  // user may provide mime type, if not get it from data URI
  var mimeType = opts.mimeType || dataURI.split(',')[0].split(':')[1].split(';')[0];

  // default to plain/text if data URI has no mimeType
  if (mimeType == null) {
    mimeType = 'plain/text';
  }

  var binary = atob(data);
  var array = [];
  for (var i = 0; i < binary.length; i++) {
    array.push(binary.charCodeAt(i));
  }

  // Convert to a File?
  if (toFile) {
    return new File([new Uint8Array(array)], opts.name || '', { type: mimeType });
  }

  return new Blob([new Uint8Array(array)], { type: mimeType });
};

},{}],68:[function(require,module,exports){
var throttle = require('lodash.throttle');

function _emitSocketProgress(uploader, progressData, file) {
  var progress = progressData.progress,
      bytesUploaded = progressData.bytesUploaded,
      bytesTotal = progressData.bytesTotal;

  if (progress) {
    uploader.uppy.log('Upload progress: ' + progress);
    uploader.uppy.emit('upload-progress', file, {
      uploader: uploader,
      bytesUploaded: bytesUploaded,
      bytesTotal: bytesTotal
    });
  }
}

module.exports = throttle(_emitSocketProgress, 300, { leading: true, trailing: true });

},{"lodash.throttle":8}],69:[function(require,module,exports){
var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

var isDOMElement = require('./isDOMElement');

/**
 * Find one or more DOM elements.
 *
 * @param {string} element
 * @return {Array|null}
 */
module.exports = function findAllDOMElements(element) {
  if (typeof element === 'string') {
    var elements = [].slice.call(document.querySelectorAll(element));
    return elements.length > 0 ? elements : null;
  }

  if ((typeof element === 'undefined' ? 'undefined' : _typeof(element)) === 'object' && isDOMElement(element)) {
    return [element];
  }
};

},{"./isDOMElement":79}],70:[function(require,module,exports){
var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

var isDOMElement = require('./isDOMElement');

/**
 * Find a DOM element.
 *
 * @param {Node|string} element
 * @return {Node|null}
 */
module.exports = function findDOMElement(element) {
  if (typeof element === 'string') {
    return document.querySelector(element);
  }

  if ((typeof element === 'undefined' ? 'undefined' : _typeof(element)) === 'object' && isDOMElement(element)) {
    return element;
  }
};

},{"./isDOMElement":79}],71:[function(require,module,exports){
/**
 * Takes a file object and turns it into fileID, by converting file.name to lowercase,
 * removing extra characters and adding type, size and lastModified
 *
 * @param {Object} file
 * @return {String} the fileID
 *
 */
module.exports = function generateFileID(file) {
  // filter is needed to not join empty values with `-`
  return ['uppy', file.name ? file.name.toLowerCase().replace(/[^A-Z0-9]/ig, '') : '', file.type, file.data.size, file.data.lastModified].filter(function (val) {
    return val;
  }).join('-');
};

},{}],72:[function(require,module,exports){
module.exports = function getBytesRemaining(fileProgress) {
  return fileProgress.bytesTotal - fileProgress.bytesUploaded;
};

},{}],73:[function(require,module,exports){
/**
* Takes a full filename string and returns an object {name, extension}
*
* @param {string} fullFileName
* @return {object} {name, extension}
*/
module.exports = function getFileNameAndExtension(fullFileName) {
  var re = /(?:\.([^.]+))?$/;
  var fileExt = re.exec(fullFileName)[1];
  var fileName = fullFileName.replace('.' + fileExt, '');
  return {
    name: fileName,
    extension: fileExt
  };
};

},{}],74:[function(require,module,exports){
var getFileNameAndExtension = require('./getFileNameAndExtension');
var mimeTypes = require('./mimeTypes');

module.exports = function getFileType(file) {
  var fileExtension = file.name ? getFileNameAndExtension(file.name).extension : null;

  if (file.isRemote) {
    // some remote providers do not support file types
    return file.type ? file.type : mimeTypes[fileExtension];
  }

  // check if mime type is set in the file object
  if (file.type) {
    return file.type;
  }

  // see if we can map extension to a mime type
  if (fileExtension && mimeTypes[fileExtension]) {
    return mimeTypes[fileExtension];
  }

  // if all fails, well, return empty
  return null;
};

},{"./getFileNameAndExtension":73,"./mimeTypes":84}],75:[function(require,module,exports){
// TODO Check which types are actually supported in browsers. Chrome likes webm
// from my testing, but we may need more.
// We could use a library but they tend to contain dozens of KBs of mappings,
// most of which will go unused, so not sure if that's worth it.
var mimeToExtensions = {
  'video/ogg': 'ogv',
  'audio/ogg': 'ogg',
  'video/webm': 'webm',
  'audio/webm': 'webm',
  'video/mp4': 'mp4',
  'audio/mp3': 'mp3'
};

module.exports = function getFileTypeExtension(mimeType) {
  return mimeToExtensions[mimeType] || null;
};

},{}],76:[function(require,module,exports){
module.exports = function getSocketHost(url) {
  // get the host domain
  var regex = /^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/;
  var host = regex.exec(url)[1];
  var socketProtocol = location.protocol === 'https:' ? 'wss' : 'ws';

  return socketProtocol + '://' + host;
};

},{}],77:[function(require,module,exports){
module.exports = function getSpeed(fileProgress) {
  if (!fileProgress.bytesUploaded) return 0;

  var timeElapsed = new Date() - fileProgress.uploadStarted;
  var uploadSpeed = fileProgress.bytesUploaded / (timeElapsed / 1000);
  return uploadSpeed;
};

},{}],78:[function(require,module,exports){
/**
 * Returns a timestamp in the format of `hours:minutes:seconds`
*/
module.exports = function getTimeStamp() {
  var date = new Date();
  var hours = pad(date.getHours().toString());
  var minutes = pad(date.getMinutes().toString());
  var seconds = pad(date.getSeconds().toString());
  return hours + ':' + minutes + ':' + seconds;
};

/**
 * Adds zero to strings shorter than two characters
*/
function pad(str) {
  return str.length !== 2 ? 0 + str : str;
}

},{}],79:[function(require,module,exports){
var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

/**
 * Check if an object is a DOM element. Duck-typing based on `nodeType`.
 *
 * @param {*} obj
 */
module.exports = function isDOMElement(obj) {
  return obj && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' && obj.nodeType === Node.ELEMENT_NODE;
};

},{}],80:[function(require,module,exports){
/**
 * Check if a URL string is an object URL from `URL.createObjectURL`.
 *
 * @param {string} url
 * @return {boolean}
 */
module.exports = function isObjectURL(url) {
  return url.indexOf('blob:') === 0;
};

},{}],81:[function(require,module,exports){
module.exports = function isPreviewSupported(fileType) {
  if (!fileType) return false;
  var fileTypeSpecific = fileType.split('/')[1];
  // list of images that browsers can preview
  if (/^(jpeg|gif|png|svg|svg\+xml|bmp)$/.test(fileTypeSpecific)) {
    return true;
  }
  return false;
};

},{}],82:[function(require,module,exports){
module.exports = function isTouchDevice() {
  return 'ontouchstart' in window || // works on most browsers
  navigator.maxTouchPoints; // works on IE10/11 and Surface
};

},{}],83:[function(require,module,exports){
/**
 * Limit the amount of simultaneously pending Promises.
 * Returns a function that, when passed a function `fn`,
 * will make sure that at most `limit` calls to `fn` are pending.
 *
 * @param {number} limit
 * @return {function()}
 */
module.exports = function limitPromises(limit) {
  var pending = 0;
  var queue = [];
  return function (fn) {
    return function () {
      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      var call = function call() {
        pending++;
        var promise = fn.apply(undefined, args);
        promise.then(onfinish, onfinish);
        return promise;
      };

      if (pending >= limit) {
        return new Promise(function (resolve, reject) {
          queue.push(function () {
            call().then(resolve, reject);
          });
        });
      }
      return call();
    };
  };
  function onfinish() {
    pending--;
    var next = queue.shift();
    if (next) next();
  }
};

},{}],84:[function(require,module,exports){
module.exports = {
  'md': 'text/markdown',
  'markdown': 'text/markdown',
  'mp4': 'video/mp4',
  'mp3': 'audio/mp3',
  'svg': 'image/svg+xml',
  'jpg': 'image/jpeg',
  'png': 'image/png',
  'gif': 'image/gif',
  'yaml': 'text/yaml',
  'yml': 'text/yaml',
  'csv': 'text/csv',
  'avi': 'video/x-msvideo',
  'mks': 'video/x-matroska',
  'mkv': 'video/x-matroska',
  'mov': 'video/quicktime',
  'doc': 'application/msword',
  'docm': 'application/vnd.ms-word.document.macroenabled.12',
  'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
  'dot': 'application/msword',
  'dotm': 'application/vnd.ms-word.template.macroenabled.12',
  'dotx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',
  'xla': 'application/vnd.ms-excel',
  'xlam': 'application/vnd.ms-excel.addin.macroenabled.12',
  'xlc': 'application/vnd.ms-excel',
  'xlf': 'application/x-xliff+xml',
  'xlm': 'application/vnd.ms-excel',
  'xls': 'application/vnd.ms-excel',
  'xlsb': 'application/vnd.ms-excel.sheet.binary.macroenabled.12',
  'xlsm': 'application/vnd.ms-excel.sheet.macroenabled.12',
  'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
  'xlt': 'application/vnd.ms-excel',
  'xltm': 'application/vnd.ms-excel.template.macroenabled.12',
  'xltx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',
  'xlw': 'application/vnd.ms-excel'
};

},{}],85:[function(require,module,exports){
var secondsToTime = require('./secondsToTime');

module.exports = function prettyETA(seconds) {
  var time = secondsToTime(seconds);

  // Only display hours and minutes if they are greater than 0 but always
  // display minutes if hours is being displayed
  // Display a leading zero if the there is a preceding unit: 1m 05s, but 5s
  var hoursStr = time.hours ? time.hours + 'h ' : '';
  var minutesVal = time.hours ? ('0' + time.minutes).substr(-2) : time.minutes;
  var minutesStr = minutesVal ? minutesVal + 'm ' : '';
  var secondsVal = minutesVal ? ('0' + time.seconds).substr(-2) : time.seconds;
  var secondsStr = secondsVal + 's';

  return '' + hoursStr + minutesStr + secondsStr;
};

},{"./secondsToTime":86}],86:[function(require,module,exports){
module.exports = function secondsToTime(rawSeconds) {
  var hours = Math.floor(rawSeconds / 3600) % 24;
  var minutes = Math.floor(rawSeconds / 60) % 60;
  var seconds = Math.floor(rawSeconds % 60);

  return { hours: hours, minutes: minutes, seconds: seconds };
};

},{}],87:[function(require,module,exports){
module.exports = function settle(promises) {
  var resolutions = [];
  var rejections = [];
  function resolved(value) {
    resolutions.push(value);
  }
  function rejected(error) {
    rejections.push(error);
  }

  var wait = Promise.all(promises.map(function (promise) {
    return promise.then(resolved, rejected);
  }));

  return wait.then(function () {
    return {
      successful: resolutions,
      failed: rejections
    };
  });
};

},{}],88:[function(require,module,exports){
/**
 * Converts list into array
*/
module.exports = function toArray(list) {
  return Array.prototype.slice.call(list || [], 0);
};

},{}],89:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

module.exports = function (props) {
  return h("svg", { "aria-hidden": "true", "class": "UppyIcon", width: "66", height: "55", viewBox: "0 0 66 55", xmlns: "http://www.w3.org/2000/svg" }, h("path", { d: "M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z", "fill-rule": "evenodd" }));
};

},{"preact":11}],90:[function(require,module,exports){
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('preact'),
    h = _require.h,
    Component = _require.Component;

var SnapshotButton = require('./SnapshotButton');
var RecordButton = require('./RecordButton');

function isModeAvailable(modes, mode) {
  return modes.indexOf(mode) !== -1;
}

var CameraScreen = function (_Component) {
  _inherits(CameraScreen, _Component);

  function CameraScreen() {
    _classCallCheck(this, CameraScreen);

    return _possibleConstructorReturn(this, _Component.apply(this, arguments));
  }

  CameraScreen.prototype.componentDidMount = function componentDidMount() {
    this.props.onFocus();
    this.btnContainer.firstChild.focus();
  };

  CameraScreen.prototype.componentWillUnmount = function componentWillUnmount() {
    this.props.onStop();
  };

  CameraScreen.prototype.render = function render() {
    var _this2 = this;

    var shouldShowRecordButton = this.props.supportsRecording && (isModeAvailable(this.props.modes, 'video-only') || isModeAvailable(this.props.modes, 'audio-only') || isModeAvailable(this.props.modes, 'video-audio'));
    var shouldShowSnapshotButton = isModeAvailable(this.props.modes, 'picture');

    return h('div', { 'class': 'uppy uppy-Webcam-container' }, h('div', { 'class': 'uppy-Webcam-videoContainer' }, h('video', { 'class': 'uppy-Webcam-video  ' + (this.props.mirror ? 'uppy-Webcam-video--mirrored' : ''), autoplay: true, muted: true, playsinline: true, srcObject: this.props.src || '' })), h('div', { 'class': 'uppy-Webcam-buttonContainer', ref: function ref(el) {
        _this2.btnContainer = el;
      } }, shouldShowSnapshotButton ? SnapshotButton(this.props) : null, ' ', shouldShowRecordButton ? RecordButton(this.props) : null));
  };

  return CameraScreen;
}(Component);

module.exports = CameraScreen;

},{"./RecordButton":92,"./SnapshotButton":93,"preact":11}],91:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

module.exports = function (props) {
  return h("div", { "class": "uppy-Webcam-permissons" }, h("div", { "class": "uppy-Webcam-permissonsIcon" }, props.icon()), h("h1", { "class": "uppy-Webcam-Title" }, "Please allow access to your camera"), h("p", null, "You have been prompted to allow camera access from this site.", h("br", null), "In order to take pictures with your camera you must approve this request."));
};

},{"preact":11}],92:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

module.exports = function RecordButton(_ref) {
  var recording = _ref.recording,
      onStartRecording = _ref.onStartRecording,
      onStopRecording = _ref.onStopRecording,
      i18n = _ref.i18n;

  console.log('is recording', recording);
  if (recording) {
    return h('button', { 'class': 'uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video',
      type: 'button',
      title: i18n('stopRecording'),
      'aria-label': i18n('stopRecording'),
      onclick: onStopRecording }, h('svg', { 'aria-hidden': 'true', 'class': 'UppyIcon', width: '100', height: '100', viewBox: '0 0 100 100' }, h('rect', { x: '15', y: '15', width: '70', height: '70' })));
  }

  return h('button', { 'class': 'uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video',
    type: 'button',
    title: i18n('startRecording'),
    'aria-label': i18n('startRecording'),
    onclick: onStartRecording }, h('svg', { 'aria-hidden': 'true', 'class': 'UppyIcon', width: '100', height: '100', viewBox: '0 0 100 100' }, h('circle', { cx: '50', cy: '50', r: '40' })));
};

},{"preact":11}],93:[function(require,module,exports){
var _require = require('preact'),
    h = _require.h;

var CameraIcon = require('./CameraIcon');

module.exports = function (_ref) {
  var onSnapshot = _ref.onSnapshot,
      i18n = _ref.i18n;

  return h('button', { 'class': 'uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture',
    type: 'button',
    title: i18n('takePicture'),
    'aria-label': i18n('takePicture'),
    onclick: onSnapshot }, CameraIcon());
};

},{"./CameraIcon":89,"preact":11}],94:[function(require,module,exports){
var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof2(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var _require = require('preact'),
    h = _require.h;

var _require2 = require('./../../core'),
    Plugin = _require2.Plugin;

var Translator = require('./../../utils/lib/Translator');
var getFileTypeExtension = require('./../../utils/lib/getFileTypeExtension');
var canvasToBlob = require('./../../utils/lib/canvasToBlob');
var supportsMediaRecorder = require('./supportsMediaRecorder');
var CameraIcon = require('./CameraIcon');
var CameraScreen = require('./CameraScreen');
var PermissionsScreen = require('./PermissionsScreen');

// Setup getUserMedia, with polyfill for older browsers
// Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia
function getMediaDevices() {
  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    return navigator.mediaDevices;
  }

  var _getUserMedia = navigator.mozGetUserMedia || navigator.webkitGetUserMedia;
  if (!_getUserMedia) {
    return null;
  }

  return {
    getUserMedia: function getUserMedia(opts) {
      return new Promise(function (resolve, reject) {
        _getUserMedia.call(navigator, opts, resolve, reject);
      });
    }
  };
}

/**
 * Webcam
 */
module.exports = function (_Plugin) {
  _inherits(Webcam, _Plugin);

  function Webcam(uppy, opts) {
    _classCallCheck(this, Webcam);

    var _this = _possibleConstructorReturn(this, _Plugin.call(this, uppy, opts));

    _this.mediaDevices = getMediaDevices();
    _this.supportsUserMedia = !!_this.mediaDevices;
    _this.protocol = location.protocol.match(/https/i) ? 'https' : 'http';
    _this.id = _this.opts.id || 'Webcam';
    _this.title = 'Camera';
    _this.type = 'acquirer';
    _this.icon = CameraIcon;

    var defaultLocale = {
      strings: {
        smile: 'Smile!',
        takePicture: 'Take a picture',
        startRecording: 'Begin video recording',
        stopRecording: 'Stop video recording'

        // set default options
      } };var defaultOptions = {
      onBeforeSnapshot: function onBeforeSnapshot() {
        return Promise.resolve();
      },
      countdown: false,
      locale: defaultLocale,
      modes: ['video-audio', 'video-only', 'audio-only', 'picture'],
      mirror: true,
      facingMode: 'user'

      // merge default options with the ones set by user
    };_this.opts = _extends({}, defaultOptions, opts);

    _this.locale = _extends({}, defaultLocale, _this.opts.locale);
    _this.locale.strings = _extends({}, defaultLocale.strings, _this.opts.locale.strings);

    // i18n
    _this.translator = new Translator({ locale: _this.locale });
    _this.i18n = _this.translator.translate.bind(_this.translator);

    _this.install = _this.install.bind(_this);
    _this.setPluginState = _this.setPluginState.bind(_this);

    _this.render = _this.render.bind(_this);

    // Camera controls
    _this.start = _this.start.bind(_this);
    _this.stop = _this.stop.bind(_this);
    _this.takeSnapshot = _this.takeSnapshot.bind(_this);
    _this.startRecording = _this.startRecording.bind(_this);
    _this.stopRecording = _this.stopRecording.bind(_this);
    _this.oneTwoThreeSmile = _this.oneTwoThreeSmile.bind(_this);
    _this.focus = _this.focus.bind(_this);

    _this.webcamActive = false;

    if (_this.opts.countdown) {
      _this.opts.onBeforeSnapshot = _this.oneTwoThreeSmile;
    }
    return _this;
  }

  Webcam.prototype.isSupported = function isSupported() {
    return !!this.mediaDevices;
  };

  Webcam.prototype.getConstraints = function getConstraints() {
    var acceptsAudio = this.opts.modes.indexOf('video-audio') !== -1 || this.opts.modes.indexOf('audio-only') !== -1;
    var acceptsVideo = this.opts.modes.indexOf('video-audio') !== -1 || this.opts.modes.indexOf('video-only') !== -1 || this.opts.modes.indexOf('picture') !== -1;

    return {
      audio: acceptsAudio,
      video: acceptsVideo ? { facingMode: this.opts.facingMode } : false
    };
  };

  Webcam.prototype.start = function start() {
    var _this2 = this;

    if (!this.isSupported()) {
      return Promise.reject(new Error('Webcam access not supported'));
    }

    this.webcamActive = true;

    var constraints = this.getConstraints();

    // ask user for access to their camera
    return this.mediaDevices.getUserMedia(constraints).then(function (stream) {
      _this2.stream = stream;
      // this.streamSrc = URL.createObjectURL(this.stream)
      _this2.setPluginState({
        cameraReady: true
      });
    }).catch(function (err) {
      _this2.setPluginState({
        cameraError: err
      });
    });
  };

  Webcam.prototype.startRecording = function startRecording() {
    var _this3 = this;

    // TODO We can check here if any of the mime types listed in the
    // mimeToExtensions map in Utils.js are supported, and prefer to use one of
    // those.
    // Right now we let the browser pick a type that it deems appropriate.
    this.recorder = new MediaRecorder(this.stream);
    this.recordingChunks = [];
    this.recorder.addEventListener('dataavailable', function (event) {
      _this3.recordingChunks.push(event.data);
    });
    this.recorder.start();

    this.setPluginState({
      isRecording: true
    });
  };

  Webcam.prototype.stopRecording = function stopRecording() {
    var _this4 = this;

    var stopped = new Promise(function (resolve, reject) {
      _this4.recorder.addEventListener('stop', function () {
        resolve();
      });
      _this4.recorder.stop();
    });

    return stopped.then(function () {
      _this4.setPluginState({
        isRecording: false
      });
      return _this4.getVideo();
    }).then(function (file) {
      try {
        _this4.uppy.addFile(file);
      } catch (err) {
        // Nothing, restriction errors handled in Core
      }
    }).then(function () {
      _this4.recordingChunks = null;
      _this4.recorder = null;
      var dashboard = _this4.uppy.getPlugin('Dashboard');
      if (dashboard) dashboard.hideAllPanels();
    }, function (error) {
      _this4.recordingChunks = null;
      _this4.recorder = null;
      throw error;
    });
  };

  Webcam.prototype.stop = function stop() {
    this.stream.getAudioTracks().forEach(function (track) {
      track.stop();
    });
    this.stream.getVideoTracks().forEach(function (track) {
      track.stop();
    });
    this.webcamActive = false;
    this.stream = null;
  };

  Webcam.prototype.getVideoElement = function getVideoElement() {
    return this.el.querySelector('.uppy-Webcam-video');
  };

  Webcam.prototype.oneTwoThreeSmile = function oneTwoThreeSmile() {
    var _this5 = this;

    return new Promise(function (resolve, reject) {
      var count = _this5.opts.countdown;

      var countDown = setInterval(function () {
        if (!_this5.webcamActive) {
          clearInterval(countDown);
          _this5.captureInProgress = false;
          return reject(new Error('Webcam is not active'));
        }

        if (count > 0) {
          _this5.uppy.info(count + '...', 'warning', 800);
          count--;
        } else {
          clearInterval(countDown);
          _this5.uppy.info(_this5.i18n('smile'), 'success', 1500);
          setTimeout(function () {
            return resolve();
          }, 1500);
        }
      }, 1000);
    });
  };

  Webcam.prototype.takeSnapshot = function takeSnapshot() {
    var _this6 = this;

    if (this.captureInProgress) return;
    this.captureInProgress = true;

    this.opts.onBeforeSnapshot().catch(function (err) {
      var message = (typeof err === 'undefined' ? 'undefined' : _typeof(err)) === 'object' ? err.message : err;
      _this6.uppy.info(message, 'error', 5000);
      return Promise.reject(new Error('onBeforeSnapshot: ' + message));
    }).then(function () {
      return _this6.getImage();
    }).then(function (tagFile) {
      _this6.captureInProgress = false;
      var dashboard = _this6.uppy.getPlugin('Dashboard');
      if (dashboard) dashboard.hideAllPanels();
      try {
        _this6.uppy.addFile(tagFile);
      } catch (err) {
        // Nothing, restriction errors handled in Core
      }
    }, function (error) {
      _this6.captureInProgress = false;
      throw error;
    });
  };

  Webcam.prototype.getImage = function getImage() {
    var _this7 = this;

    var video = this.getVideoElement();
    if (!video) {
      return Promise.reject(new Error('No video element found, likely due to the Webcam tab being closed.'));
    }

    var name = 'webcam-' + Date.now() + '.jpg';
    var mimeType = 'image/jpeg';

    var width = video.videoWidth;
    var height = video.videoHeight;

    // const scaleH = this.opts.mirror ? -1 : 1 // Set horizontal scale to -1 if flip horizontal
    // const scaleV = 1
    // const posX = this.opts.mirror ? width * -1 : 0 // Set x position to -100% if flip horizontal
    // const posY = 0

    var canvas = document.createElement('canvas');
    canvas.width = width;
    canvas.height = height;
    var ctx = canvas.getContext('2d');
    ctx.drawImage(video, 0, 0);
    // ctx.save() // Save the current state
    // ctx.scale(scaleH, scaleV) // Set scale to flip the image
    // ctx.drawImage(video, posX, posY, width, height) // draw the image
    // ctx.restore() // Restore the last saved state

    return canvasToBlob(canvas, mimeType).then(function (blob) {
      return {
        source: _this7.id,
        name: name,
        data: new File([blob], name, { type: mimeType }),
        type: mimeType
      };
    });
  };

  Webcam.prototype.getVideo = function getVideo() {
    var mimeType = this.recordingChunks[0].type;
    var fileExtension = getFileTypeExtension(mimeType);

    if (!fileExtension) {
      return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "' + mimeType + '"'));
    }

    var name = 'webcam-' + Date.now() + '.' + fileExtension;
    var blob = new Blob(this.recordingChunks, { type: mimeType });
    var file = {
      source: this.id,
      name: name,
      data: new File([blob], name, { type: mimeType }),
      type: mimeType
    };

    return Promise.resolve(file);
  };

  Webcam.prototype.focus = function focus() {
    var _this8 = this;

    if (this.opts.countdown) return;
    setTimeout(function () {
      _this8.uppy.info(_this8.i18n('smile'), 'success', 1500);
    }, 1000);
  };

  Webcam.prototype.render = function render(state) {
    if (!this.webcamActive) {
      this.start();
    }

    var webcamState = this.getPluginState();

    if (!webcamState.cameraReady) {
      return h(PermissionsScreen, { icon: CameraIcon });
    }

    return h(CameraScreen, _extends({}, webcamState, {
      onSnapshot: this.takeSnapshot,
      onStartRecording: this.startRecording,
      onStopRecording: this.stopRecording,
      onFocus: this.focus,
      onStop: this.stop,
      i18n: this.i18n,
      modes: this.opts.modes,
      supportsRecording: supportsMediaRecorder(),
      recording: webcamState.isRecording,
      mirror: this.opts.mirror,
      src: this.stream }));
  };

  Webcam.prototype.install = function install() {
    this.setPluginState({
      cameraReady: false
    });

    var target = this.opts.target;
    if (target) {
      this.mount(target, this);
    }
  };

  Webcam.prototype.uninstall = function uninstall() {
    if (this.stream) {
      this.stop();
    }

    this.unmount();
  };

  return Webcam;
}(Plugin);

},{"./../../core":25,"./../../utils/lib/Translator":65,"./../../utils/lib/canvasToBlob":66,"./../../utils/lib/getFileTypeExtension":75,"./CameraIcon":89,"./CameraScreen":90,"./PermissionsScreen":91,"./supportsMediaRecorder":95,"preact":11}],95:[function(require,module,exports){
module.exports = function supportsMediaRecorder() {
  return typeof MediaRecorder === 'function' && !!MediaRecorder.prototype && typeof MediaRecorder.prototype.start === 'function';
};

},{}],96:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],97:[function(require,module,exports){
var Uppy = require('./../../../../packages/@uppy/core');
var Dashboard = require('./../../../../packages/@uppy/dashboard');
var GoogleDrive = require('./../../../../packages/@uppy/google-drive');
var Dropbox = require('./../../../../packages/@uppy/dropbox');
var Instagram = require('./../../../../packages/@uppy/instagram');
var Url = require('./../../../../packages/@uppy/url');
var Webcam = require('./../../../../packages/@uppy/webcam');
var Tus = require('./../../../../packages/@uppy/tus');

var UPPY_SERVER = require('../env');

function uppyInit() {
  if (window.uppy) {
    window.uppy.close();
  }

  var opts = window.uppyOptions;
  var dashboardEl = document.querySelector('.UppyDashboard');
  if (dashboardEl) {
    var dashboardElParent = dashboardEl.parentNode;
    dashboardElParent.removeChild(dashboardEl);
  }

  var restrictions = {
    maxFileSize: 1000000,
    maxNumberOfFiles: 3,
    minNumberOfFiles: 2,
    allowedFileTypes: ['image/*', 'video/*']
  };

  var uppy = Uppy({
    debug: true,
    autoProceed: opts.autoProceed,
    restrictions: opts.restrictions ? restrictions : ''
  });

  uppy.use(Dashboard, {
    trigger: '.UppyModalOpenerBtn',
    inline: opts.DashboardInline,
    target: opts.DashboardInline ? '.DashboardContainer' : 'body',
    replaceTargetContent: opts.DashboardInline,
    note: opts.restrictions ? 'Images and video only, 2–3 files, up to 1 MB' : '',
    height: 470,
    showProgressDetails: true,
    metaFields: [{ id: 'name', name: 'Name', placeholder: 'file name' }, { id: 'caption', name: 'Caption', placeholder: 'add description' }],
    browserBackButtonClose: opts.browserBackButtonClose
  });

  if (opts.GoogleDrive) {
    uppy.use(GoogleDrive, { target: Dashboard, serverUrl: UPPY_SERVER });
  }

  if (opts.Dropbox) {
    uppy.use(Dropbox, { target: Dashboard, serverUrl: UPPY_SERVER });
  }

  if (opts.Instagram) {
    uppy.use(Instagram, { target: Dashboard, serverUrl: UPPY_SERVER });
  }

  if (opts.Url) {
    uppy.use(Url, { target: Dashboard, serverUrl: UPPY_SERVER });
  }

  if (opts.Webcam) {
    uppy.use(Webcam, { target: Dashboard });
  }

  uppy.use(Tus, { endpoint: 'https://master.tus.io/files/', resume: true });

  uppy.on('complete', function (result) {
    console.log('successful files:');
    console.log(result.successful);
    console.log('failed files:');
    console.log(result.failed);
  });
}

uppyInit();
window.uppyInit = uppyInit;

},{"../env":98,"./../../../../packages/@uppy/core":25,"./../../../../packages/@uppy/dashboard":37,"./../../../../packages/@uppy/dropbox":40,"./../../../../packages/@uppy/google-drive":41,"./../../../../packages/@uppy/instagram":43,"./../../../../packages/@uppy/tus":62,"./../../../../packages/@uppy/url":64,"./../../../../packages/@uppy/webcam":94}],98:[function(require,module,exports){
var uppyServerEndpoint = 'http://localhost:3020';

if (location.hostname === 'uppy.io') {
  uppyServerEndpoint = '//server.uppy.io';
}

var UPPY_SERVER = uppyServerEndpoint;
module.exports = UPPY_SERVER;

},{}]},{},[97])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9jdWlkL2luZGV4LmpzIiwiLi4vbm9kZV9tb2R1bGVzL2N1aWQvbGliL2ZpbmdlcnByaW50LmJyb3dzZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvY3VpZC9saWIvcGFkLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2RyYWctZHJvcC9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9leHRlbmQvaW5kZXguanMiLCIuLi9ub2RlX21vZHVsZXMvZmxhdHRlbi9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9sb2Rhc2gudGhyb3R0bGUvaW5kZXguanMiLCIuLi9ub2RlX21vZHVsZXMvbWltZS1tYXRjaC9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9uYW1lc3BhY2UtZW1pdHRlci9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9wcmVhY3QvZGlzdC9wcmVhY3QuanMiLCIuLi9ub2RlX21vZHVsZXMvcHJldHRpZXItYnl0ZXMvaW5kZXguanMiLCIuLi9ub2RlX21vZHVsZXMvcmVzb2x2ZS11cmwvcmVzb2x2ZS11cmwuanMiLCIuLi9ub2RlX21vZHVsZXMvcnVuLXBhcmFsbGVsL2luZGV4LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3R1cy1qcy1jbGllbnQvbGliLmVzNS9icm93c2VyL2Jhc2U2NC5qcyIsIi4uL25vZGVfbW9kdWxlcy90dXMtanMtY2xpZW50L2xpYi5lczUvYnJvd3Nlci9yZXF1ZXN0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3R1cy1qcy1jbGllbnQvbGliLmVzNS9icm93c2VyL3NvdXJjZS5qcyIsIi4uL25vZGVfbW9kdWxlcy90dXMtanMtY2xpZW50L2xpYi5lczUvYnJvd3Nlci9zdG9yYWdlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3R1cy1qcy1jbGllbnQvbGliLmVzNS9lcnJvci5qcyIsIi4uL25vZGVfbW9kdWxlcy90dXMtanMtY2xpZW50L2xpYi5lczUvZmluZ2VycHJpbnQuanMiLCIuLi9ub2RlX21vZHVsZXMvdHVzLWpzLWNsaWVudC9saWIuZXM1L2luZGV4LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3R1cy1qcy1jbGllbnQvbGliLmVzNS91cGxvYWQuanMiLCIuLi9ub2RlX21vZHVsZXMvd2lsZGNhcmQvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9AdXBweS9jb3JlL2xpYi9QbHVnaW4uanMiLCIuLi9wYWNrYWdlcy9AdXBweS9jb3JlL2xpYi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L2Rhc2hib2FyZC9saWIvQWN0aW9uQnJvd3NlVGFnbGluZS5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L2Rhc2hib2FyZC9saWIvRGFzaGJvYXJkLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvZGFzaGJvYXJkL2xpYi9GaWxlQ2FyZC5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L2Rhc2hib2FyZC9saWIvRmlsZUl0ZW0uanMiLCIuLi9wYWNrYWdlcy9AdXBweS9kYXNoYm9hcmQvbGliL0ZpbGVJdGVtUHJvZ3Jlc3MuanMiLCIuLi9wYWNrYWdlcy9AdXBweS9kYXNoYm9hcmQvbGliL0ZpbGVMaXN0LmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvZGFzaGJvYXJkL2xpYi9GaWxlUHJldmlldy5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L2Rhc2hib2FyZC9saWIvVGFicy5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L2Rhc2hib2FyZC9saWIvY29weVRvQ2xpcGJvYXJkLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvZGFzaGJvYXJkL2xpYi9nZXRGaWxlVHlwZUljb24uanMiLCIuLi9wYWNrYWdlcy9AdXBweS9kYXNoYm9hcmQvbGliL2ljb25zLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvZGFzaGJvYXJkL2xpYi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L2Rhc2hib2FyZC9saWIvdHJ1bmNhdGVTdHJpbmcuanMiLCIuLi9wYWNrYWdlcy9AdXBweS9kcm9wYm94L2xpYi9pY29ucy5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L2Ryb3Bib3gvbGliL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvZ29vZ2xlLWRyaXZlL2xpYi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L2luZm9ybWVyL2xpYi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L2luc3RhZ3JhbS9saWIvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9AdXBweS9wcm92aWRlci12aWV3cy9saWIvQXV0aFZpZXcuanMiLCIuLi9wYWNrYWdlcy9AdXBweS9wcm92aWRlci12aWV3cy9saWIvQnJlYWRjcnVtYnMuanMiLCIuLi9wYWNrYWdlcy9AdXBweS9wcm92aWRlci12aWV3cy9saWIvQnJvd3Nlci5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3Byb3ZpZGVyLXZpZXdzL2xpYi9GaWx0ZXIuanMiLCIuLi9wYWNrYWdlcy9AdXBweS9wcm92aWRlci12aWV3cy9saWIvRm9vdGVyQWN0aW9ucy5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3Byb3ZpZGVyLXZpZXdzL2xpYi9JdGVtLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvcHJvdmlkZXItdmlld3MvbGliL0l0ZW1MaXN0LmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvcHJvdmlkZXItdmlld3MvbGliL0xvYWRlci5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3Byb3ZpZGVyLXZpZXdzL2xpYi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3NlcnZlci11dGlscy9saWIvUHJvdmlkZXIuanMiLCIuLi9wYWNrYWdlcy9AdXBweS9zZXJ2ZXItdXRpbHMvbGliL1JlcXVlc3RDbGllbnQuanMiLCIuLi9wYWNrYWdlcy9AdXBweS9zZXJ2ZXItdXRpbHMvbGliL1NvY2tldC5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3NlcnZlci11dGlscy9saWIvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9AdXBweS9zdGF0dXMtYmFyL2xpYi9TdGF0dXNCYXIuanMiLCIuLi9wYWNrYWdlcy9AdXBweS9zdGF0dXMtYmFyL2xpYi9TdGF0dXNCYXJTdGF0ZXMuanMiLCIuLi9wYWNrYWdlcy9AdXBweS9zdGF0dXMtYmFyL2xpYi9pbmRleC5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3N0b3JlLWRlZmF1bHQvbGliL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdGh1bWJuYWlsLWdlbmVyYXRvci9saWIvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9AdXBweS90dXMvbGliL2luZGV4LmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdXJsL2xpYi9VcmxVSS5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3VybC9saWIvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9AdXBweS91dGlscy9saWIvVHJhbnNsYXRvci5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3V0aWxzL2xpYi9jYW52YXNUb0Jsb2IuanMiLCIuLi9wYWNrYWdlcy9AdXBweS91dGlscy9saWIvZGF0YVVSSXRvQmxvYi5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3V0aWxzL2xpYi9lbWl0U29ja2V0UHJvZ3Jlc3MuanMiLCIuLi9wYWNrYWdlcy9AdXBweS91dGlscy9saWIvZmluZEFsbERPTUVsZW1lbnRzLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdXRpbHMvbGliL2ZpbmRET01FbGVtZW50LmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdXRpbHMvbGliL2dlbmVyYXRlRmlsZUlELmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdXRpbHMvbGliL2dldEJ5dGVzUmVtYWluaW5nLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdXRpbHMvbGliL2dldEZpbGVOYW1lQW5kRXh0ZW5zaW9uLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdXRpbHMvbGliL2dldEZpbGVUeXBlLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdXRpbHMvbGliL2dldEZpbGVUeXBlRXh0ZW5zaW9uLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdXRpbHMvbGliL2dldFNvY2tldEhvc3QuanMiLCIuLi9wYWNrYWdlcy9AdXBweS91dGlscy9saWIvZ2V0U3BlZWQuanMiLCIuLi9wYWNrYWdlcy9AdXBweS91dGlscy9saWIvZ2V0VGltZVN0YW1wLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdXRpbHMvbGliL2lzRE9NRWxlbWVudC5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3V0aWxzL2xpYi9pc09iamVjdFVSTC5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3V0aWxzL2xpYi9pc1ByZXZpZXdTdXBwb3J0ZWQuanMiLCIuLi9wYWNrYWdlcy9AdXBweS91dGlscy9saWIvaXNUb3VjaERldmljZS5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3V0aWxzL2xpYi9saW1pdFByb21pc2VzLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvdXRpbHMvbGliL21pbWVUeXBlcy5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3V0aWxzL2xpYi9wcmV0dHlFVEEuanMiLCIuLi9wYWNrYWdlcy9AdXBweS91dGlscy9saWIvc2Vjb25kc1RvVGltZS5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3V0aWxzL2xpYi9zZXR0bGUuanMiLCIuLi9wYWNrYWdlcy9AdXBweS91dGlscy9saWIvdG9BcnJheS5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3dlYmNhbS9saWIvQ2FtZXJhSWNvbi5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3dlYmNhbS9saWIvQ2FtZXJhU2NyZWVuLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvd2ViY2FtL2xpYi9QZXJtaXNzaW9uc1NjcmVlbi5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3dlYmNhbS9saWIvUmVjb3JkQnV0dG9uLmpzIiwiLi4vcGFja2FnZXMvQHVwcHkvd2ViY2FtL2xpYi9TbmFwc2hvdEJ1dHRvbi5qcyIsIi4uL3BhY2thZ2VzL0B1cHB5L3dlYmNhbS9saWIvaW5kZXguanMiLCIuLi9wYWNrYWdlcy9AdXBweS93ZWJjYW0vbGliL3N1cHBvcnRzTWVkaWFSZWNvcmRlci5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJzcmMvZXhhbXBsZXMvZGFzaGJvYXJkL2FwcC5lczYiLCJzcmMvZXhhbXBsZXMvZW52LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3ZiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TEEsSUFBTSxPQUFPLFFBQVEsWUFBUixDQUFiO0FBQ0EsSUFBTSxZQUFZLFFBQVEsaUJBQVIsQ0FBbEI7QUFDQSxJQUFNLGNBQWMsUUFBUSxv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QUNsRkEsSUFBSSxxQkFBcUIsdUJBQXpCOztBQUVBLElBQUksU0FBUyxRQUFULEtBQXNCLFNBQTFCLEVBQXFDO0FBQ25DLHVCQUFxQixrQkFBckI7QUFDRDs7QUFFRCxJQUFNLGNBQWMsa0JBQXBCO0FBQ0EsT0FBTyxPQUFQLEdBQWlCLFdBQWpCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNyBKZWQgV2F0c29uLlxuICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZVxuICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZXMgKCkge1xuXHRcdHZhciBjbGFzc2VzID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmICghYXJnKSBjb250aW51ZTtcblxuXHRcdFx0dmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnO1xuXG5cdFx0XHRpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZyk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSAmJiBhcmcubGVuZ3RoKSB7XG5cdFx0XHRcdHZhciBpbm5lciA9IGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKTtcblx0XHRcdFx0aWYgKGlubmVyKSB7XG5cdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGlubmVyKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG5cdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsYXNzZXMuam9pbignICcpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0Y2xhc3NOYW1lcy5kZWZhdWx0ID0gY2xhc3NOYW1lcztcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIHJlZ2lzdGVyIGFzICdjbGFzc25hbWVzJywgY29uc2lzdGVudCB3aXRoIG5wbSBwYWNrYWdlIG5hbWVcblx0XHRkZWZpbmUoJ2NsYXNzbmFtZXMnLCBbXSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGNsYXNzTmFtZXM7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuXHR9XG59KCkpO1xuIiwiLyoqXG4gKiBjdWlkLmpzXG4gKiBDb2xsaXNpb24tcmVzaXN0YW50IFVJRCBnZW5lcmF0b3IgZm9yIGJyb3dzZXJzIGFuZCBub2RlLlxuICogU2VxdWVudGlhbCBmb3IgZmFzdCBkYiBsb29rdXBzIGFuZCByZWNlbmN5IHNvcnRpbmcuXG4gKiBTYWZlIGZvciBlbGVtZW50IElEcyBhbmQgc2VydmVyLXNpZGUgbG9va3Vwcy5cbiAqXG4gKiBFeHRyYWN0ZWQgZnJvbSBDTENUUlxuICpcbiAqIENvcHlyaWdodCAoYykgRXJpYyBFbGxpb3R0IDIwMTJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxudmFyIGZpbmdlcnByaW50ID0gcmVxdWlyZSgnLi9saWIvZmluZ2VycHJpbnQuanMnKTtcbnZhciBwYWQgPSByZXF1aXJlKCcuL2xpYi9wYWQuanMnKTtcblxudmFyIGMgPSAwLFxuICBibG9ja1NpemUgPSA0LFxuICBiYXNlID0gMzYsXG4gIGRpc2NyZXRlVmFsdWVzID0gTWF0aC5wb3coYmFzZSwgYmxvY2tTaXplKTtcblxuZnVuY3Rpb24gcmFuZG9tQmxvY2sgKCkge1xuICByZXR1cm4gcGFkKChNYXRoLnJhbmRvbSgpICpcbiAgICBkaXNjcmV0ZVZhbHVlcyA8PCAwKVxuICAgIC50b1N0cmluZyhiYXNlKSwgYmxvY2tTaXplKTtcbn1cblxuZnVuY3Rpb24gc2FmZUNvdW50ZXIgKCkge1xuICBjID0gYyA8IGRpc2NyZXRlVmFsdWVzID8gYyA6IDA7XG4gIGMrKzsgLy8gdGhpcyBpcyBub3Qgc3VibGltaW5hbFxuICByZXR1cm4gYyAtIDE7XG59XG5cbmZ1bmN0aW9uIGN1aWQgKCkge1xuICAvLyBTdGFydGluZyB3aXRoIGEgbG93ZXJjYXNlIGxldHRlciBtYWtlc1xuICAvLyBpdCBIVE1MIGVsZW1lbnQgSUQgZnJpZW5kbHkuXG4gIHZhciBsZXR0ZXIgPSAnYycsIC8vIGhhcmQtY29kZWQgYWxsb3dzIGZvciBzZXF1ZW50aWFsIGFjY2Vzc1xuXG4gICAgLy8gdGltZXN0YW1wXG4gICAgLy8gd2FybmluZzogdGhpcyBleHBvc2VzIHRoZSBleGFjdCBkYXRlIGFuZCB0aW1lXG4gICAgLy8gdGhhdCB0aGUgdWlkIHdhcyBjcmVhdGVkLlxuICAgIHRpbWVzdGFtcCA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSkudG9TdHJpbmcoYmFzZSksXG5cbiAgICAvLyBQcmV2ZW50IHNhbWUtbWFjaGluZSBjb2xsaXNpb25zLlxuICAgIGNvdW50ZXIgPSBwYWQoc2FmZUNvdW50ZXIoKS50b1N0cmluZyhiYXNlKSwgYmxvY2tTaXplKSxcblxuICAgIC8vIEEgZmV3IGNoYXJzIHRvIGdlbmVyYXRlIGRpc3RpbmN0IGlkcyBmb3IgZGlmZmVyZW50XG4gICAgLy8gY2xpZW50cyAoc28gZGlmZmVyZW50IGNvbXB1dGVycyBhcmUgZmFyIGxlc3NcbiAgICAvLyBsaWtlbHkgdG8gZ2VuZXJhdGUgdGhlIHNhbWUgaWQpXG4gICAgcHJpbnQgPSBmaW5nZXJwcmludCgpLFxuXG4gICAgLy8gR3JhYiBzb21lIG1vcmUgY2hhcnMgZnJvbSBNYXRoLnJhbmRvbSgpXG4gICAgcmFuZG9tID0gcmFuZG9tQmxvY2soKSArIHJhbmRvbUJsb2NrKCk7XG5cbiAgcmV0dXJuIGxldHRlciArIHRpbWVzdGFtcCArIGNvdW50ZXIgKyBwcmludCArIHJhbmRvbTtcbn1cblxuY3VpZC5zbHVnID0gZnVuY3Rpb24gc2x1ZyAoKSB7XG4gIHZhciBkYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoMzYpLFxuICAgIGNvdW50ZXIgPSBzYWZlQ291bnRlcigpLnRvU3RyaW5nKDM2KS5zbGljZSgtNCksXG4gICAgcHJpbnQgPSBmaW5nZXJwcmludCgpLnNsaWNlKDAsIDEpICtcbiAgICAgIGZpbmdlcnByaW50KCkuc2xpY2UoLTEpLFxuICAgIHJhbmRvbSA9IHJhbmRvbUJsb2NrKCkuc2xpY2UoLTIpO1xuXG4gIHJldHVybiBkYXRlLnNsaWNlKC0yKSArXG4gICAgY291bnRlciArIHByaW50ICsgcmFuZG9tO1xufTtcblxuY3VpZC5maW5nZXJwcmludCA9IGZpbmdlcnByaW50O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGN1aWQ7XG4iLCJ2YXIgcGFkID0gcmVxdWlyZSgnLi9wYWQuanMnKTtcblxudmFyIGVudiA9IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnID8gd2luZG93IDogc2VsZjtcbnZhciBnbG9iYWxDb3VudCA9IE9iamVjdC5rZXlzKGVudikubGVuZ3RoO1xudmFyIG1pbWVUeXBlc0xlbmd0aCA9IG5hdmlnYXRvci5taW1lVHlwZXMgPyBuYXZpZ2F0b3IubWltZVR5cGVzLmxlbmd0aCA6IDA7XG52YXIgY2xpZW50SWQgPSBwYWQoKG1pbWVUeXBlc0xlbmd0aCArXG4gIG5hdmlnYXRvci51c2VyQWdlbnQubGVuZ3RoKS50b1N0cmluZygzNikgK1xuICBnbG9iYWxDb3VudC50b1N0cmluZygzNiksIDQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZpbmdlcnByaW50ICgpIHtcbiAgcmV0dXJuIGNsaWVudElkO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFkIChudW0sIHNpemUpIHtcbiAgdmFyIHMgPSAnMDAwMDAwMDAwJyArIG51bTtcbiAgcmV0dXJuIHMuc3Vic3RyKHMubGVuZ3RoIC0gc2l6ZSk7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBkcmFnRHJvcFxuXG52YXIgZmxhdHRlbiA9IHJlcXVpcmUoJ2ZsYXR0ZW4nKVxudmFyIHBhcmFsbGVsID0gcmVxdWlyZSgncnVuLXBhcmFsbGVsJylcblxuZnVuY3Rpb24gZHJhZ0Ryb3AgKGVsZW0sIGxpc3RlbmVycykge1xuICBpZiAodHlwZW9mIGVsZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIHNlbGVjdG9yID0gZWxlbVxuICAgIGVsZW0gPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtKVxuICAgIGlmICghZWxlbSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdcIicgKyBzZWxlY3RvciArICdcIiBkb2VzIG5vdCBtYXRjaCBhbnkgSFRNTCBlbGVtZW50cycpXG4gICAgfVxuICB9XG5cbiAgaWYgKCFlbGVtKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdcIicgKyBlbGVtICsgJ1wiIGlzIG5vdCBhIHZhbGlkIEhUTUwgZWxlbWVudCcpXG4gIH1cblxuICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGxpc3RlbmVycyA9IHsgb25Ecm9wOiBsaXN0ZW5lcnMgfVxuICB9XG5cbiAgdmFyIHRpbWVvdXRcblxuICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIG9uRHJhZ0VudGVyLCBmYWxzZSlcbiAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIG9uRHJhZ092ZXIsIGZhbHNlKVxuICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIG9uRHJhZ0xlYXZlLCBmYWxzZSlcbiAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgb25Ecm9wLCBmYWxzZSlcblxuICAvLyBGdW5jdGlvbiB0byByZW1vdmUgZHJhZy1kcm9wIGxpc3RlbmVyc1xuICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlICgpIHtcbiAgICByZW1vdmVEcmFnQ2xhc3MoKVxuICAgIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgb25EcmFnRW50ZXIsIGZhbHNlKVxuICAgIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBvbkRyYWdPdmVyLCBmYWxzZSlcbiAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIG9uRHJhZ0xlYXZlLCBmYWxzZSlcbiAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBvbkRyb3AsIGZhbHNlKVxuICB9XG5cbiAgZnVuY3Rpb24gb25EcmFnRW50ZXIgKGUpIHtcbiAgICBpZiAobGlzdGVuZXJzLm9uRHJhZ0VudGVyKSB7XG4gICAgICBsaXN0ZW5lcnMub25EcmFnRW50ZXIoZSlcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IGV2ZW50XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZnVuY3Rpb24gb25EcmFnT3ZlciAoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoZS5kYXRhVHJhbnNmZXIuaXRlbXMpIHtcbiAgICAgIC8vIE9ubHkgYWRkIFwiZHJhZ1wiIGNsYXNzIHdoZW4gYGl0ZW1zYCBjb250YWlucyBpdGVtcyB0aGF0IGFyZSBhYmxlIHRvIGJlXG4gICAgICAvLyBoYW5kbGVkIGJ5IHRoZSByZWdpc3RlcmVkIGxpc3RlbmVycyAoZmlsZXMgdnMuIHRleHQpXG4gICAgICB2YXIgaXRlbXMgPSB0b0FycmF5KGUuZGF0YVRyYW5zZmVyLml0ZW1zKVxuICAgICAgdmFyIGZpbGVJdGVtcyA9IGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbS5raW5kID09PSAnZmlsZScgfSlcbiAgICAgIHZhciB0ZXh0SXRlbXMgPSBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0ua2luZCA9PT0gJ3N0cmluZycgfSlcblxuICAgICAgaWYgKGZpbGVJdGVtcy5sZW5ndGggPT09IDAgJiYgIWxpc3RlbmVycy5vbkRyb3BUZXh0KSByZXR1cm5cbiAgICAgIGlmICh0ZXh0SXRlbXMubGVuZ3RoID09PSAwICYmICFsaXN0ZW5lcnMub25Ecm9wKSByZXR1cm5cbiAgICAgIGlmIChmaWxlSXRlbXMubGVuZ3RoID09PSAwICYmIHRleHRJdGVtcy5sZW5ndGggPT09IDApIHJldHVyblxuICAgIH1cblxuICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnZHJhZycpXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpXG5cbiAgICBpZiAobGlzdGVuZXJzLm9uRHJhZ092ZXIpIHtcbiAgICAgIGxpc3RlbmVycy5vbkRyYWdPdmVyKGUpXG4gICAgfVxuXG4gICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5J1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZnVuY3Rpb24gb25EcmFnTGVhdmUgKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpZiAobGlzdGVuZXJzLm9uRHJhZ0xlYXZlKSB7XG4gICAgICBsaXN0ZW5lcnMub25EcmFnTGVhdmUoZSlcbiAgICB9XG5cbiAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChyZW1vdmVEcmFnQ2xhc3MsIDUwKVxuXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBmdW5jdGlvbiBvbkRyb3AgKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpZiAobGlzdGVuZXJzLm9uRHJhZ0xlYXZlKSB7XG4gICAgICBsaXN0ZW5lcnMub25EcmFnTGVhdmUoZSlcbiAgICB9XG5cbiAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICByZW1vdmVEcmFnQ2xhc3MoKVxuXG4gICAgdmFyIHBvcyA9IHtcbiAgICAgIHg6IGUuY2xpZW50WCxcbiAgICAgIHk6IGUuY2xpZW50WVxuICAgIH1cblxuICAgIC8vIHRleHQgZHJvcCBzdXBwb3J0XG4gICAgdmFyIHRleHQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0JylcbiAgICBpZiAodGV4dCAmJiBsaXN0ZW5lcnMub25Ecm9wVGV4dCkge1xuICAgICAgbGlzdGVuZXJzLm9uRHJvcFRleHQodGV4dCwgcG9zKVxuICAgIH1cblxuICAgIC8vIGZpbGUgZHJvcCBzdXBwb3J0XG4gICAgaWYgKGUuZGF0YVRyYW5zZmVyLmZpbGVzKSB7XG4gICAgICBjb25zb2xlLmxvZygnZS5kYXRhVHJhbnNmZXIuZmlsZXMnKVxuICAgICAgdmFyIGZpbGVzID0gdG9BcnJheShlLmRhdGFUcmFuc2Zlci5maWxlcylcblxuICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgICAgIGZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgZmlsZS5mdWxsUGF0aCA9ICcvJyArIGZpbGUubmFtZVxuICAgICAgfSlcblxuICAgICAgaWYgKGxpc3RlbmVycy5vbkRyb3ApIHtcbiAgICAgICAgbGlzdGVuZXJzLm9uRHJvcChmaWxlcywgcG9zKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZS5kYXRhVHJhbnNmZXIuaXRlbXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlLmRhdGFUcmFuc2Zlci5pdGVtcycpXG4gICAgICAvLyBIYW5kbGUgZGlyZWN0b3JpZXMgaW4gQ2hyb21lIHVzaW5nIHRoZSBwcm9wcmlldGFyeSBGaWxlU3lzdGVtIEFQSVxuICAgICAgdmFyIGl0ZW1zID0gdG9BcnJheShlLmRhdGFUcmFuc2Zlci5pdGVtcykuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmtpbmQgPT09ICdmaWxlJ1xuICAgICAgfSlcblxuICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgICAgIHBhcmFsbGVsKGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgcHJvY2Vzc0VudHJ5KGl0ZW0ud2Via2l0R2V0QXNFbnRyeSgpLCBjYilcbiAgICAgICAgfVxuICAgICAgfSksIGZ1bmN0aW9uIChlcnIsIHJlc3VsdHMpIHtcbiAgICAgICAgLy8gVGhpcyBjYXRjaGVzIHBlcm1pc3Npb24gZXJyb3JzIHdpdGggZmlsZTovLyBpbiBDaHJvbWUuIFRoaXMgc2hvdWxkIG5ldmVyXG4gICAgICAgIC8vIHRocm93IGluIHByb2R1Y3Rpb24gY29kZSwgc28gdGhlIHVzZXIgZG9lcyBub3QgbmVlZCB0byB1c2UgdHJ5LWNhdGNoLlxuICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnJcbiAgICAgICAgaWYgKGxpc3RlbmVycy5vbkRyb3ApIHtcbiAgICAgICAgICBsaXN0ZW5lcnMub25Ecm9wKGZsYXR0ZW4ocmVzdWx0cyksIHBvcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZURyYWdDbGFzcyAoKSB7XG4gICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnJylcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzRW50cnkgKGVudHJ5LCBjYikge1xuICB2YXIgZW50cmllcyA9IFtdXG5cbiAgaWYgKGVudHJ5LmlzRmlsZSkge1xuICAgIGVudHJ5LmZpbGUoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIGZpbGUuZnVsbFBhdGggPSBlbnRyeS5mdWxsUGF0aCAvLyBwcmVzZXJ2ZSBwYXRoaW5nIGZvciBjb25zdW1lclxuICAgICAgY2IobnVsbCwgZmlsZSlcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBjYihlcnIpXG4gICAgfSlcbiAgfSBlbHNlIGlmIChlbnRyeS5pc0RpcmVjdG9yeSkge1xuICAgIHZhciByZWFkZXIgPSBlbnRyeS5jcmVhdGVSZWFkZXIoKVxuICAgIHJlYWRFbnRyaWVzKClcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRFbnRyaWVzICgpIHtcbiAgICByZWFkZXIucmVhZEVudHJpZXMoZnVuY3Rpb24gKGVudHJpZXNfKSB7XG4gICAgICBpZiAoZW50cmllc18ubGVuZ3RoID4gMCkge1xuICAgICAgICBlbnRyaWVzID0gZW50cmllcy5jb25jYXQodG9BcnJheShlbnRyaWVzXykpXG4gICAgICAgIHJlYWRFbnRyaWVzKCkgLy8gY29udGludWUgcmVhZGluZyBlbnRyaWVzIHVudGlsIGByZWFkRW50cmllc2AgcmV0dXJucyBubyBtb3JlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb25lRW50cmllcygpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGRvbmVFbnRyaWVzICgpIHtcbiAgICBwYXJhbGxlbChlbnRyaWVzLm1hcChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgcHJvY2Vzc0VudHJ5KGVudHJ5LCBjYilcbiAgICAgIH1cbiAgICB9KSwgY2IpXG4gIH1cbn1cblxuZnVuY3Rpb24gdG9BcnJheSAobGlzdCkge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobGlzdCB8fCBbXSwgMClcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG52YXIgaXNBcnJheSA9IGZ1bmN0aW9uIGlzQXJyYXkoYXJyKSB7XG5cdGlmICh0eXBlb2YgQXJyYXkuaXNBcnJheSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHJldHVybiBBcnJheS5pc0FycmF5KGFycik7XG5cdH1cblxuXHRyZXR1cm4gdG9TdHIuY2FsbChhcnIpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxudmFyIGlzUGxhaW5PYmplY3QgPSBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuXHRpZiAoIW9iaiB8fCB0b1N0ci5jYWxsKG9iaikgIT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dmFyIGhhc093bkNvbnN0cnVjdG9yID0gaGFzT3duLmNhbGwob2JqLCAnY29uc3RydWN0b3InKTtcblx0dmFyIGhhc0lzUHJvdG90eXBlT2YgPSBvYmouY29uc3RydWN0b3IgJiYgb2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSAmJiBoYXNPd24uY2FsbChvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCAnaXNQcm90b3R5cGVPZicpO1xuXHQvLyBOb3Qgb3duIGNvbnN0cnVjdG9yIHByb3BlcnR5IG11c3QgYmUgT2JqZWN0XG5cdGlmIChvYmouY29uc3RydWN0b3IgJiYgIWhhc093bkNvbnN0cnVjdG9yICYmICFoYXNJc1Byb3RvdHlwZU9mKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gT3duIHByb3BlcnRpZXMgYXJlIGVudW1lcmF0ZWQgZmlyc3RseSwgc28gdG8gc3BlZWQgdXAsXG5cdC8vIGlmIGxhc3Qgb25lIGlzIG93biwgdGhlbiBhbGwgcHJvcGVydGllcyBhcmUgb3duLlxuXHR2YXIga2V5O1xuXHRmb3IgKGtleSBpbiBvYmopIHsgLyoqLyB9XG5cblx0cmV0dXJuIHR5cGVvZiBrZXkgPT09ICd1bmRlZmluZWQnIHx8IGhhc093bi5jYWxsKG9iaiwga2V5KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZXh0ZW5kKCkge1xuXHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmU7XG5cdHZhciB0YXJnZXQgPSBhcmd1bWVudHNbMF07XG5cdHZhciBpID0gMTtcblx0dmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdHZhciBkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0ZGVlcCA9IHRhcmdldDtcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbMV0gfHwge307XG5cdFx0Ly8gc2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuXHRcdGkgPSAyO1xuXHR9XG5cdGlmICh0YXJnZXQgPT0gbnVsbCB8fCAodHlwZW9mIHRhcmdldCAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIHRhcmdldCAhPT0gJ2Z1bmN0aW9uJykpIHtcblx0XHR0YXJnZXQgPSB7fTtcblx0fVxuXG5cdGZvciAoOyBpIDwgbGVuZ3RoOyArK2kpIHtcblx0XHRvcHRpb25zID0gYXJndW1lbnRzW2ldO1xuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAob3B0aW9ucyAhPSBudWxsKSB7XG5cdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xuXHRcdFx0XHRzcmMgPSB0YXJnZXRbbmFtZV07XG5cdFx0XHRcdGNvcHkgPSBvcHRpb25zW25hbWVdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0aWYgKHRhcmdldCAhPT0gY29weSkge1xuXHRcdFx0XHRcdC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuXHRcdFx0XHRcdGlmIChkZWVwICYmIGNvcHkgJiYgKGlzUGxhaW5PYmplY3QoY29weSkgfHwgKGNvcHlJc0FycmF5ID0gaXNBcnJheShjb3B5KSkpKSB7XG5cdFx0XHRcdFx0XHRpZiAoY29weUlzQXJyYXkpIHtcblx0XHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgaXNBcnJheShzcmMpID8gc3JjIDogW107XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBpc1BsYWluT2JqZWN0KHNyYykgPyBzcmMgOiB7fTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0XHR0YXJnZXRbbmFtZV0gPSBleHRlbmQoZGVlcCwgY2xvbmUsIGNvcHkpO1xuXG5cdFx0XHRcdFx0Ly8gRG9uJ3QgYnJpbmcgaW4gdW5kZWZpbmVkIHZhbHVlc1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGNvcHkgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRbbmFtZV0gPSBjb3B5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdHJldHVybiB0YXJnZXQ7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBmbGF0dGVuKGxpc3QsIGRlcHRoKSB7XG4gIGRlcHRoID0gKHR5cGVvZiBkZXB0aCA9PSAnbnVtYmVyJykgPyBkZXB0aCA6IEluZmluaXR5O1xuXG4gIGlmICghZGVwdGgpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShsaXN0KSkge1xuICAgICAgcmV0dXJuIGxpc3QubWFwKGZ1bmN0aW9uKGkpIHsgcmV0dXJuIGk7IH0pO1xuICAgIH1cbiAgICByZXR1cm4gbGlzdDtcbiAgfVxuXG4gIHJldHVybiBfZmxhdHRlbihsaXN0LCAxKTtcblxuICBmdW5jdGlvbiBfZmxhdHRlbihsaXN0LCBkKSB7XG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGl0ZW0pIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGQgPCBkZXB0aCkge1xuICAgICAgICByZXR1cm4gYWNjLmNvbmNhdChfZmxhdHRlbihpdGVtLCBkICsgMSkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBhY2MuY29uY2F0KGl0ZW0pO1xuICAgICAgfVxuICAgIH0sIFtdKTtcbiAgfVxufTtcbiIsIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTkFOID0gMCAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cbi8qKlxuICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG4gKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgRGF0ZVxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG4gKiB9LCBfLm5vdygpKTtcbiAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG4gKi9cbnZhciBub3cgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG4gKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG4gKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG4gKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuICogaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG4gKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gKlxuICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG4gKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsYXN0QXJncyxcbiAgICAgIGxhc3RUaGlzLFxuICAgICAgbWF4V2FpdCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHRpbWVySWQsXG4gICAgICBsYXN0Q2FsbFRpbWUsXG4gICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG4gICAgICBsZWFkaW5nID0gZmFsc2UsXG4gICAgICBtYXhpbmcgPSBmYWxzZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG4gICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcbiAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG4gICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcbiAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXG4gICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblxuICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG4gICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcbiAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG4gICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHxcbiAgICAgICh0aW1lU2luY2VMYXN0Q2FsbCA8IDApIHx8IChtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0KSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKTtcbiAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuICAgIH1cbiAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgfVxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgfVxuICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCksXG4gICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cbiAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgbGFzdENhbGxUaW1lID0gdGltZTtcblxuICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG1heGluZykge1xuICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB0aHJvdHRsZWQgZnVuY3Rpb24gdGhhdCBvbmx5IGludm9rZXMgYGZ1bmNgIGF0IG1vc3Qgb25jZSBwZXJcbiAqIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuIFRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgXG4gKiBtZXRob2QgdG8gY2FuY2VsIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvXG4gKiBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS4gUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2BcbiAqIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGBcbiAqIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZCB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGVcbiAqIHRocm90dGxlZCBmdW5jdGlvbi4gU3Vic2VxdWVudCBjYWxscyB0byB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHJldHVybiB0aGVcbiAqIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRocm90dGxlZCBmdW5jdGlvblxuICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy50aHJvdHRsZWAgYW5kIGBfLmRlYm91bmNlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHRocm90dGxlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHRocm90dGxlIGludm9jYXRpb25zIHRvLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHRocm90dGxlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgZXhjZXNzaXZlbHkgdXBkYXRpbmcgdGhlIHBvc2l0aW9uIHdoaWxlIHNjcm9sbGluZy5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdzY3JvbGwnLCBfLnRocm90dGxlKHVwZGF0ZVBvc2l0aW9uLCAxMDApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHJlbmV3VG9rZW5gIHdoZW4gdGhlIGNsaWNrIGV2ZW50IGlzIGZpcmVkLCBidXQgbm90IG1vcmUgdGhhbiBvbmNlIGV2ZXJ5IDUgbWludXRlcy5cbiAqIHZhciB0aHJvdHRsZWQgPSBfLnRocm90dGxlKHJlbmV3VG9rZW4sIDMwMDAwMCwgeyAndHJhaWxpbmcnOiBmYWxzZSB9KTtcbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCB0aHJvdHRsZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgdGhyb3R0bGVkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCB0aHJvdHRsZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGVhZGluZyA9IHRydWUsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICdsZWFkaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nO1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cbiAgcmV0dXJuIGRlYm91bmNlKGZ1bmMsIHdhaXQsIHtcbiAgICAnbGVhZGluZyc6IGxlYWRpbmcsXG4gICAgJ21heFdhaXQnOiB3YWl0LFxuICAgICd0cmFpbGluZyc6IHRyYWlsaW5nXG4gIH0pO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0aHJvdHRsZTtcbiIsInZhciB3aWxkY2FyZCA9IHJlcXVpcmUoJ3dpbGRjYXJkJyk7XG52YXIgcmVNaW1lUGFydFNwbGl0ID0gL1tcXC9cXCtcXC5dLztcblxuLyoqXG4gICMgbWltZS1tYXRjaFxuXG4gIEEgc2ltcGxlIGZ1bmN0aW9uIHRvIGNoZWNrZXIgd2hldGhlciBhIHRhcmdldCBtaW1lIHR5cGUgbWF0Y2hlcyBhIG1pbWUtdHlwZVxuICBwYXR0ZXJuIChlLmcuIGltYWdlL2pwZWcgbWF0Y2hlcyBpbWFnZS9qcGVnIE9SIGltYWdlLyopLlxuXG4gICMjIEV4YW1wbGUgVXNhZ2VcblxuICA8PDwgZXhhbXBsZS5qc1xuXG4qKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGFyZ2V0LCBwYXR0ZXJuKSB7XG4gIGZ1bmN0aW9uIHRlc3QocGF0dGVybikge1xuICAgIHZhciByZXN1bHQgPSB3aWxkY2FyZChwYXR0ZXJuLCB0YXJnZXQsIHJlTWltZVBhcnRTcGxpdCk7XG5cbiAgICAvLyBlbnN1cmUgdGhhdCB3ZSBoYXZlIGEgdmFsaWQgbWltZSB0eXBlIChzaG91bGQgaGF2ZSB0d28gcGFydHMpXG4gICAgcmV0dXJuIHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoID49IDI7XG4gIH1cblxuICByZXR1cm4gcGF0dGVybiA/IHRlc3QocGF0dGVybi5zcGxpdCgnOycpWzBdKSA6IHRlc3Q7XG59O1xuIiwiLyoqXG4qIENyZWF0ZSBhbiBldmVudCBlbWl0dGVyIHdpdGggbmFtZXNwYWNlc1xuKiBAbmFtZSBjcmVhdGVOYW1lc3BhY2VFbWl0dGVyXG4qIEBleGFtcGxlXG4qIHZhciBlbWl0dGVyID0gcmVxdWlyZSgnLi9pbmRleCcpKClcbipcbiogZW1pdHRlci5vbignKicsIGZ1bmN0aW9uICgpIHtcbiogICBjb25zb2xlLmxvZygnYWxsIGV2ZW50cyBlbWl0dGVkJywgdGhpcy5ldmVudClcbiogfSlcbipcbiogZW1pdHRlci5vbignZXhhbXBsZScsIGZ1bmN0aW9uICgpIHtcbiogICBjb25zb2xlLmxvZygnZXhhbXBsZSBldmVudCBlbWl0dGVkJylcbiogfSlcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZU5hbWVzcGFjZUVtaXR0ZXIgKCkge1xuICB2YXIgZW1pdHRlciA9IHt9XG4gIHZhciBfZm5zID0gZW1pdHRlci5fZm5zID0ge31cblxuICAvKipcbiAgKiBFbWl0IGFuIGV2ZW50LiBPcHRpb25hbGx5IG5hbWVzcGFjZSB0aGUgZXZlbnQuIEhhbmRsZXJzIGFyZSBmaXJlZCBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSB3ZXJlIGFkZGVkIHdpdGggZXhhY3QgbWF0Y2hlcyB0YWtpbmcgcHJlY2VkZW5jZS4gU2VwYXJhdGUgdGhlIG5hbWVzcGFjZSBhbmQgZXZlbnQgd2l0aCBhIGA6YFxuICAqIEBuYW1lIGVtaXRcbiAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQg4oCTIHRoZSBuYW1lIG9mIHRoZSBldmVudCwgd2l0aCBvcHRpb25hbCBuYW1lc3BhY2VcbiAgKiBAcGFyYW0gey4uLip9IGRhdGEg4oCTIHVwIHRvIDYgYXJndW1lbnRzIHRoYXQgYXJlIHBhc3NlZCB0byB0aGUgZXZlbnQgbGlzdGVuZXJcbiAgKiBAZXhhbXBsZVxuICAqIGVtaXR0ZXIuZW1pdCgnZXhhbXBsZScpXG4gICogZW1pdHRlci5lbWl0KCdkZW1vOnRlc3QnKVxuICAqIGVtaXR0ZXIuZW1pdCgnZGF0YScsIHsgZXhhbXBsZTogdHJ1ZX0sICdhIHN0cmluZycsIDEpXG4gICovXG4gIGVtaXR0ZXIuZW1pdCA9IGZ1bmN0aW9uIGVtaXQgKGV2ZW50LCBhcmcxLCBhcmcyLCBhcmczLCBhcmc0LCBhcmc1LCBhcmc2KSB7XG4gICAgdmFyIHRvRW1pdCA9IGdldExpc3RlbmVycyhldmVudClcblxuICAgIGlmICh0b0VtaXQubGVuZ3RoKSB7XG4gICAgICBlbWl0QWxsKGV2ZW50LCB0b0VtaXQsIFthcmcxLCBhcmcyLCBhcmczLCBhcmc0LCBhcmc1LCBhcmc2XSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgKiBDcmVhdGUgZW4gZXZlbnQgbGlzdGVuZXIuXG4gICogQG5hbWUgb25cbiAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAqIEBleGFtcGxlXG4gICogZW1pdHRlci5vbignZXhhbXBsZScsIGZ1bmN0aW9uICgpIHt9KVxuICAqIGVtaXR0ZXIub24oJ2RlbW8nLCBmdW5jdGlvbiAoKSB7fSlcbiAgKi9cbiAgZW1pdHRlci5vbiA9IGZ1bmN0aW9uIG9uIChldmVudCwgZm4pIHtcbiAgICBpZiAoIV9mbnNbZXZlbnRdKSB7XG4gICAgICBfZm5zW2V2ZW50XSA9IFtdXG4gICAgfVxuXG4gICAgX2Zuc1tldmVudF0ucHVzaChmbilcbiAgfVxuXG4gIC8qKlxuICAqIENyZWF0ZSBlbiBldmVudCBsaXN0ZW5lciB0aGF0IGZpcmVzIG9uY2UuXG4gICogQG5hbWUgb25jZVxuICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICogQGV4YW1wbGVcbiAgKiBlbWl0dGVyLm9uY2UoJ2V4YW1wbGUnLCBmdW5jdGlvbiAoKSB7fSlcbiAgKiBlbWl0dGVyLm9uY2UoJ2RlbW8nLCBmdW5jdGlvbiAoKSB7fSlcbiAgKi9cbiAgZW1pdHRlci5vbmNlID0gZnVuY3Rpb24gb25jZSAoZXZlbnQsIGZuKSB7XG4gICAgZnVuY3Rpb24gb25lICgpIHtcbiAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgIGVtaXR0ZXIub2ZmKGV2ZW50LCBvbmUpXG4gICAgfVxuICAgIHRoaXMub24oZXZlbnQsIG9uZSlcbiAgfVxuXG4gIC8qKlxuICAqIFN0b3AgbGlzdGVuaW5nIHRvIGFuIGV2ZW50LiBTdG9wIGFsbCBsaXN0ZW5lcnMgb24gYW4gZXZlbnQgYnkgb25seSBwYXNzaW5nIHRoZSBldmVudCBuYW1lLiBTdG9wIGEgc2luZ2xlIGxpc3RlbmVyIGJ5IHBhc3NpbmcgdGhhdCBldmVudCBoYW5kbGVyIGFzIGEgY2FsbGJhY2suXG4gICogWW91IG11c3QgYmUgZXhwbGljaXQgYWJvdXQgd2hhdCB3aWxsIGJlIHVuc3Vic2NyaWJlZDogYGVtaXR0ZXIub2ZmKCdkZW1vJylgIHdpbGwgdW5zdWJzY3JpYmUgYW4gYGVtaXR0ZXIub24oJ2RlbW8nKWAgbGlzdGVuZXIsXG4gICogYGVtaXR0ZXIub2ZmKCdkZW1vOmV4YW1wbGUnKWAgd2lsbCB1bnN1YnNjcmliZSBhbiBgZW1pdHRlci5vbignZGVtbzpleGFtcGxlJylgIGxpc3RlbmVyXG4gICogQG5hbWUgb2ZmXG4gICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2ZuXSDigJMgdGhlIHNwZWNpZmljIGhhbmRsZXJcbiAgKiBAZXhhbXBsZVxuICAqIGVtaXR0ZXIub2ZmKCdleGFtcGxlJylcbiAgKiBlbWl0dGVyLm9mZignZGVtbycsIGZ1bmN0aW9uICgpIHt9KVxuICAqL1xuICBlbWl0dGVyLm9mZiA9IGZ1bmN0aW9uIG9mZiAoZXZlbnQsIGZuKSB7XG4gICAgdmFyIGtlZXAgPSBbXVxuXG4gICAgaWYgKGV2ZW50ICYmIGZuKSB7XG4gICAgICB2YXIgZm5zID0gdGhpcy5fZm5zW2V2ZW50XVxuICAgICAgdmFyIGkgPSAwXG4gICAgICB2YXIgbCA9IGZucyA/IGZucy5sZW5ndGggOiAwXG5cbiAgICAgIGZvciAoaTsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoZm5zW2ldICE9PSBmbikge1xuICAgICAgICAgIGtlZXAucHVzaChmbnNbaV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBrZWVwLmxlbmd0aCA/IHRoaXMuX2Zuc1tldmVudF0gPSBrZWVwIDogZGVsZXRlIHRoaXMuX2Zuc1tldmVudF1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExpc3RlbmVycyAoZSkge1xuICAgIHZhciBvdXQgPSBfZm5zW2VdID8gX2Zuc1tlXSA6IFtdXG4gICAgdmFyIGlkeCA9IGUuaW5kZXhPZignOicpXG4gICAgdmFyIGFyZ3MgPSAoaWR4ID09PSAtMSkgPyBbZV0gOiBbZS5zdWJzdHJpbmcoMCwgaWR4KSwgZS5zdWJzdHJpbmcoaWR4ICsgMSldXG5cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKF9mbnMpXG4gICAgdmFyIGkgPSAwXG4gICAgdmFyIGwgPSBrZXlzLmxlbmd0aFxuXG4gICAgZm9yIChpOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXVxuICAgICAgaWYgKGtleSA9PT0gJyonKSB7XG4gICAgICAgIG91dCA9IG91dC5jb25jYXQoX2Zuc1trZXldKVxuICAgICAgfVxuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDIgJiYgYXJnc1swXSA9PT0ga2V5KSB7XG4gICAgICAgIG91dCA9IG91dC5jb25jYXQoX2Zuc1trZXldKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXRcbiAgfVxuXG4gIGZ1bmN0aW9uIGVtaXRBbGwgKGUsIGZucywgYXJncykge1xuICAgIHZhciBpID0gMFxuICAgIHZhciBsID0gZm5zLmxlbmd0aFxuXG4gICAgZm9yIChpOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAoIWZuc1tpXSkgYnJlYWtcbiAgICAgIGZuc1tpXS5ldmVudCA9IGVcbiAgICAgIGZuc1tpXS5hcHBseShmbnNbaV0sIGFyZ3MpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGVtaXR0ZXJcbn1cbiIsIiFmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgZnVuY3Rpb24gVk5vZGUoKSB7fVxuICAgIGZ1bmN0aW9uIGgobm9kZU5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdmFyIGxhc3RTaW1wbGUsIGNoaWxkLCBzaW1wbGUsIGksIGNoaWxkcmVuID0gRU1QVFlfQ0hJTERSRU47XG4gICAgICAgIGZvciAoaSA9IGFyZ3VtZW50cy5sZW5ndGg7IGktLSA+IDI7ICkgc3RhY2sucHVzaChhcmd1bWVudHNbaV0pO1xuICAgICAgICBpZiAoYXR0cmlidXRlcyAmJiBudWxsICE9IGF0dHJpYnV0ZXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICghc3RhY2subGVuZ3RoKSBzdGFjay5wdXNoKGF0dHJpYnV0ZXMuY2hpbGRyZW4pO1xuICAgICAgICAgICAgZGVsZXRlIGF0dHJpYnV0ZXMuY2hpbGRyZW47XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkgaWYgKChjaGlsZCA9IHN0YWNrLnBvcCgpKSAmJiB2b2lkIDAgIT09IGNoaWxkLnBvcCkgZm9yIChpID0gY2hpbGQubGVuZ3RoOyBpLS07ICkgc3RhY2sucHVzaChjaGlsZFtpXSk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCdib29sZWFuJyA9PSB0eXBlb2YgY2hpbGQpIGNoaWxkID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChzaW1wbGUgPSAnZnVuY3Rpb24nICE9IHR5cGVvZiBub2RlTmFtZSkgaWYgKG51bGwgPT0gY2hpbGQpIGNoaWxkID0gJyc7IGVsc2UgaWYgKCdudW1iZXInID09IHR5cGVvZiBjaGlsZCkgY2hpbGQgPSBTdHJpbmcoY2hpbGQpOyBlbHNlIGlmICgnc3RyaW5nJyAhPSB0eXBlb2YgY2hpbGQpIHNpbXBsZSA9ICExO1xuICAgICAgICAgICAgaWYgKHNpbXBsZSAmJiBsYXN0U2ltcGxlKSBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXSArPSBjaGlsZDsgZWxzZSBpZiAoY2hpbGRyZW4gPT09IEVNUFRZX0NISUxEUkVOKSBjaGlsZHJlbiA9IFsgY2hpbGQgXTsgZWxzZSBjaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIGxhc3RTaW1wbGUgPSBzaW1wbGU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHAgPSBuZXcgVk5vZGUoKTtcbiAgICAgICAgcC5ub2RlTmFtZSA9IG5vZGVOYW1lO1xuICAgICAgICBwLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICAgIHAuYXR0cmlidXRlcyA9IG51bGwgPT0gYXR0cmlidXRlcyA/IHZvaWQgMCA6IGF0dHJpYnV0ZXM7XG4gICAgICAgIHAua2V5ID0gbnVsbCA9PSBhdHRyaWJ1dGVzID8gdm9pZCAwIDogYXR0cmlidXRlcy5rZXk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG9wdGlvbnMudm5vZGUpIG9wdGlvbnMudm5vZGUocCk7XG4gICAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBleHRlbmQob2JqLCBwcm9wcykge1xuICAgICAgICBmb3IgKHZhciBpIGluIHByb3BzKSBvYmpbaV0gPSBwcm9wc1tpXTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xvbmVFbGVtZW50KHZub2RlLCBwcm9wcykge1xuICAgICAgICByZXR1cm4gaCh2bm9kZS5ub2RlTmFtZSwgZXh0ZW5kKGV4dGVuZCh7fSwgdm5vZGUuYXR0cmlidXRlcyksIHByb3BzKSwgYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMikgOiB2bm9kZS5jaGlsZHJlbik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVucXVldWVSZW5kZXIoY29tcG9uZW50KSB7XG4gICAgICAgIGlmICghY29tcG9uZW50Ll9fZCAmJiAoY29tcG9uZW50Ll9fZCA9ICEwKSAmJiAxID09IGl0ZW1zLnB1c2goY29tcG9uZW50KSkgKG9wdGlvbnMuZGVib3VuY2VSZW5kZXJpbmcgfHwgZGVmZXIpKHJlcmVuZGVyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVyZW5kZXIoKSB7XG4gICAgICAgIHZhciBwLCBsaXN0ID0gaXRlbXM7XG4gICAgICAgIGl0ZW1zID0gW107XG4gICAgICAgIHdoaWxlIChwID0gbGlzdC5wb3AoKSkgaWYgKHAuX19kKSByZW5kZXJDb21wb25lbnQocCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzU2FtZU5vZGVUeXBlKG5vZGUsIHZub2RlLCBoeWRyYXRpbmcpIHtcbiAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiB2bm9kZSB8fCAnbnVtYmVyJyA9PSB0eXBlb2Ygdm5vZGUpIHJldHVybiB2b2lkIDAgIT09IG5vZGUuc3BsaXRUZXh0O1xuICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHZub2RlLm5vZGVOYW1lKSByZXR1cm4gIW5vZGUuX2NvbXBvbmVudENvbnN0cnVjdG9yICYmIGlzTmFtZWROb2RlKG5vZGUsIHZub2RlLm5vZGVOYW1lKTsgZWxzZSByZXR1cm4gaHlkcmF0aW5nIHx8IG5vZGUuX2NvbXBvbmVudENvbnN0cnVjdG9yID09PSB2bm9kZS5ub2RlTmFtZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNOYW1lZE5vZGUobm9kZSwgbm9kZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuX19uID09PSBub2RlTmFtZSB8fCBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldE5vZGVQcm9wcyh2bm9kZSkge1xuICAgICAgICB2YXIgcHJvcHMgPSBleHRlbmQoe30sIHZub2RlLmF0dHJpYnV0ZXMpO1xuICAgICAgICBwcm9wcy5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICB2YXIgZGVmYXVsdFByb3BzID0gdm5vZGUubm9kZU5hbWUuZGVmYXVsdFByb3BzO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBkZWZhdWx0UHJvcHMpIGZvciAodmFyIGkgaW4gZGVmYXVsdFByb3BzKSBpZiAodm9pZCAwID09PSBwcm9wc1tpXSkgcHJvcHNbaV0gPSBkZWZhdWx0UHJvcHNbaV07XG4gICAgICAgIHJldHVybiBwcm9wcztcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmcpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBpc1N2ZyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBub2RlTmFtZSkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKTtcbiAgICAgICAgbm9kZS5fX24gPSBub2RlTmFtZTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKHBhcmVudE5vZGUpIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldEFjY2Vzc29yKG5vZGUsIG5hbWUsIG9sZCwgdmFsdWUsIGlzU3ZnKSB7XG4gICAgICAgIGlmICgnY2xhc3NOYW1lJyA9PT0gbmFtZSkgbmFtZSA9ICdjbGFzcyc7XG4gICAgICAgIGlmICgna2V5JyA9PT0gbmFtZSkgOyBlbHNlIGlmICgncmVmJyA9PT0gbmFtZSkge1xuICAgICAgICAgICAgaWYgKG9sZCkgb2xkKG51bGwpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB2YWx1ZShub2RlKTtcbiAgICAgICAgfSBlbHNlIGlmICgnY2xhc3MnID09PSBuYW1lICYmICFpc1N2Zykgbm9kZS5jbGFzc05hbWUgPSB2YWx1ZSB8fCAnJzsgZWxzZSBpZiAoJ3N0eWxlJyA9PT0gbmFtZSkge1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSB8fCAnc3RyaW5nJyA9PSB0eXBlb2YgdmFsdWUgfHwgJ3N0cmluZycgPT0gdHlwZW9mIG9sZCkgbm9kZS5zdHlsZS5jc3NUZXh0ID0gdmFsdWUgfHwgJyc7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgJ29iamVjdCcgPT0gdHlwZW9mIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBvbGQpIGZvciAodmFyIGkgaW4gb2xkKSBpZiAoIShpIGluIHZhbHVlKSkgbm9kZS5zdHlsZVtpXSA9ICcnO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdmFsdWUpIG5vZGUuc3R5bGVbaV0gPSAnbnVtYmVyJyA9PSB0eXBlb2YgdmFsdWVbaV0gJiYgITEgPT09IElTX05PTl9ESU1FTlNJT05BTC50ZXN0KGkpID8gdmFsdWVbaV0gKyAncHgnIDogdmFsdWVbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoJ2Rhbmdlcm91c2x5U2V0SW5uZXJIVE1MJyA9PT0gbmFtZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKSBub2RlLmlubmVySFRNTCA9IHZhbHVlLl9faHRtbCB8fCAnJztcbiAgICAgICAgfSBlbHNlIGlmICgnbycgPT0gbmFtZVswXSAmJiAnbicgPT0gbmFtZVsxXSkge1xuICAgICAgICAgICAgdmFyIHVzZUNhcHR1cmUgPSBuYW1lICE9PSAobmFtZSA9IG5hbWUucmVwbGFjZSgvQ2FwdHVyZSQvLCAnJykpO1xuICAgICAgICAgICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMik7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9sZCkgbm9kZS5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGV2ZW50UHJveHksIHVzZUNhcHR1cmUpO1xuICAgICAgICAgICAgfSBlbHNlIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBldmVudFByb3h5LCB1c2VDYXB0dXJlKTtcbiAgICAgICAgICAgIChub2RlLl9fbCB8fCAobm9kZS5fX2wgPSB7fSkpW25hbWVdID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAoJ2xpc3QnICE9PSBuYW1lICYmICd0eXBlJyAhPT0gbmFtZSAmJiAhaXNTdmcgJiYgbmFtZSBpbiBub2RlKSB7XG4gICAgICAgICAgICBzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCBudWxsID09IHZhbHVlID8gJycgOiB2YWx1ZSk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSB2YWx1ZSB8fCAhMSA9PT0gdmFsdWUpIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIG5zID0gaXNTdmcgJiYgbmFtZSAhPT0gKG5hbWUgPSBuYW1lLnJlcGxhY2UoL154bGluazo/LywgJycpKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHZhbHVlIHx8ICExID09PSB2YWx1ZSkgaWYgKG5zKSBub2RlLnJlbW92ZUF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgbmFtZS50b0xvd2VyQ2FzZSgpKTsgZWxzZSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsgZWxzZSBpZiAoJ2Z1bmN0aW9uJyAhPSB0eXBlb2YgdmFsdWUpIGlmIChucykgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIG5hbWUudG9Mb3dlckNhc2UoKSwgdmFsdWUpOyBlbHNlIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbm9kZVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgICBmdW5jdGlvbiBldmVudFByb3h5KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX19sW2UudHlwZV0ob3B0aW9ucy5ldmVudCAmJiBvcHRpb25zLmV2ZW50KGUpIHx8IGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmbHVzaE1vdW50cygpIHtcbiAgICAgICAgdmFyIGM7XG4gICAgICAgIHdoaWxlIChjID0gbW91bnRzLnBvcCgpKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hZnRlck1vdW50KSBvcHRpb25zLmFmdGVyTW91bnQoYyk7XG4gICAgICAgICAgICBpZiAoYy5jb21wb25lbnREaWRNb3VudCkgYy5jb21wb25lbnREaWRNb3VudCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIHBhcmVudCwgY29tcG9uZW50Um9vdCkge1xuICAgICAgICBpZiAoIWRpZmZMZXZlbCsrKSB7XG4gICAgICAgICAgICBpc1N2Z01vZGUgPSBudWxsICE9IHBhcmVudCAmJiB2b2lkIDAgIT09IHBhcmVudC5vd25lclNWR0VsZW1lbnQ7XG4gICAgICAgICAgICBoeWRyYXRpbmcgPSBudWxsICE9IGRvbSAmJiAhKCdfX3ByZWFjdGF0dHJfJyBpbiBkb20pO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXQgPSBpZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCwgY29tcG9uZW50Um9vdCk7XG4gICAgICAgIGlmIChwYXJlbnQgJiYgcmV0LnBhcmVudE5vZGUgIT09IHBhcmVudCkgcGFyZW50LmFwcGVuZENoaWxkKHJldCk7XG4gICAgICAgIGlmICghLS1kaWZmTGV2ZWwpIHtcbiAgICAgICAgICAgIGh5ZHJhdGluZyA9ICExO1xuICAgICAgICAgICAgaWYgKCFjb21wb25lbnRSb290KSBmbHVzaE1vdW50cygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsLCBjb21wb25lbnRSb290KSB7XG4gICAgICAgIHZhciBvdXQgPSBkb20sIHByZXZTdmdNb2RlID0gaXNTdmdNb2RlO1xuICAgICAgICBpZiAobnVsbCA9PSB2bm9kZSB8fCAnYm9vbGVhbicgPT0gdHlwZW9mIHZub2RlKSB2bm9kZSA9ICcnO1xuICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHZub2RlIHx8ICdudW1iZXInID09IHR5cGVvZiB2bm9kZSkge1xuICAgICAgICAgICAgaWYgKGRvbSAmJiB2b2lkIDAgIT09IGRvbS5zcGxpdFRleHQgJiYgZG9tLnBhcmVudE5vZGUgJiYgKCFkb20uX2NvbXBvbmVudCB8fCBjb21wb25lbnRSb290KSkge1xuICAgICAgICAgICAgICAgIGlmIChkb20ubm9kZVZhbHVlICE9IHZub2RlKSBkb20ubm9kZVZhbHVlID0gdm5vZGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoZG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb20ucGFyZW50Tm9kZSkgZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG91dCwgZG9tKTtcbiAgICAgICAgICAgICAgICAgICAgcmVjb2xsZWN0Tm9kZVRyZWUoZG9tLCAhMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0Ll9fcHJlYWN0YXR0cl8gPSAhMDtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZub2RlTmFtZSA9IHZub2RlLm5vZGVOYW1lO1xuICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2Ygdm5vZGVOYW1lKSByZXR1cm4gYnVpbGRDb21wb25lbnRGcm9tVk5vZGUoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpO1xuICAgICAgICBpc1N2Z01vZGUgPSAnc3ZnJyA9PT0gdm5vZGVOYW1lID8gITAgOiAnZm9yZWlnbk9iamVjdCcgPT09IHZub2RlTmFtZSA/ICExIDogaXNTdmdNb2RlO1xuICAgICAgICB2bm9kZU5hbWUgPSBTdHJpbmcodm5vZGVOYW1lKTtcbiAgICAgICAgaWYgKCFkb20gfHwgIWlzTmFtZWROb2RlKGRvbSwgdm5vZGVOYW1lKSkge1xuICAgICAgICAgICAgb3V0ID0gY3JlYXRlTm9kZSh2bm9kZU5hbWUsIGlzU3ZnTW9kZSk7XG4gICAgICAgICAgICBpZiAoZG9tKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGRvbS5maXJzdENoaWxkKSBvdXQuYXBwZW5kQ2hpbGQoZG9tLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIGlmIChkb20ucGFyZW50Tm9kZSkgZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG91dCwgZG9tKTtcbiAgICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShkb20sICEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZmMgPSBvdXQuZmlyc3RDaGlsZCwgcHJvcHMgPSBvdXQuX19wcmVhY3RhdHRyXywgdmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgIGlmIChudWxsID09IHByb3BzKSB7XG4gICAgICAgICAgICBwcm9wcyA9IG91dC5fX3ByZWFjdGF0dHJfID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gb3V0LmF0dHJpYnV0ZXMsIGkgPSBhLmxlbmd0aDsgaS0tOyApIHByb3BzW2FbaV0ubmFtZV0gPSBhW2ldLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaHlkcmF0aW5nICYmIHZjaGlsZHJlbiAmJiAxID09PSB2Y2hpbGRyZW4ubGVuZ3RoICYmICdzdHJpbmcnID09IHR5cGVvZiB2Y2hpbGRyZW5bMF0gJiYgbnVsbCAhPSBmYyAmJiB2b2lkIDAgIT09IGZjLnNwbGl0VGV4dCAmJiBudWxsID09IGZjLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgICBpZiAoZmMubm9kZVZhbHVlICE9IHZjaGlsZHJlblswXSkgZmMubm9kZVZhbHVlID0gdmNoaWxkcmVuWzBdO1xuICAgICAgICB9IGVsc2UgaWYgKHZjaGlsZHJlbiAmJiB2Y2hpbGRyZW4ubGVuZ3RoIHx8IG51bGwgIT0gZmMpIGlubmVyRGlmZk5vZGUob3V0LCB2Y2hpbGRyZW4sIGNvbnRleHQsIG1vdW50QWxsLCBoeWRyYXRpbmcgfHwgbnVsbCAhPSBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCk7XG4gICAgICAgIGRpZmZBdHRyaWJ1dGVzKG91dCwgdm5vZGUuYXR0cmlidXRlcywgcHJvcHMpO1xuICAgICAgICBpc1N2Z01vZGUgPSBwcmV2U3ZnTW9kZTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5uZXJEaWZmTm9kZShkb20sIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwsIGlzSHlkcmF0aW5nKSB7XG4gICAgICAgIHZhciBqLCBjLCBmLCB2Y2hpbGQsIGNoaWxkLCBvcmlnaW5hbENoaWxkcmVuID0gZG9tLmNoaWxkTm9kZXMsIGNoaWxkcmVuID0gW10sIGtleWVkID0ge30sIGtleWVkTGVuID0gMCwgbWluID0gMCwgbGVuID0gb3JpZ2luYWxDaGlsZHJlbi5sZW5ndGgsIGNoaWxkcmVuTGVuID0gMCwgdmxlbiA9IHZjaGlsZHJlbiA/IHZjaGlsZHJlbi5sZW5ndGggOiAwO1xuICAgICAgICBpZiAoMCAhPT0gbGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgX2NoaWxkID0gb3JpZ2luYWxDaGlsZHJlbltpXSwgcHJvcHMgPSBfY2hpbGQuX19wcmVhY3RhdHRyXywga2V5ID0gdmxlbiAmJiBwcm9wcyA/IF9jaGlsZC5fY29tcG9uZW50ID8gX2NoaWxkLl9jb21wb25lbnQuX19rIDogcHJvcHMua2V5IDogbnVsbDtcbiAgICAgICAgICAgIGlmIChudWxsICE9IGtleSkge1xuICAgICAgICAgICAgICAgIGtleWVkTGVuKys7XG4gICAgICAgICAgICAgICAga2V5ZWRba2V5XSA9IF9jaGlsZDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcHMgfHwgKHZvaWQgMCAhPT0gX2NoaWxkLnNwbGl0VGV4dCA/IGlzSHlkcmF0aW5nID8gX2NoaWxkLm5vZGVWYWx1ZS50cmltKCkgOiAhMCA6IGlzSHlkcmF0aW5nKSkgY2hpbGRyZW5bY2hpbGRyZW5MZW4rK10gPSBfY2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKDAgIT09IHZsZW4pIGZvciAodmFyIGkgPSAwOyBpIDwgdmxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2Y2hpbGQgPSB2Y2hpbGRyZW5baV07XG4gICAgICAgICAgICBjaGlsZCA9IG51bGw7XG4gICAgICAgICAgICB2YXIga2V5ID0gdmNoaWxkLmtleTtcbiAgICAgICAgICAgIGlmIChudWxsICE9IGtleSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXllZExlbiAmJiB2b2lkIDAgIT09IGtleWVkW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBrZXllZFtrZXldO1xuICAgICAgICAgICAgICAgICAgICBrZXllZFtrZXldID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBrZXllZExlbi0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWNoaWxkICYmIG1pbiA8IGNoaWxkcmVuTGVuKSBmb3IgKGogPSBtaW47IGogPCBjaGlsZHJlbkxlbjsgaisrKSBpZiAodm9pZCAwICE9PSBjaGlsZHJlbltqXSAmJiBpc1NhbWVOb2RlVHlwZShjID0gY2hpbGRyZW5bal0sIHZjaGlsZCwgaXNIeWRyYXRpbmcpKSB7XG4gICAgICAgICAgICAgICAgY2hpbGQgPSBjO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuW2pdID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChqID09PSBjaGlsZHJlbkxlbiAtIDEpIGNoaWxkcmVuTGVuLS07XG4gICAgICAgICAgICAgICAgaWYgKGogPT09IG1pbikgbWluKys7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZCA9IGlkaWZmKGNoaWxkLCB2Y2hpbGQsIGNvbnRleHQsIG1vdW50QWxsKTtcbiAgICAgICAgICAgIGYgPSBvcmlnaW5hbENoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkICYmIGNoaWxkICE9PSBkb20gJiYgY2hpbGQgIT09IGYpIGlmIChudWxsID09IGYpIGRvbS5hcHBlbmRDaGlsZChjaGlsZCk7IGVsc2UgaWYgKGNoaWxkID09PSBmLm5leHRTaWJsaW5nKSByZW1vdmVOb2RlKGYpOyBlbHNlIGRvbS5pbnNlcnRCZWZvcmUoY2hpbGQsIGYpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXllZExlbikgZm9yICh2YXIgaSBpbiBrZXllZCkgaWYgKHZvaWQgMCAhPT0ga2V5ZWRbaV0pIHJlY29sbGVjdE5vZGVUcmVlKGtleWVkW2ldLCAhMSk7XG4gICAgICAgIHdoaWxlIChtaW4gPD0gY2hpbGRyZW5MZW4pIGlmICh2b2lkIDAgIT09IChjaGlsZCA9IGNoaWxkcmVuW2NoaWxkcmVuTGVuLS1dKSkgcmVjb2xsZWN0Tm9kZVRyZWUoY2hpbGQsICExKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVjb2xsZWN0Tm9kZVRyZWUobm9kZSwgdW5tb3VudE9ubHkpIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudCA9IG5vZGUuX2NvbXBvbmVudDtcbiAgICAgICAgaWYgKGNvbXBvbmVudCkgdW5tb3VudENvbXBvbmVudChjb21wb25lbnQpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChudWxsICE9IG5vZGUuX19wcmVhY3RhdHRyXyAmJiBub2RlLl9fcHJlYWN0YXR0cl8ucmVmKSBub2RlLl9fcHJlYWN0YXR0cl8ucmVmKG51bGwpO1xuICAgICAgICAgICAgaWYgKCExID09PSB1bm1vdW50T25seSB8fCBudWxsID09IG5vZGUuX19wcmVhY3RhdHRyXykgcmVtb3ZlTm9kZShub2RlKTtcbiAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKG5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKG5vZGUpIHtcbiAgICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuICAgICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICAgICAgdmFyIG5leHQgPSBub2RlLnByZXZpb3VzU2libGluZztcbiAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKG5vZGUsICEwKTtcbiAgICAgICAgICAgIG5vZGUgPSBuZXh0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpZmZBdHRyaWJ1dGVzKGRvbSwgYXR0cnMsIG9sZCkge1xuICAgICAgICB2YXIgbmFtZTtcbiAgICAgICAgZm9yIChuYW1lIGluIG9sZCkgaWYgKCghYXR0cnMgfHwgbnVsbCA9PSBhdHRyc1tuYW1lXSkgJiYgbnVsbCAhPSBvbGRbbmFtZV0pIHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgb2xkW25hbWVdLCBvbGRbbmFtZV0gPSB2b2lkIDAsIGlzU3ZnTW9kZSk7XG4gICAgICAgIGZvciAobmFtZSBpbiBhdHRycykgaWYgKCEoJ2NoaWxkcmVuJyA9PT0gbmFtZSB8fCAnaW5uZXJIVE1MJyA9PT0gbmFtZSB8fCBuYW1lIGluIG9sZCAmJiBhdHRyc1tuYW1lXSA9PT0gKCd2YWx1ZScgPT09IG5hbWUgfHwgJ2NoZWNrZWQnID09PSBuYW1lID8gZG9tW25hbWVdIDogb2xkW25hbWVdKSkpIHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgb2xkW25hbWVdLCBvbGRbbmFtZV0gPSBhdHRyc1tuYW1lXSwgaXNTdmdNb2RlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29sbGVjdENvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgKGNvbXBvbmVudHNbbmFtZV0gfHwgKGNvbXBvbmVudHNbbmFtZV0gPSBbXSkpLnB1c2goY29tcG9uZW50KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50KEN0b3IsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgIHZhciBpbnN0LCBsaXN0ID0gY29tcG9uZW50c1tDdG9yLm5hbWVdO1xuICAgICAgICBpZiAoQ3Rvci5wcm90b3R5cGUgJiYgQ3Rvci5wcm90b3R5cGUucmVuZGVyKSB7XG4gICAgICAgICAgICBpbnN0ID0gbmV3IEN0b3IocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgQ29tcG9uZW50LmNhbGwoaW5zdCwgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5zdCA9IG5ldyBDb21wb25lbnQocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgaW5zdC5jb25zdHJ1Y3RvciA9IEN0b3I7XG4gICAgICAgICAgICBpbnN0LnJlbmRlciA9IGRvUmVuZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaXN0KSBmb3IgKHZhciBpID0gbGlzdC5sZW5ndGg7IGktLTsgKSBpZiAobGlzdFtpXS5jb25zdHJ1Y3RvciA9PT0gQ3Rvcikge1xuICAgICAgICAgICAgaW5zdC5fX2IgPSBsaXN0W2ldLl9fYjtcbiAgICAgICAgICAgIGxpc3Quc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3Q7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRvUmVuZGVyKHByb3BzLCBzdGF0ZSwgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldENvbXBvbmVudFByb3BzKGNvbXBvbmVudCwgcHJvcHMsIG9wdHMsIGNvbnRleHQsIG1vdW50QWxsKSB7XG4gICAgICAgIGlmICghY29tcG9uZW50Ll9feCkge1xuICAgICAgICAgICAgY29tcG9uZW50Ll9feCA9ICEwO1xuICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5fX3IgPSBwcm9wcy5yZWYpIGRlbGV0ZSBwcm9wcy5yZWY7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50Ll9fayA9IHByb3BzLmtleSkgZGVsZXRlIHByb3BzLmtleTtcbiAgICAgICAgICAgIGlmICghY29tcG9uZW50LmJhc2UgfHwgbW91bnRBbGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxNb3VudCkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxNb3VudCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykgY29tcG9uZW50LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dCAhPT0gY29tcG9uZW50LmNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5fX2MpIGNvbXBvbmVudC5fX2MgPSBjb21wb25lbnQuY29udGV4dDtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5fX3ApIGNvbXBvbmVudC5fX3AgPSBjb21wb25lbnQucHJvcHM7XG4gICAgICAgICAgICBjb21wb25lbnQucHJvcHMgPSBwcm9wcztcbiAgICAgICAgICAgIGNvbXBvbmVudC5fX3ggPSAhMTtcbiAgICAgICAgICAgIGlmICgwICE9PSBvcHRzKSBpZiAoMSA9PT0gb3B0cyB8fCAhMSAhPT0gb3B0aW9ucy5zeW5jQ29tcG9uZW50VXBkYXRlcyB8fCAhY29tcG9uZW50LmJhc2UpIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIDEsIG1vdW50QWxsKTsgZWxzZSBlbnF1ZXVlUmVuZGVyKGNvbXBvbmVudCk7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50Ll9fcikgY29tcG9uZW50Ll9fcihjb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIG9wdHMsIG1vdW50QWxsLCBpc0NoaWxkKSB7XG4gICAgICAgIGlmICghY29tcG9uZW50Ll9feCkge1xuICAgICAgICAgICAgdmFyIHJlbmRlcmVkLCBpbnN0LCBjYmFzZSwgcHJvcHMgPSBjb21wb25lbnQucHJvcHMsIHN0YXRlID0gY29tcG9uZW50LnN0YXRlLCBjb250ZXh0ID0gY29tcG9uZW50LmNvbnRleHQsIHByZXZpb3VzUHJvcHMgPSBjb21wb25lbnQuX19wIHx8IHByb3BzLCBwcmV2aW91c1N0YXRlID0gY29tcG9uZW50Ll9fcyB8fCBzdGF0ZSwgcHJldmlvdXNDb250ZXh0ID0gY29tcG9uZW50Ll9fYyB8fCBjb250ZXh0LCBpc1VwZGF0ZSA9IGNvbXBvbmVudC5iYXNlLCBuZXh0QmFzZSA9IGNvbXBvbmVudC5fX2IsIGluaXRpYWxCYXNlID0gaXNVcGRhdGUgfHwgbmV4dEJhc2UsIGluaXRpYWxDaGlsZENvbXBvbmVudCA9IGNvbXBvbmVudC5fY29tcG9uZW50LCBza2lwID0gITE7XG4gICAgICAgICAgICBpZiAoaXNVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQucHJvcHMgPSBwcmV2aW91c1Byb3BzO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zdGF0ZSA9IHByZXZpb3VzU3RhdGU7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmNvbnRleHQgPSBwcmV2aW91c0NvbnRleHQ7XG4gICAgICAgICAgICAgICAgaWYgKDIgIT09IG9wdHMgJiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZSAmJiAhMSA9PT0gY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpKSBza2lwID0gITA7IGVsc2UgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsVXBkYXRlKSBjb21wb25lbnQuY29tcG9uZW50V2lsbFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5wcm9wcyA9IHByb3BzO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvbmVudC5fX3AgPSBjb21wb25lbnQuX19zID0gY29tcG9uZW50Ll9fYyA9IGNvbXBvbmVudC5fX2IgPSBudWxsO1xuICAgICAgICAgICAgY29tcG9uZW50Ll9fZCA9ICExO1xuICAgICAgICAgICAgaWYgKCFza2lwKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZWQgPSBjb21wb25lbnQucmVuZGVyKHByb3BzLCBzdGF0ZSwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQpIGNvbnRleHQgPSBleHRlbmQoZXh0ZW5kKHt9LCBjb250ZXh0KSwgY29tcG9uZW50LmdldENoaWxkQ29udGV4dCgpKTtcbiAgICAgICAgICAgICAgICB2YXIgdG9Vbm1vdW50LCBiYXNlLCBjaGlsZENvbXBvbmVudCA9IHJlbmRlcmVkICYmIHJlbmRlcmVkLm5vZGVOYW1lO1xuICAgICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBjaGlsZENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRQcm9wcyA9IGdldE5vZGVQcm9wcyhyZW5kZXJlZCk7XG4gICAgICAgICAgICAgICAgICAgIGluc3QgPSBpbml0aWFsQ2hpbGRDb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0ICYmIGluc3QuY29uc3RydWN0b3IgPT09IGNoaWxkQ29tcG9uZW50ICYmIGNoaWxkUHJvcHMua2V5ID09IGluc3QuX19rKSBzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCAxLCBjb250ZXh0LCAhMSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9Vbm1vdW50ID0gaW5zdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fY29tcG9uZW50ID0gaW5zdCA9IGNyZWF0ZUNvbXBvbmVudChjaGlsZENvbXBvbmVudCwgY2hpbGRQcm9wcywgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0Ll9fYiA9IGluc3QuX19iIHx8IG5leHRCYXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5fX3UgPSBjb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCAwLCBjb250ZXh0LCAhMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJDb21wb25lbnQoaW5zdCwgMSwgbW91bnRBbGwsICEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBiYXNlID0gaW5zdC5iYXNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNiYXNlID0gaW5pdGlhbEJhc2U7XG4gICAgICAgICAgICAgICAgICAgIHRvVW5tb3VudCA9IGluaXRpYWxDaGlsZENvbXBvbmVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvVW5tb3VudCkgY2Jhc2UgPSBjb21wb25lbnQuX2NvbXBvbmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsQmFzZSB8fCAxID09PSBvcHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2Jhc2UpIGNiYXNlLl9jb21wb25lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGRpZmYoY2Jhc2UsIHJlbmRlcmVkLCBjb250ZXh0LCBtb3VudEFsbCB8fCAhaXNVcGRhdGUsIGluaXRpYWxCYXNlICYmIGluaXRpYWxCYXNlLnBhcmVudE5vZGUsICEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbEJhc2UgJiYgYmFzZSAhPT0gaW5pdGlhbEJhc2UgJiYgaW5zdCAhPT0gaW5pdGlhbENoaWxkQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYXNlUGFyZW50ID0gaW5pdGlhbEJhc2UucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VQYXJlbnQgJiYgYmFzZSAhPT0gYmFzZVBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVBhcmVudC5yZXBsYWNlQ2hpbGQoYmFzZSwgaW5pdGlhbEJhc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b1VubW91bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsQmFzZS5fY29tcG9uZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShpbml0aWFsQmFzZSwgITEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0b1VubW91bnQpIHVubW91bnRDb21wb25lbnQodG9Vbm1vdW50KTtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuYmFzZSA9IGJhc2U7XG4gICAgICAgICAgICAgICAgaWYgKGJhc2UgJiYgIWlzQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudFJlZiA9IGNvbXBvbmVudCwgdCA9IGNvbXBvbmVudDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHQgPSB0Ll9fdSkgKGNvbXBvbmVudFJlZiA9IHQpLmJhc2UgPSBiYXNlO1xuICAgICAgICAgICAgICAgICAgICBiYXNlLl9jb21wb25lbnQgPSBjb21wb25lbnRSZWY7XG4gICAgICAgICAgICAgICAgICAgIGJhc2UuX2NvbXBvbmVudENvbnN0cnVjdG9yID0gY29tcG9uZW50UmVmLmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNVcGRhdGUgfHwgbW91bnRBbGwpIG1vdW50cy51bnNoaWZ0KGNvbXBvbmVudCk7IGVsc2UgaWYgKCFza2lwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUpIGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUocHJldmlvdXNQcm9wcywgcHJldmlvdXNTdGF0ZSwgcHJldmlvdXNDb250ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hZnRlclVwZGF0ZSkgb3B0aW9ucy5hZnRlclVwZGF0ZShjb21wb25lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgIT0gY29tcG9uZW50Ll9faCkgd2hpbGUgKGNvbXBvbmVudC5fX2gubGVuZ3RoKSBjb21wb25lbnQuX19oLnBvcCgpLmNhbGwoY29tcG9uZW50KTtcbiAgICAgICAgICAgIGlmICghZGlmZkxldmVsICYmICFpc0NoaWxkKSBmbHVzaE1vdW50cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkQ29tcG9uZW50RnJvbVZOb2RlKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKSB7XG4gICAgICAgIHZhciBjID0gZG9tICYmIGRvbS5fY29tcG9uZW50LCBvcmlnaW5hbENvbXBvbmVudCA9IGMsIG9sZERvbSA9IGRvbSwgaXNEaXJlY3RPd25lciA9IGMgJiYgZG9tLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWUsIGlzT3duZXIgPSBpc0RpcmVjdE93bmVyLCBwcm9wcyA9IGdldE5vZGVQcm9wcyh2bm9kZSk7XG4gICAgICAgIHdoaWxlIChjICYmICFpc093bmVyICYmIChjID0gYy5fX3UpKSBpc093bmVyID0gYy5jb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWU7XG4gICAgICAgIGlmIChjICYmIGlzT3duZXIgJiYgKCFtb3VudEFsbCB8fCBjLl9jb21wb25lbnQpKSB7XG4gICAgICAgICAgICBzZXRDb21wb25lbnRQcm9wcyhjLCBwcm9wcywgMywgY29udGV4dCwgbW91bnRBbGwpO1xuICAgICAgICAgICAgZG9tID0gYy5iYXNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG9yaWdpbmFsQ29tcG9uZW50ICYmICFpc0RpcmVjdE93bmVyKSB7XG4gICAgICAgICAgICAgICAgdW5tb3VudENvbXBvbmVudChvcmlnaW5hbENvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgZG9tID0gb2xkRG9tID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGMgPSBjcmVhdGVDb21wb25lbnQodm5vZGUubm9kZU5hbWUsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgICAgIGlmIChkb20gJiYgIWMuX19iKSB7XG4gICAgICAgICAgICAgICAgYy5fX2IgPSBkb207XG4gICAgICAgICAgICAgICAgb2xkRG9tID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAxLCBjb250ZXh0LCBtb3VudEFsbCk7XG4gICAgICAgICAgICBkb20gPSBjLmJhc2U7XG4gICAgICAgICAgICBpZiAob2xkRG9tICYmIGRvbSAhPT0gb2xkRG9tKSB7XG4gICAgICAgICAgICAgICAgb2xkRG9tLl9jb21wb25lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKG9sZERvbSwgITEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb207XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVubW91bnRDb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmJlZm9yZVVubW91bnQpIG9wdGlvbnMuYmVmb3JlVW5tb3VudChjb21wb25lbnQpO1xuICAgICAgICB2YXIgYmFzZSA9IGNvbXBvbmVudC5iYXNlO1xuICAgICAgICBjb21wb25lbnQuX194ID0gITA7XG4gICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVubW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuICAgICAgICBjb21wb25lbnQuYmFzZSA9IG51bGw7XG4gICAgICAgIHZhciBpbm5lciA9IGNvbXBvbmVudC5fY29tcG9uZW50O1xuICAgICAgICBpZiAoaW5uZXIpIHVubW91bnRDb21wb25lbnQoaW5uZXIpOyBlbHNlIGlmIChiYXNlKSB7XG4gICAgICAgICAgICBpZiAoYmFzZS5fX3ByZWFjdGF0dHJfICYmIGJhc2UuX19wcmVhY3RhdHRyXy5yZWYpIGJhc2UuX19wcmVhY3RhdHRyXy5yZWYobnVsbCk7XG4gICAgICAgICAgICBjb21wb25lbnQuX19iID0gYmFzZTtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUoYmFzZSk7XG4gICAgICAgICAgICBjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgICAgICAgICByZW1vdmVDaGlsZHJlbihiYXNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcG9uZW50Ll9fcikgY29tcG9uZW50Ll9fcihudWxsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX19kID0gITA7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhdGUgfHwge307XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbmRlcih2bm9kZSwgcGFyZW50LCBtZXJnZSkge1xuICAgICAgICByZXR1cm4gZGlmZihtZXJnZSwgdm5vZGUsIHt9LCAhMSwgcGFyZW50LCAhMSk7XG4gICAgfVxuICAgIHZhciBvcHRpb25zID0ge307XG4gICAgdmFyIHN0YWNrID0gW107XG4gICAgdmFyIEVNUFRZX0NISUxEUkVOID0gW107XG4gICAgdmFyIGRlZmVyID0gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgUHJvbWlzZSA/IFByb21pc2UucmVzb2x2ZSgpLnRoZW4uYmluZChQcm9taXNlLnJlc29sdmUoKSkgOiBzZXRUaW1lb3V0O1xuICAgIHZhciBJU19OT05fRElNRU5TSU9OQUwgPSAvYWNpdHxleCg/OnN8Z3xufHB8JCl8cnBofG93c3xtbmN8bnR3fGluZVtjaF18em9vfF5vcmQvaTtcbiAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICB2YXIgbW91bnRzID0gW107XG4gICAgdmFyIGRpZmZMZXZlbCA9IDA7XG4gICAgdmFyIGlzU3ZnTW9kZSA9ICExO1xuICAgIHZhciBoeWRyYXRpbmcgPSAhMTtcbiAgICB2YXIgY29tcG9uZW50cyA9IHt9O1xuICAgIGV4dGVuZChDb21wb25lbnQucHJvdG90eXBlLCB7XG4gICAgICAgIHNldFN0YXRlOiBmdW5jdGlvbihzdGF0ZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5fX3MpIHRoaXMuX19zID0gZXh0ZW5kKHt9LCBzKTtcbiAgICAgICAgICAgIGV4dGVuZChzLCAnZnVuY3Rpb24nID09IHR5cGVvZiBzdGF0ZSA/IHN0YXRlKHMsIHRoaXMucHJvcHMpIDogc3RhdGUpO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSAodGhpcy5fX2ggPSB0aGlzLl9faCB8fCBbXSkucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICBlbnF1ZXVlUmVuZGVyKHRoaXMpO1xuICAgICAgICB9LFxuICAgICAgICBmb3JjZVVwZGF0ZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykgKHRoaXMuX19oID0gdGhpcy5fX2ggfHwgW10pLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgcmVuZGVyQ29tcG9uZW50KHRoaXMsIDIpO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge31cbiAgICB9KTtcbiAgICB2YXIgcHJlYWN0ID0ge1xuICAgICAgICBoOiBoLFxuICAgICAgICBjcmVhdGVFbGVtZW50OiBoLFxuICAgICAgICBjbG9uZUVsZW1lbnQ6IGNsb25lRWxlbWVudCxcbiAgICAgICAgQ29tcG9uZW50OiBDb21wb25lbnQsXG4gICAgICAgIHJlbmRlcjogcmVuZGVyLFxuICAgICAgICByZXJlbmRlcjogcmVyZW5kZXIsXG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICB9O1xuICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgbW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IHByZWFjdDsgZWxzZSBzZWxmLnByZWFjdCA9IHByZWFjdDtcbn0oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByZWFjdC5qcy5tYXAiLCJtb2R1bGUuZXhwb3J0cyA9IHByZXR0aWVyQnl0ZXNcblxuZnVuY3Rpb24gcHJldHRpZXJCeXRlcyAobnVtKSB7XG4gIGlmICh0eXBlb2YgbnVtICE9PSAnbnVtYmVyJyB8fCBpc05hTihudW0pKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYSBudW1iZXIsIGdvdCAnICsgdHlwZW9mIG51bSlcbiAgfVxuXG4gIHZhciBuZWcgPSBudW0gPCAwXG4gIHZhciB1bml0cyA9IFsnQicsICdLQicsICdNQicsICdHQicsICdUQicsICdQQicsICdFQicsICdaQicsICdZQiddXG5cbiAgaWYgKG5lZykge1xuICAgIG51bSA9IC1udW1cbiAgfVxuXG4gIGlmIChudW0gPCAxKSB7XG4gICAgcmV0dXJuIChuZWcgPyAnLScgOiAnJykgKyBudW0gKyAnIEInXG4gIH1cblxuICB2YXIgZXhwb25lbnQgPSBNYXRoLm1pbihNYXRoLmZsb29yKE1hdGgubG9nKG51bSkgLyBNYXRoLmxvZygxMDAwKSksIHVuaXRzLmxlbmd0aCAtIDEpXG4gIG51bSA9IE51bWJlcihudW0gLyBNYXRoLnBvdygxMDAwLCBleHBvbmVudCkpXG4gIHZhciB1bml0ID0gdW5pdHNbZXhwb25lbnRdXG5cbiAgaWYgKG51bSA+PSAxMCB8fCBudW0gJSAxID09PSAwKSB7XG4gICAgLy8gRG8gbm90IHNob3cgZGVjaW1hbHMgd2hlbiB0aGUgbnVtYmVyIGlzIHR3by1kaWdpdCwgb3IgaWYgdGhlIG51bWJlciBoYXMgbm9cbiAgICAvLyBkZWNpbWFsIGNvbXBvbmVudC5cbiAgICByZXR1cm4gKG5lZyA/ICctJyA6ICcnKSArIG51bS50b0ZpeGVkKDApICsgJyAnICsgdW5pdFxuICB9IGVsc2Uge1xuICAgIHJldHVybiAobmVnID8gJy0nIDogJycpICsgbnVtLnRvRml4ZWQoMSkgKyAnICcgKyB1bml0XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE0IFNpbW9uIEx5ZGVsbFxyXG4vLyBYMTEgKOKAnE1JVOKAnSkgTGljZW5zZWQuIChTZWUgTElDRU5TRS4pXHJcblxyXG52b2lkIChmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XHJcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICBkZWZpbmUoZmFjdG9yeSlcclxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKVxyXG4gIH0gZWxzZSB7XHJcbiAgICByb290LnJlc29sdmVVcmwgPSBmYWN0b3J5KClcclxuICB9XHJcbn0odGhpcywgZnVuY3Rpb24oKSB7XHJcblxyXG4gIGZ1bmN0aW9uIHJlc29sdmVVcmwoLyogLi4udXJscyAqLykge1xyXG4gICAgdmFyIG51bVVybHMgPSBhcmd1bWVudHMubGVuZ3RoXHJcblxyXG4gICAgaWYgKG51bVVybHMgPT09IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicmVzb2x2ZVVybCByZXF1aXJlcyBhdCBsZWFzdCBvbmUgYXJndW1lbnQ7IGdvdCBub25lLlwiKVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBiYXNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJhc2VcIilcclxuICAgIGJhc2UuaHJlZiA9IGFyZ3VtZW50c1swXVxyXG5cclxuICAgIGlmIChudW1VcmxzID09PSAxKSB7XHJcbiAgICAgIHJldHVybiBiYXNlLmhyZWZcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXVxyXG4gICAgaGVhZC5pbnNlcnRCZWZvcmUoYmFzZSwgaGVhZC5maXJzdENoaWxkKVxyXG5cclxuICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIilcclxuICAgIHZhciByZXNvbHZlZFxyXG5cclxuICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBudW1VcmxzOyBpbmRleCsrKSB7XHJcbiAgICAgIGEuaHJlZiA9IGFyZ3VtZW50c1tpbmRleF1cclxuICAgICAgcmVzb2x2ZWQgPSBhLmhyZWZcclxuICAgICAgYmFzZS5ocmVmID0gcmVzb2x2ZWRcclxuICAgIH1cclxuXHJcbiAgICBoZWFkLnJlbW92ZUNoaWxkKGJhc2UpXHJcblxyXG4gICAgcmV0dXJuIHJlc29sdmVkXHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzb2x2ZVVybFxyXG5cclxufSkpO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJ1blBhcmFsbGVsXG5cbmZ1bmN0aW9uIHJ1blBhcmFsbGVsICh0YXNrcywgY2IpIHtcbiAgdmFyIHJlc3VsdHMsIHBlbmRpbmcsIGtleXNcbiAgdmFyIGlzU3luYyA9IHRydWVcblxuICBpZiAoQXJyYXkuaXNBcnJheSh0YXNrcykpIHtcbiAgICByZXN1bHRzID0gW11cbiAgICBwZW5kaW5nID0gdGFza3MubGVuZ3RoXG4gIH0gZWxzZSB7XG4gICAga2V5cyA9IE9iamVjdC5rZXlzKHRhc2tzKVxuICAgIHJlc3VsdHMgPSB7fVxuICAgIHBlbmRpbmcgPSBrZXlzLmxlbmd0aFxuICB9XG5cbiAgZnVuY3Rpb24gZG9uZSAoZXJyKSB7XG4gICAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICAgIGlmIChjYikgY2IoZXJyLCByZXN1bHRzKVxuICAgICAgY2IgPSBudWxsXG4gICAgfVxuICAgIGlmIChpc1N5bmMpIHByb2Nlc3MubmV4dFRpY2soZW5kKVxuICAgIGVsc2UgZW5kKClcbiAgfVxuXG4gIGZ1bmN0aW9uIGVhY2ggKGksIGVyciwgcmVzdWx0KSB7XG4gICAgcmVzdWx0c1tpXSA9IHJlc3VsdFxuICAgIGlmICgtLXBlbmRpbmcgPT09IDAgfHwgZXJyKSB7XG4gICAgICBkb25lKGVycilcbiAgICB9XG4gIH1cblxuICBpZiAoIXBlbmRpbmcpIHtcbiAgICAvLyBlbXB0eVxuICAgIGRvbmUobnVsbClcbiAgfSBlbHNlIGlmIChrZXlzKSB7XG4gICAgLy8gb2JqZWN0XG4gICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHRhc2tzW2tleV0oZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7IGVhY2goa2V5LCBlcnIsIHJlc3VsdCkgfSlcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIC8vIGFycmF5XG4gICAgdGFza3MuZm9yRWFjaChmdW5jdGlvbiAodGFzaywgaSkge1xuICAgICAgdGFzayhmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsgZWFjaChpLCBlcnIsIHJlc3VsdCkgfSlcbiAgICB9KVxuICB9XG5cbiAgaXNTeW5jID0gZmFsc2Vcbn1cbiIsIi8vIEdlbmVyYXRlZCBieSBCYWJlbFxuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmVuY29kZSA9IGVuY29kZTtcbi8qIGdsb2JhbDogd2luZG93ICovXG5cbnZhciBfd2luZG93ID0gd2luZG93O1xudmFyIGJ0b2EgPSBfd2luZG93LmJ0b2E7XG5mdW5jdGlvbiBlbmNvZGUoZGF0YSkge1xuICByZXR1cm4gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZGF0YSkpKTtcbn1cblxudmFyIGlzU3VwcG9ydGVkID0gZXhwb3J0cy5pc1N1cHBvcnRlZCA9IFwiYnRvYVwiIGluIHdpbmRvdzsiLCIvLyBHZW5lcmF0ZWQgYnkgQmFiZWxcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5uZXdSZXF1ZXN0ID0gbmV3UmVxdWVzdDtcbmV4cG9ydHMucmVzb2x2ZVVybCA9IHJlc29sdmVVcmw7XG5cbnZhciBfcmVzb2x2ZVVybCA9IHJlcXVpcmUoXCJyZXNvbHZlLXVybFwiKTtcblxudmFyIF9yZXNvbHZlVXJsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Jlc29sdmVVcmwpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBuZXdSZXF1ZXN0KCkge1xuICByZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xufSAvKiBnbG9iYWwgd2luZG93ICovXG5cblxuZnVuY3Rpb24gcmVzb2x2ZVVybChvcmlnaW4sIGxpbmspIHtcbiAgcmV0dXJuICgwLCBfcmVzb2x2ZVVybDIuZGVmYXVsdCkob3JpZ2luLCBsaW5rKTtcbn0iLCIvLyBHZW5lcmF0ZWQgYnkgQmFiZWxcblwidXNlIHN0cmljdFwiO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5nZXRTb3VyY2UgPSBnZXRTb3VyY2U7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBGaWxlU291cmNlID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBGaWxlU291cmNlKGZpbGUpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZVNvdXJjZSk7XG5cbiAgICB0aGlzLl9maWxlID0gZmlsZTtcbiAgICB0aGlzLnNpemUgPSBmaWxlLnNpemU7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRmlsZVNvdXJjZSwgW3tcbiAgICBrZXk6IFwic2xpY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2xpY2Uoc3RhcnQsIGVuZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ZpbGUuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsb3NlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKCkge31cbiAgfV0pO1xuXG4gIHJldHVybiBGaWxlU291cmNlO1xufSgpO1xuXG5mdW5jdGlvbiBnZXRTb3VyY2UoaW5wdXQpIHtcbiAgLy8gU2luY2Ugd2UgZW11bGF0ZSB0aGUgQmxvYiB0eXBlIGluIG91ciB0ZXN0cyAobm90IGFsbCB0YXJnZXQgYnJvd3NlcnNcbiAgLy8gc3VwcG9ydCBpdCksIHdlIGNhbm5vdCB1c2UgYGluc3RhbmNlb2ZgIGZvciB0ZXN0aW5nIHdoZXRoZXIgdGhlIGlucHV0IHZhbHVlXG4gIC8vIGNhbiBiZSBoYW5kbGVkLiBJbnN0ZWFkLCB3ZSBzaW1wbHkgY2hlY2sgaXMgdGhlIHNsaWNlKCkgZnVuY3Rpb24gYW5kIHRoZVxuICAvLyBzaXplIHByb3BlcnR5IGFyZSBhdmFpbGFibGUuXG4gIGlmICh0eXBlb2YgaW5wdXQuc2xpY2UgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgaW5wdXQuc2l6ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBuZXcgRmlsZVNvdXJjZShpbnB1dCk7XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoXCJzb3VyY2Ugb2JqZWN0IG1heSBvbmx5IGJlIGFuIGluc3RhbmNlIG9mIEZpbGUgb3IgQmxvYiBpbiB0aGlzIGVudmlyb25tZW50XCIpO1xufSIsIi8vIEdlbmVyYXRlZCBieSBCYWJlbFxuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnNldEl0ZW0gPSBzZXRJdGVtO1xuZXhwb3J0cy5nZXRJdGVtID0gZ2V0SXRlbTtcbmV4cG9ydHMucmVtb3ZlSXRlbSA9IHJlbW92ZUl0ZW07XG4vKiBnbG9iYWwgd2luZG93LCBsb2NhbFN0b3JhZ2UgKi9cblxudmFyIGhhc1N0b3JhZ2UgPSBmYWxzZTtcbnRyeSB7XG4gIGhhc1N0b3JhZ2UgPSBcImxvY2FsU3RvcmFnZVwiIGluIHdpbmRvdztcblxuICAvLyBBdHRlbXB0IHRvIHN0b3JlIGFuZCByZWFkIGVudHJpZXMgZnJvbSB0aGUgbG9jYWwgc3RvcmFnZSB0byBkZXRlY3QgUHJpdmF0ZVxuICAvLyBNb2RlIG9uIFNhZmFyaSBvbiBpT1MgKHNlZSAjNDkpXG4gIHZhciBrZXkgPSBcInR1c1N1cHBvcnRcIjtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKTtcbn0gY2F0Y2ggKGUpIHtcbiAgLy8gSWYgd2UgdHJ5IHRvIGFjY2VzcyBsb2NhbFN0b3JhZ2UgaW5zaWRlIGEgc2FuZGJveGVkIGlmcmFtZSwgYSBTZWN1cml0eUVycm9yXG4gIC8vIGlzIHRocm93bi4gV2hlbiBpbiBwcml2YXRlIG1vZGUgb24gaU9TIFNhZmFyaSwgYSBRdW90YUV4Y2VlZGVkRXJyb3IgaXNcbiAgLy8gdGhyb3duIChzZWUgIzQ5KVxuICBpZiAoZS5jb2RlID09PSBlLlNFQ1VSSVRZX0VSUiB8fCBlLmNvZGUgPT09IGUuUVVPVEFfRVhDRUVERURfRVJSKSB7XG4gICAgaGFzU3RvcmFnZSA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IGU7XG4gIH1cbn1cblxudmFyIGNhblN0b3JlVVJMcyA9IGV4cG9ydHMuY2FuU3RvcmVVUkxzID0gaGFzU3RvcmFnZTtcblxuZnVuY3Rpb24gc2V0SXRlbShrZXksIHZhbHVlKSB7XG4gIGlmICghaGFzU3RvcmFnZSkgcmV0dXJuO1xuICByZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGdldEl0ZW0oa2V5KSB7XG4gIGlmICghaGFzU3RvcmFnZSkgcmV0dXJuO1xuICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXkpIHtcbiAgaWYgKCFoYXNTdG9yYWdlKSByZXR1cm47XG4gIHJldHVybiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xufSIsIi8vIEdlbmVyYXRlZCBieSBCYWJlbFxuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIERldGFpbGVkRXJyb3IgPSBmdW5jdGlvbiAoX0Vycm9yKSB7XG4gIF9pbmhlcml0cyhEZXRhaWxlZEVycm9yLCBfRXJyb3IpO1xuXG4gIGZ1bmN0aW9uIERldGFpbGVkRXJyb3IoZXJyb3IpIHtcbiAgICB2YXIgY2F1c2luZ0VyciA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMV07XG4gICAgdmFyIHhociA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMl07XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGV0YWlsZWRFcnJvcik7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRGV0YWlsZWRFcnJvcikuY2FsbCh0aGlzLCBlcnJvci5tZXNzYWdlKSk7XG5cbiAgICBfdGhpcy5vcmlnaW5hbFJlcXVlc3QgPSB4aHI7XG4gICAgX3RoaXMuY2F1c2luZ0Vycm9yID0gY2F1c2luZ0VycjtcblxuICAgIHZhciBtZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICBpZiAoY2F1c2luZ0VyciAhPSBudWxsKSB7XG4gICAgICBtZXNzYWdlICs9IFwiLCBjYXVzZWQgYnkgXCIgKyBjYXVzaW5nRXJyLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmICh4aHIgIT0gbnVsbCkge1xuICAgICAgbWVzc2FnZSArPSBcIiwgb3JpZ2luYXRlZCBmcm9tIHJlcXVlc3QgKHJlc3BvbnNlIGNvZGU6IFwiICsgeGhyLnN0YXR1cyArIFwiLCByZXNwb25zZSB0ZXh0OiBcIiArIHhoci5yZXNwb25zZVRleHQgKyBcIilcIjtcbiAgICB9XG4gICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgcmV0dXJuIERldGFpbGVkRXJyb3I7XG59KEVycm9yKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRGV0YWlsZWRFcnJvcjsiLCIvLyBHZW5lcmF0ZWQgYnkgQmFiZWxcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZmluZ2VycHJpbnQ7XG4vKipcbiAqIEdlbmVyYXRlIGEgZmluZ2VycHJpbnQgZm9yIGEgZmlsZSB3aGljaCB3aWxsIGJlIHVzZWQgdGhlIHN0b3JlIHRoZSBlbmRwb2ludFxuICpcbiAqIEBwYXJhbSB7RmlsZX0gZmlsZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBmaW5nZXJwcmludChmaWxlLCBvcHRpb25zKSB7XG4gIHJldHVybiBbXCJ0dXNcIiwgZmlsZS5uYW1lLCBmaWxlLnR5cGUsIGZpbGUuc2l6ZSwgZmlsZS5sYXN0TW9kaWZpZWQsIG9wdGlvbnMuZW5kcG9pbnRdLmpvaW4oXCItXCIpO1xufSIsIi8vIEdlbmVyYXRlZCBieSBCYWJlbFxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfdXBsb2FkID0gcmVxdWlyZShcIi4vdXBsb2FkXCIpO1xuXG52YXIgX3VwbG9hZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91cGxvYWQpO1xuXG52YXIgX3N0b3JhZ2UgPSByZXF1aXJlKFwiLi9ub2RlL3N0b3JhZ2VcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qIGdsb2JhbCB3aW5kb3cgKi9cbnZhciBkZWZhdWx0T3B0aW9ucyA9IF91cGxvYWQyLmRlZmF1bHQuZGVmYXVsdE9wdGlvbnM7XG5cblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgLy8gQnJvd3NlciBlbnZpcm9ubWVudCB1c2luZyBYTUxIdHRwUmVxdWVzdFxuICB2YXIgX3dpbmRvdyA9IHdpbmRvdztcbiAgdmFyIFhNTEh0dHBSZXF1ZXN0ID0gX3dpbmRvdy5YTUxIdHRwUmVxdWVzdDtcbiAgdmFyIEJsb2IgPSBfd2luZG93LkJsb2I7XG5cblxuICB2YXIgaXNTdXBwb3J0ZWQgPSBYTUxIdHRwUmVxdWVzdCAmJiBCbG9iICYmIHR5cGVvZiBCbG9iLnByb3RvdHlwZS5zbGljZSA9PT0gXCJmdW5jdGlvblwiO1xufSBlbHNlIHtcbiAgLy8gTm9kZS5qcyBlbnZpcm9ubWVudCB1c2luZyBodHRwIG1vZHVsZVxuICB2YXIgaXNTdXBwb3J0ZWQgPSB0cnVlO1xufVxuXG4vLyBUaGUgdXNhZ2Ugb2YgdGhlIGNvbW1vbmpzIGV4cG9ydGluZyBzeW50YXggaW5zdGVhZCBvZiB0aGUgbmV3IEVDTUFTY3JpcHRcbi8vIG9uZSBpcyBhY3R1YWxseSBpbnRlZGVkIGFuZCBwcmV2ZW50cyB3ZWlyZCBiZWhhdmlvdXIgaWYgd2UgYXJlIHRyeWluZyB0b1xuLy8gaW1wb3J0IHRoaXMgbW9kdWxlIGluIGFub3RoZXIgbW9kdWxlIHVzaW5nIEJhYmVsLlxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFVwbG9hZDogX3VwbG9hZDIuZGVmYXVsdCxcbiAgaXNTdXBwb3J0ZWQ6IGlzU3VwcG9ydGVkLFxuICBjYW5TdG9yZVVSTHM6IF9zdG9yYWdlLmNhblN0b3JlVVJMcyxcbiAgZGVmYXVsdE9wdGlvbnM6IGRlZmF1bHRPcHRpb25zXG59OyIsIi8vIEdlbmVyYXRlZCBieSBCYWJlbFxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7IC8qIGdsb2JhbCB3aW5kb3cgKi9cblxuXG4vLyBXZSBpbXBvcnQgdGhlIGZpbGVzIHVzZWQgaW5zaWRlIHRoZSBOb2RlIGVudmlyb25tZW50IHdoaWNoIGFyZSByZXdyaXR0ZW5cbi8vIGZvciBicm93c2VycyB1c2luZyB0aGUgcnVsZXMgZGVmaW5lZCBpbiB0aGUgcGFja2FnZS5qc29uXG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9maW5nZXJwcmludCA9IHJlcXVpcmUoXCIuL2ZpbmdlcnByaW50XCIpO1xuXG52YXIgX2ZpbmdlcnByaW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbmdlcnByaW50KTtcblxudmFyIF9lcnJvciA9IHJlcXVpcmUoXCIuL2Vycm9yXCIpO1xuXG52YXIgX2Vycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Vycm9yKTtcblxudmFyIF9leHRlbmQgPSByZXF1aXJlKFwiZXh0ZW5kXCIpO1xuXG52YXIgX2V4dGVuZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmQpO1xuXG52YXIgX3JlcXVlc3QgPSByZXF1aXJlKFwiLi9ub2RlL3JlcXVlc3RcIik7XG5cbnZhciBfc291cmNlID0gcmVxdWlyZShcIi4vbm9kZS9zb3VyY2VcIik7XG5cbnZhciBfYmFzZSA9IHJlcXVpcmUoXCIuL25vZGUvYmFzZTY0XCIpO1xuXG52YXIgQmFzZTY0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2Jhc2UpO1xuXG52YXIgX3N0b3JhZ2UgPSByZXF1aXJlKFwiLi9ub2RlL3N0b3JhZ2VcIik7XG5cbnZhciBTdG9yYWdlID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3N0b3JhZ2UpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIGVuZHBvaW50OiBudWxsLFxuICBmaW5nZXJwcmludDogX2ZpbmdlcnByaW50Mi5kZWZhdWx0LFxuICByZXN1bWU6IHRydWUsXG4gIG9uUHJvZ3Jlc3M6IG51bGwsXG4gIG9uQ2h1bmtDb21wbGV0ZTogbnVsbCxcbiAgb25TdWNjZXNzOiBudWxsLFxuICBvbkVycm9yOiBudWxsLFxuICBoZWFkZXJzOiB7fSxcbiAgY2h1bmtTaXplOiBJbmZpbml0eSxcbiAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZSxcbiAgdXBsb2FkVXJsOiBudWxsLFxuICB1cGxvYWRTaXplOiBudWxsLFxuICBvdmVycmlkZVBhdGNoTWV0aG9kOiBmYWxzZSxcbiAgcmV0cnlEZWxheXM6IG51bGwsXG4gIHJlbW92ZUZpbmdlcnByaW50T25TdWNjZXNzOiBmYWxzZVxufTtcblxudmFyIFVwbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gVXBsb2FkKGZpbGUsIG9wdGlvbnMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXBsb2FkKTtcblxuICAgIHRoaXMub3B0aW9ucyA9ICgwLCBfZXh0ZW5kMi5kZWZhdWx0KSh0cnVlLCB7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgLy8gVGhlIHVuZGVybHlpbmcgRmlsZS9CbG9iIG9iamVjdFxuICAgIHRoaXMuZmlsZSA9IGZpbGU7XG5cbiAgICAvLyBUaGUgVVJMIGFnYWluc3Qgd2hpY2ggdGhlIGZpbGUgd2lsbCBiZSB1cGxvYWRlZFxuICAgIHRoaXMudXJsID0gbnVsbDtcblxuICAgIC8vIFRoZSB1bmRlcmx5aW5nIFhIUiBvYmplY3QgZm9yIHRoZSBjdXJyZW50IFBBVENIIHJlcXVlc3RcbiAgICB0aGlzLl94aHIgPSBudWxsO1xuXG4gICAgLy8gVGhlIGZpbmdlcnBpbnJ0IGZvciB0aGUgY3VycmVudCBmaWxlIChzZXQgYWZ0ZXIgc3RhcnQoKSlcbiAgICB0aGlzLl9maW5nZXJwcmludCA9IG51bGw7XG5cbiAgICAvLyBUaGUgb2Zmc2V0IHVzZWQgaW4gdGhlIGN1cnJlbnQgUEFUQ0ggcmVxdWVzdFxuICAgIHRoaXMuX29mZnNldCA9IG51bGw7XG5cbiAgICAvLyBUcnVlIGlmIHRoZSBjdXJyZW50IFBBVENIIHJlcXVlc3QgaGFzIGJlZW4gYWJvcnRlZFxuICAgIHRoaXMuX2Fib3J0ZWQgPSBmYWxzZTtcblxuICAgIC8vIFRoZSBmaWxlJ3Mgc2l6ZSBpbiBieXRlc1xuICAgIHRoaXMuX3NpemUgPSBudWxsO1xuXG4gICAgLy8gVGhlIFNvdXJjZSBvYmplY3Qgd2hpY2ggd2lsbCB3cmFwIGFyb3VuZCB0aGUgZ2l2ZW4gZmlsZSBhbmQgcHJvdmlkZXMgdXNcbiAgICAvLyB3aXRoIGEgdW5pZmllZCBpbnRlcmZhY2UgZm9yIGdldHRpbmcgaXRzIHNpemUgYW5kIHNsaWNlIGNodW5rcyBmcm9tIGl0c1xuICAgIC8vIGNvbnRlbnQgYWxsb3dpbmcgdXMgdG8gZWFzaWx5IGhhbmRsZSBGaWxlcywgQmxvYnMsIEJ1ZmZlcnMgYW5kIFN0cmVhbXMuXG4gICAgdGhpcy5fc291cmNlID0gbnVsbDtcblxuICAgIC8vIFRoZSBjdXJyZW50IGNvdW50IG9mIGF0dGVtcHRzIHdoaWNoIGhhdmUgYmVlbiBtYWRlLiBOdWxsIGluZGljYXRlcyBub25lLlxuICAgIHRoaXMuX3JldHJ5QXR0ZW1wdCA9IDA7XG5cbiAgICAvLyBUaGUgdGltZW91dCdzIElEIHdoaWNoIGlzIHVzZWQgdG8gZGVsYXkgdGhlIG5leHQgcmV0cnlcbiAgICB0aGlzLl9yZXRyeVRpbWVvdXQgPSBudWxsO1xuXG4gICAgLy8gVGhlIG9mZnNldCBvZiB0aGUgcmVtb3RlIHVwbG9hZCBiZWZvcmUgdGhlIGxhdGVzdCBhdHRlbXB0IHdhcyBzdGFydGVkLlxuICAgIHRoaXMuX29mZnNldEJlZm9yZVJldHJ5ID0gMDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhVcGxvYWQsIFt7XG4gICAga2V5OiBcInN0YXJ0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGU7XG5cbiAgICAgIGlmICghZmlsZSkge1xuICAgICAgICB0aGlzLl9lbWl0RXJyb3IobmV3IEVycm9yKFwidHVzOiBubyBmaWxlIG9yIHN0cmVhbSB0byB1cGxvYWQgcHJvdmlkZWRcIikpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmVuZHBvaW50ICYmICF0aGlzLm9wdGlvbnMudXBsb2FkVXJsKSB7XG4gICAgICAgIHRoaXMuX2VtaXRFcnJvcihuZXcgRXJyb3IoXCJ0dXM6IG5laXRoZXIgYW4gZW5kcG9pbnQgb3IgYW4gdXBsb2FkIFVSTCBpcyBwcm92aWRlZFwiKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuX3NvdXJjZSA9ICgwLCBfc291cmNlLmdldFNvdXJjZSkoZmlsZSwgdGhpcy5vcHRpb25zLmNodW5rU2l6ZSk7XG5cbiAgICAgIC8vIEZpcnN0bHksIGNoZWNrIGlmIHRoZSBjYWxsZXIgaGFzIHN1cHBsaWVkIGEgbWFudWFsIHVwbG9hZCBzaXplIG9yIGVsc2VcbiAgICAgIC8vIHdlIHdpbGwgdXNlIHRoZSBjYWxjdWxhdGVkIHNpemUgYnkgdGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnVwbG9hZFNpemUgIT0gbnVsbCkge1xuICAgICAgICB2YXIgc2l6ZSA9ICt0aGlzLm9wdGlvbnMudXBsb2FkU2l6ZTtcbiAgICAgICAgaWYgKGlzTmFOKHNpemUpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHVzOiBjYW5ub3QgY29udmVydCBgdXBsb2FkU2l6ZWAgb3B0aW9uIGludG8gYSBudW1iZXJcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zaXplID0gc2l6ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzaXplID0gc291cmNlLnNpemU7XG5cbiAgICAgICAgLy8gVGhlIHNpemUgcHJvcGVydHkgd2lsbCBiZSBudWxsIGlmIHdlIGNhbm5vdCBjYWxjdWxhdGUgdGhlIGZpbGUncyBzaXplLFxuICAgICAgICAvLyBmb3IgZXhhbXBsZSBpZiB5b3UgaGFuZGxlIGEgc3RyZWFtLlxuICAgICAgICBpZiAoc2l6ZSA9PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHVzOiBjYW5ub3QgYXV0b21hdGljYWxseSBkZXJpdmUgdXBsb2FkJ3Mgc2l6ZSBmcm9tIGlucHV0IGFuZCBtdXN0IGJlIHNwZWNpZmllZCBtYW51YWxseSB1c2luZyB0aGUgYHVwbG9hZFNpemVgIG9wdGlvblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NpemUgPSBzaXplO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmV0cnlEZWxheXMgPSB0aGlzLm9wdGlvbnMucmV0cnlEZWxheXM7XG4gICAgICBpZiAocmV0cnlEZWxheXMgIT0gbnVsbCkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHJldHJ5RGVsYXlzKSAhPT0gXCJbb2JqZWN0IEFycmF5XVwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHVzOiB0aGUgYHJldHJ5RGVsYXlzYCBvcHRpb24gbXVzdCBlaXRoZXIgYmUgYW4gYXJyYXkgb3IgbnVsbFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVycm9yQ2FsbGJhY2sgPSBfdGhpcy5vcHRpb25zLm9uRXJyb3I7XG4gICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIC8vIFJlc3RvcmUgdGhlIG9yaWdpbmFsIGVycm9yIGNhbGxiYWNrIHdoaWNoIG1heSBoYXZlIGJlZW4gc2V0LlxuICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uRXJyb3IgPSBlcnJvckNhbGxiYWNrO1xuXG4gICAgICAgICAgICAgIC8vIFdlIHdpbGwgcmVzZXQgdGhlIGF0dGVtcHQgY291bnRlciBpZlxuICAgICAgICAgICAgICAvLyAtIHdlIHdlcmUgYWxyZWFkeSBhYmxlIHRvIGNvbm5lY3QgdG8gdGhlIHNlcnZlciAob2Zmc2V0ICE9IG51bGwpIGFuZFxuICAgICAgICAgICAgICAvLyAtIHdlIHdlcmUgYWJsZSB0byB1cGxvYWQgYSBzbWFsbCBjaHVuayBvZiBkYXRhIHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgICAgdmFyIHNob3VsZFJlc2V0RGVsYXlzID0gX3RoaXMuX29mZnNldCAhPSBudWxsICYmIF90aGlzLl9vZmZzZXQgPiBfdGhpcy5fb2Zmc2V0QmVmb3JlUmV0cnk7XG4gICAgICAgICAgICAgIGlmIChzaG91bGRSZXNldERlbGF5cykge1xuICAgICAgICAgICAgICAgIF90aGlzLl9yZXRyeUF0dGVtcHQgPSAwO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdmFyIGlzT25saW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJuYXZpZ2F0b3JcIiBpbiB3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvci5vbkxpbmUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaXNPbmxpbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIFdlIG9ubHkgYXR0ZW1wdCBhIHJldHJ5IGlmXG4gICAgICAgICAgICAgIC8vIC0gd2UgZGlkbid0IGV4Y2VlZCB0aGUgbWF4aXVtIG51bWJlciBvZiByZXRyaWVzLCB5ZXQsIGFuZFxuICAgICAgICAgICAgICAvLyAtIHRoaXMgZXJyb3Igd2FzIGNhdXNlZCBieSBhIHJlcXVlc3Qgb3IgaXQncyByZXNwb25zZSBhbmRcbiAgICAgICAgICAgICAgLy8gLSB0aGUgZXJyb3IgaXMgbm90IGEgY2xpZW50IGVycm9yIChzdGF0dXMgNHh4KSBhbmRcbiAgICAgICAgICAgICAgLy8gLSB0aGUgYnJvd3NlciBkb2VzIG5vdCBpbmRpY2F0ZSB0aGF0IHdlIGFyZSBvZmZsaW5lXG4gICAgICAgICAgICAgIHZhciBzaG91bGRSZXRyeSA9IF90aGlzLl9yZXRyeUF0dGVtcHQgPCByZXRyeURlbGF5cy5sZW5ndGggJiYgZXJyLm9yaWdpbmFsUmVxdWVzdCAhPSBudWxsICYmICFpblN0YXR1c0NhdGVnb3J5KGVyci5vcmlnaW5hbFJlcXVlc3Quc3RhdHVzLCA0MDApICYmIGlzT25saW5lO1xuXG4gICAgICAgICAgICAgIGlmICghc2hvdWxkUmV0cnkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fZW1pdEVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdmFyIGRlbGF5ID0gcmV0cnlEZWxheXNbX3RoaXMuX3JldHJ5QXR0ZW1wdCsrXTtcblxuICAgICAgICAgICAgICBfdGhpcy5fb2Zmc2V0QmVmb3JlUmV0cnkgPSBfdGhpcy5fb2Zmc2V0O1xuICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLnVwbG9hZFVybCA9IF90aGlzLnVybDtcblxuICAgICAgICAgICAgICBfdGhpcy5fcmV0cnlUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc3RhcnQoKTtcbiAgICAgICAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc2V0IHRoZSBhYm9ydGVkIGZsYWcgd2hlbiB0aGUgdXBsb2FkIGlzIHN0YXJ0ZWQgb3IgZWxzZSB0aGVcbiAgICAgIC8vIF9zdGFydFVwbG9hZCB3aWxsIHN0b3AgYmVmb3JlIHNlbmRpbmcgYSByZXF1ZXN0IGlmIHRoZSB1cGxvYWQgaGFzIGJlZW5cbiAgICAgIC8vIGFib3J0ZWQgcHJldmlvdXNseS5cbiAgICAgIHRoaXMuX2Fib3J0ZWQgPSBmYWxzZTtcblxuICAgICAgLy8gVGhlIHVwbG9hZCBoYWQgYmVlbiBzdGFydGVkIHByZXZpb3VzbHkgYW5kIHdlIHNob3VsZCByZXVzZSB0aGlzIFVSTC5cbiAgICAgIGlmICh0aGlzLnVybCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuX3Jlc3VtZVVwbG9hZCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEEgVVJMIGhhcyBtYW51YWxseSBiZWVuIHNwZWNpZmllZCwgc28gd2UgdHJ5IHRvIHJlc3VtZVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy51cGxvYWRVcmwgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnVybCA9IHRoaXMub3B0aW9ucy51cGxvYWRVcmw7XG4gICAgICAgIHRoaXMuX3Jlc3VtZVVwbG9hZCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFRyeSB0byBmaW5kIHRoZSBlbmRwb2ludCBmb3IgdGhlIGZpbGUgaW4gdGhlIHN0b3JhZ2VcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVzdW1lKSB7XG4gICAgICAgIHRoaXMuX2ZpbmdlcnByaW50ID0gdGhpcy5vcHRpb25zLmZpbmdlcnByaW50KGZpbGUsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIHZhciByZXN1bWVkVXJsID0gU3RvcmFnZS5nZXRJdGVtKHRoaXMuX2ZpbmdlcnByaW50KTtcblxuICAgICAgICBpZiAocmVzdW1lZFVybCAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy51cmwgPSByZXN1bWVkVXJsO1xuICAgICAgICAgIHRoaXMuX3Jlc3VtZVVwbG9hZCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBbiB1cGxvYWQgaGFzIG5vdCBzdGFydGVkIGZvciB0aGUgZmlsZSB5ZXQsIHNvIHdlIHN0YXJ0IGEgbmV3IG9uZVxuICAgICAgdGhpcy5fY3JlYXRlVXBsb2FkKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFib3J0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFib3J0KCkge1xuICAgICAgaWYgKHRoaXMuX3hociAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLl94aHIuYWJvcnQoKTtcbiAgICAgICAgdGhpcy5fc291cmNlLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Fib3J0ZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcmV0cnlUaW1lb3V0ICE9IG51bGwpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3JldHJ5VGltZW91dCk7XG4gICAgICAgIHRoaXMuX3JldHJ5VGltZW91dCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIl9lbWl0WGhyRXJyb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2VtaXRYaHJFcnJvcih4aHIsIGVyciwgY2F1c2luZ0Vycikge1xuICAgICAgdGhpcy5fZW1pdEVycm9yKG5ldyBfZXJyb3IyLmRlZmF1bHQoZXJyLCBjYXVzaW5nRXJyLCB4aHIpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiX2VtaXRFcnJvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfZW1pdEVycm9yKGVycikge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25FcnJvciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5vbkVycm9yKGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIl9lbWl0U3VjY2Vzc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfZW1pdFN1Y2Nlc3MoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vblN1Y2Nlc3MgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aGlzLm9wdGlvbnMub25TdWNjZXNzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHVibGlzaGVzIG5vdGlmaWNhdGlvbiB3aGVuIGRhdGEgaGFzIGJlZW4gc2VudCB0byB0aGUgc2VydmVyLiBUaGlzXG4gICAgICogZGF0YSBtYXkgbm90IGhhdmUgYmVlbiBhY2NlcHRlZCBieSB0aGUgc2VydmVyIHlldC5cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGJ5dGVzU2VudCAgTnVtYmVyIG9mIGJ5dGVzIHNlbnQgdG8gdGhlIHNlcnZlci5cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGJ5dGVzVG90YWwgVG90YWwgbnVtYmVyIG9mIGJ5dGVzIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlci5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIl9lbWl0UHJvZ3Jlc3NcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2VtaXRQcm9ncmVzcyhieXRlc1NlbnQsIGJ5dGVzVG90YWwpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uUHJvZ3Jlc3MgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aGlzLm9wdGlvbnMub25Qcm9ncmVzcyhieXRlc1NlbnQsIGJ5dGVzVG90YWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFB1Ymxpc2hlcyBub3RpZmljYXRpb24gd2hlbiBhIGNodW5rIG9mIGRhdGEgaGFzIGJlZW4gc2VudCB0byB0aGUgc2VydmVyXG4gICAgICogYW5kIGFjY2VwdGVkIGJ5IHRoZSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBjaHVua1NpemUgIFNpemUgb2YgdGhlIGNodW5rIHRoYXQgd2FzIGFjY2VwdGVkIGJ5IHRoZVxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIuXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBieXRlc0FjY2VwdGVkIFRvdGFsIG51bWJlciBvZiBieXRlcyB0aGF0IGhhdmUgYmVlblxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHRlZCBieSB0aGUgc2VydmVyLlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gYnl0ZXNUb3RhbCBUb3RhbCBudW1iZXIgb2YgYnl0ZXMgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiX2VtaXRDaHVua0NvbXBsZXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9lbWl0Q2h1bmtDb21wbGV0ZShjaHVua1NpemUsIGJ5dGVzQWNjZXB0ZWQsIGJ5dGVzVG90YWwpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2h1bmtDb21wbGV0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5vbkNodW5rQ29tcGxldGUoY2h1bmtTaXplLCBieXRlc0FjY2VwdGVkLCBieXRlc1RvdGFsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGhlYWRlcnMgdXNlZCBpbiB0aGUgcmVxdWVzdCBhbmQgdGhlIHdpdGhDcmVkZW50aWFscyBwcm9wZXJ0eVxuICAgICAqIGFzIGRlZmluZWQgaW4gdGhlIG9wdGlvbnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WE1MSHR0cFJlcXVlc3R9IHhoclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiX3NldHVwWEhSXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cFhIUih4aHIpIHtcbiAgICAgIHRoaXMuX3hociA9IHhocjtcblxuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJUdXMtUmVzdW1hYmxlXCIsIFwiMS4wLjBcIik7XG4gICAgICB2YXIgaGVhZGVycyA9IHRoaXMub3B0aW9ucy5oZWFkZXJzO1xuXG4gICAgICBmb3IgKHZhciBuYW1lIGluIGhlYWRlcnMpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgaGVhZGVyc1tuYW1lXSk7XG4gICAgICB9XG5cbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0aGlzLm9wdGlvbnMud2l0aENyZWRlbnRpYWxzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyB1cGxvYWQgdXNpbmcgdGhlIGNyZWF0aW9uIGV4dGVuc2lvbiBieSBzZW5kaW5nIGEgUE9TVFxuICAgICAqIHJlcXVlc3QgdG8gdGhlIGVuZHBvaW50LiBBZnRlciBzdWNjZXNzZnVsIGNyZWF0aW9uIHRoZSBmaWxlIHdpbGwgYmVcbiAgICAgKiB1cGxvYWRlZFxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJfY3JlYXRlVXBsb2FkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVVcGxvYWQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZW5kcG9pbnQpIHtcbiAgICAgICAgdGhpcy5fZW1pdEVycm9yKG5ldyBFcnJvcihcInR1czogdW5hYmxlIHRvIGNyZWF0ZSB1cGxvYWQgYmVjYXVzZSBubyBlbmRwb2ludCBpcyBwcm92aWRlZFwiKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHhociA9ICgwLCBfcmVxdWVzdC5uZXdSZXF1ZXN0KSgpO1xuICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIHRoaXMub3B0aW9ucy5lbmRwb2ludCwgdHJ1ZSk7XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaW5TdGF0dXNDYXRlZ29yeSh4aHIuc3RhdHVzLCAyMDApKSB7XG4gICAgICAgICAgX3RoaXMyLl9lbWl0WGhyRXJyb3IoeGhyLCBuZXcgRXJyb3IoXCJ0dXM6IHVuZXhwZWN0ZWQgcmVzcG9uc2Ugd2hpbGUgY3JlYXRpbmcgdXBsb2FkXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbG9jYXRpb24gPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMb2NhdGlvblwiKTtcbiAgICAgICAgaWYgKGxvY2F0aW9uID09IG51bGwpIHtcbiAgICAgICAgICBfdGhpczIuX2VtaXRYaHJFcnJvcih4aHIsIG5ldyBFcnJvcihcInR1czogaW52YWxpZCBvciBtaXNzaW5nIExvY2F0aW9uIGhlYWRlclwiKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnVybCA9ICgwLCBfcmVxdWVzdC5yZXNvbHZlVXJsKShfdGhpczIub3B0aW9ucy5lbmRwb2ludCwgbG9jYXRpb24pO1xuXG4gICAgICAgIGlmIChfdGhpczIuX3NpemUgPT09IDApIHtcbiAgICAgICAgICAvLyBOb3RoaW5nIHRvIHVwbG9hZCBhbmQgZmlsZSB3YXMgc3VjY2Vzc2Z1bGx5IGNyZWF0ZWRcbiAgICAgICAgICBfdGhpczIuX2VtaXRTdWNjZXNzKCk7XG4gICAgICAgICAgX3RoaXMyLl9zb3VyY2UuY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX3RoaXMyLm9wdGlvbnMucmVzdW1lKSB7XG4gICAgICAgICAgU3RvcmFnZS5zZXRJdGVtKF90aGlzMi5fZmluZ2VycHJpbnQsIF90aGlzMi51cmwpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLl9vZmZzZXQgPSAwO1xuICAgICAgICBfdGhpczIuX3N0YXJ0VXBsb2FkKCk7XG4gICAgICB9O1xuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgX3RoaXMyLl9lbWl0WGhyRXJyb3IoeGhyLCBuZXcgRXJyb3IoXCJ0dXM6IGZhaWxlZCB0byBjcmVhdGUgdXBsb2FkXCIpLCBlcnIpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fc2V0dXBYSFIoeGhyKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiVXBsb2FkLUxlbmd0aFwiLCB0aGlzLl9zaXplKTtcblxuICAgICAgLy8gQWRkIG1ldGFkYXRhIGlmIHZhbHVlcyBoYXZlIGJlZW4gYWRkZWRcbiAgICAgIHZhciBtZXRhZGF0YSA9IGVuY29kZU1ldGFkYXRhKHRoaXMub3B0aW9ucy5tZXRhZGF0YSk7XG4gICAgICBpZiAobWV0YWRhdGEgIT09IFwiXCIpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJVcGxvYWQtTWV0YWRhdGFcIiwgbWV0YWRhdGEpO1xuICAgICAgfVxuXG4gICAgICB4aHIuc2VuZChudWxsKTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFRyeSB0byByZXN1bWUgYW4gZXhpc3RpbmcgdXBsb2FkLiBGaXJzdCBhIEhFQUQgcmVxdWVzdCB3aWxsIGJlIHNlbnRcbiAgICAgKiB0byByZXRyaWV2ZSB0aGUgb2Zmc2V0LiBJZiB0aGUgcmVxdWVzdCBmYWlscyBhIG5ldyB1cGxvYWQgd2lsbCBiZVxuICAgICAqIGNyZWF0ZWQuIEluIHRoZSBjYXNlIG9mIGEgc3VjY2Vzc2Z1bCByZXNwb25zZSB0aGUgZmlsZSB3aWxsIGJlIHVwbG9hZGVkLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJfcmVzdW1lVXBsb2FkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXN1bWVVcGxvYWQoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHhociA9ICgwLCBfcmVxdWVzdC5uZXdSZXF1ZXN0KSgpO1xuICAgICAgeGhyLm9wZW4oXCJIRUFEXCIsIHRoaXMudXJsLCB0cnVlKTtcblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFpblN0YXR1c0NhdGVnb3J5KHhoci5zdGF0dXMsIDIwMCkpIHtcbiAgICAgICAgICBpZiAoX3RoaXMzLm9wdGlvbnMucmVzdW1lICYmIGluU3RhdHVzQ2F0ZWdvcnkoeGhyLnN0YXR1cywgNDAwKSkge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHN0b3JlZCBmaW5nZXJwcmludCBhbmQgY29ycmVzcG9uZGluZyBlbmRwb2ludCxcbiAgICAgICAgICAgIC8vIG9uIGNsaWVudCBlcnJvcnMgc2luY2UgdGhlIGZpbGUgY2FuIG5vdCBiZSBmb3VuZFxuICAgICAgICAgICAgU3RvcmFnZS5yZW1vdmVJdGVtKF90aGlzMy5fZmluZ2VycHJpbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIHRoZSB1cGxvYWQgaXMgbG9ja2VkIChpbmRpY2F0ZWQgYnkgdGhlIDQyMyBMb2NrZWQgc3RhdHVzIGNvZGUpLCB3ZVxuICAgICAgICAgIC8vIGVtaXQgYW4gZXJyb3IgaW5zdGVhZCBvZiBkaXJlY3RseSBzdGFydGluZyBhIG5ldyB1cGxvYWQuIFRoaXMgd2F5IHRoZVxuICAgICAgICAgIC8vIHJldHJ5IGxvZ2ljIGNhbiBjYXRjaCB0aGUgZXJyb3IgYW5kIHdpbGwgcmV0cnkgdGhlIHVwbG9hZC4gQW4gdXBsb2FkXG4gICAgICAgICAgLy8gaXMgdXN1YWxseSBsb2NrZWQgZm9yIGEgc2hvcnQgcGVyaW9kIG9mIHRpbWUgYW5kIHdpbGwgYmUgYXZhaWxhYmxlXG4gICAgICAgICAgLy8gYWZ0ZXJ3YXJkcy5cbiAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gNDIzKSB7XG4gICAgICAgICAgICBfdGhpczMuX2VtaXRYaHJFcnJvcih4aHIsIG5ldyBFcnJvcihcInR1czogdXBsb2FkIGlzIGN1cnJlbnRseSBsb2NrZWQ7IHJldHJ5IGxhdGVyXCIpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIV90aGlzMy5vcHRpb25zLmVuZHBvaW50KSB7XG4gICAgICAgICAgICAvLyBEb24ndCBhdHRlbXB0IHRvIGNyZWF0ZSBhIG5ldyB1cGxvYWQgaWYgbm8gZW5kcG9pbnQgaXMgcHJvdmlkZWQuXG4gICAgICAgICAgICBfdGhpczMuX2VtaXRYaHJFcnJvcih4aHIsIG5ldyBFcnJvcihcInR1czogdW5hYmxlIHRvIHJlc3VtZSB1cGxvYWQgKG5ldyB1cGxvYWQgY2Fubm90IGJlIGNyZWF0ZWQgd2l0aG91dCBhbiBlbmRwb2ludClcIikpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRyeSB0byBjcmVhdGUgYSBuZXcgdXBsb2FkXG4gICAgICAgICAgX3RoaXMzLnVybCA9IG51bGw7XG4gICAgICAgICAgX3RoaXMzLl9jcmVhdGVVcGxvYWQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQoeGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiVXBsb2FkLU9mZnNldFwiKSwgMTApO1xuICAgICAgICBpZiAoaXNOYU4ob2Zmc2V0KSkge1xuICAgICAgICAgIF90aGlzMy5fZW1pdFhockVycm9yKHhociwgbmV3IEVycm9yKFwidHVzOiBpbnZhbGlkIG9yIG1pc3Npbmcgb2Zmc2V0IHZhbHVlXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbGVuZ3RoID0gcGFyc2VJbnQoeGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiVXBsb2FkLUxlbmd0aFwiKSwgMTApO1xuICAgICAgICBpZiAoaXNOYU4obGVuZ3RoKSkge1xuICAgICAgICAgIF90aGlzMy5fZW1pdFhockVycm9yKHhociwgbmV3IEVycm9yKFwidHVzOiBpbnZhbGlkIG9yIG1pc3NpbmcgbGVuZ3RoIHZhbHVlXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGxvYWQgaGFzIGFscmVhZHkgYmVlbiBjb21wbGV0ZWQgYW5kIHdlIGRvIG5vdCBuZWVkIHRvIHNlbmQgYWRkaXRpb25hbFxuICAgICAgICAvLyBkYXRhIHRvIHRoZSBzZXJ2ZXJcbiAgICAgICAgaWYgKG9mZnNldCA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgX3RoaXMzLl9lbWl0UHJvZ3Jlc3MobGVuZ3RoLCBsZW5ndGgpO1xuICAgICAgICAgIF90aGlzMy5fZW1pdFN1Y2Nlc3MoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczMuX29mZnNldCA9IG9mZnNldDtcbiAgICAgICAgX3RoaXMzLl9zdGFydFVwbG9hZCgpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIF90aGlzMy5fZW1pdFhockVycm9yKHhociwgbmV3IEVycm9yKFwidHVzOiBmYWlsZWQgdG8gcmVzdW1lIHVwbG9hZFwiKSwgZXJyKTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX3NldHVwWEhSKHhocik7XG4gICAgICB4aHIuc2VuZChudWxsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFydCB1cGxvYWRpbmcgdGhlIGZpbGUgdXNpbmcgUEFUQ0ggcmVxdWVzdHMuIFRoZSBmaWxlIHdpbGwgYmUgZGl2aWRlZFxuICAgICAqIGludG8gY2h1bmtzIGFzIHNwZWNpZmllZCBpbiB0aGUgY2h1bmtTaXplIG9wdGlvbi4gRHVyaW5nIHRoZSB1cGxvYWRcbiAgICAgKiB0aGUgb25Qcm9ncmVzcyBldmVudCBoYW5kbGVyIG1heSBiZSBpbnZva2VkIG11bHRpcGxlIHRpbWVzLlxuICAgICAqXG4gICAgICogQGFwaSBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJfc3RhcnRVcGxvYWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3N0YXJ0VXBsb2FkKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSB1cGxvYWQgaGFzIGJlZW4gYWJvcnRlZCwgd2Ugd2lsbCBub3Qgc2VuZCB0aGUgbmV4dCBQQVRDSCByZXF1ZXN0LlxuICAgICAgLy8gVGhpcyBpcyBpbXBvcnRhbnQgaWYgdGhlIGFib3J0IG1ldGhvZCB3YXMgY2FsbGVkIGR1cmluZyBhIGNhbGxiYWNrLCBzdWNoXG4gICAgICAvLyBhcyBvbkNodW5rQ29tcGxldGUgb3Igb25Qcm9ncmVzcy5cbiAgICAgIGlmICh0aGlzLl9hYm9ydGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHhociA9ICgwLCBfcmVxdWVzdC5uZXdSZXF1ZXN0KSgpO1xuXG4gICAgICAvLyBTb21lIGJyb3dzZXIgYW5kIHNlcnZlcnMgbWF5IG5vdCBzdXBwb3J0IHRoZSBQQVRDSCBtZXRob2QuIEZvciB0aG9zZVxuICAgICAgLy8gY2FzZXMsIHlvdSBjYW4gdGVsbCB0dXMtanMtY2xpZW50IHRvIHVzZSBhIFBPU1QgcmVxdWVzdCB3aXRoIHRoZVxuICAgICAgLy8gWC1IVFRQLU1ldGhvZC1PdmVycmlkZSBoZWFkZXIgZm9yIHNpbXVsYXRpbmcgYSBQQVRDSCByZXF1ZXN0LlxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5vdmVycmlkZVBhdGNoTWV0aG9kKSB7XG4gICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCB0aGlzLnVybCwgdHJ1ZSk7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1IVFRQLU1ldGhvZC1PdmVycmlkZVwiLCBcIlBBVENIXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeGhyLm9wZW4oXCJQQVRDSFwiLCB0aGlzLnVybCwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaW5TdGF0dXNDYXRlZ29yeSh4aHIuc3RhdHVzLCAyMDApKSB7XG4gICAgICAgICAgX3RoaXM0Ll9lbWl0WGhyRXJyb3IoeGhyLCBuZXcgRXJyb3IoXCJ0dXM6IHVuZXhwZWN0ZWQgcmVzcG9uc2Ugd2hpbGUgdXBsb2FkaW5nIGNodW5rXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQoeGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiVXBsb2FkLU9mZnNldFwiKSwgMTApO1xuICAgICAgICBpZiAoaXNOYU4ob2Zmc2V0KSkge1xuICAgICAgICAgIF90aGlzNC5fZW1pdFhockVycm9yKHhociwgbmV3IEVycm9yKFwidHVzOiBpbnZhbGlkIG9yIG1pc3Npbmcgb2Zmc2V0IHZhbHVlXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczQuX2VtaXRQcm9ncmVzcyhvZmZzZXQsIF90aGlzNC5fc2l6ZSk7XG4gICAgICAgIF90aGlzNC5fZW1pdENodW5rQ29tcGxldGUob2Zmc2V0IC0gX3RoaXM0Ll9vZmZzZXQsIG9mZnNldCwgX3RoaXM0Ll9zaXplKTtcblxuICAgICAgICBfdGhpczQuX29mZnNldCA9IG9mZnNldDtcblxuICAgICAgICBpZiAob2Zmc2V0ID09IF90aGlzNC5fc2l6ZSkge1xuICAgICAgICAgIGlmIChfdGhpczQub3B0aW9ucy5yZW1vdmVGaW5nZXJwcmludE9uU3VjY2VzcyAmJiBfdGhpczQub3B0aW9ucy5yZXN1bWUpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBzdG9yZWQgZmluZ2VycHJpbnQgYW5kIGNvcnJlc3BvbmRpbmcgZW5kcG9pbnQuIFRoaXMgY2F1c2VzXG4gICAgICAgICAgICAvLyBuZXcgdXBsb2FkIG9mIHRoZSBzYW1lIGZpbGUgbXVzdCBiZSB0cmVhdGVkIGFzIGEgZGlmZmVyZW50IGZpbGUuXG4gICAgICAgICAgICBTdG9yYWdlLnJlbW92ZUl0ZW0oX3RoaXM0Ll9maW5nZXJwcmludCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gWWF5LCBmaW5hbGx5IGRvbmUgOilcbiAgICAgICAgICBfdGhpczQuX2VtaXRTdWNjZXNzKCk7XG4gICAgICAgICAgX3RoaXM0Ll9zb3VyY2UuY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczQuX3N0YXJ0VXBsb2FkKCk7XG4gICAgICB9O1xuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgLy8gRG9uJ3QgZW1pdCBhbiBlcnJvciBpZiB0aGUgdXBsb2FkIHdhcyBhYm9ydGVkIG1hbnVhbGx5XG4gICAgICAgIGlmIChfdGhpczQuX2Fib3J0ZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczQuX2VtaXRYaHJFcnJvcih4aHIsIG5ldyBFcnJvcihcInR1czogZmFpbGVkIHRvIHVwbG9hZCBjaHVuayBhdCBvZmZzZXQgXCIgKyBfdGhpczQuX29mZnNldCksIGVycik7XG4gICAgICB9O1xuXG4gICAgICAvLyBUZXN0IHN1cHBvcnQgZm9yIHByb2dyZXNzIGV2ZW50cyBiZWZvcmUgYXR0YWNoaW5nIGFuIGV2ZW50IGxpc3RlbmVyXG4gICAgICBpZiAoXCJ1cGxvYWRcIiBpbiB4aHIpIHtcbiAgICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAoIWUubGVuZ3RoQ29tcHV0YWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzNC5fZW1pdFByb2dyZXNzKHN0YXJ0ICsgZS5sb2FkZWQsIF90aGlzNC5fc2l6ZSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3NldHVwWEhSKHhocik7XG5cbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiVXBsb2FkLU9mZnNldFwiLCB0aGlzLl9vZmZzZXQpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9vZmZzZXQrb2N0ZXQtc3RyZWFtXCIpO1xuXG4gICAgICB2YXIgc3RhcnQgPSB0aGlzLl9vZmZzZXQ7XG4gICAgICB2YXIgZW5kID0gdGhpcy5fb2Zmc2V0ICsgdGhpcy5vcHRpb25zLmNodW5rU2l6ZTtcblxuICAgICAgLy8gVGhlIHNwZWNpZmllZCBjaHVua1NpemUgbWF5IGJlIEluZmluaXR5IG9yIHRoZSBjYWxjbHVhdGVkIGVuZCBwb3NpdGlvblxuICAgICAgLy8gbWF5IGV4Y2VlZCB0aGUgZmlsZSdzIHNpemUuIEluIGJvdGggY2FzZXMsIHdlIGxpbWl0IHRoZSBlbmQgcG9zaXRpb24gdG9cbiAgICAgIC8vIHRoZSBpbnB1dCdzIHRvdGFsIHNpemUgZm9yIHNpbXBsZXIgY2FsY3VsYXRpb25zIGFuZCBjb3JyZWN0bmVzcy5cbiAgICAgIGlmIChlbmQgPT09IEluZmluaXR5IHx8IGVuZCA+IHRoaXMuX3NpemUpIHtcbiAgICAgICAgZW5kID0gdGhpcy5fc2l6ZTtcbiAgICAgIH1cblxuICAgICAgeGhyLnNlbmQodGhpcy5fc291cmNlLnNsaWNlKHN0YXJ0LCBlbmQpKTtcblxuICAgICAgLy8gRW1pdCBhbiBwcm9ncmVzcyBldmVudCB3aGVuIGEgbmV3IGNodW5rIGJlZ2lucyBiZWluZyB1cGxvYWRlZC5cbiAgICAgIHRoaXMuX2VtaXRQcm9ncmVzcyh0aGlzLl9vZmZzZXQsIHRoaXMuX3NpemUpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBVcGxvYWQ7XG59KCk7XG5cbmZ1bmN0aW9uIGVuY29kZU1ldGFkYXRhKG1ldGFkYXRhKSB7XG4gIGlmICghQmFzZTY0LmlzU3VwcG9ydGVkKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICB2YXIgZW5jb2RlZCA9IFtdO1xuXG4gIGZvciAodmFyIGtleSBpbiBtZXRhZGF0YSkge1xuICAgIGVuY29kZWQucHVzaChrZXkgKyBcIiBcIiArIEJhc2U2NC5lbmNvZGUobWV0YWRhdGFba2V5XSkpO1xuICB9XG5cbiAgcmV0dXJuIGVuY29kZWQuam9pbihcIixcIik7XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYSBnaXZlbiBzdGF0dXMgaXMgaW4gdGhlIHJhbmdlIG9mIHRoZSBleHBlY3RlZCBjYXRlZ29yeS5cbiAqIEZvciBleGFtcGxlLCBvbmx5IGEgc3RhdHVzIGJldHdlZW4gMjAwIGFuZCAyOTkgd2lsbCBzYXRpc2Z5IHRoZSBjYXRlZ29yeSAyMDAuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGluU3RhdHVzQ2F0ZWdvcnkoc3RhdHVzLCBjYXRlZ29yeSkge1xuICByZXR1cm4gc3RhdHVzID49IGNhdGVnb3J5ICYmIHN0YXR1cyA8IGNhdGVnb3J5ICsgMTAwO1xufVxuXG5VcGxvYWQuZGVmYXVsdE9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucztcblxuZXhwb3J0cy5kZWZhdWx0ID0gVXBsb2FkOyIsIi8qIGpzaGludCBub2RlOiB0cnVlICovXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICAjIHdpbGRjYXJkXG5cbiAgVmVyeSBzaW1wbGUgd2lsZGNhcmQgbWF0Y2hpbmcsIHdoaWNoIGlzIGRlc2lnbmVkIHRvIHByb3ZpZGUgdGhlIHNhbWVcbiAgZnVuY3Rpb25hbGl0eSB0aGF0IGlzIGZvdW5kIGluIHRoZVxuICBbZXZlXShodHRwczovL2dpdGh1Yi5jb20vYWRvYmUtd2VicGxhdGZvcm0vZXZlKSBldmVudGluZyBsaWJyYXJ5LlxuXG4gICMjIFVzYWdlXG5cbiAgSXQgd29ya3Mgd2l0aCBzdHJpbmdzOlxuXG4gIDw8PCBleGFtcGxlcy9zdHJpbmdzLmpzXG5cbiAgQXJyYXlzOlxuXG4gIDw8PCBleGFtcGxlcy9hcnJheXMuanNcblxuICBPYmplY3RzIChtYXRjaGluZyBhZ2FpbnN0IGtleXMpOlxuXG4gIDw8PCBleGFtcGxlcy9vYmplY3RzLmpzXG5cbiAgV2hpbGUgdGhlIGxpYnJhcnkgd29ya3MgaW4gTm9kZSwgaWYgeW91IGFyZSBhcmUgbG9va2luZyBmb3IgZmlsZS1iYXNlZFxuICB3aWxkY2FyZCBtYXRjaGluZyB0aGVuIHlvdSBzaG91bGQgaGF2ZSBhIGxvb2sgYXQ6XG5cbiAgPGh0dHBzOi8vZ2l0aHViLmNvbS9pc2FhY3Mvbm9kZS1nbG9iPlxuKiovXG5cbmZ1bmN0aW9uIFdpbGRjYXJkTWF0Y2hlcih0ZXh0LCBzZXBhcmF0b3IpIHtcbiAgdGhpcy50ZXh0ID0gdGV4dCA9IHRleHQgfHwgJyc7XG4gIHRoaXMuaGFzV2lsZCA9IH50ZXh0LmluZGV4T2YoJyonKTtcbiAgdGhpcy5zZXBhcmF0b3IgPSBzZXBhcmF0b3I7XG4gIHRoaXMucGFydHMgPSB0ZXh0LnNwbGl0KHNlcGFyYXRvcik7XG59XG5cbldpbGRjYXJkTWF0Y2hlci5wcm90b3R5cGUubWF0Y2ggPSBmdW5jdGlvbihpbnB1dCkge1xuICB2YXIgbWF0Y2hlcyA9IHRydWU7XG4gIHZhciBwYXJ0cyA9IHRoaXMucGFydHM7XG4gIHZhciBpaTtcbiAgdmFyIHBhcnRzQ291bnQgPSBwYXJ0cy5sZW5ndGg7XG4gIHZhciB0ZXN0UGFydHM7XG5cbiAgaWYgKHR5cGVvZiBpbnB1dCA9PSAnc3RyaW5nJyB8fCBpbnB1dCBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgIGlmICghdGhpcy5oYXNXaWxkICYmIHRoaXMudGV4dCAhPSBpbnB1dCkge1xuICAgICAgbWF0Y2hlcyA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZXN0UGFydHMgPSAoaW5wdXQgfHwgJycpLnNwbGl0KHRoaXMuc2VwYXJhdG9yKTtcbiAgICAgIGZvciAoaWkgPSAwOyBtYXRjaGVzICYmIGlpIDwgcGFydHNDb3VudDsgaWkrKykge1xuICAgICAgICBpZiAocGFydHNbaWldID09PSAnKicpICB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSBpZiAoaWkgPCB0ZXN0UGFydHMubGVuZ3RoKSB7XG4gICAgICAgICAgbWF0Y2hlcyA9IHBhcnRzW2lpXSA9PT0gdGVzdFBhcnRzW2lpXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXRjaGVzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbWF0Y2hlcywgdGhlbiByZXR1cm4gdGhlIGNvbXBvbmVudCBwYXJ0c1xuICAgICAgbWF0Y2hlcyA9IG1hdGNoZXMgJiYgdGVzdFBhcnRzO1xuICAgIH1cbiAgfVxuICBlbHNlIGlmICh0eXBlb2YgaW5wdXQuc3BsaWNlID09ICdmdW5jdGlvbicpIHtcbiAgICBtYXRjaGVzID0gW107XG5cbiAgICBmb3IgKGlpID0gaW5wdXQubGVuZ3RoOyBpaS0tOyApIHtcbiAgICAgIGlmICh0aGlzLm1hdGNoKGlucHV0W2lpXSkpIHtcbiAgICAgICAgbWF0Y2hlc1ttYXRjaGVzLmxlbmd0aF0gPSBpbnB1dFtpaV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PSAnb2JqZWN0Jykge1xuICAgIG1hdGNoZXMgPSB7fTtcblxuICAgIGZvciAodmFyIGtleSBpbiBpbnB1dCkge1xuICAgICAgaWYgKHRoaXMubWF0Y2goa2V5KSkge1xuICAgICAgICBtYXRjaGVzW2tleV0gPSBpbnB1dFtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtYXRjaGVzO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0ZXh0LCB0ZXN0LCBzZXBhcmF0b3IpIHtcbiAgdmFyIG1hdGNoZXIgPSBuZXcgV2lsZGNhcmRNYXRjaGVyKHRleHQsIHNlcGFyYXRvciB8fCAvW1xcL1xcLl0vKTtcbiAgaWYgKHR5cGVvZiB0ZXN0ICE9ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIG1hdGNoZXIubWF0Y2godGVzdCk7XG4gIH1cblxuICByZXR1cm4gbWF0Y2hlcjtcbn07XG4iLCJ2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBwcmVhY3QgPSByZXF1aXJlKCdwcmVhY3QnKTtcbnZhciBmaW5kRE9NRWxlbWVudCA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi9maW5kRE9NRWxlbWVudCcpO1xuXG4vKipcbiAqIERlZmVyIGEgZnJlcXVlbnQgY2FsbCB0byB0aGUgbWljcm90YXNrIHF1ZXVlLlxuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmbikge1xuICB2YXIgY2FsbGluZyA9IG51bGw7XG4gIHZhciBsYXRlc3RBcmdzID0gbnVsbDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBsYXRlc3RBcmdzID0gYXJncztcbiAgICBpZiAoIWNhbGxpbmcpIHtcbiAgICAgIGNhbGxpbmcgPSBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbGluZyA9IG51bGw7XG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgYGFyZ3NgIG1heSBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgbW9zdFxuICAgICAgICAvLyByZWNlbnQgc3RhdGUsIGlmIG11bHRpcGxlIGNhbGxzIGhhcHBlbmVkIHNpbmNlIHRoaXMgdGFza1xuICAgICAgICAvLyB3YXMgcXVldWVkLiBTbyB3ZSB1c2UgdGhlIGBsYXRlc3RBcmdzYCwgd2hpY2ggZGVmaW5pdGVseVxuICAgICAgICAvLyBpcyB0aGUgbW9zdCByZWNlbnQgY2FsbC5cbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHVuZGVmaW5lZCwgbGF0ZXN0QXJncyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbGxpbmc7XG4gIH07XG59XG5cbi8qKlxuICogQm9pbGVycGxhdGUgdGhhdCBhbGwgUGx1Z2lucyBzaGFyZSAtIGFuZCBzaG91bGQgbm90IGJlIHVzZWRcbiAqIGRpcmVjdGx5LiBJdCBhbHNvIHNob3dzIHdoaWNoIG1ldGhvZHMgZmluYWwgcGx1Z2lucyBzaG91bGQgaW1wbGVtZW50L292ZXJyaWRlLFxuICogdGhpcyBkZWNpZGluZyBvbiBzdHJ1Y3R1cmUuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG1haW4gVXBweSBjb3JlIG9iamVjdFxuICogQHBhcmFtIHtvYmplY3R9IG9iamVjdCB3aXRoIHBsdWdpbiBvcHRpb25zXG4gKiBAcmV0dXJuIHthcnJheSB8IHN0cmluZ30gZmlsZXMgb3Igc3VjY2Vzcy9mYWlsIG1lc3NhZ2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFBsdWdpbih1cHB5LCBvcHRzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBsdWdpbik7XG5cbiAgICB0aGlzLnVwcHkgPSB1cHB5O1xuICAgIHRoaXMub3B0cyA9IG9wdHMgfHwge307XG5cbiAgICB0aGlzLnVwZGF0ZSA9IHRoaXMudXBkYXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5tb3VudCA9IHRoaXMubW91bnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmluc3RhbGwgPSB0aGlzLmluc3RhbGwuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVuaW5zdGFsbCA9IHRoaXMudW5pbnN0YWxsLmJpbmQodGhpcyk7XG4gIH1cblxuICBQbHVnaW4ucHJvdG90eXBlLmdldFBsdWdpblN0YXRlID0gZnVuY3Rpb24gZ2V0UGx1Z2luU3RhdGUoKSB7XG4gICAgdmFyIF91cHB5JGdldFN0YXRlID0gdGhpcy51cHB5LmdldFN0YXRlKCksXG4gICAgICAgIHBsdWdpbnMgPSBfdXBweSRnZXRTdGF0ZS5wbHVnaW5zO1xuXG4gICAgcmV0dXJuIHBsdWdpbnNbdGhpcy5pZF07XG4gIH07XG5cbiAgUGx1Z2luLnByb3RvdHlwZS5zZXRQbHVnaW5TdGF0ZSA9IGZ1bmN0aW9uIHNldFBsdWdpblN0YXRlKHVwZGF0ZSkge1xuICAgIHZhciBwbHVnaW5zID0gX2V4dGVuZHMoe30sIHRoaXMudXBweS5nZXRTdGF0ZSgpLnBsdWdpbnMpO1xuICAgIHBsdWdpbnNbdGhpcy5pZF0gPSBfZXh0ZW5kcyh7fSwgcGx1Z2luc1t0aGlzLmlkXSwgdXBkYXRlKTtcblxuICAgIHRoaXMudXBweS5zZXRTdGF0ZSh7XG4gICAgICBwbHVnaW5zOiBwbHVnaW5zXG4gICAgfSk7XG4gIH07XG5cbiAgUGx1Z2luLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoc3RhdGUpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3VwZGF0ZVVJKSB7XG4gICAgICB0aGlzLl91cGRhdGVVSShzdGF0ZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBzdXBwbGllZCBgdGFyZ2V0YCBpcyBhIERPTSBlbGVtZW50IG9yIGFuIGBvYmplY3RgLlxuICAgKiBJZiBpdOKAmXMgYW4gb2JqZWN0IOKAlCB0YXJnZXQgaXMgYSBwbHVnaW4sIGFuZCB3ZSBzZWFyY2ggYHBsdWdpbnNgXG4gICAqIGZvciBhIHBsdWdpbiB3aXRoIHNhbWUgbmFtZSBhbmQgcmV0dXJuIGl0cyB0YXJnZXQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gdGFyZ2V0XG4gICAqXG4gICAqL1xuXG5cbiAgUGx1Z2luLnByb3RvdHlwZS5tb3VudCA9IGZ1bmN0aW9uIG1vdW50KHRhcmdldCwgcGx1Z2luKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBjYWxsZXJQbHVnaW5OYW1lID0gcGx1Z2luLmlkO1xuXG4gICAgdmFyIHRhcmdldEVsZW1lbnQgPSBmaW5kRE9NRWxlbWVudCh0YXJnZXQpO1xuXG4gICAgaWYgKHRhcmdldEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuaXNUYXJnZXRET01FbCA9IHRydWU7XG5cbiAgICAgIC8vIEFQSSBmb3IgcGx1Z2lucyB0aGF0IHJlcXVpcmUgYSBzeW5jaHJvbm91cyByZXJlbmRlci5cbiAgICAgIHRoaXMucmVyZW5kZXIgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgLy8gcGx1Z2luIGNvdWxkIGJlIHJlbW92ZWQsIGJ1dCB0aGlzLnJlcmVuZGVyIGlzIGRlYm91bmNlZCBiZWxvdyxcbiAgICAgICAgLy8gc28gaXQgY291bGQgc3RpbGwgYmUgY2FsbGVkIGV2ZW4gYWZ0ZXIgdXBweS5yZW1vdmVQbHVnaW4gb3IgdXBweS5jbG9zZVxuICAgICAgICAvLyBoZW5jZSB0aGUgY2hlY2tcbiAgICAgICAgaWYgKCFfdGhpcy51cHB5LmdldFBsdWdpbihfdGhpcy5pZCkpIHJldHVybjtcbiAgICAgICAgX3RoaXMuZWwgPSBwcmVhY3QucmVuZGVyKF90aGlzLnJlbmRlcihzdGF0ZSksIHRhcmdldEVsZW1lbnQsIF90aGlzLmVsKTtcbiAgICAgIH07XG4gICAgICB0aGlzLl91cGRhdGVVSSA9IGRlYm91bmNlKHRoaXMucmVyZW5kZXIpO1xuXG4gICAgICB0aGlzLnVwcHkubG9nKCdJbnN0YWxsaW5nICcgKyBjYWxsZXJQbHVnaW5OYW1lICsgJyB0byBhIERPTSBlbGVtZW50Jyk7XG5cbiAgICAgIC8vIGNsZWFyIGV2ZXJ5dGhpbmcgaW5zaWRlIHRoZSB0YXJnZXQgY29udGFpbmVyXG4gICAgICBpZiAodGhpcy5vcHRzLnJlcGxhY2VUYXJnZXRDb250ZW50KSB7XG4gICAgICAgIHRhcmdldEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZWwgPSBwcmVhY3QucmVuZGVyKHRoaXMucmVuZGVyKHRoaXMudXBweS5nZXRTdGF0ZSgpKSwgdGFyZ2V0RWxlbWVudCk7XG5cbiAgICAgIHJldHVybiB0aGlzLmVsO1xuICAgIH1cblxuICAgIHZhciB0YXJnZXRQbHVnaW4gPSB2b2lkIDA7XG4gICAgaWYgKCh0eXBlb2YgdGFyZ2V0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih0YXJnZXQpKSA9PT0gJ29iamVjdCcgJiYgdGFyZ2V0IGluc3RhbmNlb2YgUGx1Z2luKSB7XG4gICAgICAvLyBUYXJnZXRpbmcgYSBwbHVnaW4gKmluc3RhbmNlKlxuICAgICAgdGFyZ2V0UGx1Z2luID0gdGFyZ2V0O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gVGFyZ2V0aW5nIGEgcGx1Z2luIHR5cGVcbiAgICAgIHZhciBUYXJnZXQgPSB0YXJnZXQ7XG4gICAgICAvLyBGaW5kIHRoZSB0YXJnZXQgcGx1Z2luIGluc3RhbmNlLlxuICAgICAgdGhpcy51cHB5Lml0ZXJhdGVQbHVnaW5zKGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAgICAgaWYgKHBsdWdpbiBpbnN0YW5jZW9mIFRhcmdldCkge1xuICAgICAgICAgIHRhcmdldFBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0YXJnZXRQbHVnaW4pIHtcbiAgICAgIHZhciB0YXJnZXRQbHVnaW5OYW1lID0gdGFyZ2V0UGx1Z2luLmlkO1xuICAgICAgdGhpcy51cHB5LmxvZygnSW5zdGFsbGluZyAnICsgY2FsbGVyUGx1Z2luTmFtZSArICcgdG8gJyArIHRhcmdldFBsdWdpbk5hbWUpO1xuICAgICAgdGhpcy5lbCA9IHRhcmdldFBsdWdpbi5hZGRUYXJnZXQocGx1Z2luKTtcbiAgICAgIHJldHVybiB0aGlzLmVsO1xuICAgIH1cblxuICAgIHRoaXMudXBweS5sb2coJ05vdCBpbnN0YWxsaW5nICcgKyBjYWxsZXJQbHVnaW5OYW1lKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGFyZ2V0IG9wdGlvbiBnaXZlbiB0byAnICsgY2FsbGVyUGx1Z2luTmFtZSk7XG4gIH07XG5cbiAgUGx1Z2luLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoc3RhdGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4dGVuZCB0aGUgcmVuZGVyIG1ldGhvZCB0byBhZGQgeW91ciBwbHVnaW4gdG8gYSBET00gZWxlbWVudCcpO1xuICB9O1xuXG4gIFBsdWdpbi5wcm90b3R5cGUuYWRkVGFyZ2V0ID0gZnVuY3Rpb24gYWRkVGFyZ2V0KHBsdWdpbikge1xuICAgIHRocm93IG5ldyBFcnJvcignRXh0ZW5kIHRoZSBhZGRUYXJnZXQgbWV0aG9kIHRvIGFkZCB5b3VyIHBsdWdpbiB0byBhbm90aGVyIHBsdWdpblxcJ3MgdGFyZ2V0Jyk7XG4gIH07XG5cbiAgUGx1Z2luLnByb3RvdHlwZS51bm1vdW50ID0gZnVuY3Rpb24gdW5tb3VudCgpIHtcbiAgICBpZiAodGhpcy5pc1RhcmdldERPTUVsICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbCk7XG4gICAgfVxuICB9O1xuXG4gIFBsdWdpbi5wcm90b3R5cGUuaW5zdGFsbCA9IGZ1bmN0aW9uIGluc3RhbGwoKSB7fTtcblxuICBQbHVnaW4ucHJvdG90eXBlLnVuaW5zdGFsbCA9IGZ1bmN0aW9uIHVuaW5zdGFsbCgpIHtcbiAgICB0aGlzLnVubW91bnQoKTtcbiAgfTtcblxuICByZXR1cm4gUGx1Z2luO1xufSgpOyIsInZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFRyYW5zbGF0b3IgPSByZXF1aXJlKCdAdXBweS91dGlscy9saWIvVHJhbnNsYXRvcicpO1xudmFyIGVlID0gcmVxdWlyZSgnbmFtZXNwYWNlLWVtaXR0ZXInKTtcbnZhciBjdWlkID0gcmVxdWlyZSgnY3VpZCcpO1xuLy8gY29uc3QgdGhyb3R0bGUgPSByZXF1aXJlKCdsb2Rhc2gudGhyb3R0bGUnKVxudmFyIHByZXR0eUJ5dGVzID0gcmVxdWlyZSgncHJldHRpZXItYnl0ZXMnKTtcbnZhciBtYXRjaCA9IHJlcXVpcmUoJ21pbWUtbWF0Y2gnKTtcbnZhciBEZWZhdWx0U3RvcmUgPSByZXF1aXJlKCdAdXBweS9zdG9yZS1kZWZhdWx0Jyk7XG52YXIgZ2V0RmlsZVR5cGUgPSByZXF1aXJlKCdAdXBweS91dGlscy9saWIvZ2V0RmlsZVR5cGUnKTtcbnZhciBnZXRGaWxlTmFtZUFuZEV4dGVuc2lvbiA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi9nZXRGaWxlTmFtZUFuZEV4dGVuc2lvbicpO1xudmFyIGdlbmVyYXRlRmlsZUlEID0gcmVxdWlyZSgnQHVwcHkvdXRpbHMvbGliL2dlbmVyYXRlRmlsZUlEJyk7XG52YXIgaXNPYmplY3RVUkwgPSByZXF1aXJlKCdAdXBweS91dGlscy9saWIvaXNPYmplY3RVUkwnKTtcbnZhciBnZXRUaW1lU3RhbXAgPSByZXF1aXJlKCdAdXBweS91dGlscy9saWIvZ2V0VGltZVN0YW1wJyk7XG52YXIgUGx1Z2luID0gcmVxdWlyZSgnLi9QbHVnaW4nKTsgLy8gRXhwb3J0ZWQgZnJvbSBoZXJlLlxuXG4vKipcbiAqIFVwcHkgQ29yZSBtb2R1bGUuXG4gKiBNYW5hZ2VzIHBsdWdpbnMsIHN0YXRlIHVwZGF0ZXMsIGFjdHMgYXMgYW4gZXZlbnQgYnVzLFxuICogYWRkcy9yZW1vdmVzIGZpbGVzIGFuZCBtZXRhZGF0YS5cbiAqL1xuXG52YXIgVXBweSA9IGZ1bmN0aW9uICgpIHtcbiAgLyoqXG4gICogSW5zdGFudGlhdGUgVXBweVxuICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRzIOKAlCBVcHB5IG9wdGlvbnNcbiAgKi9cbiAgZnVuY3Rpb24gVXBweShvcHRzKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVcHB5KTtcblxuICAgIHZhciBkZWZhdWx0TG9jYWxlID0ge1xuICAgICAgc3RyaW5nczoge1xuICAgICAgICB5b3VDYW5Pbmx5VXBsb2FkWDoge1xuICAgICAgICAgIDA6ICdZb3UgY2FuIG9ubHkgdXBsb2FkICV7c21hcnRfY291bnR9IGZpbGUnLFxuICAgICAgICAgIDE6ICdZb3UgY2FuIG9ubHkgdXBsb2FkICV7c21hcnRfY291bnR9IGZpbGVzJ1xuICAgICAgICB9LFxuICAgICAgICB5b3VIYXZlVG9BdExlYXN0U2VsZWN0WDoge1xuICAgICAgICAgIDA6ICdZb3UgaGF2ZSB0byBzZWxlY3QgYXQgbGVhc3QgJXtzbWFydF9jb3VudH0gZmlsZScsXG4gICAgICAgICAgMTogJ1lvdSBoYXZlIHRvIHNlbGVjdCBhdCBsZWFzdCAle3NtYXJ0X2NvdW50fSBmaWxlcydcbiAgICAgICAgfSxcbiAgICAgICAgZXhjZWVkc1NpemU6ICdUaGlzIGZpbGUgZXhjZWVkcyBtYXhpbXVtIGFsbG93ZWQgc2l6ZSBvZicsXG4gICAgICAgIHlvdUNhbk9ubHlVcGxvYWRGaWxlVHlwZXM6ICdZb3UgY2FuIG9ubHkgdXBsb2FkOicsXG4gICAgICAgIHVwcHlTZXJ2ZXJFcnJvcjogJ0Nvbm5lY3Rpb24gd2l0aCBVcHB5IFNlcnZlciBmYWlsZWQnLFxuICAgICAgICBmYWlsZWRUb1VwbG9hZDogJ0ZhaWxlZCB0byB1cGxvYWQgJXtmaWxlfScsXG4gICAgICAgIG5vSW50ZXJuZXRDb25uZWN0aW9uOiAnTm8gSW50ZXJuZXQgY29ubmVjdGlvbicsXG4gICAgICAgIGNvbm5lY3RlZFRvSW50ZXJuZXQ6ICdDb25uZWN0ZWQgdG8gdGhlIEludGVybmV0JyxcbiAgICAgICAgLy8gU3RyaW5ncyBmb3IgcmVtb3RlIHByb3ZpZGVyc1xuICAgICAgICBub0ZpbGVzRm91bmQ6ICdZb3UgaGF2ZSBubyBmaWxlcyBvciBmb2xkZXJzIGhlcmUnLFxuICAgICAgICBzZWxlY3RYRmlsZXM6IHtcbiAgICAgICAgICAwOiAnU2VsZWN0ICV7c21hcnRfY291bnR9IGZpbGUnLFxuICAgICAgICAgIDE6ICdTZWxlY3QgJXtzbWFydF9jb3VudH0gZmlsZXMnXG4gICAgICAgIH0sXG4gICAgICAgIGNhbmNlbDogJ0NhbmNlbCcsXG4gICAgICAgIGxvZ091dDogJ0xvZyBvdXQnXG4gICAgICB9XG5cbiAgICAgIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgICB9O3ZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgIGlkOiAndXBweScsXG4gICAgICBhdXRvUHJvY2VlZDogdHJ1ZSxcbiAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgIHJlc3RyaWN0aW9uczoge1xuICAgICAgICBtYXhGaWxlU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4TnVtYmVyT2ZGaWxlczogbnVsbCxcbiAgICAgICAgbWluTnVtYmVyT2ZGaWxlczogbnVsbCxcbiAgICAgICAgYWxsb3dlZEZpbGVUeXBlczogbnVsbFxuICAgICAgfSxcbiAgICAgIG1ldGE6IHt9LFxuICAgICAgb25CZWZvcmVGaWxlQWRkZWQ6IGZ1bmN0aW9uIG9uQmVmb3JlRmlsZUFkZGVkKGN1cnJlbnRGaWxlLCBmaWxlcykge1xuICAgICAgICByZXR1cm4gY3VycmVudEZpbGU7XG4gICAgICB9LFxuICAgICAgb25CZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIG9uQmVmb3JlVXBsb2FkKGZpbGVzKSB7XG4gICAgICAgIHJldHVybiBmaWxlcztcbiAgICAgIH0sXG4gICAgICBsb2NhbGU6IGRlZmF1bHRMb2NhbGUsXG4gICAgICBzdG9yZTogRGVmYXVsdFN0b3JlKClcblxuICAgICAgLy8gTWVyZ2UgZGVmYXVsdCBvcHRpb25zIHdpdGggdGhlIG9uZXMgc2V0IGJ5IHVzZXJcbiAgICB9O3RoaXMub3B0cyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0cyk7XG4gICAgdGhpcy5vcHRzLnJlc3RyaWN0aW9ucyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucy5yZXN0cmljdGlvbnMsIHRoaXMub3B0cy5yZXN0cmljdGlvbnMpO1xuXG4gICAgdGhpcy5sb2NhbGUgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdExvY2FsZSwgdGhpcy5vcHRzLmxvY2FsZSk7XG4gICAgdGhpcy5sb2NhbGUuc3RyaW5ncyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0TG9jYWxlLnN0cmluZ3MsIHRoaXMub3B0cy5sb2NhbGUuc3RyaW5ncyk7XG5cbiAgICAvLyBpMThuXG4gICAgdGhpcy50cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3IoeyBsb2NhbGU6IHRoaXMubG9jYWxlIH0pO1xuICAgIHRoaXMuaTE4biA9IHRoaXMudHJhbnNsYXRvci50cmFuc2xhdGUuYmluZCh0aGlzLnRyYW5zbGF0b3IpO1xuXG4gICAgLy8gQ29udGFpbmVyIGZvciBkaWZmZXJlbnQgdHlwZXMgb2YgcGx1Z2luc1xuICAgIHRoaXMucGx1Z2lucyA9IHt9O1xuXG4gICAgdGhpcy5nZXRTdGF0ZSA9IHRoaXMuZ2V0U3RhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldFBsdWdpbiA9IHRoaXMuZ2V0UGx1Z2luLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRGaWxlTWV0YSA9IHRoaXMuc2V0RmlsZU1ldGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldEZpbGVTdGF0ZSA9IHRoaXMuc2V0RmlsZVN0YXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5sb2cgPSB0aGlzLmxvZy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaW5mbyA9IHRoaXMuaW5mby5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGlkZUluZm8gPSB0aGlzLmhpZGVJbmZvLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hZGRGaWxlID0gdGhpcy5hZGRGaWxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW1vdmVGaWxlID0gdGhpcy5yZW1vdmVGaWxlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5wYXVzZVJlc3VtZSA9IHRoaXMucGF1c2VSZXN1bWUuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9jYWxjdWxhdGVQcm9ncmVzcyA9IHRoaXMuX2NhbGN1bGF0ZVByb2dyZXNzLmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGVPbmxpbmVTdGF0dXMgPSB0aGlzLnVwZGF0ZU9ubGluZVN0YXR1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVzZXRQcm9ncmVzcyA9IHRoaXMucmVzZXRQcm9ncmVzcy5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5wYXVzZUFsbCA9IHRoaXMucGF1c2VBbGwuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlc3VtZUFsbCA9IHRoaXMucmVzdW1lQWxsLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZXRyeUFsbCA9IHRoaXMucmV0cnlBbGwuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNhbmNlbEFsbCA9IHRoaXMuY2FuY2VsQWxsLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZXRyeVVwbG9hZCA9IHRoaXMucmV0cnlVcGxvYWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwbG9hZCA9IHRoaXMudXBsb2FkLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmVtaXR0ZXIgPSBlZSgpO1xuICAgIHRoaXMub24gPSB0aGlzLm9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vZmYgPSB0aGlzLm9mZi5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25jZSA9IHRoaXMuZW1pdHRlci5vbmNlLmJpbmQodGhpcy5lbWl0dGVyKTtcbiAgICB0aGlzLmVtaXQgPSB0aGlzLmVtaXR0ZXIuZW1pdC5iaW5kKHRoaXMuZW1pdHRlcik7XG5cbiAgICB0aGlzLnByZVByb2Nlc3NvcnMgPSBbXTtcbiAgICB0aGlzLnVwbG9hZGVycyA9IFtdO1xuICAgIHRoaXMucG9zdFByb2Nlc3NvcnMgPSBbXTtcblxuICAgIHRoaXMuc3RvcmUgPSB0aGlzLm9wdHMuc3RvcmU7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBwbHVnaW5zOiB7fSxcbiAgICAgIGZpbGVzOiB7fSxcbiAgICAgIGN1cnJlbnRVcGxvYWRzOiB7fSxcbiAgICAgIGNhcGFiaWxpdGllczoge1xuICAgICAgICByZXN1bWFibGVVcGxvYWRzOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHRvdGFsUHJvZ3Jlc3M6IDAsXG4gICAgICBtZXRhOiBfZXh0ZW5kcyh7fSwgdGhpcy5vcHRzLm1ldGEpLFxuICAgICAgaW5mbzoge1xuICAgICAgICBpc0hpZGRlbjogdHJ1ZSxcbiAgICAgICAgdHlwZTogJ2luZm8nLFxuICAgICAgICBtZXNzYWdlOiAnJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5fc3RvcmVVbnN1YnNjcmliZSA9IHRoaXMuc3RvcmUuc3Vic2NyaWJlKGZ1bmN0aW9uIChwcmV2U3RhdGUsIG5leHRTdGF0ZSwgcGF0Y2gpIHtcbiAgICAgIF90aGlzLmVtaXQoJ3N0YXRlLXVwZGF0ZScsIHByZXZTdGF0ZSwgbmV4dFN0YXRlLCBwYXRjaCk7XG4gICAgICBfdGhpcy51cGRhdGVBbGwobmV4dFN0YXRlKTtcbiAgICB9KTtcblxuICAgIC8vIGZvciBkZWJ1Z2dpbmcgYW5kIHRlc3RpbmdcbiAgICAvLyB0aGlzLnVwZGF0ZU51bSA9IDBcbiAgICBpZiAodGhpcy5vcHRzLmRlYnVnICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3aW5kb3dbJ3VwcHlMb2cnXSA9ICcnO1xuICAgICAgd2luZG93W3RoaXMub3B0cy5pZF0gPSB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMuX2FkZExpc3RlbmVycygpO1xuICB9XG5cbiAgVXBweS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudCwgY2FsbGJhY2spIHtcbiAgICB0aGlzLmVtaXR0ZXIub24oZXZlbnQsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBVcHB5LnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiBvZmYoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5lbWl0dGVyLm9mZihldmVudCwgY2FsbGJhY2spO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJdGVyYXRlIG9uIGFsbCBwbHVnaW5zIGFuZCBydW4gYHVwZGF0ZWAgb24gdGhlbS5cbiAgICogQ2FsbGVkIGVhY2ggdGltZSBzdGF0ZSBjaGFuZ2VzLlxuICAgKlxuICAgKi9cblxuXG4gIFVwcHkucHJvdG90eXBlLnVwZGF0ZUFsbCA9IGZ1bmN0aW9uIHVwZGF0ZUFsbChzdGF0ZSkge1xuICAgIHRoaXMuaXRlcmF0ZVBsdWdpbnMoZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgcGx1Z2luLnVwZGF0ZShzdGF0ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgc3RhdGUgd2l0aCBhIHBhdGNoXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXRjaCB7Zm9vOiAnYmFyJ31cbiAgICovXG5cblxuICBVcHB5LnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKHBhdGNoKSB7XG4gICAgdGhpcy5zdG9yZS5zZXRTdGF0ZShwYXRjaCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgY3VycmVudCBzdGF0ZS5cbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKi9cblxuXG4gIFVwcHkucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKTtcbiAgfTtcblxuICAvKipcbiAgKiBCYWNrIGNvbXBhdCBmb3Igd2hlbiB1cHB5LnN0YXRlIGlzIHVzZWQgaW5zdGVhZCBvZiB1cHB5LmdldFN0YXRlKCkuXG4gICovXG5cblxuICAvKipcbiAgKiBTaG9ydGhhbmQgdG8gc2V0IHN0YXRlIGZvciBhIHNwZWNpZmljIGZpbGUuXG4gICovXG4gIFVwcHkucHJvdG90eXBlLnNldEZpbGVTdGF0ZSA9IGZ1bmN0aW9uIHNldEZpbGVTdGF0ZShmaWxlSUQsIHN0YXRlKSB7XG4gICAgdmFyIF9leHRlbmRzMjtcblxuICAgIGlmICghdGhpcy5nZXRTdGF0ZSgpLmZpbGVzW2ZpbGVJRF0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuXFx1MjAxOXQgc2V0IHN0YXRlIGZvciAnICsgZmlsZUlEICsgJyAodGhlIGZpbGUgY291bGQgaGF2ZSBiZWVuIHJlbW92ZWQpJyk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBmaWxlczogX2V4dGVuZHMoe30sIHRoaXMuZ2V0U3RhdGUoKS5maWxlcywgKF9leHRlbmRzMiA9IHt9LCBfZXh0ZW5kczJbZmlsZUlEXSA9IF9leHRlbmRzKHt9LCB0aGlzLmdldFN0YXRlKCkuZmlsZXNbZmlsZUlEXSwgc3RhdGUpLCBfZXh0ZW5kczIpKVxuICAgIH0pO1xuICB9O1xuXG4gIFVwcHkucHJvdG90eXBlLnJlc2V0UHJvZ3Jlc3MgPSBmdW5jdGlvbiByZXNldFByb2dyZXNzKCkge1xuICAgIHZhciBkZWZhdWx0UHJvZ3Jlc3MgPSB7XG4gICAgICBwZXJjZW50YWdlOiAwLFxuICAgICAgYnl0ZXNVcGxvYWRlZDogMCxcbiAgICAgIHVwbG9hZENvbXBsZXRlOiBmYWxzZSxcbiAgICAgIHVwbG9hZFN0YXJ0ZWQ6IGZhbHNlXG4gICAgfTtcbiAgICB2YXIgZmlsZXMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5nZXRTdGF0ZSgpLmZpbGVzKTtcbiAgICB2YXIgdXBkYXRlZEZpbGVzID0ge307XG4gICAgT2JqZWN0LmtleXMoZmlsZXMpLmZvckVhY2goZnVuY3Rpb24gKGZpbGVJRCkge1xuICAgICAgdmFyIHVwZGF0ZWRGaWxlID0gX2V4dGVuZHMoe30sIGZpbGVzW2ZpbGVJRF0pO1xuICAgICAgdXBkYXRlZEZpbGUucHJvZ3Jlc3MgPSBfZXh0ZW5kcyh7fSwgdXBkYXRlZEZpbGUucHJvZ3Jlc3MsIGRlZmF1bHRQcm9ncmVzcyk7XG4gICAgICB1cGRhdGVkRmlsZXNbZmlsZUlEXSA9IHVwZGF0ZWRGaWxlO1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBmaWxlczogdXBkYXRlZEZpbGVzLFxuICAgICAgdG90YWxQcm9ncmVzczogMFxuICAgIH0pO1xuXG4gICAgLy8gVE9ETyBEb2N1bWVudCBvbiB0aGUgd2Vic2l0ZVxuICAgIHRoaXMuZW1pdCgncmVzZXQtcHJvZ3Jlc3MnKTtcbiAgfTtcblxuICBVcHB5LnByb3RvdHlwZS5hZGRQcmVQcm9jZXNzb3IgPSBmdW5jdGlvbiBhZGRQcmVQcm9jZXNzb3IoZm4pIHtcbiAgICB0aGlzLnByZVByb2Nlc3NvcnMucHVzaChmbik7XG4gIH07XG5cbiAgVXBweS5wcm90b3R5cGUucmVtb3ZlUHJlUHJvY2Vzc29yID0gZnVuY3Rpb24gcmVtb3ZlUHJlUHJvY2Vzc29yKGZuKSB7XG4gICAgdmFyIGkgPSB0aGlzLnByZVByb2Nlc3NvcnMuaW5kZXhPZihmbik7XG4gICAgaWYgKGkgIT09IC0xKSB7XG4gICAgICB0aGlzLnByZVByb2Nlc3NvcnMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfTtcblxuICBVcHB5LnByb3RvdHlwZS5hZGRQb3N0UHJvY2Vzc29yID0gZnVuY3Rpb24gYWRkUG9zdFByb2Nlc3Nvcihmbikge1xuICAgIHRoaXMucG9zdFByb2Nlc3NvcnMucHVzaChmbik7XG4gIH07XG5cbiAgVXBweS5wcm90b3R5cGUucmVtb3ZlUG9zdFByb2Nlc3NvciA9IGZ1bmN0aW9uIHJlbW92ZVBvc3RQcm9jZXNzb3IoZm4pIHtcbiAgICB2YXIgaSA9IHRoaXMucG9zdFByb2Nlc3NvcnMuaW5kZXhPZihmbik7XG4gICAgaWYgKGkgIT09IC0xKSB7XG4gICAgICB0aGlzLnBvc3RQcm9jZXNzb3JzLnNwbGljZShpLCAxKTtcbiAgICB9XG4gIH07XG5cbiAgVXBweS5wcm90b3R5cGUuYWRkVXBsb2FkZXIgPSBmdW5jdGlvbiBhZGRVcGxvYWRlcihmbikge1xuICAgIHRoaXMudXBsb2FkZXJzLnB1c2goZm4pO1xuICB9O1xuXG4gIFVwcHkucHJvdG90eXBlLnJlbW92ZVVwbG9hZGVyID0gZnVuY3Rpb24gcmVtb3ZlVXBsb2FkZXIoZm4pIHtcbiAgICB2YXIgaSA9IHRoaXMudXBsb2FkZXJzLmluZGV4T2YoZm4pO1xuICAgIGlmIChpICE9PSAtMSkge1xuICAgICAgdGhpcy51cGxvYWRlcnMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfTtcblxuICBVcHB5LnByb3RvdHlwZS5zZXRNZXRhID0gZnVuY3Rpb24gc2V0TWV0YShkYXRhKSB7XG4gICAgdmFyIHVwZGF0ZWRNZXRhID0gX2V4dGVuZHMoe30sIHRoaXMuZ2V0U3RhdGUoKS5tZXRhLCBkYXRhKTtcbiAgICB2YXIgdXBkYXRlZEZpbGVzID0gX2V4dGVuZHMoe30sIHRoaXMuZ2V0U3RhdGUoKS5maWxlcyk7XG5cbiAgICBPYmplY3Qua2V5cyh1cGRhdGVkRmlsZXMpLmZvckVhY2goZnVuY3Rpb24gKGZpbGVJRCkge1xuICAgICAgdXBkYXRlZEZpbGVzW2ZpbGVJRF0gPSBfZXh0ZW5kcyh7fSwgdXBkYXRlZEZpbGVzW2ZpbGVJRF0sIHtcbiAgICAgICAgbWV0YTogX2V4dGVuZHMoe30sIHVwZGF0ZWRGaWxlc1tmaWxlSURdLm1ldGEsIGRhdGEpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMubG9nKCdBZGRpbmcgbWV0YWRhdGE6Jyk7XG4gICAgdGhpcy5sb2coZGF0YSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG1ldGE6IHVwZGF0ZWRNZXRhLFxuICAgICAgZmlsZXM6IHVwZGF0ZWRGaWxlc1xuICAgIH0pO1xuICB9O1xuXG4gIFVwcHkucHJvdG90eXBlLnNldEZpbGVNZXRhID0gZnVuY3Rpb24gc2V0RmlsZU1ldGEoZmlsZUlELCBkYXRhKSB7XG4gICAgdmFyIHVwZGF0ZWRGaWxlcyA9IF9leHRlbmRzKHt9LCB0aGlzLmdldFN0YXRlKCkuZmlsZXMpO1xuICAgIGlmICghdXBkYXRlZEZpbGVzW2ZpbGVJRF0pIHtcbiAgICAgIHRoaXMubG9nKCdXYXMgdHJ5aW5nIHRvIHNldCBtZXRhZGF0YSBmb3IgYSBmaWxlIHRoYXTigJlzIG5vdCB3aXRoIHVzIGFueW1vcmU6ICcsIGZpbGVJRCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBuZXdNZXRhID0gX2V4dGVuZHMoe30sIHVwZGF0ZWRGaWxlc1tmaWxlSURdLm1ldGEsIGRhdGEpO1xuICAgIHVwZGF0ZWRGaWxlc1tmaWxlSURdID0gX2V4dGVuZHMoe30sIHVwZGF0ZWRGaWxlc1tmaWxlSURdLCB7XG4gICAgICBtZXRhOiBuZXdNZXRhXG4gICAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGZpbGVzOiB1cGRhdGVkRmlsZXMgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhIGZpbGUgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlEIFRoZSBJRCBvZiB0aGUgZmlsZSBvYmplY3QgdG8gcmV0dXJuLlxuICAgKi9cblxuXG4gIFVwcHkucHJvdG90eXBlLmdldEZpbGUgPSBmdW5jdGlvbiBnZXRGaWxlKGZpbGVJRCkge1xuICAgIHJldHVybiB0aGlzLmdldFN0YXRlKCkuZmlsZXNbZmlsZUlEXTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFsbCBmaWxlcyBpbiBhbiBhcnJheS5cbiAgICovXG5cblxuICBVcHB5LnByb3RvdHlwZS5nZXRGaWxlcyA9IGZ1bmN0aW9uIGdldEZpbGVzKCkge1xuICAgIHZhciBfZ2V0U3RhdGUgPSB0aGlzLmdldFN0YXRlKCksXG4gICAgICAgIGZpbGVzID0gX2dldFN0YXRlLmZpbGVzO1xuXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGZpbGVzKS5tYXAoZnVuY3Rpb24gKGZpbGVJRCkge1xuICAgICAgcmV0dXJuIGZpbGVzW2ZpbGVJRF07XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICogQ2hlY2sgaWYgbWluTnVtYmVyT2ZGaWxlcyByZXN0cmljdGlvbiBpcyByZWFjaGVkIGJlZm9yZSB1cGxvYWRpbmcuXG4gICpcbiAgKiBAcHJpdmF0ZVxuICAqL1xuXG5cbiAgVXBweS5wcm90b3R5cGUuX2NoZWNrTWluTnVtYmVyT2ZGaWxlcyA9IGZ1bmN0aW9uIF9jaGVja01pbk51bWJlck9mRmlsZXMoZmlsZXMpIHtcbiAgICB2YXIgbWluTnVtYmVyT2ZGaWxlcyA9IHRoaXMub3B0cy5yZXN0cmljdGlvbnMubWluTnVtYmVyT2ZGaWxlcztcblxuICAgIGlmIChPYmplY3Qua2V5cyhmaWxlcykubGVuZ3RoIDwgbWluTnVtYmVyT2ZGaWxlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCcnICsgdGhpcy5pMThuKCd5b3VIYXZlVG9BdExlYXN0U2VsZWN0WCcsIHsgc21hcnRfY291bnQ6IG1pbk51bWJlck9mRmlsZXMgfSkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgKiBDaGVjayBpZiBmaWxlIHBhc3NlcyBhIHNldCBvZiByZXN0cmljdGlvbnMgc2V0IGluIG9wdGlvbnM6IG1heEZpbGVTaXplLFxuICAqIG1heE51bWJlck9mRmlsZXMgYW5kIGFsbG93ZWRGaWxlVHlwZXMuXG4gICpcbiAgKiBAcGFyYW0ge29iamVjdH0gZmlsZSBvYmplY3QgdG8gY2hlY2tcbiAgKiBAcHJpdmF0ZVxuICAqL1xuXG5cbiAgVXBweS5wcm90b3R5cGUuX2NoZWNrUmVzdHJpY3Rpb25zID0gZnVuY3Rpb24gX2NoZWNrUmVzdHJpY3Rpb25zKGZpbGUpIHtcbiAgICB2YXIgX29wdHMkcmVzdHJpY3Rpb25zID0gdGhpcy5vcHRzLnJlc3RyaWN0aW9ucyxcbiAgICAgICAgbWF4RmlsZVNpemUgPSBfb3B0cyRyZXN0cmljdGlvbnMubWF4RmlsZVNpemUsXG4gICAgICAgIG1heE51bWJlck9mRmlsZXMgPSBfb3B0cyRyZXN0cmljdGlvbnMubWF4TnVtYmVyT2ZGaWxlcyxcbiAgICAgICAgYWxsb3dlZEZpbGVUeXBlcyA9IF9vcHRzJHJlc3RyaWN0aW9ucy5hbGxvd2VkRmlsZVR5cGVzO1xuXG5cbiAgICBpZiAobWF4TnVtYmVyT2ZGaWxlcykge1xuICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuZ2V0U3RhdGUoKS5maWxlcykubGVuZ3RoICsgMSA+IG1heE51bWJlck9mRmlsZXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCcnICsgdGhpcy5pMThuKCd5b3VDYW5Pbmx5VXBsb2FkWCcsIHsgc21hcnRfY291bnQ6IG1heE51bWJlck9mRmlsZXMgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhbGxvd2VkRmlsZVR5cGVzKSB7XG4gICAgICB2YXIgaXNDb3JyZWN0RmlsZVR5cGUgPSBhbGxvd2VkRmlsZVR5cGVzLmZpbHRlcihmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAvLyBpZiAoIWZpbGUudHlwZSkgcmV0dXJuIGZhbHNlXG5cbiAgICAgICAgLy8gaXMgdGhpcyBpcyBhIG1pbWUtdHlwZVxuICAgICAgICBpZiAodHlwZS5pbmRleE9mKCcvJykgPiAtMSkge1xuICAgICAgICAgIGlmICghZmlsZS50eXBlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoKGZpbGUudHlwZSwgdHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvdGhlcndpc2UgdGhpcyBpcyBsaWtlbHkgYW4gZXh0ZW5zaW9uXG4gICAgICAgIGlmICh0eXBlWzBdID09PSAnLicpIHtcbiAgICAgICAgICBpZiAoZmlsZS5leHRlbnNpb24gPT09IHR5cGUuc3Vic3RyKDEpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlsZS5leHRlbnNpb247XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5sZW5ndGggPiAwO1xuXG4gICAgICBpZiAoIWlzQ29ycmVjdEZpbGVUeXBlKSB7XG4gICAgICAgIHZhciBhbGxvd2VkRmlsZVR5cGVzU3RyaW5nID0gYWxsb3dlZEZpbGVUeXBlcy5qb2luKCcsICcpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5pMThuKCd5b3VDYW5Pbmx5VXBsb2FkRmlsZVR5cGVzJykgKyAnICcgKyBhbGxvd2VkRmlsZVR5cGVzU3RyaW5nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWF4RmlsZVNpemUpIHtcbiAgICAgIGlmIChmaWxlLmRhdGEuc2l6ZSA+IG1heEZpbGVTaXplKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmkxOG4oJ2V4Y2VlZHNTaXplJykgKyAnICcgKyBwcmV0dHlCeXRlcyhtYXhGaWxlU2l6ZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgKiBBZGQgYSBuZXcgZmlsZSB0byBgc3RhdGUuZmlsZXNgLiBUaGlzIHdpbGwgcnVuIGBvbkJlZm9yZUZpbGVBZGRlZGAsXG4gICogdHJ5IHRvIGd1ZXNzIGZpbGUgdHlwZSBpbiBhIGNsZXZlciB3YXksIGNoZWNrIGZpbGUgYWdhaW5zdCByZXN0cmljdGlvbnMsXG4gICogYW5kIHN0YXJ0IGFuIHVwbG9hZCBpZiBgYXV0b1Byb2NlZWQgPT09IHRydWVgLlxuICAqXG4gICogQHBhcmFtIHtvYmplY3R9IGZpbGUgb2JqZWN0IHRvIGFkZFxuICAqL1xuXG5cbiAgVXBweS5wcm90b3R5cGUuYWRkRmlsZSA9IGZ1bmN0aW9uIGFkZEZpbGUoZmlsZSkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzLFxuICAgICAgICBfZXh0ZW5kczM7XG5cbiAgICB2YXIgX2dldFN0YXRlMiA9IHRoaXMuZ2V0U3RhdGUoKSxcbiAgICAgICAgZmlsZXMgPSBfZ2V0U3RhdGUyLmZpbGVzO1xuXG4gICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKG1zZykge1xuICAgICAgdmFyIGVyciA9ICh0eXBlb2YgbXNnID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihtc2cpKSA9PT0gJ29iamVjdCcgPyBtc2cgOiBuZXcgRXJyb3IobXNnKTtcbiAgICAgIF90aGlzMi5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgX3RoaXMyLmluZm8oZXJyLm1lc3NhZ2UsICdlcnJvcicsIDUwMDApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH07XG5cbiAgICB2YXIgb25CZWZvcmVGaWxlQWRkZWRSZXN1bHQgPSB0aGlzLm9wdHMub25CZWZvcmVGaWxlQWRkZWQoZmlsZSwgZmlsZXMpO1xuXG4gICAgaWYgKG9uQmVmb3JlRmlsZUFkZGVkUmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5sb2coJ05vdCBhZGRpbmcgZmlsZSBiZWNhdXNlIG9uQmVmb3JlRmlsZUFkZGVkIHJldHVybmVkIGZhbHNlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCh0eXBlb2Ygb25CZWZvcmVGaWxlQWRkZWRSZXN1bHQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9uQmVmb3JlRmlsZUFkZGVkUmVzdWx0KSkgPT09ICdvYmplY3QnICYmIG9uQmVmb3JlRmlsZUFkZGVkUmVzdWx0KSB7XG4gICAgICAvLyB3YXJuaW5nIGFmdGVyIHRoZSBjaGFuZ2UgaW4gMC4yNFxuICAgICAgaWYgKG9uQmVmb3JlRmlsZUFkZGVkUmVzdWx0LnRoZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb25CZWZvcmVGaWxlQWRkZWQoKSByZXR1cm5lZCBhIFByb21pc2UsIGJ1dCB0aGlzIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIEl0IG11c3QgYmUgc3luY2hyb25vdXMuJyk7XG4gICAgICB9XG4gICAgICBmaWxlID0gb25CZWZvcmVGaWxlQWRkZWRSZXN1bHQ7XG4gICAgfVxuXG4gICAgdmFyIGZpbGVUeXBlID0gZ2V0RmlsZVR5cGUoZmlsZSk7XG4gICAgdmFyIGZpbGVOYW1lID0gdm9pZCAwO1xuICAgIGlmIChmaWxlLm5hbWUpIHtcbiAgICAgIGZpbGVOYW1lID0gZmlsZS5uYW1lO1xuICAgIH0gZWxzZSBpZiAoZmlsZVR5cGUuc3BsaXQoJy8nKVswXSA9PT0gJ2ltYWdlJykge1xuICAgICAgZmlsZU5hbWUgPSBmaWxlVHlwZS5zcGxpdCgnLycpWzBdICsgJy4nICsgZmlsZVR5cGUuc3BsaXQoJy8nKVsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsZU5hbWUgPSAnbm9uYW1lJztcbiAgICB9XG4gICAgdmFyIGZpbGVFeHRlbnNpb24gPSBnZXRGaWxlTmFtZUFuZEV4dGVuc2lvbihmaWxlTmFtZSkuZXh0ZW5zaW9uO1xuICAgIHZhciBpc1JlbW90ZSA9IGZpbGUuaXNSZW1vdGUgfHwgZmFsc2U7XG5cbiAgICB2YXIgZmlsZUlEID0gZ2VuZXJhdGVGaWxlSUQoZmlsZSk7XG5cbiAgICB2YXIgbWV0YSA9IGZpbGUubWV0YSB8fCB7fTtcbiAgICBtZXRhLm5hbWUgPSBmaWxlTmFtZTtcbiAgICBtZXRhLnR5cGUgPSBmaWxlVHlwZTtcblxuICAgIHZhciBuZXdGaWxlID0ge1xuICAgICAgc291cmNlOiBmaWxlLnNvdXJjZSB8fCAnJyxcbiAgICAgIGlkOiBmaWxlSUQsXG4gICAgICBuYW1lOiBmaWxlTmFtZSxcbiAgICAgIGV4dGVuc2lvbjogZmlsZUV4dGVuc2lvbiB8fCAnJyxcbiAgICAgIG1ldGE6IF9leHRlbmRzKHt9LCB0aGlzLmdldFN0YXRlKCkubWV0YSwgbWV0YSksXG4gICAgICB0eXBlOiBmaWxlVHlwZSxcbiAgICAgIGRhdGE6IGZpbGUuZGF0YSxcbiAgICAgIHByb2dyZXNzOiB7XG4gICAgICAgIHBlcmNlbnRhZ2U6IDAsXG4gICAgICAgIGJ5dGVzVXBsb2FkZWQ6IDAsXG4gICAgICAgIGJ5dGVzVG90YWw6IGZpbGUuZGF0YS5zaXplIHx8IDAsXG4gICAgICAgIHVwbG9hZENvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgdXBsb2FkU3RhcnRlZDogZmFsc2VcbiAgICAgIH0sXG4gICAgICBzaXplOiBmaWxlLmRhdGEuc2l6ZSB8fCAwLFxuICAgICAgaXNSZW1vdGU6IGlzUmVtb3RlLFxuICAgICAgcmVtb3RlOiBmaWxlLnJlbW90ZSB8fCAnJyxcbiAgICAgIHByZXZpZXc6IGZpbGUucHJldmlld1xuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5fY2hlY2tSZXN0cmljdGlvbnMobmV3RmlsZSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBvbkVycm9yKGVycik7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBmaWxlczogX2V4dGVuZHMoe30sIGZpbGVzLCAoX2V4dGVuZHMzID0ge30sIF9leHRlbmRzM1tmaWxlSURdID0gbmV3RmlsZSwgX2V4dGVuZHMzKSlcbiAgICB9KTtcblxuICAgIHRoaXMuZW1pdCgnZmlsZS1hZGRlZCcsIG5ld0ZpbGUpO1xuICAgIHRoaXMubG9nKCdBZGRlZCBmaWxlOiAnICsgZmlsZU5hbWUgKyAnLCAnICsgZmlsZUlEICsgJywgbWltZSB0eXBlOiAnICsgZmlsZVR5cGUpO1xuXG4gICAgaWYgKHRoaXMub3B0cy5hdXRvUHJvY2VlZCAmJiAhdGhpcy5zY2hlZHVsZWRBdXRvUHJvY2VlZCkge1xuICAgICAgdGhpcy5zY2hlZHVsZWRBdXRvUHJvY2VlZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIuc2NoZWR1bGVkQXV0b1Byb2NlZWQgPSBudWxsO1xuICAgICAgICBfdGhpczIudXBsb2FkKCkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlIHx8IGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfSwgNCk7XG4gICAgfVxuICB9O1xuXG4gIFVwcHkucHJvdG90eXBlLnJlbW92ZUZpbGUgPSBmdW5jdGlvbiByZW1vdmVGaWxlKGZpbGVJRCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIF9nZXRTdGF0ZTMgPSB0aGlzLmdldFN0YXRlKCksXG4gICAgICAgIGZpbGVzID0gX2dldFN0YXRlMy5maWxlcyxcbiAgICAgICAgY3VycmVudFVwbG9hZHMgPSBfZ2V0U3RhdGUzLmN1cnJlbnRVcGxvYWRzO1xuXG4gICAgdmFyIHVwZGF0ZWRGaWxlcyA9IF9leHRlbmRzKHt9LCBmaWxlcyk7XG4gICAgdmFyIHJlbW92ZWRGaWxlID0gdXBkYXRlZEZpbGVzW2ZpbGVJRF07XG4gICAgZGVsZXRlIHVwZGF0ZWRGaWxlc1tmaWxlSURdO1xuXG4gICAgLy8gUmVtb3ZlIHRoaXMgZmlsZSBmcm9tIGl0cyBgY3VycmVudFVwbG9hZGAuXG4gICAgdmFyIHVwZGF0ZWRVcGxvYWRzID0gX2V4dGVuZHMoe30sIGN1cnJlbnRVcGxvYWRzKTtcbiAgICB2YXIgcmVtb3ZlVXBsb2FkcyA9IFtdO1xuICAgIE9iamVjdC5rZXlzKHVwZGF0ZWRVcGxvYWRzKS5mb3JFYWNoKGZ1bmN0aW9uICh1cGxvYWRJRCkge1xuICAgICAgdmFyIG5ld0ZpbGVJRHMgPSBjdXJyZW50VXBsb2Fkc1t1cGxvYWRJRF0uZmlsZUlEcy5maWx0ZXIoZnVuY3Rpb24gKHVwbG9hZEZpbGVJRCkge1xuICAgICAgICByZXR1cm4gdXBsb2FkRmlsZUlEICE9PSBmaWxlSUQ7XG4gICAgICB9KTtcbiAgICAgIC8vIFJlbW92ZSB0aGUgdXBsb2FkIGlmIG5vIGZpbGVzIGFyZSBhc3NvY2lhdGVkIHdpdGggaXQgYW55bW9yZS5cbiAgICAgIGlmIChuZXdGaWxlSURzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZW1vdmVVcGxvYWRzLnB1c2godXBsb2FkSUQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZWRVcGxvYWRzW3VwbG9hZElEXSA9IF9leHRlbmRzKHt9LCBjdXJyZW50VXBsb2Fkc1t1cGxvYWRJRF0sIHtcbiAgICAgICAgZmlsZUlEczogbmV3RmlsZUlEc1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGN1cnJlbnRVcGxvYWRzOiB1cGRhdGVkVXBsb2FkcyxcbiAgICAgIGZpbGVzOiB1cGRhdGVkRmlsZXNcbiAgICB9KTtcblxuICAgIHJlbW92ZVVwbG9hZHMuZm9yRWFjaChmdW5jdGlvbiAodXBsb2FkSUQpIHtcbiAgICAgIF90aGlzMy5fcmVtb3ZlVXBsb2FkKHVwbG9hZElEKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhbGN1bGF0ZVRvdGFsUHJvZ3Jlc3MoKTtcbiAgICB0aGlzLmVtaXQoJ2ZpbGUtcmVtb3ZlZCcsIHJlbW92ZWRGaWxlKTtcbiAgICB0aGlzLmxvZygnRmlsZSByZW1vdmVkOiAnICsgcmVtb3ZlZEZpbGUuaWQpO1xuXG4gICAgLy8gQ2xlYW4gdXAgb2JqZWN0IFVSTHMuXG4gICAgaWYgKHJlbW92ZWRGaWxlLnByZXZpZXcgJiYgaXNPYmplY3RVUkwocmVtb3ZlZEZpbGUucHJldmlldykpIHtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwocmVtb3ZlZEZpbGUucHJldmlldyk7XG4gICAgfVxuXG4gICAgdGhpcy5sb2coJ1JlbW92ZWQgZmlsZTogJyArIGZpbGVJRCk7XG4gIH07XG5cbiAgVXBweS5wcm90b3R5cGUucGF1c2VSZXN1bWUgPSBmdW5jdGlvbiBwYXVzZVJlc3VtZShmaWxlSUQpIHtcbiAgICBpZiAodGhpcy5nZXRGaWxlKGZpbGVJRCkudXBsb2FkQ29tcGxldGUpIHJldHVybjtcblxuICAgIHZhciB3YXNQYXVzZWQgPSB0aGlzLmdldEZpbGUoZmlsZUlEKS5pc1BhdXNlZCB8fCBmYWxzZTtcbiAgICB2YXIgaXNQYXVzZWQgPSAhd2FzUGF1c2VkO1xuXG4gICAgdGhpcy5zZXRGaWxlU3RhdGUoZmlsZUlELCB7XG4gICAgICBpc1BhdXNlZDogaXNQYXVzZWRcbiAgICB9KTtcblxuICAgIHRoaXMuZW1pdCgndXBsb2FkLXBhdXNlJywgZmlsZUlELCBpc1BhdXNlZCk7XG5cbiAgICByZXR1cm4gaXNQYXVzZWQ7XG4gIH07XG5cbiAgVXBweS5wcm90b3R5cGUucGF1c2VBbGwgPSBmdW5jdGlvbiBwYXVzZUFsbCgpIHtcbiAgICB2YXIgdXBkYXRlZEZpbGVzID0gX2V4dGVuZHMoe30sIHRoaXMuZ2V0U3RhdGUoKS5maWxlcyk7XG4gICAgdmFyIGluUHJvZ3Jlc3NVcGRhdGVkRmlsZXMgPSBPYmplY3Qua2V5cyh1cGRhdGVkRmlsZXMpLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgcmV0dXJuICF1cGRhdGVkRmlsZXNbZmlsZV0ucHJvZ3Jlc3MudXBsb2FkQ29tcGxldGUgJiYgdXBkYXRlZEZpbGVzW2ZpbGVdLnByb2dyZXNzLnVwbG9hZFN0YXJ0ZWQ7XG4gICAgfSk7XG5cbiAgICBpblByb2dyZXNzVXBkYXRlZEZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHZhciB1cGRhdGVkRmlsZSA9IF9leHRlbmRzKHt9LCB1cGRhdGVkRmlsZXNbZmlsZV0sIHtcbiAgICAgICAgaXNQYXVzZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgICAgdXBkYXRlZEZpbGVzW2ZpbGVdID0gdXBkYXRlZEZpbGU7XG4gICAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGZpbGVzOiB1cGRhdGVkRmlsZXMgfSk7XG5cbiAgICB0aGlzLmVtaXQoJ3BhdXNlLWFsbCcpO1xuICB9O1xuXG4gIFVwcHkucHJvdG90eXBlLnJlc3VtZUFsbCA9IGZ1bmN0aW9uIHJlc3VtZUFsbCgpIHtcbiAgICB2YXIgdXBkYXRlZEZpbGVzID0gX2V4dGVuZHMoe30sIHRoaXMuZ2V0U3RhdGUoKS5maWxlcyk7XG4gICAgdmFyIGluUHJvZ3Jlc3NVcGRhdGVkRmlsZXMgPSBPYmplY3Qua2V5cyh1cGRhdGVkRmlsZXMpLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgcmV0dXJuICF1cGRhdGVkRmlsZXNbZmlsZV0ucHJvZ3Jlc3MudXBsb2FkQ29tcGxldGUgJiYgdXBkYXRlZEZpbGVzW2ZpbGVdLnByb2dyZXNzLnVwbG9hZFN0YXJ0ZWQ7XG4gICAgfSk7XG5cbiAgICBpblByb2dyZXNzVXBkYXRlZEZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHZhciB1cGRhdGVkRmlsZSA9IF9leHRlbmRzKHt9LCB1cGRhdGVkRmlsZXNbZmlsZV0sIHtcbiAgICAgICAgaXNQYXVzZWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgfSk7XG4gICAgICB1cGRhdGVkRmlsZXNbZmlsZV0gPSB1cGRhdGVkRmlsZTtcbiAgICB9KTtcbiAgICB0aGlzLnNldFN0YXRlKHsgZmlsZXM6IHVwZGF0ZWRGaWxlcyB9KTtcblxuICAgIHRoaXMuZW1pdCgncmVzdW1lLWFsbCcpO1xuICB9O1xuXG4gIFVwcHkucHJvdG90eXBlLnJldHJ5QWxsID0gZnVuY3Rpb24gcmV0cnlBbGwoKSB7XG4gICAgdmFyIHVwZGF0ZWRGaWxlcyA9IF9leHRlbmRzKHt9LCB0aGlzLmdldFN0YXRlKCkuZmlsZXMpO1xuICAgIHZhciBmaWxlc1RvUmV0cnkgPSBPYmplY3Qua2V5cyh1cGRhdGVkRmlsZXMpLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgcmV0dXJuIHVwZGF0ZWRGaWxlc1tmaWxlXS5lcnJvcjtcbiAgICB9KTtcblxuICAgIGZpbGVzVG9SZXRyeS5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICB2YXIgdXBkYXRlZEZpbGUgPSBfZXh0ZW5kcyh7fSwgdXBkYXRlZEZpbGVzW2ZpbGVdLCB7XG4gICAgICAgIGlzUGF1c2VkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pO1xuICAgICAgdXBkYXRlZEZpbGVzW2ZpbGVdID0gdXBkYXRlZEZpbGU7XG4gICAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBmaWxlczogdXBkYXRlZEZpbGVzLFxuICAgICAgZXJyb3I6IG51bGxcbiAgICB9KTtcblxuICAgIHRoaXMuZW1pdCgncmV0cnktYWxsJywgZmlsZXNUb1JldHJ5KTtcblxuICAgIHZhciB1cGxvYWRJRCA9IHRoaXMuX2NyZWF0ZVVwbG9hZChmaWxlc1RvUmV0cnkpO1xuICAgIHJldHVybiB0aGlzLl9ydW5VcGxvYWQodXBsb2FkSUQpO1xuICB9O1xuXG4gIFVwcHkucHJvdG90eXBlLmNhbmNlbEFsbCA9IGZ1bmN0aW9uIGNhbmNlbEFsbCgpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHRoaXMuZW1pdCgnY2FuY2VsLWFsbCcpO1xuXG4gICAgLy8gVE9ETyBPciBzaG91bGQgd2UganVzdCBjYWxsIHJlbW92ZUZpbGUgb24gYWxsIGZpbGVzP1xuXG4gICAgdmFyIF9nZXRTdGF0ZTQgPSB0aGlzLmdldFN0YXRlKCksXG4gICAgICAgIGN1cnJlbnRVcGxvYWRzID0gX2dldFN0YXRlNC5jdXJyZW50VXBsb2FkcztcblxuICAgIHZhciB1cGxvYWRJRHMgPSBPYmplY3Qua2V5cyhjdXJyZW50VXBsb2Fkcyk7XG5cbiAgICB1cGxvYWRJRHMuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgIF90aGlzNC5fcmVtb3ZlVXBsb2FkKGlkKTtcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZmlsZXM6IHt9LFxuICAgICAgdG90YWxQcm9ncmVzczogMCxcbiAgICAgIGVycm9yOiBudWxsXG4gICAgfSk7XG4gIH07XG5cbiAgVXBweS5wcm90b3R5cGUucmV0cnlVcGxvYWQgPSBmdW5jdGlvbiByZXRyeVVwbG9hZChmaWxlSUQpIHtcbiAgICB2YXIgdXBkYXRlZEZpbGVzID0gX2V4dGVuZHMoe30sIHRoaXMuZ2V0U3RhdGUoKS5maWxlcyk7XG4gICAgdmFyIHVwZGF0ZWRGaWxlID0gX2V4dGVuZHMoe30sIHVwZGF0ZWRGaWxlc1tmaWxlSURdLCB7IGVycm9yOiBudWxsLCBpc1BhdXNlZDogZmFsc2UgfSk7XG4gICAgdXBkYXRlZEZpbGVzW2ZpbGVJRF0gPSB1cGRhdGVkRmlsZTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGZpbGVzOiB1cGRhdGVkRmlsZXNcbiAgICB9KTtcblxuICAgIHRoaXMuZW1pdCgndXBsb2FkLXJldHJ5JywgZmlsZUlEKTtcblxuICAgIHZhciB1cGxvYWRJRCA9IHRoaXMuX2NyZWF0ZVVwbG9hZChbZmlsZUlEXSk7XG4gICAgcmV0dXJuIHRoaXMuX3J1blVwbG9hZCh1cGxvYWRJRCk7XG4gIH07XG5cbiAgVXBweS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcbiAgICB0aGlzLmNhbmNlbEFsbCgpO1xuICB9O1xuXG4gIFVwcHkucHJvdG90eXBlLl9jYWxjdWxhdGVQcm9ncmVzcyA9IGZ1bmN0aW9uIF9jYWxjdWxhdGVQcm9ncmVzcyhmaWxlLCBkYXRhKSB7XG4gICAgaWYgKCF0aGlzLmdldEZpbGUoZmlsZS5pZCkpIHtcbiAgICAgIHRoaXMubG9nKCdOb3Qgc2V0dGluZyBwcm9ncmVzcyBmb3IgYSBmaWxlIHRoYXQgaGFzIGJlZW4gcmVtb3ZlZDogJyArIGZpbGUuaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2V0RmlsZVN0YXRlKGZpbGUuaWQsIHtcbiAgICAgIHByb2dyZXNzOiBfZXh0ZW5kcyh7fSwgdGhpcy5nZXRGaWxlKGZpbGUuaWQpLnByb2dyZXNzLCB7XG4gICAgICAgIGJ5dGVzVXBsb2FkZWQ6IGRhdGEuYnl0ZXNVcGxvYWRlZCxcbiAgICAgICAgYnl0ZXNUb3RhbDogZGF0YS5ieXRlc1RvdGFsLFxuICAgICAgICBwZXJjZW50YWdlOiBNYXRoLmZsb29yKChkYXRhLmJ5dGVzVXBsb2FkZWQgLyBkYXRhLmJ5dGVzVG90YWwgKiAxMDApLnRvRml4ZWQoMikpXG4gICAgICB9KVxuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FsY3VsYXRlVG90YWxQcm9ncmVzcygpO1xuICB9O1xuXG4gIFVwcHkucHJvdG90eXBlLl9jYWxjdWxhdGVUb3RhbFByb2dyZXNzID0gZnVuY3Rpb24gX2NhbGN1bGF0ZVRvdGFsUHJvZ3Jlc3MoKSB7XG4gICAgLy8gY2FsY3VsYXRlIHRvdGFsIHByb2dyZXNzLCB1c2luZyB0aGUgbnVtYmVyIG9mIGZpbGVzIGN1cnJlbnRseSB1cGxvYWRpbmcsXG4gICAgLy8gbXVsdGlwbGllZCBieSAxMDAgYW5kIHRoZSBzdW1tIG9mIGluZGl2aWR1YWwgcHJvZ3Jlc3Mgb2YgZWFjaCBmaWxlXG4gICAgdmFyIGZpbGVzID0gX2V4dGVuZHMoe30sIHRoaXMuZ2V0U3RhdGUoKS5maWxlcyk7XG5cbiAgICB2YXIgaW5Qcm9ncmVzcyA9IE9iamVjdC5rZXlzKGZpbGVzKS5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHJldHVybiBmaWxlc1tmaWxlXS5wcm9ncmVzcy51cGxvYWRTdGFydGVkO1xuICAgIH0pO1xuICAgIHZhciBwcm9ncmVzc01heCA9IGluUHJvZ3Jlc3MubGVuZ3RoICogMTAwO1xuICAgIHZhciBwcm9ncmVzc0FsbCA9IDA7XG4gICAgaW5Qcm9ncmVzcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICBwcm9ncmVzc0FsbCA9IHByb2dyZXNzQWxsICsgZmlsZXNbZmlsZV0ucHJvZ3Jlc3MucGVyY2VudGFnZTtcbiAgICB9KTtcblxuICAgIHZhciB0b3RhbFByb2dyZXNzID0gcHJvZ3Jlc3NNYXggPT09IDAgPyAwIDogTWF0aC5mbG9vcigocHJvZ3Jlc3NBbGwgKiAxMDAgLyBwcm9ncmVzc01heCkudG9GaXhlZCgyKSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHRvdGFsUHJvZ3Jlc3M6IHRvdGFsUHJvZ3Jlc3NcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGxpc3RlbmVycyBmb3IgYWxsIGdsb2JhbCBhY3Rpb25zLCBsaWtlOlxuICAgKiBgZXJyb3JgLCBgZmlsZS1yZW1vdmVkYCwgYHVwbG9hZC1wcm9ncmVzc2BcbiAgICovXG5cblxuICBVcHB5LnByb3RvdHlwZS5fYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZExpc3RlbmVycygpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIHRoaXMub24oJ2Vycm9yJywgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBfdGhpczUuc2V0U3RhdGUoeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ3VwbG9hZC1lcnJvcicsIGZ1bmN0aW9uIChmaWxlLCBlcnJvcikge1xuICAgICAgX3RoaXM1LnNldEZpbGVTdGF0ZShmaWxlLmlkLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgICAgX3RoaXM1LnNldFN0YXRlKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG5cbiAgICAgIHZhciBtZXNzYWdlID0gX3RoaXM1LmkxOG4oJ2ZhaWxlZFRvVXBsb2FkJywgeyBmaWxlOiBmaWxlLm5hbWUgfSk7XG4gICAgICBpZiAoKHR5cGVvZiBlcnJvciA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZXJyb3IpKSA9PT0gJ29iamVjdCcgJiYgZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBtZXNzYWdlID0geyBtZXNzYWdlOiBtZXNzYWdlLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH07XG4gICAgICB9XG4gICAgICBfdGhpczUuaW5mbyhtZXNzYWdlLCAnZXJyb3InLCA1MDAwKTtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ3VwbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzNS5zZXRTdGF0ZSh7IGVycm9yOiBudWxsIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbigndXBsb2FkLXN0YXJ0ZWQnLCBmdW5jdGlvbiAoZmlsZSwgdXBsb2FkKSB7XG4gICAgICBpZiAoIV90aGlzNS5nZXRGaWxlKGZpbGUuaWQpKSB7XG4gICAgICAgIF90aGlzNS5sb2coJ05vdCBzZXR0aW5nIHByb2dyZXNzIGZvciBhIGZpbGUgdGhhdCBoYXMgYmVlbiByZW1vdmVkOiAnICsgZmlsZS5pZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIF90aGlzNS5zZXRGaWxlU3RhdGUoZmlsZS5pZCwge1xuICAgICAgICBwcm9ncmVzczoge1xuICAgICAgICAgIHVwbG9hZFN0YXJ0ZWQ6IERhdGUubm93KCksXG4gICAgICAgICAgdXBsb2FkQ29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgIHBlcmNlbnRhZ2U6IDAsXG4gICAgICAgICAgYnl0ZXNVcGxvYWRlZDogMCxcbiAgICAgICAgICBieXRlc1RvdGFsOiBmaWxlLnNpemVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyB1cGxvYWQgcHJvZ3Jlc3MgZXZlbnRzIGNhbiBvY2N1ciBmcmVxdWVudGx5LCBlc3BlY2lhbGx5IHdoZW4geW91IGhhdmUgYSBnb29kXG4gICAgLy8gY29ubmVjdGlvbiB0byB0aGUgcmVtb3RlIHNlcnZlci4gVGhlcmVmb3JlLCB3ZSBhcmUgdGhyb3R0ZWxpbmcgdGhlbSB0b1xuICAgIC8vIHByZXZlbnQgYWNjZXNzaXZlIGZ1bmN0aW9uIGNhbGxzLlxuICAgIC8vIHNlZSBhbHNvOiBodHRwczovL2dpdGh1Yi5jb20vdHVzL3R1cy1qcy1jbGllbnQvY29tbWl0Lzk5NDBmMjdiMjM2MWZkN2UxMGJhNThiMDliNjBkODI0MjIxODNiYmJcbiAgICAvLyBjb25zdCBfdGhyb3R0bGVkQ2FsY3VsYXRlUHJvZ3Jlc3MgPSB0aHJvdHRsZSh0aGlzLl9jYWxjdWxhdGVQcm9ncmVzcywgMTAwLCB7IGxlYWRpbmc6IHRydWUsIHRyYWlsaW5nOiB0cnVlIH0pXG5cbiAgICB0aGlzLm9uKCd1cGxvYWQtcHJvZ3Jlc3MnLCB0aGlzLl9jYWxjdWxhdGVQcm9ncmVzcyk7XG5cbiAgICB0aGlzLm9uKCd1cGxvYWQtc3VjY2VzcycsIGZ1bmN0aW9uIChmaWxlLCB1cGxvYWRSZXNwLCB1cGxvYWRVUkwpIHtcbiAgICAgIHZhciBjdXJyZW50UHJvZ3Jlc3MgPSBfdGhpczUuZ2V0RmlsZShmaWxlLmlkKS5wcm9ncmVzcztcbiAgICAgIF90aGlzNS5zZXRGaWxlU3RhdGUoZmlsZS5pZCwge1xuICAgICAgICBwcm9ncmVzczogX2V4dGVuZHMoe30sIGN1cnJlbnRQcm9ncmVzcywge1xuICAgICAgICAgIHVwbG9hZENvbXBsZXRlOiB0cnVlLFxuICAgICAgICAgIHBlcmNlbnRhZ2U6IDEwMCxcbiAgICAgICAgICBieXRlc1VwbG9hZGVkOiBjdXJyZW50UHJvZ3Jlc3MuYnl0ZXNUb3RhbFxuICAgICAgICB9KSxcbiAgICAgICAgdXBsb2FkVVJMOiB1cGxvYWRVUkwsXG4gICAgICAgIGlzUGF1c2VkOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAgIF90aGlzNS5fY2FsY3VsYXRlVG90YWxQcm9ncmVzcygpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbigncHJlcHJvY2Vzcy1wcm9ncmVzcycsIGZ1bmN0aW9uIChmaWxlLCBwcm9ncmVzcykge1xuICAgICAgaWYgKCFfdGhpczUuZ2V0RmlsZShmaWxlLmlkKSkge1xuICAgICAgICBfdGhpczUubG9nKCdOb3Qgc2V0dGluZyBwcm9ncmVzcyBmb3IgYSBmaWxlIHRoYXQgaGFzIGJlZW4gcmVtb3ZlZDogJyArIGZpbGUuaWQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBfdGhpczUuc2V0RmlsZVN0YXRlKGZpbGUuaWQsIHtcbiAgICAgICAgcHJvZ3Jlc3M6IF9leHRlbmRzKHt9LCBfdGhpczUuZ2V0RmlsZShmaWxlLmlkKS5wcm9ncmVzcywge1xuICAgICAgICAgIHByZXByb2Nlc3M6IHByb2dyZXNzXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ3ByZXByb2Nlc3MtY29tcGxldGUnLCBmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgaWYgKCFfdGhpczUuZ2V0RmlsZShmaWxlLmlkKSkge1xuICAgICAgICBfdGhpczUubG9nKCdOb3Qgc2V0dGluZyBwcm9ncmVzcyBmb3IgYSBmaWxlIHRoYXQgaGFzIGJlZW4gcmVtb3ZlZDogJyArIGZpbGUuaWQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgZmlsZXMgPSBfZXh0ZW5kcyh7fSwgX3RoaXM1LmdldFN0YXRlKCkuZmlsZXMpO1xuICAgICAgZmlsZXNbZmlsZS5pZF0gPSBfZXh0ZW5kcyh7fSwgZmlsZXNbZmlsZS5pZF0sIHtcbiAgICAgICAgcHJvZ3Jlc3M6IF9leHRlbmRzKHt9LCBmaWxlc1tmaWxlLmlkXS5wcm9ncmVzcylcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlIGZpbGVzW2ZpbGUuaWRdLnByb2dyZXNzLnByZXByb2Nlc3M7XG5cbiAgICAgIF90aGlzNS5zZXRTdGF0ZSh7IGZpbGVzOiBmaWxlcyB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ3Bvc3Rwcm9jZXNzLXByb2dyZXNzJywgZnVuY3Rpb24gKGZpbGUsIHByb2dyZXNzKSB7XG4gICAgICBpZiAoIV90aGlzNS5nZXRGaWxlKGZpbGUuaWQpKSB7XG4gICAgICAgIF90aGlzNS5sb2coJ05vdCBzZXR0aW5nIHByb2dyZXNzIGZvciBhIGZpbGUgdGhhdCBoYXMgYmVlbiByZW1vdmVkOiAnICsgZmlsZS5pZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIF90aGlzNS5zZXRGaWxlU3RhdGUoZmlsZS5pZCwge1xuICAgICAgICBwcm9ncmVzczogX2V4dGVuZHMoe30sIF90aGlzNS5nZXRTdGF0ZSgpLmZpbGVzW2ZpbGUuaWRdLnByb2dyZXNzLCB7XG4gICAgICAgICAgcG9zdHByb2Nlc3M6IHByb2dyZXNzXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ3Bvc3Rwcm9jZXNzLWNvbXBsZXRlJywgZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIGlmICghX3RoaXM1LmdldEZpbGUoZmlsZS5pZCkpIHtcbiAgICAgICAgX3RoaXM1LmxvZygnTm90IHNldHRpbmcgcHJvZ3Jlc3MgZm9yIGEgZmlsZSB0aGF0IGhhcyBiZWVuIHJlbW92ZWQ6ICcgKyBmaWxlLmlkKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGZpbGVzID0gX2V4dGVuZHMoe30sIF90aGlzNS5nZXRTdGF0ZSgpLmZpbGVzKTtcbiAgICAgIGZpbGVzW2ZpbGUuaWRdID0gX2V4dGVuZHMoe30sIGZpbGVzW2ZpbGUuaWRdLCB7XG4gICAgICAgIHByb2dyZXNzOiBfZXh0ZW5kcyh7fSwgZmlsZXNbZmlsZS5pZF0ucHJvZ3Jlc3MpXG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBmaWxlc1tmaWxlLmlkXS5wcm9ncmVzcy5wb3N0cHJvY2VzcztcbiAgICAgIC8vIFRPRE8gc2hvdWxkIHdlIHNldCBzb21lIGtpbmQgb2YgYGZ1bGx5Q29tcGxldGVgIHByb3BlcnR5IG9uIHRoZSBmaWxlIG9iamVjdFxuICAgICAgLy8gc28gaXQncyBlYXNpZXIgdG8gc2VlIHRoYXQgdGhlIGZpbGUgaXMgdXBsb2Fk4oCmZnVsbHkgY29tcGxldGXigKZyYXRoZXIgdGhhblxuICAgICAgLy8gd2hhdCB3ZSBoYXZlIHRvIGRvIG5vdyAoYHVwbG9hZENvbXBsZXRlICYmICFwb3N0cHJvY2Vzc2ApXG5cbiAgICAgIF90aGlzNS5zZXRTdGF0ZSh7IGZpbGVzOiBmaWxlcyB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ3Jlc3RvcmVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gRmlsZXMgbWF5IGhhdmUgY2hhbmdlZC0tZW5zdXJlIHByb2dyZXNzIGlzIHN0aWxsIGFjY3VyYXRlLlxuICAgICAgX3RoaXM1Ll9jYWxjdWxhdGVUb3RhbFByb2dyZXNzKCk7XG4gICAgfSk7XG5cbiAgICAvLyBzaG93IGluZm9ybWVyIGlmIG9mZmxpbmVcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczUudXBkYXRlT25saW5lU3RhdHVzKCk7XG4gICAgICB9KTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXM1LnVwZGF0ZU9ubGluZVN0YXR1cygpO1xuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNS51cGRhdGVPbmxpbmVTdGF0dXMoKTtcbiAgICAgIH0sIDMwMDApO1xuICAgIH1cbiAgfTtcblxuICBVcHB5LnByb3RvdHlwZS51cGRhdGVPbmxpbmVTdGF0dXMgPSBmdW5jdGlvbiB1cGRhdGVPbmxpbmVTdGF0dXMoKSB7XG4gICAgdmFyIG9ubGluZSA9IHR5cGVvZiB3aW5kb3cubmF2aWdhdG9yLm9uTGluZSAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubmF2aWdhdG9yLm9uTGluZSA6IHRydWU7XG4gICAgaWYgKCFvbmxpbmUpIHtcbiAgICAgIHRoaXMuZW1pdCgnaXMtb2ZmbGluZScpO1xuICAgICAgdGhpcy5pbmZvKHRoaXMuaTE4bignbm9JbnRlcm5ldENvbm5lY3Rpb24nKSwgJ2Vycm9yJywgMCk7XG4gICAgICB0aGlzLndhc09mZmxpbmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVtaXQoJ2lzLW9ubGluZScpO1xuICAgICAgaWYgKHRoaXMud2FzT2ZmbGluZSkge1xuICAgICAgICB0aGlzLmVtaXQoJ2JhY2stb25saW5lJyk7XG4gICAgICAgIHRoaXMuaW5mbyh0aGlzLmkxOG4oJ2Nvbm5lY3RlZFRvSW50ZXJuZXQnKSwgJ3N1Y2Nlc3MnLCAzMDAwKTtcbiAgICAgICAgdGhpcy53YXNPZmZsaW5lID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIFVwcHkucHJvdG90eXBlLmdldElEID0gZnVuY3Rpb24gZ2V0SUQoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0cy5pZDtcbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgcGx1Z2luIHdpdGggQ29yZS5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IFBsdWdpbiBvYmplY3RcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRzXSBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIGJlIHBhc3NlZCB0byBQbHVnaW5cbiAgICogQHJldHVybiB7T2JqZWN0fSBzZWxmIGZvciBjaGFpbmluZ1xuICAgKi9cblxuXG4gIFVwcHkucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShQbHVnaW4sIG9wdHMpIHtcbiAgICBpZiAodHlwZW9mIFBsdWdpbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdmFyIG1zZyA9ICdFeHBlY3RlZCBhIHBsdWdpbiBjbGFzcywgYnV0IGdvdCAnICsgKFBsdWdpbiA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBQbHVnaW4gPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKFBsdWdpbikpICsgJy4nICsgJyBQbGVhc2UgdmVyaWZ5IHRoYXQgdGhlIHBsdWdpbiB3YXMgaW1wb3J0ZWQgYW5kIHNwZWxsZWQgY29ycmVjdGx5Lic7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKG1zZyk7XG4gICAgfVxuXG4gICAgLy8gSW5zdGFudGlhdGVcbiAgICB2YXIgcGx1Z2luID0gbmV3IFBsdWdpbih0aGlzLCBvcHRzKTtcbiAgICB2YXIgcGx1Z2luSWQgPSBwbHVnaW4uaWQ7XG4gICAgdGhpcy5wbHVnaW5zW3BsdWdpbi50eXBlXSA9IHRoaXMucGx1Z2luc1twbHVnaW4udHlwZV0gfHwgW107XG5cbiAgICBpZiAoIXBsdWdpbklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgcGx1Z2luIG11c3QgaGF2ZSBhbiBpZCcpO1xuICAgIH1cblxuICAgIGlmICghcGx1Z2luLnR5cGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWW91ciBwbHVnaW4gbXVzdCBoYXZlIGEgdHlwZScpO1xuICAgIH1cblxuICAgIHZhciBleGlzdHNQbHVnaW5BbHJlYWR5ID0gdGhpcy5nZXRQbHVnaW4ocGx1Z2luSWQpO1xuICAgIGlmIChleGlzdHNQbHVnaW5BbHJlYWR5KSB7XG4gICAgICB2YXIgX21zZyA9ICdBbHJlYWR5IGZvdW5kIGEgcGx1Z2luIG5hbWVkIFxcJycgKyBleGlzdHNQbHVnaW5BbHJlYWR5LmlkICsgJ1xcJy4gJyArICgnVHJpZWQgdG8gdXNlOiBcXCcnICsgcGx1Z2luSWQgKyAnXFwnLlxcbicpICsgJ1VwcHkgcGx1Z2lucyBtdXN0IGhhdmUgdW5pcXVlIFxcJ2lkXFwnIG9wdGlvbnMuIFNlZSBodHRwczovL3VwcHkuaW8vZG9jcy9wbHVnaW5zLyNpZC4nO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKF9tc2cpO1xuICAgIH1cblxuICAgIHRoaXMucGx1Z2luc1twbHVnaW4udHlwZV0ucHVzaChwbHVnaW4pO1xuICAgIHBsdWdpbi5pbnN0YWxsKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogRmluZCBvbmUgUGx1Z2luIGJ5IG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIGRlc2NyaXB0aW9uXG4gICAqIEByZXR1cm4ge29iamVjdCB8IGJvb2xlYW59XG4gICAqL1xuXG5cbiAgVXBweS5wcm90b3R5cGUuZ2V0UGx1Z2luID0gZnVuY3Rpb24gZ2V0UGx1Z2luKG5hbWUpIHtcbiAgICB2YXIgZm91bmRQbHVnaW4gPSBudWxsO1xuICAgIHRoaXMuaXRlcmF0ZVBsdWdpbnMoZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgdmFyIHBsdWdpbk5hbWUgPSBwbHVnaW4uaWQ7XG4gICAgICBpZiAocGx1Z2luTmFtZSA9PT0gbmFtZSkge1xuICAgICAgICBmb3VuZFBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBmb3VuZFBsdWdpbjtcbiAgfTtcblxuICAvKipcbiAgICogSXRlcmF0ZSB0aHJvdWdoIGFsbCBgdXNlYGQgcGx1Z2lucy5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWV0aG9kIHRoYXQgd2lsbCBiZSBydW4gb24gZWFjaCBwbHVnaW5cbiAgICovXG5cblxuICBVcHB5LnByb3RvdHlwZS5pdGVyYXRlUGx1Z2lucyA9IGZ1bmN0aW9uIGl0ZXJhdGVQbHVnaW5zKG1ldGhvZCkge1xuICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgT2JqZWN0LmtleXModGhpcy5wbHVnaW5zKS5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW5UeXBlKSB7XG4gICAgICBfdGhpczYucGx1Z2luc1twbHVnaW5UeXBlXS5mb3JFYWNoKG1ldGhvZCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVuaW5zdGFsbCBhbmQgcmVtb3ZlIGEgcGx1Z2luLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5zdGFuY2UgVGhlIHBsdWdpbiBpbnN0YW5jZSB0byByZW1vdmUuXG4gICAqL1xuXG5cbiAgVXBweS5wcm90b3R5cGUucmVtb3ZlUGx1Z2luID0gZnVuY3Rpb24gcmVtb3ZlUGx1Z2luKGluc3RhbmNlKSB7XG4gICAgdGhpcy5sb2coJ1JlbW92aW5nIHBsdWdpbiAnICsgaW5zdGFuY2UuaWQpO1xuICAgIHRoaXMuZW1pdCgncGx1Z2luLXJlbW92ZScsIGluc3RhbmNlKTtcblxuICAgIGlmIChpbnN0YW5jZS51bmluc3RhbGwpIHtcbiAgICAgIGluc3RhbmNlLnVuaW5zdGFsbCgpO1xuICAgIH1cblxuICAgIHZhciBsaXN0ID0gdGhpcy5wbHVnaW5zW2luc3RhbmNlLnR5cGVdLnNsaWNlKCk7XG4gICAgdmFyIGluZGV4ID0gbGlzdC5pbmRleE9mKGluc3RhbmNlKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBsaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICB0aGlzLnBsdWdpbnNbaW5zdGFuY2UudHlwZV0gPSBsaXN0O1xuICAgIH1cblxuICAgIHZhciB1cGRhdGVkU3RhdGUgPSB0aGlzLmdldFN0YXRlKCk7XG4gICAgZGVsZXRlIHVwZGF0ZWRTdGF0ZS5wbHVnaW5zW2luc3RhbmNlLmlkXTtcbiAgICB0aGlzLnNldFN0YXRlKHVwZGF0ZWRTdGF0ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVuaW5zdGFsbCBhbGwgcGx1Z2lucyBhbmQgY2xvc2UgZG93biB0aGlzIFVwcHkgaW5zdGFuY2UuXG4gICAqL1xuXG5cbiAgVXBweS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgIHRoaXMubG9nKCdDbG9zaW5nIFVwcHkgaW5zdGFuY2UgJyArIHRoaXMub3B0cy5pZCArICc6IHJlbW92aW5nIGFsbCBmaWxlcyBhbmQgdW5pbnN0YWxsaW5nIHBsdWdpbnMnKTtcblxuICAgIHRoaXMucmVzZXQoKTtcblxuICAgIHRoaXMuX3N0b3JlVW5zdWJzY3JpYmUoKTtcblxuICAgIHRoaXMuaXRlcmF0ZVBsdWdpbnMoZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgX3RoaXM3LnJlbW92ZVBsdWdpbihwbHVnaW4pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAqIFNldCBpbmZvIG1lc3NhZ2UgaW4gYHN0YXRlLmluZm9gLCBzbyB0aGF0IFVJIHBsdWdpbnMgbGlrZSBgSW5mb3JtZXJgXG4gICogY2FuIGRpc3BsYXkgdGhlIG1lc3NhZ2UuXG4gICpcbiAgKiBAcGFyYW0ge3N0cmluZyB8IG9iamVjdH0gbWVzc2FnZSBNZXNzYWdlIHRvIGJlIGRpc3BsYXllZCBieSB0aGUgaW5mb3JtZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVdXG4gICogQHBhcmFtIHtudW1iZXJ9IFtkdXJhdGlvbl1cbiAgKi9cblxuICBVcHB5LnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gaW5mbyhtZXNzYWdlKSB7XG4gICAgdmFyIHR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdpbmZvJztcbiAgICB2YXIgZHVyYXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDMwMDA7XG5cbiAgICB2YXIgaXNDb21wbGV4TWVzc2FnZSA9ICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YobWVzc2FnZSkpID09PSAnb2JqZWN0JztcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaW5mbzoge1xuICAgICAgICBpc0hpZGRlbjogZmFsc2UsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIG1lc3NhZ2U6IGlzQ29tcGxleE1lc3NhZ2UgPyBtZXNzYWdlLm1lc3NhZ2UgOiBtZXNzYWdlLFxuICAgICAgICBkZXRhaWxzOiBpc0NvbXBsZXhNZXNzYWdlID8gbWVzc2FnZS5kZXRhaWxzIDogbnVsbFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5lbWl0KCdpbmZvLXZpc2libGUnKTtcblxuICAgIGNsZWFyVGltZW91dCh0aGlzLmluZm9UaW1lb3V0SUQpO1xuICAgIGlmIChkdXJhdGlvbiA9PT0gMCkge1xuICAgICAgdGhpcy5pbmZvVGltZW91dElEID0gdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGhpZGUgdGhlIGluZm9ybWVyIGFmdGVyIGBkdXJhdGlvbmAgbWlsbGlzZWNvbmRzXG4gICAgdGhpcy5pbmZvVGltZW91dElEID0gc2V0VGltZW91dCh0aGlzLmhpZGVJbmZvLCBkdXJhdGlvbik7XG4gIH07XG5cbiAgVXBweS5wcm90b3R5cGUuaGlkZUluZm8gPSBmdW5jdGlvbiBoaWRlSW5mbygpIHtcbiAgICB2YXIgbmV3SW5mbyA9IF9leHRlbmRzKHt9LCB0aGlzLmdldFN0YXRlKCkuaW5mbywge1xuICAgICAgaXNIaWRkZW46IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGluZm86IG5ld0luZm9cbiAgICB9KTtcbiAgICB0aGlzLmVtaXQoJ2luZm8taGlkZGVuJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIExvZ3Mgc3R1ZmYgdG8gY29uc29sZSwgb25seSBpZiBgZGVidWdgIGlzIHNldCB0byB0cnVlLiBTaWxlbnQgaW4gcHJvZHVjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBtc2cgdG8gbG9nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbdHlwZV0gb3B0aW9uYWwgYGVycm9yYCBvciBgd2FybmluZ2BcbiAgICovXG5cblxuICBVcHB5LnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiBsb2cobXNnLCB0eXBlKSB7XG4gICAgaWYgKCF0aGlzLm9wdHMuZGVidWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbWVzc2FnZSA9ICdbVXBweV0gWycgKyBnZXRUaW1lU3RhbXAoKSArICddICcgKyBtc2c7XG5cbiAgICB3aW5kb3dbJ3VwcHlMb2cnXSA9IHdpbmRvd1sndXBweUxvZyddICsgJ1xcbicgKyAnREVCVUcgTE9HOiAnICsgbXNnO1xuXG4gICAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09ICd3YXJuaW5nJykge1xuICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChtc2cgPT09ICcnICsgbXNnKSB7XG4gICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZSA9ICdbVXBweV0gWycgKyBnZXRUaW1lU3RhbXAoKSArICddJztcbiAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgY29uc29sZS5kaXIobXNnKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIE9ic29sZXRlLCBldmVudCBsaXN0ZW5lcnMgYXJlIG5vdyBhZGRlZCBpbiB0aGUgY29uc3RydWN0b3IuXG4gICAqL1xuXG5cbiAgVXBweS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gcnVuKCkge1xuICAgIHRoaXMubG9nKCdDYWxsaW5nIHJ1bigpIGlzIG5vIGxvbmdlciBuZWNlc3NhcnkuJywgJ3dhcm5pbmcnKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVzdG9yZSBhbiB1cGxvYWQgYnkgaXRzIElELlxuICAgKi9cblxuXG4gIFVwcHkucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbiByZXN0b3JlKHVwbG9hZElEKSB7XG4gICAgdGhpcy5sb2coJ0NvcmU6IGF0dGVtcHRpbmcgdG8gcmVzdG9yZSB1cGxvYWQgXCInICsgdXBsb2FkSUQgKyAnXCInKTtcblxuICAgIGlmICghdGhpcy5nZXRTdGF0ZSgpLmN1cnJlbnRVcGxvYWRzW3VwbG9hZElEXSkge1xuICAgICAgdGhpcy5fcmVtb3ZlVXBsb2FkKHVwbG9hZElEKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ05vbmV4aXN0ZW50IHVwbG9hZCcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcnVuVXBsb2FkKHVwbG9hZElEKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuIHVwbG9hZCBmb3IgYSBidW5jaCBvZiBmaWxlcy5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBmaWxlSURzIEZpbGUgSURzIHRvIGluY2x1ZGUgaW4gdGhpcyB1cGxvYWQuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gSUQgb2YgdGhpcyB1cGxvYWQuXG4gICAqL1xuXG5cbiAgVXBweS5wcm90b3R5cGUuX2NyZWF0ZVVwbG9hZCA9IGZ1bmN0aW9uIF9jcmVhdGVVcGxvYWQoZmlsZUlEcykge1xuICAgIHZhciBfZXh0ZW5kczQ7XG5cbiAgICB2YXIgdXBsb2FkSUQgPSBjdWlkKCk7XG5cbiAgICB0aGlzLmVtaXQoJ3VwbG9hZCcsIHtcbiAgICAgIGlkOiB1cGxvYWRJRCxcbiAgICAgIGZpbGVJRHM6IGZpbGVJRHNcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgY3VycmVudFVwbG9hZHM6IF9leHRlbmRzKHt9LCB0aGlzLmdldFN0YXRlKCkuY3VycmVudFVwbG9hZHMsIChfZXh0ZW5kczQgPSB7fSwgX2V4dGVuZHM0W3VwbG9hZElEXSA9IHtcbiAgICAgICAgZmlsZUlEczogZmlsZUlEcyxcbiAgICAgICAgc3RlcDogMCxcbiAgICAgICAgcmVzdWx0OiB7fVxuICAgICAgfSwgX2V4dGVuZHM0KSlcbiAgICB9KTtcblxuICAgIHJldHVybiB1cGxvYWRJRDtcbiAgfTtcblxuICBVcHB5LnByb3RvdHlwZS5fZ2V0VXBsb2FkID0gZnVuY3Rpb24gX2dldFVwbG9hZCh1cGxvYWRJRCkge1xuICAgIHJldHVybiB0aGlzLmdldFN0YXRlKCkuY3VycmVudFVwbG9hZHNbdXBsb2FkSURdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgZGF0YSB0byBhbiB1cGxvYWQncyByZXN1bHQgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXBsb2FkSUQgVGhlIElEIG9mIHRoZSB1cGxvYWQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIERhdGEgcHJvcGVydGllcyB0byBhZGQgdG8gdGhlIHJlc3VsdCBvYmplY3QuXG4gICAqL1xuXG5cbiAgVXBweS5wcm90b3R5cGUuYWRkUmVzdWx0RGF0YSA9IGZ1bmN0aW9uIGFkZFJlc3VsdERhdGEodXBsb2FkSUQsIGRhdGEpIHtcbiAgICB2YXIgX2V4dGVuZHM1O1xuXG4gICAgaWYgKCF0aGlzLl9nZXRVcGxvYWQodXBsb2FkSUQpKSB7XG4gICAgICB0aGlzLmxvZygnTm90IHNldHRpbmcgcmVzdWx0IGZvciBhbiB1cGxvYWQgdGhhdCBoYXMgYmVlbiByZW1vdmVkOiAnICsgdXBsb2FkSUQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY3VycmVudFVwbG9hZHMgPSB0aGlzLmdldFN0YXRlKCkuY3VycmVudFVwbG9hZHM7XG4gICAgdmFyIGN1cnJlbnRVcGxvYWQgPSBfZXh0ZW5kcyh7fSwgY3VycmVudFVwbG9hZHNbdXBsb2FkSURdLCB7XG4gICAgICByZXN1bHQ6IF9leHRlbmRzKHt9LCBjdXJyZW50VXBsb2Fkc1t1cGxvYWRJRF0ucmVzdWx0LCBkYXRhKVxuICAgIH0pO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgY3VycmVudFVwbG9hZHM6IF9leHRlbmRzKHt9LCBjdXJyZW50VXBsb2FkcywgKF9leHRlbmRzNSA9IHt9LCBfZXh0ZW5kczVbdXBsb2FkSURdID0gY3VycmVudFVwbG9hZCwgX2V4dGVuZHM1KSlcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGFuIHVwbG9hZCwgZWcuIGlmIGl0IGhhcyBiZWVuIGNhbmNlbGVkIG9yIGNvbXBsZXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVwbG9hZElEIFRoZSBJRCBvZiB0aGUgdXBsb2FkLlxuICAgKi9cblxuXG4gIFVwcHkucHJvdG90eXBlLl9yZW1vdmVVcGxvYWQgPSBmdW5jdGlvbiBfcmVtb3ZlVXBsb2FkKHVwbG9hZElEKSB7XG4gICAgdmFyIGN1cnJlbnRVcGxvYWRzID0gX2V4dGVuZHMoe30sIHRoaXMuZ2V0U3RhdGUoKS5jdXJyZW50VXBsb2Fkcyk7XG4gICAgZGVsZXRlIGN1cnJlbnRVcGxvYWRzW3VwbG9hZElEXTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgY3VycmVudFVwbG9hZHM6IGN1cnJlbnRVcGxvYWRzXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJ1biBhbiB1cGxvYWQuIFRoaXMgcGlja3MgdXAgd2hlcmUgaXQgbGVmdCBvZmYgaW4gY2FzZSB0aGUgdXBsb2FkIGlzIGJlaW5nIHJlc3RvcmVkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIFVwcHkucHJvdG90eXBlLl9ydW5VcGxvYWQgPSBmdW5jdGlvbiBfcnVuVXBsb2FkKHVwbG9hZElEKSB7XG4gICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICB2YXIgdXBsb2FkRGF0YSA9IHRoaXMuZ2V0U3RhdGUoKS5jdXJyZW50VXBsb2Fkc1t1cGxvYWRJRF07XG4gICAgdmFyIGZpbGVJRHMgPSB1cGxvYWREYXRhLmZpbGVJRHM7XG4gICAgdmFyIHJlc3RvcmVTdGVwID0gdXBsb2FkRGF0YS5zdGVwO1xuXG4gICAgdmFyIHN0ZXBzID0gW10uY29uY2F0KHRoaXMucHJlUHJvY2Vzc29ycywgdGhpcy51cGxvYWRlcnMsIHRoaXMucG9zdFByb2Nlc3NvcnMpO1xuICAgIHZhciBsYXN0U3RlcCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIHN0ZXBzLmZvckVhY2goZnVuY3Rpb24gKGZuLCBzdGVwKSB7XG4gICAgICAvLyBTa2lwIHRoaXMgc3RlcCBpZiB3ZSBhcmUgcmVzdG9yaW5nIGFuZCBoYXZlIGFscmVhZHkgY29tcGxldGVkIHRoaXMgc3RlcCBiZWZvcmUuXG4gICAgICBpZiAoc3RlcCA8IHJlc3RvcmVTdGVwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGFzdFN0ZXAgPSBsYXN0U3RlcC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9leHRlbmRzNjtcblxuICAgICAgICB2YXIgX2dldFN0YXRlNSA9IF90aGlzOC5nZXRTdGF0ZSgpLFxuICAgICAgICAgICAgY3VycmVudFVwbG9hZHMgPSBfZ2V0U3RhdGU1LmN1cnJlbnRVcGxvYWRzO1xuXG4gICAgICAgIHZhciBjdXJyZW50VXBsb2FkID0gX2V4dGVuZHMoe30sIGN1cnJlbnRVcGxvYWRzW3VwbG9hZElEXSwge1xuICAgICAgICAgIHN0ZXA6IHN0ZXBcbiAgICAgICAgfSk7XG4gICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgY3VycmVudFVwbG9hZHM6IF9leHRlbmRzKHt9LCBjdXJyZW50VXBsb2FkcywgKF9leHRlbmRzNiA9IHt9LCBfZXh0ZW5kczZbdXBsb2FkSURdID0gY3VycmVudFVwbG9hZCwgX2V4dGVuZHM2KSlcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRPRE8gZ2l2ZSB0aGlzIHRoZSBgY3VycmVudFVwbG9hZGAgb2JqZWN0IGFzIGl0cyBvbmx5IHBhcmFtZXRlciBtYXliZT9cbiAgICAgICAgLy8gT3RoZXJ3aXNlIHdoZW4gbW9yZSBtZXRhZGF0YSBtYXkgYmUgYWRkZWQgdG8gdGhlIHVwbG9hZCB0aGlzIHdvdWxkIGtlZXAgZ2V0dGluZyBtb3JlIHBhcmFtZXRlcnNcbiAgICAgICAgcmV0dXJuIGZuKGZpbGVJRHMsIHVwbG9hZElEKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gTm90IHJldHVybmluZyB0aGUgYGNhdGNoYGVkIHByb21pc2UsIGJlY2F1c2Ugd2Ugc3RpbGwgd2FudCB0byByZXR1cm4gYSByZWplY3RlZFxuICAgIC8vIHByb21pc2UgZnJvbSB0aGlzIG1ldGhvZCBpZiB0aGUgdXBsb2FkIGZhaWxlZC5cbiAgICBsYXN0U3RlcC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBfdGhpczguZW1pdCgnZXJyb3InLCBlcnIsIHVwbG9hZElEKTtcblxuICAgICAgX3RoaXM4Ll9yZW1vdmVVcGxvYWQodXBsb2FkSUQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxhc3RTdGVwLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGZpbGVzID0gZmlsZUlEcy5tYXAoZnVuY3Rpb24gKGZpbGVJRCkge1xuICAgICAgICByZXR1cm4gX3RoaXM4LmdldEZpbGUoZmlsZUlEKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIHN1Y2Nlc3NmdWwgPSBmaWxlcy5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgcmV0dXJuIGZpbGUgJiYgIWZpbGUuZXJyb3I7XG4gICAgICB9KTtcbiAgICAgIHZhciBmYWlsZWQgPSBmaWxlcy5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgcmV0dXJuIGZpbGUgJiYgZmlsZS5lcnJvcjtcbiAgICAgIH0pO1xuICAgICAgX3RoaXM4LmFkZFJlc3VsdERhdGEodXBsb2FkSUQsIHsgc3VjY2Vzc2Z1bDogc3VjY2Vzc2Z1bCwgZmFpbGVkOiBmYWlsZWQsIHVwbG9hZElEOiB1cGxvYWRJRCB9KTtcblxuICAgICAgdmFyIF9nZXRTdGF0ZTYgPSBfdGhpczguZ2V0U3RhdGUoKSxcbiAgICAgICAgICBjdXJyZW50VXBsb2FkcyA9IF9nZXRTdGF0ZTYuY3VycmVudFVwbG9hZHM7XG5cbiAgICAgIGlmICghY3VycmVudFVwbG9hZHNbdXBsb2FkSURdKSB7XG4gICAgICAgIF90aGlzOC5sb2coJ05vdCBzZXR0aW5nIHJlc3VsdCBmb3IgYW4gdXBsb2FkIHRoYXQgaGFzIGJlZW4gcmVtb3ZlZDogJyArIHVwbG9hZElEKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVzdWx0ID0gY3VycmVudFVwbG9hZHNbdXBsb2FkSURdLnJlc3VsdDtcbiAgICAgIF90aGlzOC5lbWl0KCdjb21wbGV0ZScsIHJlc3VsdCk7XG5cbiAgICAgIF90aGlzOC5fcmVtb3ZlVXBsb2FkKHVwbG9hZElEKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogU3RhcnQgYW4gdXBsb2FkIGZvciBhbGwgdGhlIGZpbGVzIHRoYXQgYXJlIG5vdCBjdXJyZW50bHkgYmVpbmcgdXBsb2FkZWQuXG4gICAqXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuXG5cbiAgVXBweS5wcm90b3R5cGUudXBsb2FkID0gZnVuY3Rpb24gdXBsb2FkKCkge1xuICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgaWYgKCF0aGlzLnBsdWdpbnMudXBsb2FkZXIpIHtcbiAgICAgIHRoaXMubG9nKCdObyB1cGxvYWRlciB0eXBlIHBsdWdpbnMgYXJlIHVzZWQnLCAnd2FybmluZycpO1xuICAgIH1cblxuICAgIHZhciBmaWxlcyA9IHRoaXMuZ2V0U3RhdGUoKS5maWxlcztcbiAgICB2YXIgb25CZWZvcmVVcGxvYWRSZXN1bHQgPSB0aGlzLm9wdHMub25CZWZvcmVVcGxvYWQoZmlsZXMpO1xuXG4gICAgaWYgKG9uQmVmb3JlVXBsb2FkUmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignTm90IHN0YXJ0aW5nIHRoZSB1cGxvYWQgYmVjYXVzZSBvbkJlZm9yZVVwbG9hZCByZXR1cm5lZCBmYWxzZScpKTtcbiAgICB9XG5cbiAgICBpZiAob25CZWZvcmVVcGxvYWRSZXN1bHQgJiYgKHR5cGVvZiBvbkJlZm9yZVVwbG9hZFJlc3VsdCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yob25CZWZvcmVVcGxvYWRSZXN1bHQpKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIC8vIHdhcm5pbmcgYWZ0ZXIgdGhlIGNoYW5nZSBpbiAwLjI0XG4gICAgICBpZiAob25CZWZvcmVVcGxvYWRSZXN1bHQudGhlbikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvbkJlZm9yZVVwbG9hZCgpIHJldHVybmVkIGEgUHJvbWlzZSwgYnV0IHRoaXMgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gSXQgbXVzdCBiZSBzeW5jaHJvbm91cy4nKTtcbiAgICAgIH1cblxuICAgICAgZmlsZXMgPSBvbkJlZm9yZVVwbG9hZFJlc3VsdDtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXM5Ll9jaGVja01pbk51bWJlck9mRmlsZXMoZmlsZXMpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9nZXRTdGF0ZTcgPSBfdGhpczkuZ2V0U3RhdGUoKSxcbiAgICAgICAgICBjdXJyZW50VXBsb2FkcyA9IF9nZXRTdGF0ZTcuY3VycmVudFVwbG9hZHM7XG4gICAgICAvLyBnZXQgYSBsaXN0IG9mIGZpbGVzIHRoYXQgYXJlIGN1cnJlbnRseSBhc3NpZ25lZCB0byB1cGxvYWRzXG5cblxuICAgICAgdmFyIGN1cnJlbnRseVVwbG9hZGluZ0ZpbGVzID0gT2JqZWN0LmtleXMoY3VycmVudFVwbG9hZHMpLnJlZHVjZShmdW5jdGlvbiAocHJldiwgY3Vycikge1xuICAgICAgICByZXR1cm4gcHJldi5jb25jYXQoY3VycmVudFVwbG9hZHNbY3Vycl0uZmlsZUlEcyk7XG4gICAgICB9LCBbXSk7XG5cbiAgICAgIHZhciB3YWl0aW5nRmlsZUlEcyA9IFtdO1xuICAgICAgT2JqZWN0LmtleXMoZmlsZXMpLmZvckVhY2goZnVuY3Rpb24gKGZpbGVJRCkge1xuICAgICAgICB2YXIgZmlsZSA9IF90aGlzOS5nZXRGaWxlKGZpbGVJRCk7XG4gICAgICAgIC8vIGlmIHRoZSBmaWxlIGhhc24ndCBzdGFydGVkIHVwbG9hZGluZyBhbmQgaGFzbid0IGFscmVhZHkgYmVlbiBhc3NpZ25lZCB0byBhbiB1cGxvYWQuLlxuICAgICAgICBpZiAoIWZpbGUucHJvZ3Jlc3MudXBsb2FkU3RhcnRlZCAmJiBjdXJyZW50bHlVcGxvYWRpbmdGaWxlcy5pbmRleE9mKGZpbGVJRCkgPT09IC0xKSB7XG4gICAgICAgICAgd2FpdGluZ0ZpbGVJRHMucHVzaChmaWxlLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHZhciB1cGxvYWRJRCA9IF90aGlzOS5fY3JlYXRlVXBsb2FkKHdhaXRpbmdGaWxlSURzKTtcbiAgICAgIHJldHVybiBfdGhpczkuX3J1blVwbG9hZCh1cGxvYWRJRCk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgdmFyIG1lc3NhZ2UgPSAodHlwZW9mIGVyciA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZXJyKSkgPT09ICdvYmplY3QnID8gZXJyLm1lc3NhZ2UgOiBlcnI7XG4gICAgICB2YXIgZGV0YWlscyA9ICh0eXBlb2YgZXJyID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihlcnIpKSA9PT0gJ29iamVjdCcgPyBlcnIuZGV0YWlscyA6IG51bGw7XG4gICAgICBfdGhpczkubG9nKG1lc3NhZ2UgKyAnICcgKyBkZXRhaWxzKTtcbiAgICAgIF90aGlzOS5pbmZvKHsgbWVzc2FnZTogbWVzc2FnZSwgZGV0YWlsczogZGV0YWlscyB9LCAnZXJyb3InLCA0MDAwKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgodHlwZW9mIGVyciA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZXJyKSkgPT09ICdvYmplY3QnID8gZXJyIDogbmV3IEVycm9yKGVycikpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhVcHB5LCBbe1xuICAgIGtleTogJ3N0YXRlJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFN0YXRlKCk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFVwcHk7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgcmV0dXJuIG5ldyBVcHB5KG9wdHMpO1xufTtcblxuLy8gRXhwb3NlIGNsYXNzIGNvbnN0cnVjdG9yLlxubW9kdWxlLmV4cG9ydHMuVXBweSA9IFVwcHk7XG5tb2R1bGUuZXhwb3J0cy5QbHVnaW4gPSBQbHVnaW47IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUuaCxcbiAgICBDb21wb25lbnQgPSBfcmVxdWlyZS5Db21wb25lbnQ7XG5cbnZhciBBY3Rpb25Ccm93c2VUYWdsaW5lID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEFjdGlvbkJyb3dzZVRhZ2xpbmUsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEFjdGlvbkJyb3dzZVRhZ2xpbmUocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWN0aW9uQnJvd3NlVGFnbGluZSk7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgQWN0aW9uQnJvd3NlVGFnbGluZS5wcm90b3R5cGUuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldikge1xuICAgIHRoaXMuaW5wdXQuY2xpY2soKTtcbiAgfTtcblxuICBBY3Rpb25Ccm93c2VUYWdsaW5lLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgYnJvd3NlID0gaChcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICB7IHR5cGU6IFwiYnV0dG9uXCIsIFwiY2xhc3NcIjogXCJ1cHB5LURhc2hib2FyZC1icm93c2VcIiwgb25jbGljazogdGhpcy5oYW5kbGVDbGljayB9LFxuICAgICAgdGhpcy5wcm9wcy5pMThuKCdicm93c2UnKVxuICAgICk7XG5cbiAgICAvLyBlbXB0eSB2YWx1ZT1cIlwiIG9uIGZpbGUgaW5wdXQsIHNvIHRoYXQgdGhlIGlucHV0IGlzIGNsZWFyZWQgYWZ0ZXIgYSBmaWxlIGlzIHNlbGVjdGVkLFxuICAgIC8vIGJlY2F1c2UgVXBweSB3aWxsIGJlIGhhbmRsaW5nIHRoZSB1cGxvYWQgYW5kIHNvIHdlIGNhbiBzZWxlY3Qgc2FtZSBmaWxlXG4gICAgLy8gYWZ0ZXIgcmVtb3Zpbmcg4oCUIG90aGVyd2lzZSBicm93c2VyIHRoaW5rcyBpdOKAmXMgYWxyZWFkeSBzZWxlY3RlZFxuICAgIHJldHVybiBoKFxuICAgICAgXCJzcGFuXCIsXG4gICAgICBudWxsLFxuICAgICAgdGhpcy5wcm9wcy5hY3F1aXJlcnMubGVuZ3RoID09PSAwID8gdGhpcy5wcm9wcy5pMThuQXJyYXkoJ2Ryb3BQYXN0ZScsIHsgYnJvd3NlOiBicm93c2UgfSkgOiB0aGlzLnByb3BzLmkxOG5BcnJheSgnZHJvcFBhc3RlSW1wb3J0JywgeyBicm93c2U6IGJyb3dzZSB9KSxcbiAgICAgIGgoXCJpbnB1dFwiLCB7IFwiY2xhc3NcIjogXCJ1cHB5LURhc2hib2FyZC1pbnB1dFwiLFxuICAgICAgICBoaWRkZW46IHRydWUsXG4gICAgICAgIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsXG4gICAgICAgIHRhYmluZGV4OiAtMSxcbiAgICAgICAgdHlwZTogXCJmaWxlXCIsXG4gICAgICAgIG5hbWU6IFwiZmlsZXNbXVwiLFxuICAgICAgICBtdWx0aXBsZTogdGhpcy5wcm9wcy5tYXhOdW1iZXJPZkZpbGVzICE9PSAxLFxuICAgICAgICBvbmNoYW5nZTogdGhpcy5wcm9wcy5oYW5kbGVJbnB1dENoYW5nZSxcbiAgICAgICAgYWNjZXB0OiB0aGlzLnByb3BzLmFsbG93ZWRGaWxlVHlwZXMsXG4gICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgIF90aGlzMi5pbnB1dCA9IGlucHV0O1xuICAgICAgICB9IH0pXG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gQWN0aW9uQnJvd3NlVGFnbGluZTtcbn0oQ29tcG9uZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBY3Rpb25Ccm93c2VUYWdsaW5lOyIsInZhciBGaWxlTGlzdCA9IHJlcXVpcmUoJy4vRmlsZUxpc3QnKTtcbnZhciBUYWJzID0gcmVxdWlyZSgnLi9UYWJzJyk7XG52YXIgRmlsZUNhcmQgPSByZXF1aXJlKCcuL0ZpbGVDYXJkJyk7XG52YXIgY2xhc3NOYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcbnZhciBpc1RvdWNoRGV2aWNlID0gcmVxdWlyZSgnQHVwcHkvdXRpbHMvbGliL2lzVG91Y2hEZXZpY2UnKTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlLmg7XG5cbi8vIGh0dHA6Ly9kZXYuZWRlbnNwaWVrZXJtYW5uLmNvbS8yMDE2LzAyLzExL2ludHJvZHVjaW5nLWFjY2Vzc2libGUtbW9kYWwtZGlhbG9nXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZ2hvc2gvbWljcm9tb2RhbFxuXG52YXIgUGFuZWxDb250ZW50ID0gZnVuY3Rpb24gUGFuZWxDb250ZW50KHByb3BzKSB7XG4gIHJldHVybiBoKFxuICAgICdkaXYnLFxuICAgIHsgc3R5bGU6IHsgd2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAnMTAwJScgfSB9LFxuICAgIGgoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkQ29udGVudC1iYXInIH0sXG4gICAgICBoKFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRDb250ZW50LXRpdGxlJywgcm9sZTogJ2hlYWRpbmcnLCAnYXJpYS1sZXZlbCc6ICdoMScgfSxcbiAgICAgICAgcHJvcHMuaTE4bignaW1wb3J0RnJvbScsIHsgbmFtZTogcHJvcHMuYWN0aXZlUGFuZWwubmFtZSB9KVxuICAgICAgKSxcbiAgICAgIGgoXG4gICAgICAgICdidXR0b24nLFxuICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZENvbnRlbnQtYmFjaycsXG4gICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgb25jbGljazogcHJvcHMuaGlkZUFsbFBhbmVscyB9LFxuICAgICAgICBwcm9wcy5pMThuKCdkb25lJylcbiAgICAgIClcbiAgICApLFxuICAgIHByb3BzLmdldFBsdWdpbihwcm9wcy5hY3RpdmVQYW5lbC5pZCkucmVuZGVyKHByb3BzLnN0YXRlKVxuICApO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBEYXNoYm9hcmQocHJvcHMpIHtcbiAgdmFyIGRhc2hib2FyZENsYXNzTmFtZSA9IGNsYXNzTmFtZXMoeyAndXBweS1Sb290JzogcHJvcHMuaXNUYXJnZXRET01FbCB9LCAndXBweS1EYXNoYm9hcmQnLCB7ICdVcHB5LS1pc1RvdWNoRGV2aWNlJzogaXNUb3VjaERldmljZSgpIH0sIHsgJ3VwcHktRGFzaGJvYXJkLS1hbmltYXRlT3BlbkNsb3NlJzogcHJvcHMuYW5pbWF0ZU9wZW5DbG9zZSB9LCB7ICd1cHB5LURhc2hib2FyZC0taXNDbG9zaW5nJzogcHJvcHMuaXNDbG9zaW5nIH0sIHsgJ3VwcHktRGFzaGJvYXJkLS1tb2RhbCc6ICFwcm9wcy5pbmxpbmUgfSwgeyAndXBweS1EYXNoYm9hcmQtLXdpZGUnOiBwcm9wcy5pc1dpZGUgfSk7XG5cbiAgcmV0dXJuIGgoXG4gICAgJ2RpdicsXG4gICAgeyAnY2xhc3MnOiBkYXNoYm9hcmRDbGFzc05hbWUsXG4gICAgICAnYXJpYS1oaWRkZW4nOiBwcm9wcy5pbmxpbmUgPyAnZmFsc2UnIDogcHJvcHMubW9kYWwuaXNIaWRkZW4sXG4gICAgICAnYXJpYS1sYWJlbCc6ICFwcm9wcy5pbmxpbmUgPyBwcm9wcy5pMThuKCdkYXNoYm9hcmRXaW5kb3dUaXRsZScpIDogcHJvcHMuaTE4bignZGFzaGJvYXJkVGl0bGUnKSxcbiAgICAgIG9ucGFzdGU6IHByb3BzLmhhbmRsZVBhc3RlIH0sXG4gICAgaCgnZGl2JywgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmQtb3ZlcmxheScsIHRhYmluZGV4OiAtMSwgb25jbGljazogcHJvcHMuaGFuZGxlQ2xpY2tPdXRzaWRlIH0pLFxuICAgIGgoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkLWlubmVyJyxcbiAgICAgICAgJ2FyaWEtbW9kYWwnOiAhcHJvcHMuaW5saW5lICYmICd0cnVlJyxcbiAgICAgICAgcm9sZTogIXByb3BzLmlubGluZSAmJiAnZGlhbG9nJyxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICB3aWR0aDogcHJvcHMuaW5saW5lICYmIHByb3BzLndpZHRoID8gcHJvcHMud2lkdGggOiAnJyxcbiAgICAgICAgICBoZWlnaHQ6IHByb3BzLmlubGluZSAmJiBwcm9wcy5oZWlnaHQgPyBwcm9wcy5oZWlnaHQgOiAnJ1xuICAgICAgICB9IH0sXG4gICAgICBoKFxuICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmQtY2xvc2UnLFxuICAgICAgICAgIHR5cGU6ICdidXR0b24nLFxuICAgICAgICAgICdhcmlhLWxhYmVsJzogcHJvcHMuaTE4bignY2xvc2VNb2RhbCcpLFxuICAgICAgICAgIHRpdGxlOiBwcm9wcy5pMThuKCdjbG9zZU1vZGFsJyksXG4gICAgICAgICAgb25jbGljazogcHJvcHMuY2xvc2VNb2RhbCB9LFxuICAgICAgICBoKFxuICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICB7ICdhcmlhLWhpZGRlbic6ICd0cnVlJyB9LFxuICAgICAgICAgICdcXHhENydcbiAgICAgICAgKVxuICAgICAgKSxcbiAgICAgIGgoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZC1pbm5lcldyYXAnIH0sXG4gICAgICAgIGgoVGFicywgcHJvcHMpLFxuICAgICAgICBoKEZpbGVDYXJkLCBwcm9wcyksXG4gICAgICAgIGgoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmQtZmlsZXNDb250YWluZXInIH0sXG4gICAgICAgICAgaChGaWxlTGlzdCwgcHJvcHMpXG4gICAgICAgICksXG4gICAgICAgIGgoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRDb250ZW50LXBhbmVsJyxcbiAgICAgICAgICAgIHJvbGU6ICd0YWJwYW5lbCcsXG4gICAgICAgICAgICBpZDogcHJvcHMuYWN0aXZlUGFuZWwgJiYgJ3VwcHktRGFzaGJvYXJkQ29udGVudC1wYW5lbC0tJyArIHByb3BzLmFjdGl2ZVBhbmVsLmlkLFxuICAgICAgICAgICAgJ2FyaWEtaGlkZGVuJzogcHJvcHMuYWN0aXZlUGFuZWwgPyAnZmFsc2UnIDogJ3RydWUnIH0sXG4gICAgICAgICAgcHJvcHMuYWN0aXZlUGFuZWwgJiYgaChQYW5lbENvbnRlbnQsIHByb3BzKVxuICAgICAgICApLFxuICAgICAgICBoKFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkLXByb2dyZXNzaW5kaWNhdG9ycycgfSxcbiAgICAgICAgICBwcm9wcy5wcm9ncmVzc2luZGljYXRvcnMubWFwKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5nZXRQbHVnaW4odGFyZ2V0LmlkKS5yZW5kZXIocHJvcHMuc3RhdGUpO1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gICk7XG59OyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIGdldEZpbGVUeXBlSWNvbiA9IHJlcXVpcmUoJy4vZ2V0RmlsZVR5cGVJY29uJyk7XG52YXIgRmlsZVByZXZpZXcgPSByZXF1aXJlKCcuL0ZpbGVQcmV2aWV3Jyk7XG5cbnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ3ByZWFjdCcpLFxuICAgIGggPSBfcmVxdWlyZS5oLFxuICAgIENvbXBvbmVudCA9IF9yZXF1aXJlLkNvbXBvbmVudDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoRmlsZUNhcmQsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEZpbGVDYXJkKHByb3BzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVDYXJkKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9Db21wb25lbnQuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMubWV0YSA9IHt9O1xuXG4gICAgX3RoaXMudGVtcFN0b3JlTWV0YU9yU3VibWl0ID0gX3RoaXMudGVtcFN0b3JlTWV0YU9yU3VibWl0LmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLnJlbmRlck1ldGFGaWVsZHMgPSBfdGhpcy5yZW5kZXJNZXRhRmllbGRzLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLmhhbmRsZVNhdmUgPSBfdGhpcy5oYW5kbGVTYXZlLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLmhhbmRsZUNhbmNlbCA9IF90aGlzLmhhbmRsZUNhbmNlbC5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBGaWxlQ2FyZC5wcm90b3R5cGUudGVtcFN0b3JlTWV0YU9yU3VibWl0ID0gZnVuY3Rpb24gdGVtcFN0b3JlTWV0YU9yU3VibWl0KGV2KSB7XG4gICAgdmFyIGZpbGUgPSB0aGlzLnByb3BzLmZpbGVzW3RoaXMucHJvcHMuZmlsZUNhcmRGb3JdO1xuXG4gICAgaWYgKGV2LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnByb3BzLnNhdmVGaWxlQ2FyZCh0aGlzLm1ldGEsIGZpbGUuaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IGV2LnRhcmdldC52YWx1ZTtcbiAgICB2YXIgbmFtZSA9IGV2LnRhcmdldC5kYXRhc2V0Lm5hbWU7XG4gICAgdGhpcy5tZXRhW25hbWVdID0gdmFsdWU7XG4gIH07XG5cbiAgRmlsZUNhcmQucHJvdG90eXBlLnJlbmRlck1ldGFGaWVsZHMgPSBmdW5jdGlvbiByZW5kZXJNZXRhRmllbGRzKGZpbGUpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBtZXRhRmllbGRzID0gdGhpcy5wcm9wcy5tZXRhRmllbGRzIHx8IFtdO1xuICAgIHJldHVybiBtZXRhRmllbGRzLm1hcChmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgIHJldHVybiBoKFxuICAgICAgICAnZmllbGRzZXQnLFxuICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZEZpbGVDYXJkLWZpZWxkc2V0JyB9LFxuICAgICAgICBoKFxuICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRGaWxlQ2FyZC1sYWJlbCcgfSxcbiAgICAgICAgICBmaWVsZC5uYW1lXG4gICAgICAgICksXG4gICAgICAgIGgoJ2lucHV0JywgeyAnY2xhc3MnOiAndXBweS1jLXRleHRJbnB1dCB1cHB5LURhc2hib2FyZEZpbGVDYXJkLWlucHV0JyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgJ2RhdGEtbmFtZSc6IGZpZWxkLmlkLFxuICAgICAgICAgIHZhbHVlOiBmaWxlLm1ldGFbZmllbGQuaWRdLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiBmaWVsZC5wbGFjZWhvbGRlcixcbiAgICAgICAgICBvbmtleXVwOiBfdGhpczIudGVtcFN0b3JlTWV0YU9yU3VibWl0LFxuICAgICAgICAgIG9ua2V5ZG93bjogX3RoaXMyLnRlbXBTdG9yZU1ldGFPclN1Ym1pdCxcbiAgICAgICAgICBvbmtleXByZXNzOiBfdGhpczIudGVtcFN0b3JlTWV0YU9yU3VibWl0IH0pXG4gICAgICApO1xuICAgIH0pO1xuICB9O1xuXG4gIEZpbGVDYXJkLnByb3RvdHlwZS5oYW5kbGVTYXZlID0gZnVuY3Rpb24gaGFuZGxlU2F2ZShldikge1xuICAgIHZhciBmaWxlSUQgPSB0aGlzLnByb3BzLmZpbGVDYXJkRm9yO1xuICAgIHRoaXMucHJvcHMuc2F2ZUZpbGVDYXJkKHRoaXMubWV0YSwgZmlsZUlEKTtcbiAgfTtcblxuICBGaWxlQ2FyZC5wcm90b3R5cGUuaGFuZGxlQ2FuY2VsID0gZnVuY3Rpb24gaGFuZGxlQ2FuY2VsKGV2KSB7XG4gICAgdGhpcy5tZXRhID0ge307XG4gICAgdGhpcy5wcm9wcy50b2dnbGVGaWxlQ2FyZCgpO1xuICB9O1xuXG4gIEZpbGVDYXJkLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmZpbGVDYXJkRm9yKSB7XG4gICAgICByZXR1cm4gaCgnZGl2JywgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRGaWxlQ2FyZCcsICdhcmlhLWhpZGRlbic6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgdmFyIGZpbGUgPSB0aGlzLnByb3BzLmZpbGVzW3RoaXMucHJvcHMuZmlsZUNhcmRGb3JdO1xuXG4gICAgcmV0dXJuIGgoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkRmlsZUNhcmQnLCAnYXJpYS1oaWRkZW4nOiAhdGhpcy5wcm9wcy5maWxlQ2FyZEZvciB9LFxuICAgICAgaChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgc3R5bGU6IHsgd2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAnMTAwJScgfSB9LFxuICAgICAgICBoKFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkQ29udGVudC1iYXInIH0sXG4gICAgICAgICAgaChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRDb250ZW50LXRpdGxlJywgcm9sZTogJ2hlYWRpbmcnLCAnYXJpYS1sZXZlbCc6ICdoMScgfSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaTE4bkFycmF5KCdlZGl0aW5nJywge1xuICAgICAgICAgICAgICBmaWxlOiBoKFxuICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZENvbnRlbnQtdGl0bGVGaWxlJyB9LFxuICAgICAgICAgICAgICAgIGZpbGUubWV0YSA/IGZpbGUubWV0YS5uYW1lIDogZmlsZS5uYW1lXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKSxcbiAgICAgICAgICBoKFxuICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZENvbnRlbnQtYmFjaycsIHR5cGU6ICdidXR0b24nLCB0aXRsZTogdGhpcy5wcm9wcy5pMThuKCdmaW5pc2hFZGl0aW5nRmlsZScpLFxuICAgICAgICAgICAgICBvbmNsaWNrOiB0aGlzLmhhbmRsZVNhdmUgfSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaTE4bignZG9uZScpXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBoKFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkRmlsZUNhcmQtaW5uZXInIH0sXG4gICAgICAgICAgaChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRGaWxlQ2FyZC1wcmV2aWV3Jywgc3R5bGU6IHsgYmFja2dyb3VuZENvbG9yOiBnZXRGaWxlVHlwZUljb24oZmlsZS50eXBlKS5jb2xvciB9IH0sXG4gICAgICAgICAgICBoKEZpbGVQcmV2aWV3LCB7IGZpbGU6IGZpbGUgfSlcbiAgICAgICAgICApLFxuICAgICAgICAgIGgoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkRmlsZUNhcmQtaW5mbycgfSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTWV0YUZpZWxkcyhmaWxlKVxuICAgICAgICAgICksXG4gICAgICAgICAgaChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmQtYWN0aW9ucycgfSxcbiAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LXUtcmVzZXQgdXBweS1jLWJ0biB1cHB5LWMtYnRuLXByaW1hcnkgdXBweS1EYXNoYm9hcmQtYWN0aW9uc0J0bicsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgb25jbGljazogdGhpcy5oYW5kbGVTYXZlIH0sXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuaTE4bignc2F2ZUNoYW5nZXMnKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGgoXG4gICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LXUtcmVzZXQgdXBweS1jLWJ0biB1cHB5LWMtYnRuLWxpbmsgdXBweS1EYXNoYm9hcmQtYWN0aW9uc0J0bicsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgb25jbGljazogdGhpcy5oYW5kbGVDYW5jZWwgfSxcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5pMThuKCdjYW5jZWwnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIEZpbGVDYXJkO1xufShDb21wb25lbnQpOyIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBnZXRGaWxlTmFtZUFuZEV4dGVuc2lvbiA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi9nZXRGaWxlTmFtZUFuZEV4dGVuc2lvbicpO1xudmFyIHRydW5jYXRlU3RyaW5nID0gcmVxdWlyZSgnLi90cnVuY2F0ZVN0cmluZycpO1xudmFyIGNvcHlUb0NsaXBib2FyZCA9IHJlcXVpcmUoJy4vY29weVRvQ2xpcGJvYXJkJyk7XG52YXIgcHJldHR5Qnl0ZXMgPSByZXF1aXJlKCdwcmV0dGllci1ieXRlcycpO1xudmFyIEZpbGVJdGVtUHJvZ3Jlc3MgPSByZXF1aXJlKCcuL0ZpbGVJdGVtUHJvZ3Jlc3MnKTtcbnZhciBnZXRGaWxlVHlwZUljb24gPSByZXF1aXJlKCcuL2dldEZpbGVUeXBlSWNvbicpO1xudmFyIEZpbGVQcmV2aWV3ID0gcmVxdWlyZSgnLi9GaWxlUHJldmlldycpO1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCcuL2ljb25zJyksXG4gICAgaWNvbkVkaXQgPSBfcmVxdWlyZS5pY29uRWRpdCxcbiAgICBpY29uQ29weSA9IF9yZXF1aXJlLmljb25Db3B5LFxuICAgIGljb25SZXRyeSA9IF9yZXF1aXJlLmljb25SZXRyeTtcblxudmFyIGNsYXNzTmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5cbnZhciBfcmVxdWlyZTIgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUyLmg7XG5cbnZhciBGaWxlSXRlbVByb2dyZXNzV3JhcHBlciA9IGZ1bmN0aW9uIEZpbGVJdGVtUHJvZ3Jlc3NXcmFwcGVyKHByb3BzKSB7XG4gIGlmIChwcm9wcy5oaWRlUmV0cnlCdXR0b24gJiYgcHJvcHMuZXJyb3IpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAocHJvcHMuaXNVcGxvYWRlZCB8fCBwcm9wcy5idW5kbGVkIHx8IHByb3BzLmhpZGVQYXVzZVJlc3VtZUNhbmNlbEJ1dHRvbnMgJiYgIXByb3BzLmVycm9yKSB7XG4gICAgcmV0dXJuIGgoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkSXRlbS1wcm9ncmVzc0luZGljYXRvcicgfSxcbiAgICAgIGgoRmlsZUl0ZW1Qcm9ncmVzcywge1xuICAgICAgICBwcm9ncmVzczogcHJvcHMuZmlsZS5wcm9ncmVzcy5wZXJjZW50YWdlLFxuICAgICAgICBmaWxlSUQ6IHByb3BzLmZpbGUuaWQsXG4gICAgICAgIGhpZGVQYXVzZVJlc3VtZUNhbmNlbEJ1dHRvbnM6IHByb3BzLmhpZGVQYXVzZVJlc3VtZUNhbmNlbEJ1dHRvbnMsXG4gICAgICAgIGJ1bmRsZWQ6IHByb3BzLmJ1bmRsZWRcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBoKFxuICAgICdidXR0b24nLFxuICAgIHtcbiAgICAgICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZEl0ZW0tcHJvZ3Jlc3NJbmRpY2F0b3InLFxuICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAnYXJpYS1sYWJlbCc6IHByb3BzLnByb2dyZXNzSW5kaWNhdG9yVGl0bGUsXG4gICAgICB0aXRsZTogcHJvcHMucHJvZ3Jlc3NJbmRpY2F0b3JUaXRsZSxcbiAgICAgIG9uY2xpY2s6IHByb3BzLm9uUGF1c2VSZXN1bWVDYW5jZWxSZXRyeSB9LFxuICAgIHByb3BzLmVycm9yID8gcHJvcHMuaGlkZVJldHJ5QnV0dG9uID8gbnVsbCA6IGljb25SZXRyeSgpIDogaChGaWxlSXRlbVByb2dyZXNzLCB7XG4gICAgICBwcm9ncmVzczogcHJvcHMuZmlsZS5wcm9ncmVzcy5wZXJjZW50YWdlLFxuICAgICAgZmlsZUlEOiBwcm9wcy5maWxlLmlkLFxuICAgICAgaGlkZVBhdXNlUmVzdW1lQ2FuY2VsQnV0dG9uczogcHJvcHMuaGlkZVBhdXNlUmVzdW1lQ2FuY2VsQnV0dG9uc1xuICAgIH0pXG4gICk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZpbGVJdGVtKHByb3BzKSB7XG4gIHZhciBmaWxlID0gcHJvcHMuZmlsZTtcbiAgdmFyIGFjcXVpcmVycyA9IHByb3BzLmFjcXVpcmVycztcblxuICB2YXIgaXNQcm9jZXNzaW5nID0gZmlsZS5wcm9ncmVzcy5wcmVwcm9jZXNzIHx8IGZpbGUucHJvZ3Jlc3MucG9zdHByb2Nlc3M7XG4gIHZhciBpc1VwbG9hZGVkID0gZmlsZS5wcm9ncmVzcy51cGxvYWRDb21wbGV0ZSAmJiAhaXNQcm9jZXNzaW5nICYmICFmaWxlLmVycm9yO1xuICB2YXIgdXBsb2FkSW5Qcm9ncmVzc09yQ29tcGxldGUgPSBmaWxlLnByb2dyZXNzLnVwbG9hZFN0YXJ0ZWQgfHwgaXNQcm9jZXNzaW5nO1xuICB2YXIgdXBsb2FkSW5Qcm9ncmVzcyA9IGZpbGUucHJvZ3Jlc3MudXBsb2FkU3RhcnRlZCAmJiAhZmlsZS5wcm9ncmVzcy51cGxvYWRDb21wbGV0ZSB8fCBpc1Byb2Nlc3Npbmc7XG4gIHZhciBpc1BhdXNlZCA9IGZpbGUuaXNQYXVzZWQgfHwgZmFsc2U7XG4gIHZhciBlcnJvciA9IGZpbGUuZXJyb3IgfHwgZmFsc2U7XG5cbiAgdmFyIGZpbGVOYW1lID0gZ2V0RmlsZU5hbWVBbmRFeHRlbnNpb24oZmlsZS5tZXRhLm5hbWUpLm5hbWU7XG4gIHZhciB0cnVuY2F0ZWRGaWxlTmFtZSA9IHByb3BzLmlzV2lkZSA/IHRydW5jYXRlU3RyaW5nKGZpbGVOYW1lLCAxNCkgOiBmaWxlTmFtZTtcblxuICB2YXIgb25QYXVzZVJlc3VtZUNhbmNlbFJldHJ5ID0gZnVuY3Rpb24gb25QYXVzZVJlc3VtZUNhbmNlbFJldHJ5KGV2KSB7XG4gICAgaWYgKGlzVXBsb2FkZWQpIHJldHVybjtcblxuICAgIGlmIChlcnJvciAmJiAhcHJvcHMuaGlkZVJldHJ5QnV0dG9uKSB7XG4gICAgICBwcm9wcy5yZXRyeVVwbG9hZChmaWxlLmlkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocHJvcHMuaGlkZVBhdXNlUmVzdW1lQ2FuY2VsQnV0dG9ucykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5yZXN1bWFibGVVcGxvYWRzKSB7XG4gICAgICBwcm9wcy5wYXVzZVVwbG9hZChmaWxlLmlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvcHMuY2FuY2VsVXBsb2FkKGZpbGUuaWQpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgZGFzaGJvYXJkSXRlbUNsYXNzID0gY2xhc3NOYW1lcygndXBweS1EYXNoYm9hcmRJdGVtJywgeyAnaXMtaW5wcm9ncmVzcyc6IHVwbG9hZEluUHJvZ3Jlc3MgfSwgeyAnaXMtcHJvY2Vzc2luZyc6IGlzUHJvY2Vzc2luZyB9LCB7ICdpcy1jb21wbGV0ZSc6IGlzVXBsb2FkZWQgfSwgeyAnaXMtcGF1c2VkJzogaXNQYXVzZWQgfSwgeyAnaXMtZXJyb3InOiBlcnJvciB9LCB7ICdpcy1yZXN1bWFibGUnOiBwcm9wcy5yZXN1bWFibGVVcGxvYWRzIH0sIHsgJ2lzLWJ1bmRsZWQnOiBwcm9wcy5idW5kbGVkVXBsb2FkIH0pO1xuXG4gIHZhciBwcm9ncmVzc0luZGljYXRvclRpdGxlID0gaXNVcGxvYWRlZCA/IHByb3BzLmkxOG4oJ3VwbG9hZENvbXBsZXRlJykgOiBwcm9wcy5yZXN1bWFibGVVcGxvYWRzID8gZmlsZS5pc1BhdXNlZCA/IHByb3BzLmkxOG4oJ3Jlc3VtZVVwbG9hZCcpIDogcHJvcHMuaTE4bigncGF1c2VVcGxvYWQnKSA6IGVycm9yID8gcHJvcHMuaTE4bigncmV0cnlVcGxvYWQnKSA6IHByb3BzLmkxOG4oJ2NhbmNlbFVwbG9hZCcpO1xuXG4gIHJldHVybiBoKFxuICAgICdsaScsXG4gICAgeyAnY2xhc3MnOiBkYXNoYm9hcmRJdGVtQ2xhc3MsIGlkOiAndXBweV8nICsgZmlsZS5pZCwgdGl0bGU6IGZpbGUubWV0YS5uYW1lIH0sXG4gICAgaChcbiAgICAgICdkaXYnLFxuICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRJdGVtLXByZXZpZXcnIH0sXG4gICAgICBoKFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRJdGVtLXByZXZpZXdJbm5lcldyYXAnLCBzdHlsZTogeyBiYWNrZ3JvdW5kQ29sb3I6IGdldEZpbGVUeXBlSWNvbihmaWxlLnR5cGUpLmNvbG9yIH0gfSxcbiAgICAgICAgcHJvcHMuc2hvd0xpbmtUb0ZpbGVVcGxvYWRSZXN1bHQgJiYgZmlsZS51cGxvYWRVUkwgPyBoKCdhJywgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRJdGVtLXByZXZpZXdMaW5rJywgaHJlZjogZmlsZS51cGxvYWRVUkwsIHJlbDogJ25vcmVmZXJyZXIgbm9vcGVuZXInLCB0YXJnZXQ6ICdfYmxhbmsnIH0pIDogbnVsbCxcbiAgICAgICAgaChGaWxlUHJldmlldywgeyBmaWxlOiBmaWxlIH0pXG4gICAgICApLFxuICAgICAgaChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkSXRlbS1wcm9ncmVzcycgfSxcbiAgICAgICAgaChGaWxlSXRlbVByb2dyZXNzV3JhcHBlciwgX2V4dGVuZHMoe1xuICAgICAgICAgIHByb2dyZXNzSW5kaWNhdG9yVGl0bGU6IHByb2dyZXNzSW5kaWNhdG9yVGl0bGUsXG4gICAgICAgICAgb25QYXVzZVJlc3VtZUNhbmNlbFJldHJ5OiBvblBhdXNlUmVzdW1lQ2FuY2VsUmV0cnksXG4gICAgICAgICAgZmlsZTogZmlsZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3JcbiAgICAgICAgfSwgcHJvcHMpKVxuICAgICAgKVxuICAgICksXG4gICAgaChcbiAgICAgICdkaXYnLFxuICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRJdGVtLWluZm8nIH0sXG4gICAgICBoKFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRJdGVtLW5hbWUnLCB0aXRsZTogZmlsZU5hbWUgfSxcbiAgICAgICAgcHJvcHMuc2hvd0xpbmtUb0ZpbGVVcGxvYWRSZXN1bHQgJiYgZmlsZS51cGxvYWRVUkwgPyBoKFxuICAgICAgICAgICdhJyxcbiAgICAgICAgICB7IGhyZWY6IGZpbGUudXBsb2FkVVJMLCByZWw6ICdub3JlZmVycmVyIG5vb3BlbmVyJywgdGFyZ2V0OiAnX2JsYW5rJyB9LFxuICAgICAgICAgIGZpbGUuZXh0ZW5zaW9uID8gdHJ1bmNhdGVkRmlsZU5hbWUgKyAnLicgKyBmaWxlLmV4dGVuc2lvbiA6IHRydW5jYXRlZEZpbGVOYW1lXG4gICAgICAgICkgOiBmaWxlLmV4dGVuc2lvbiA/IHRydW5jYXRlZEZpbGVOYW1lICsgJy4nICsgZmlsZS5leHRlbnNpb24gOiB0cnVuY2F0ZWRGaWxlTmFtZVxuICAgICAgKSxcbiAgICAgIGgoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZEl0ZW0tc3RhdHVzJyB9LFxuICAgICAgICBmaWxlLmRhdGEuc2l6ZSA/IGgoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRJdGVtLXN0YXR1c1NpemUnIH0sXG4gICAgICAgICAgcHJldHR5Qnl0ZXMoZmlsZS5kYXRhLnNpemUpXG4gICAgICAgICkgOiBudWxsLFxuICAgICAgICBmaWxlLnNvdXJjZSAmJiBoKFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkSXRlbS1zb3VyY2VJY29uJyB9LFxuICAgICAgICAgIGFjcXVpcmVycy5tYXAoZnVuY3Rpb24gKGFjcXVpcmVyKSB7XG4gICAgICAgICAgICBpZiAoYWNxdWlyZXIuaWQgPT09IGZpbGUuc291cmNlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoKFxuICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICB7IHRpdGxlOiBwcm9wcy5pMThuKCdmaWxlU291cmNlJywgeyBuYW1lOiBhY3F1aXJlci5uYW1lIH0pIH0sXG4gICAgICAgICAgICAgICAgYWNxdWlyZXIuaWNvbigpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKSxcbiAgICAgICF1cGxvYWRJblByb2dyZXNzT3JDb21wbGV0ZSAmJiBwcm9wcy5tZXRhRmllbGRzICYmIHByb3BzLm1ldGFGaWVsZHMubGVuZ3RoID8gaChcbiAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkSXRlbS1lZGl0JyxcbiAgICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgICAnYXJpYS1sYWJlbCc6IHByb3BzLmkxOG4oJ2VkaXRGaWxlJyksXG4gICAgICAgICAgdGl0bGU6IHByb3BzLmkxOG4oJ2VkaXRGaWxlJyksXG4gICAgICAgICAgb25jbGljazogZnVuY3Rpb24gb25jbGljayhlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcHMudG9nZ2xlRmlsZUNhcmQoZmlsZS5pZCk7XG4gICAgICAgICAgfSB9LFxuICAgICAgICBpY29uRWRpdCgpXG4gICAgICApIDogbnVsbCxcbiAgICAgIHByb3BzLnNob3dMaW5rVG9GaWxlVXBsb2FkUmVzdWx0ICYmIGZpbGUudXBsb2FkVVJMID8gaChcbiAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkSXRlbS1jb3B5TGluaycsXG4gICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgJ2FyaWEtbGFiZWwnOiBwcm9wcy5pMThuKCdjb3B5TGluaycpLFxuICAgICAgICAgIHRpdGxlOiBwcm9wcy5pMThuKCdjb3B5TGluaycpLFxuICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uIG9uY2xpY2soKSB7XG4gICAgICAgICAgICBjb3B5VG9DbGlwYm9hcmQoZmlsZS51cGxvYWRVUkwsIHByb3BzLmkxOG4oJ2NvcHlMaW5rVG9DbGlwYm9hcmRGYWxsYmFjaycpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcHJvcHMubG9nKCdMaW5rIGNvcGllZCB0byBjbGlwYm9hcmQuJyk7XG4gICAgICAgICAgICAgIHByb3BzLmluZm8ocHJvcHMuaTE4bignY29weUxpbmtUb0NsaXBib2FyZFN1Y2Nlc3MnKSwgJ2luZm8nLCAzMDAwKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKHByb3BzLmxvZyk7XG4gICAgICAgICAgfSB9LFxuICAgICAgICBpY29uQ29weSgpXG4gICAgICApIDogJydcbiAgICApLFxuICAgIGgoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkSXRlbS1hY3Rpb24nIH0sXG4gICAgICAhaXNVcGxvYWRlZCAmJiBoKFxuICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRJdGVtLXJlbW92ZScsXG4gICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgJ2FyaWEtbGFiZWwnOiBwcm9wcy5pMThuKCdyZW1vdmVGaWxlJyksXG4gICAgICAgICAgdGl0bGU6IHByb3BzLmkxOG4oJ3JlbW92ZUZpbGUnKSxcbiAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiBvbmNsaWNrKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BzLnJlbW92ZUZpbGUoZmlsZS5pZCk7XG4gICAgICAgICAgfSB9LFxuICAgICAgICBoKFxuICAgICAgICAgICdzdmcnLFxuICAgICAgICAgIHsgJ2FyaWEtaGlkZGVuJzogJ3RydWUnLCAnY2xhc3MnOiAnVXBweUljb24nLCB3aWR0aDogJzYwJywgaGVpZ2h0OiAnNjAnLCB2aWV3Qm94OiAnMCAwIDYwIDYwJywgeG1sbnM6ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgfSxcbiAgICAgICAgICBoKCdwYXRoJywgeyBzdHJva2U6ICcjRkZGJywgJ3N0cm9rZS13aWR0aCc6ICcxJywgJ2ZpbGwtcnVsZSc6ICdub256ZXJvJywgJ3ZlY3Rvci1lZmZlY3QnOiAnbm9uLXNjYWxpbmctc3Ryb2tlJywgZDogJ00zMCAxQzE0IDEgMSAxNCAxIDMwczEzIDI5IDI5IDI5IDI5LTEzIDI5LTI5UzQ2IDEgMzAgMXonIH0pLFxuICAgICAgICAgIGgoJ3BhdGgnLCB7IGZpbGw6ICcjRkZGJywgJ3ZlY3Rvci1lZmZlY3QnOiAnbm9uLXNjYWxpbmctc3Ryb2tlJywgZDogJ000MiAzOS42NjdMMzkuNjY3IDQyIDMwIDMyLjMzMyAyMC4zMzMgNDIgMTggMzkuNjY3IDI3LjY2NyAzMCAxOCAyMC4zMzMgMjAuMzMzIDE4IDMwIDI3LjY2NyAzOS42NjcgMTggNDIgMjAuMzMzIDMyLjMzMyAzMHonIH0pXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gICk7XG59OyIsInZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ3ByZWFjdCcpLFxuICAgIGggPSBfcmVxdWlyZS5oO1xuXG4vLyBodHRwOi8vY29kZXBlbi5pby9IYXJra28vcGVuL3JWeHZOTVxuLy8gaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9zdmctbGluZS1hbmltYXRpb24td29ya3MvXG4vLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9lc3dhay9hZDRlYTU3YmNkNWZmN2FhNWQ0MlxuXG4vLyBjaXJjbGUgbGVuZ3RoIGVxdWFscyAyICogUEkgKiBSXG5cblxudmFyIGNpcmNsZUxlbmd0aCA9IDIgKiBNYXRoLlBJICogMTU7XG5cbi8vIHN0cm9rZS1kYXNob2Zmc2V0IGlzIGEgcGVyY2VudGFnZSBvZiB0aGUgcHJvZ3Jlc3MgZnJvbSBjaXJjbGVMZW5ndGgsXG4vLyBzdWJzdHJhY3RlZCBmcm9tIGNpcmNsZUxlbmd0aCwgYmVjYXVzZSBpdHMgYW4gb2Zmc2V0XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICByZXR1cm4gaChcbiAgICBcInN2Z1wiLFxuICAgIHsgd2lkdGg6IFwiNzBcIiwgaGVpZ2h0OiBcIjcwXCIsIHZpZXdCb3g6IFwiMCAwIDM2IDM2XCIsIFwiY2xhc3NcIjogXCJVcHB5SWNvbiBVcHB5SWNvbi1wcm9ncmVzc0NpcmNsZVwiIH0sXG4gICAgaChcbiAgICAgIFwiZ1wiLFxuICAgICAgeyBcImNsYXNzXCI6IFwicHJvZ3Jlc3MtZ3JvdXBcIiB9LFxuICAgICAgaChcImNpcmNsZVwiLCB7IFwiY2xhc3NcIjogXCJiZ1wiLCByOiBcIjE1XCIsIGN4OiBcIjE4XCIsIGN5OiBcIjE4XCIsIFwic3Ryb2tlLXdpZHRoXCI6IFwiMlwiLCBmaWxsOiBcIm5vbmVcIiB9KSxcbiAgICAgIGgoXCJjaXJjbGVcIiwgeyBcImNsYXNzXCI6IFwicHJvZ3Jlc3NcIiwgcjogXCIxNVwiLCBjeDogXCIxOFwiLCBjeTogXCIxOFwiLCB0cmFuc2Zvcm06IFwicm90YXRlKC05MCwgMTgsIDE4KVwiLCBcInN0cm9rZS13aWR0aFwiOiBcIjJcIiwgZmlsbDogXCJub25lXCIsXG4gICAgICAgIFwic3Ryb2tlLWRhc2hhcnJheVwiOiBjaXJjbGVMZW5ndGgsXG4gICAgICAgIFwic3Ryb2tlLWRhc2hvZmZzZXRcIjogY2lyY2xlTGVuZ3RoIC0gY2lyY2xlTGVuZ3RoIC8gMTAwICogcHJvcHMucHJvZ3Jlc3NcbiAgICAgIH0pXG4gICAgKSxcbiAgICAhcHJvcHMuaGlkZVBhdXNlUmVzdW1lQ2FuY2VsQnV0dG9ucyAmJiAhcHJvcHMuYnVuZGxlZCA/IGgoXG4gICAgICBcImdcIixcbiAgICAgIG51bGwsXG4gICAgICBoKFwicG9seWdvblwiLCB7IFwiY2xhc3NcIjogXCJwbGF5XCIsIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoMywgMylcIiwgcG9pbnRzOiBcIjEyIDIwIDEyIDEwIDIwIDE1XCIgfSksXG4gICAgICBoKFxuICAgICAgICBcImdcIixcbiAgICAgICAgeyBcImNsYXNzXCI6IFwicGF1c2VcIiwgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgxNC41LCAxMylcIiB9LFxuICAgICAgICBoKFwicmVjdFwiLCB7IHg6IFwiMFwiLCB5OiBcIjBcIiwgd2lkdGg6IFwiMlwiLCBoZWlnaHQ6IFwiMTBcIiwgcng6IFwiMFwiIH0pLFxuICAgICAgICBoKFwicmVjdFwiLCB7IHg6IFwiNVwiLCB5OiBcIjBcIiwgd2lkdGg6IFwiMlwiLCBoZWlnaHQ6IFwiMTBcIiwgcng6IFwiMFwiIH0pXG4gICAgICApLFxuICAgICAgaChcInBvbHlnb25cIiwgeyBcImNsYXNzXCI6IFwiY2FuY2VsXCIsIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoMiwgMilcIiwgcG9pbnRzOiBcIjE5Ljg4NTY1MTYgMTEuMDYyNSAxNiAxNC45NDgxNTE2IDEyLjEwMTk3MzcgMTEuMDYyNSAxMS4wNjI1IDEyLjExNDM0ODQgMTQuOTQ4MTUxNiAxNiAxMS4wNjI1IDE5Ljg5ODAyNjMgMTIuMTAxOTczNyAyMC45Mzc1IDE2IDE3LjA1MTg0ODQgMTkuODg1NjUxNiAyMC45Mzc1IDIwLjkzNzUgMTkuODk4MDI2MyAxNy4wNTE4NDg0IDE2IDIwLjkzNzUgMTJcIiB9KVxuICAgICkgOiBudWxsLFxuICAgIGgoXCJwb2x5Z29uXCIsIHsgXCJjbGFzc1wiOiBcImNoZWNrXCIsIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoMiwgMylcIiwgcG9pbnRzOiBcIjE0IDIyLjUgNyAxNS4yNDU3MDY1IDguOTk5ODU4NTcgMTMuMTczMjgxNSAxNCAxOC4zNTQ3MTA0IDIyLjk3Mjk4ODMgOSAyNSAxMS4xMDA1NjM0XCIgfSlcbiAgKTtcbn07IiwidmFyIEZpbGVJdGVtID0gcmVxdWlyZSgnLi9GaWxlSXRlbScpO1xudmFyIEFjdGlvbkJyb3dzZVRhZ2xpbmUgPSByZXF1aXJlKCcuL0FjdGlvbkJyb3dzZVRhZ2xpbmUnKTtcbi8vIGNvbnN0IHsgZGFzaGJvYXJkQmdJY29uIH0gPSByZXF1aXJlKCcuL2ljb25zJylcbnZhciBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUuaDtcblxudmFyIHBvd2VyZWRCeVVwcHkgPSBmdW5jdGlvbiBwb3dlcmVkQnlVcHB5KHByb3BzKSB7XG4gIHJldHVybiBoKFxuICAgICdhJyxcbiAgICB7IHRhYmluZGV4OiAnLTEnLCBocmVmOiAnaHR0cHM6Ly91cHB5LmlvJywgcmVsOiAnbm9yZWZlcnJlciBub29wZW5lcicsIHRhcmdldDogJ19ibGFuaycsICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZC1wb3dlcmVkQnknIH0sXG4gICAgJ1Bvd2VyZWQgYnkgJyxcbiAgICBoKFxuICAgICAgJ3N2ZycsXG4gICAgICB7ICdhcmlhLWhpZGRlbic6ICd0cnVlJywgJ2NsYXNzJzogJ1VwcHlJY29uIHVwcHktRGFzaGJvYXJkLXBvd2VyZWRCeUljb24nLCB3aWR0aDogJzExJywgaGVpZ2h0OiAnMTEnLCB2aWV3Qm94OiAnMCAwIDExIDExJywgeG1sbnM6ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgfSxcbiAgICAgIGgoJ3BhdGgnLCB7IGQ6ICdNNy4zNjUgMTAuNWwtLjAxLTQuMDQ1aDIuNjEyTDUuNS44MDZsLTQuNDY3IDUuNjVoMi42MDRsLjAxIDQuMDQ0aDMuNzE4eicsICdmaWxsLXJ1bGUnOiAnZXZlbm9kZCcgfSlcbiAgICApLFxuICAgIGgoXG4gICAgICAnc3BhbicsXG4gICAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZC1wb3dlcmVkQnlVcHB5JyB9LFxuICAgICAgJ1VwcHknXG4gICAgKVxuICApO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgdmFyIG5vRmlsZXMgPSBwcm9wcy50b3RhbEZpbGVDb3VudCA9PT0gMDtcbiAgdmFyIGRhc2hib2FyZEZpbGVzQ2xhc3MgPSBjbGFzc05hbWVzKCd1cHB5LURhc2hib2FyZC1maWxlcycsIHsgJ3VwcHktRGFzaGJvYXJkLWZpbGVzLS1ub0ZpbGVzJzogbm9GaWxlcyB9KTtcblxuICByZXR1cm4gaChcbiAgICAndWwnLFxuICAgIHsgJ2NsYXNzJzogZGFzaGJvYXJkRmlsZXNDbGFzcyB9LFxuICAgIG5vRmlsZXMgJiYgaChcbiAgICAgICdkaXYnLFxuICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmQtYmdJY29uJyB9LFxuICAgICAgaChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkLWRyb3BGaWxlc1RpdGxlJyB9LFxuICAgICAgICBoKEFjdGlvbkJyb3dzZVRhZ2xpbmUsIHtcbiAgICAgICAgICBhY3F1aXJlcnM6IHByb3BzLmFjcXVpcmVycyxcbiAgICAgICAgICBoYW5kbGVJbnB1dENoYW5nZTogcHJvcHMuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgaTE4bjogcHJvcHMuaTE4bixcbiAgICAgICAgICBpMThuQXJyYXk6IHByb3BzLmkxOG5BcnJheSxcbiAgICAgICAgICBhbGxvd2VkRmlsZVR5cGVzOiBwcm9wcy5hbGxvd2VkRmlsZVR5cGVzLFxuICAgICAgICAgIG1heE51bWJlck9mRmlsZXM6IHByb3BzLm1heE51bWJlck9mRmlsZXNcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICBwcm9wcy5ub3RlICYmIGgoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZC1ub3RlJyB9LFxuICAgICAgICBwcm9wcy5ub3RlXG4gICAgICApLFxuICAgICAgcHJvcHMucHJvdWRseURpc3BsYXlQb3dlcmVkQnlVcHB5ICYmIHBvd2VyZWRCeVVwcHkocHJvcHMpXG4gICAgKSxcbiAgICBPYmplY3Qua2V5cyhwcm9wcy5maWxlcykubWFwKGZ1bmN0aW9uIChmaWxlSUQpIHtcbiAgICAgIHJldHVybiBoKEZpbGVJdGVtLCB7XG4gICAgICAgIGFjcXVpcmVyczogcHJvcHMuYWNxdWlyZXJzLFxuICAgICAgICBmaWxlOiBwcm9wcy5maWxlc1tmaWxlSURdLFxuICAgICAgICB0b2dnbGVGaWxlQ2FyZDogcHJvcHMudG9nZ2xlRmlsZUNhcmQsXG4gICAgICAgIHNob3dQcm9ncmVzc0RldGFpbHM6IHByb3BzLnNob3dQcm9ncmVzc0RldGFpbHMsXG4gICAgICAgIGluZm86IHByb3BzLmluZm8sXG4gICAgICAgIGxvZzogcHJvcHMubG9nLFxuICAgICAgICBpMThuOiBwcm9wcy5pMThuLFxuICAgICAgICByZW1vdmVGaWxlOiBwcm9wcy5yZW1vdmVGaWxlLFxuICAgICAgICBwYXVzZVVwbG9hZDogcHJvcHMucGF1c2VVcGxvYWQsXG4gICAgICAgIGNhbmNlbFVwbG9hZDogcHJvcHMuY2FuY2VsVXBsb2FkLFxuICAgICAgICByZXRyeVVwbG9hZDogcHJvcHMucmV0cnlVcGxvYWQsXG4gICAgICAgIGhpZGVQYXVzZVJlc3VtZUNhbmNlbEJ1dHRvbnM6IHByb3BzLmhpZGVQYXVzZVJlc3VtZUNhbmNlbEJ1dHRvbnMsXG4gICAgICAgIGhpZGVSZXRyeUJ1dHRvbjogcHJvcHMuaGlkZVJldHJ5QnV0dG9uLFxuICAgICAgICByZXN1bWFibGVVcGxvYWRzOiBwcm9wcy5yZXN1bWFibGVVcGxvYWRzLFxuICAgICAgICBidW5kbGVkOiBwcm9wcy5idW5kbGVkLFxuICAgICAgICBpc1dpZGU6IHByb3BzLmlzV2lkZSxcbiAgICAgICAgc2hvd0xpbmtUb0ZpbGVVcGxvYWRSZXN1bHQ6IHByb3BzLnNob3dMaW5rVG9GaWxlVXBsb2FkUmVzdWx0LFxuICAgICAgICBtZXRhRmllbGRzOiBwcm9wcy5tZXRhRmllbGRzXG4gICAgICB9KTtcbiAgICB9KVxuICApO1xufTsiLCJ2YXIgZ2V0RmlsZVR5cGVJY29uID0gcmVxdWlyZSgnLi9nZXRGaWxlVHlwZUljb24nKTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlLmg7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gRmlsZVByZXZpZXcocHJvcHMpIHtcbiAgdmFyIGZpbGUgPSBwcm9wcy5maWxlO1xuXG4gIGlmIChmaWxlLnByZXZpZXcpIHtcbiAgICByZXR1cm4gaCgnaW1nJywgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRJdGVtLXByZXZpZXdJbWcnLCBhbHQ6IGZpbGUubmFtZSwgc3JjOiBmaWxlLnByZXZpZXcgfSk7XG4gIH1cblxuICB2YXIgX2dldEZpbGVUeXBlSWNvbiA9IGdldEZpbGVUeXBlSWNvbihmaWxlLnR5cGUpLFxuICAgICAgY29sb3IgPSBfZ2V0RmlsZVR5cGVJY29uLmNvbG9yLFxuICAgICAgaWNvbiA9IF9nZXRGaWxlVHlwZUljb24uaWNvbjtcblxuICByZXR1cm4gaChcbiAgICAnZGl2JyxcbiAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZEl0ZW0tcHJldmlld0ljb25XcmFwJyB9LFxuICAgIGgoXG4gICAgICAnc3BhbicsXG4gICAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZEl0ZW0tcHJldmlld0ljb24nLCBzdHlsZTogeyBjb2xvcjogY29sb3IgfSB9LFxuICAgICAgaWNvblxuICAgICksXG4gICAgaChcbiAgICAgICdzdmcnLFxuICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRJdGVtLXByZXZpZXdJY29uQmcnLCB3aWR0aDogJzcyJywgaGVpZ2h0OiAnOTMnLCB2aWV3Qm94OiAnMCAwIDcyIDkzJyB9LFxuICAgICAgaChcbiAgICAgICAgJ2cnLFxuICAgICAgICBudWxsLFxuICAgICAgICBoKCdwYXRoJywgeyBkOiAnTTI0LjA4IDVoMzguOTIyQTIuOTk3IDIuOTk3IDAgMCAxIDY2IDguMDAzdjc0Ljk5NEEyLjk5NyAyLjk5NyAwIDAgMSA2My4wMDQgODZIOC45OTZBMi45OTggMi45OTggMCAwIDEgNiA4My4wMVYyMi4yMzRMMjQuMDggNXonLCBmaWxsOiAnI0ZGRicgfSksXG4gICAgICAgIGgoJ3BhdGgnLCB7IGQ6ICdNMjQgNUw2IDIyLjI0OGgxNS4wMDdBMi45OTUgMi45OTUgMCAwIDAgMjQgMTkuMjQ0VjV6JywgZmlsbDogJyNFNEU0RTQnIH0pXG4gICAgICApXG4gICAgKVxuICApO1xufTtcblxuLy8gPHNwYW4gY2xhc3M9XCJ1cHB5LURhc2hib2FyZEl0ZW0tcHJldmlld1R5cGVcIj57ZmlsZS5leHRlbnNpb24gJiYgZmlsZS5leHRlbnNpb24ubGVuZ3RoIDwgNSA/IGZpbGUuZXh0ZW5zaW9uIDogbnVsbH08L3NwYW4+IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgQWN0aW9uQnJvd3NlVGFnbGluZSA9IHJlcXVpcmUoJy4vQWN0aW9uQnJvd3NlVGFnbGluZScpO1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCcuL2ljb25zJyksXG4gICAgbG9jYWxJY29uID0gX3JlcXVpcmUubG9jYWxJY29uO1xuXG52YXIgX3JlcXVpcmUyID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlMi5oLFxuICAgIENvbXBvbmVudCA9IF9yZXF1aXJlMi5Db21wb25lbnQ7XG5cbnZhciBUYWJzID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFRhYnMsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFRhYnMocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFicyk7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgVGFicy5wcm90b3R5cGUuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldikge1xuICAgIHRoaXMuaW5wdXQuY2xpY2soKTtcbiAgfTtcblxuICBUYWJzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgaXNIaWRkZW4gPSBPYmplY3Qua2V5cyh0aGlzLnByb3BzLmZpbGVzKS5sZW5ndGggPT09IDA7XG4gICAgdmFyIGhhc0FjcXVpcmVycyA9IHRoaXMucHJvcHMuYWNxdWlyZXJzLmxlbmd0aCAhPT0gMDtcblxuICAgIGlmICghaGFzQWNxdWlyZXJzKSB7XG4gICAgICByZXR1cm4gaChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkVGFicycsICdhcmlhLWhpZGRlbic6IGlzSGlkZGVuIH0sXG4gICAgICAgIGgoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRUYWJzLXRpdGxlJyB9LFxuICAgICAgICAgIGgoQWN0aW9uQnJvd3NlVGFnbGluZSwge1xuICAgICAgICAgICAgYWNxdWlyZXJzOiB0aGlzLnByb3BzLmFjcXVpcmVycyxcbiAgICAgICAgICAgIGhhbmRsZUlucHV0Q2hhbmdlOiB0aGlzLnByb3BzLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgaTE4bjogdGhpcy5wcm9wcy5pMThuLFxuICAgICAgICAgICAgaTE4bkFycmF5OiB0aGlzLnByb3BzLmkxOG5BcnJheSB9KVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIGVtcHR5IHZhbHVlPVwiXCIgb24gZmlsZSBpbnB1dCwgc28gdGhhdCB0aGUgaW5wdXQgaXMgY2xlYXJlZCBhZnRlciBhIGZpbGUgaXMgc2VsZWN0ZWQsXG4gICAgLy8gYmVjYXVzZSBVcHB5IHdpbGwgYmUgaGFuZGxpbmcgdGhlIHVwbG9hZCBhbmQgc28gd2UgY2FuIHNlbGVjdCBzYW1lIGZpbGVcbiAgICAvLyBhZnRlciByZW1vdmluZyDigJQgb3RoZXJ3aXNlIGJyb3dzZXIgdGhpbmtzIGl04oCZcyBhbHJlYWR5IHNlbGVjdGVkXG4gICAgcmV0dXJuIGgoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkVGFicycgfSxcbiAgICAgIGgoXG4gICAgICAgICd1bCcsXG4gICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkVGFicy1saXN0Jywgcm9sZTogJ3RhYmxpc3QnIH0sXG4gICAgICAgIGgoXG4gICAgICAgICAgJ2xpJyxcbiAgICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LURhc2hib2FyZFRhYicsIHJvbGU6ICdwcmVzZW50YXRpb24nIH0sXG4gICAgICAgICAgaChcbiAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkVGFiLWJ0bicsXG4gICAgICAgICAgICAgIHJvbGU6ICd0YWInLFxuICAgICAgICAgICAgICB0YWJpbmRleDogMCxcbiAgICAgICAgICAgICAgb25jbGljazogdGhpcy5oYW5kbGVDbGljayB9LFxuICAgICAgICAgICAgbG9jYWxJY29uKCksXG4gICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRUYWItbmFtZScgfSxcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5pMThuKCdteURldmljZScpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBoKCdpbnB1dCcsIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkLWlucHV0JyxcbiAgICAgICAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyxcbiAgICAgICAgICAgIHRhYmluZGV4OiAtMSxcbiAgICAgICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgICAgIG5hbWU6ICdmaWxlc1tdJyxcbiAgICAgICAgICAgIG11bHRpcGxlOiB0aGlzLnByb3BzLm1heE51bWJlck9mRmlsZXMgIT09IDEsXG4gICAgICAgICAgICBhY2NlcHQ6IHRoaXMucHJvcHMuYWxsb3dlZEZpbGVUeXBlcyxcbiAgICAgICAgICAgIG9uY2hhbmdlOiB0aGlzLnByb3BzLmhhbmRsZUlucHV0Q2hhbmdlLFxuICAgICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgX3RoaXMyLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgICAgICB9IH0pXG4gICAgICAgICksXG4gICAgICAgIHRoaXMucHJvcHMuYWNxdWlyZXJzLm1hcChmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIGgoXG4gICAgICAgICAgICAnbGknLFxuICAgICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1EYXNoYm9hcmRUYWInLCByb2xlOiAncHJlc2VudGF0aW9uJyB9LFxuICAgICAgICAgICAgaChcbiAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkVGFiLWJ0bicsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgcm9sZTogJ3RhYicsXG4gICAgICAgICAgICAgICAgdGFiaW5kZXg6IDAsXG4gICAgICAgICAgICAgICAgJ2FyaWEtY29udHJvbHMnOiAndXBweS1EYXNoYm9hcmRDb250ZW50LXBhbmVsLS0nICsgdGFyZ2V0LmlkLFxuICAgICAgICAgICAgICAgICdhcmlhLXNlbGVjdGVkJzogX3RoaXMyLnByb3BzLmFjdGl2ZVBhbmVsLmlkID09PSB0YXJnZXQuaWQsXG4gICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gb25jbGljaygpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIucHJvcHMuc2hvd1BhbmVsKHRhcmdldC5pZCk7XG4gICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICB0YXJnZXQuaWNvbigpLFxuICAgICAgICAgICAgICBoKFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktRGFzaGJvYXJkVGFiLW5hbWUnIH0sXG4gICAgICAgICAgICAgICAgdGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gVGFicztcbn0oQ29tcG9uZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBUYWJzOyIsIi8qKlxuICogQ29waWVzIHRleHQgdG8gY2xpcGJvYXJkIGJ5IGNyZWF0aW5nIGFuIGFsbW9zdCBpbnZpc2libGUgdGV4dGFyZWEsXG4gKiBhZGRpbmcgdGV4dCB0aGVyZSwgdGhlbiBydW5uaW5nIGV4ZWNDb21tYW5kKCdjb3B5JykuXG4gKiBGYWxscyBiYWNrIHRvIHByb21wdCgpIHdoZW4gdGhlIGVhc3kgd2F5IGZhaWxzIChoZWxsbywgU2FmYXJpISlcbiAqIEZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzA4MTAzMjJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGV4dFRvQ29weVxuICogQHBhcmFtIHtTdHJpbmd9IGZhbGxiYWNrU3RyaW5nXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvcHlUb0NsaXBib2FyZCh0ZXh0VG9Db3B5LCBmYWxsYmFja1N0cmluZykge1xuICBmYWxsYmFja1N0cmluZyA9IGZhbGxiYWNrU3RyaW5nIHx8ICdDb3B5IHRoZSBVUkwgYmVsb3cnO1xuXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgIHZhciB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgdGV4dEFyZWEuc2V0QXR0cmlidXRlKCdzdHlsZScsIHtcbiAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgdG9wOiAwLFxuICAgICAgbGVmdDogMCxcbiAgICAgIHdpZHRoOiAnMmVtJyxcbiAgICAgIGhlaWdodDogJzJlbScsXG4gICAgICBwYWRkaW5nOiAwLFxuICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICBib3hTaGFkb3c6ICdub25lJyxcbiAgICAgIGJhY2tncm91bmQ6ICd0cmFuc3BhcmVudCdcbiAgICB9KTtcblxuICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dFRvQ29weTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRBcmVhKTtcbiAgICB0ZXh0QXJlYS5zZWxlY3QoKTtcblxuICAgIHZhciBtYWdpY0NvcHlGYWlsZWQgPSBmdW5jdGlvbiBtYWdpY0NvcHlGYWlsZWQoKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRBcmVhKTtcbiAgICAgIHdpbmRvdy5wcm9tcHQoZmFsbGJhY2tTdHJpbmcsIHRleHRUb0NvcHkpO1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgdmFyIHN1Y2Nlc3NmdWwgPSBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xuICAgICAgaWYgKCFzdWNjZXNzZnVsKSB7XG4gICAgICAgIHJldHVybiBtYWdpY0NvcHlGYWlsZWQoJ2NvcHkgY29tbWFuZCB1bmF2YWlsYWJsZScpO1xuICAgICAgfVxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0QXJlYSk7XG4gICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0QXJlYSk7XG4gICAgICByZXR1cm4gbWFnaWNDb3B5RmFpbGVkKGVycik7XG4gICAgfVxuICB9KTtcbn07IiwidmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnLi9pY29ucycpLFxuICAgIGljb25UZXh0ID0gX3JlcXVpcmUuaWNvblRleHQsXG4gICAgaWNvbkF1ZGlvID0gX3JlcXVpcmUuaWNvbkF1ZGlvLFxuICAgIGljb25WaWRlbyA9IF9yZXF1aXJlLmljb25WaWRlbyxcbiAgICBpY29uUERGID0gX3JlcXVpcmUuaWNvblBERjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRJY29uQnlNaW1lKGZpbGVUeXBlKSB7XG4gIHZhciBkZWZhdWx0Q2hvaWNlID0ge1xuICAgIGNvbG9yOiAnI2NiY2JjYicsXG4gICAgaWNvbjogJydcbiAgfTtcblxuICBpZiAoIWZpbGVUeXBlKSByZXR1cm4gZGVmYXVsdENob2ljZTtcblxuICB2YXIgZmlsZVR5cGVHZW5lcmFsID0gZmlsZVR5cGUuc3BsaXQoJy8nKVswXTtcbiAgdmFyIGZpbGVUeXBlU3BlY2lmaWMgPSBmaWxlVHlwZS5zcGxpdCgnLycpWzFdO1xuXG4gIGlmIChmaWxlVHlwZUdlbmVyYWwgPT09ICd0ZXh0Jykge1xuICAgIHJldHVybiB7XG4gICAgICBjb2xvcjogJyNjYmNiY2InLFxuICAgICAgaWNvbjogaWNvblRleHQoKVxuICAgIH07XG4gIH1cblxuICBpZiAoZmlsZVR5cGVHZW5lcmFsID09PSAnYXVkaW8nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbG9yOiAnIzFhYmM5YycsXG4gICAgICBpY29uOiBpY29uQXVkaW8oKVxuICAgIH07XG4gIH1cblxuICBpZiAoZmlsZVR5cGVHZW5lcmFsID09PSAndmlkZW8nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbG9yOiAnIzI5ODBiOScsXG4gICAgICBpY29uOiBpY29uVmlkZW8oKVxuICAgIH07XG4gIH1cblxuICBpZiAoZmlsZVR5cGVHZW5lcmFsID09PSAnYXBwbGljYXRpb24nICYmIGZpbGVUeXBlU3BlY2lmaWMgPT09ICdwZGYnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbG9yOiAnI2U3NGMzYycsXG4gICAgICBpY29uOiBpY29uUERGKClcbiAgICB9O1xuICB9XG5cbiAgaWYgKGZpbGVUeXBlR2VuZXJhbCA9PT0gJ2ltYWdlJykge1xuICAgIHJldHVybiB7XG4gICAgICBjb2xvcjogJyNmMmYyZjInLFxuICAgICAgaWNvbjogJydcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGRlZmF1bHRDaG9pY2U7XG59OyIsInZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ3ByZWFjdCcpLFxuICAgIGggPSBfcmVxdWlyZS5oO1xuXG4vLyBodHRwczovL2Nzcy10cmlja3MuY29tL2NyZWF0aW5nLXN2Zy1pY29uLXN5c3RlbS1yZWFjdC9cblxuZnVuY3Rpb24gZGVmYXVsdFRhYkljb24oKSB7XG4gIHJldHVybiBoKFxuICAgIFwic3ZnXCIsXG4gICAgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBcImNsYXNzXCI6IFwiVXBweUljb25cIiwgd2lkdGg6IFwiMzBcIiwgaGVpZ2h0OiBcIjMwXCIsIHZpZXdCb3g6IFwiMCAwIDMwIDMwXCIgfSxcbiAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTE1IDMwYzguMjg0IDAgMTUtNi43MTYgMTUtMTUgMC04LjI4NC02LjcxNi0xNS0xNS0xNUM2LjcxNiAwIDAgNi43MTYgMCAxNWMwIDguMjg0IDYuNzE2IDE1IDE1IDE1em00LjI1OC0xMi42NzZ2Ni44NDZoLTguNDI2di02Ljg0Nkg1LjIwNGw5LjgyLTEyLjM2NCA5LjgyIDEyLjM2NEgxOS4yNnpcIiB9KVxuICApO1xufVxuXG5mdW5jdGlvbiBpY29uQ29weSgpIHtcbiAgcmV0dXJuIGgoXG4gICAgXCJzdmdcIixcbiAgICB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIFwiY2xhc3NcIjogXCJVcHB5SWNvblwiLCB3aWR0aDogXCI1MVwiLCBoZWlnaHQ6IFwiNTFcIiwgdmlld0JveDogXCIwIDAgNTEgNTFcIiB9LFxuICAgIGgoXCJwYXRoXCIsIHsgZDogXCJNMTcuMjEgNDUuNzY1YTUuMzk0IDUuMzk0IDAgMCAxLTcuNjIgMGwtNC4xMi00LjEyMmE1LjM5MyA1LjM5MyAwIDAgMSAwLTcuNjE4bDYuNzc0LTYuNzc1LTIuNDA0LTIuNDA0LTYuNzc1IDYuNzc2Yy0zLjQyNCAzLjQyNy0zLjQyNCA5IDAgMTIuNDI2bDQuMTIgNC4xMjNhOC43NjYgOC43NjYgMCAwIDAgNi4yMTYgMi41N2MyLjI1IDAgNC41LS44NTggNi4yMTQtMi41N2wxMy41NS0xMy41NTJhOC43MiA4LjcyIDAgMCAwIDIuNTc1LTYuMjEzIDguNzMgOC43MyAwIDAgMC0yLjU3NS02LjIxM2wtNC4xMjMtNC4xMi0yLjQwNCAyLjQwNCA0LjEyMyA0LjEyYTUuMzUyIDUuMzUyIDAgMCAxIDEuNTggMy44MWMwIDEuNDM4LS41NjIgMi43OS0xLjU4IDMuODA4bC0xMy41NSAxMy41NXpcIiB9KSxcbiAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTQ0LjI1NiAyLjg1OEE4LjcyOCA4LjcyOCAwIDAgMCAzOC4wNDMuMjgzaC0uMDAyYTguNzMgOC43MyAwIDAgMC02LjIxMiAyLjU3NGwtMTMuNTUgMTMuNTVhOC43MjUgOC43MjUgMCAwIDAtMi41NzUgNi4yMTQgOC43MyA4LjczIDAgMCAwIDIuNTc0IDYuMjE2bDQuMTIgNC4xMiAyLjQwNS0yLjQwMy00LjEyLTQuMTJhNS4zNTcgNS4zNTcgMCAwIDEtMS41OC0zLjgxMmMwLTEuNDM3LjU2Mi0yLjc5IDEuNTgtMy44MDhsMTMuNTUtMTMuNTVhNS4zNDggNS4zNDggMCAwIDEgMy44MS0xLjU4YzEuNDQgMCAyLjc5Mi41NjIgMy44MSAxLjU4bDQuMTIgNC4xMmMyLjEgMi4xIDIuMSA1LjUxOCAwIDcuNjE3TDM5LjIgMjMuNzc1bDIuNDA0IDIuNDA0IDYuNzc1LTYuNzc3YzMuNDI2LTMuNDI3IDMuNDI2LTkgMC0xMi40MjZsLTQuMTItNC4xMnpcIiB9KVxuICApO1xufVxuXG5mdW5jdGlvbiBpY29uUmVzdW1lKCkge1xuICByZXR1cm4gaChcbiAgICBcInN2Z1wiLFxuICAgIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgXCJjbGFzc1wiOiBcIlVwcHlJY29uXCIsIHdpZHRoOiBcIjI1XCIsIGhlaWdodDogXCIyNVwiLCB2aWV3Qm94OiBcIjAgMCA0NCA0NFwiIH0sXG4gICAgaChcInBvbHlnb25cIiwgeyBcImNsYXNzXCI6IFwicGxheVwiLCB0cmFuc2Zvcm06IFwidHJhbnNsYXRlKDYsIDUuNSlcIiwgcG9pbnRzOiBcIjEzIDIxLjY2NjY2NjcgMTMgMTEgMjEgMTYuMzMzMzMzM1wiIH0pXG4gICk7XG59XG5cbmZ1bmN0aW9uIGljb25QYXVzZSgpIHtcbiAgcmV0dXJuIGgoXG4gICAgXCJzdmdcIixcbiAgICB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIFwiY2xhc3NcIjogXCJVcHB5SWNvblwiLCB3aWR0aDogXCIyNXB4XCIsIGhlaWdodDogXCIyNXB4XCIsIHZpZXdCb3g6IFwiMCAwIDQ0IDQ0XCIgfSxcbiAgICBoKFxuICAgICAgXCJnXCIsXG4gICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoMTgsIDE3KVwiLCBcImNsYXNzXCI6IFwicGF1c2VcIiB9LFxuICAgICAgaChcInJlY3RcIiwgeyB4OiBcIjBcIiwgeTogXCIwXCIsIHdpZHRoOiBcIjJcIiwgaGVpZ2h0OiBcIjEwXCIsIHJ4OiBcIjBcIiB9KSxcbiAgICAgIGgoXCJyZWN0XCIsIHsgeDogXCI2XCIsIHk6IFwiMFwiLCB3aWR0aDogXCIyXCIsIGhlaWdodDogXCIxMFwiLCByeDogXCIwXCIgfSlcbiAgICApXG4gICk7XG59XG5cbmZ1bmN0aW9uIGljb25FZGl0KCkge1xuICByZXR1cm4gaChcbiAgICBcInN2Z1wiLFxuICAgIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgXCJjbGFzc1wiOiBcIlVwcHlJY29uXCIsIHdpZHRoOiBcIjI4XCIsIGhlaWdodDogXCIyOFwiLCB2aWV3Qm94OiBcIjAgMCAyOCAyOFwiIH0sXG4gICAgaChcInBhdGhcIiwgeyBkOiBcIk0yNS40MzYgMi41NjZhNy45OCA3Ljk4IDAgMCAwLTIuMDc4LTEuNTFDMjIuNjM4LjcwMyAyMS45MDYuNSAyMS4xOTguNWEzIDMgMCAwIDAtMS4wMjMuMTcgMi40MzYgMi40MzYgMCAwIDAtLjg5My41NjJMMi4yOTIgMTguMjE3LjUgMjcuNWw5LjI4LTEuNzk2IDE2Ljk5LTE2Ljk5Yy4yNTUtLjI1NC40NDQtLjU2LjU2Mi0uODg4YTMgMyAwIDAgMCAuMTctMS4wMjNjMC0uNzA4LS4yMDUtMS40NC0uNTU1LTIuMTZhOCA4IDAgMCAwLTEuNTEtMi4wNzd6TTkuMDEgMjQuMjUybC00LjMxMy44MzRjMC0uMDMuMDA4LS4wNi4wMTItLjA5LjAwNy0uOTQ0LS43NC0xLjcxNS0xLjY3LTEuNzIzLS4wNCAwLS4wNzguMDA3LS4xMTguMDFsLjgzLTQuMjlMMTcuNzIgNS4wMjRsNS4yNjQgNS4yNjRMOS4wMSAyNC4yNTJ6bTE2Ljg0LTE2Ljk2YS44MTguODE4IDAgMCAxLS4xOTQuMzFsLTEuNTcgMS41Ny01LjI2LTUuMjYgMS41Ny0xLjU3YS44Mi44MiAwIDAgMSAuMzEtLjE5NCAxLjQ1IDEuNDUgMCAwIDEgLjQ5Mi0uMDc0Yy4zOTcgMCAuOTE3LjEyNiAxLjQ2OC4zOTcuNTUuMjcgMS4xMy42NzggMS42NTYgMS4yMS41My41My45NCAxLjExIDEuMjA4IDEuNjU1LjI3Mi41NS4zOTcgMS4wNy4zOTMgMS40NjguMDA0LjE5My0uMDI3LjM1OC0uMDc0LjQ4OHpcIiB9KVxuICApO1xufVxuXG5mdW5jdGlvbiBsb2NhbEljb24oKSB7XG4gIHJldHVybiBoKFxuICAgIFwic3ZnXCIsXG4gICAgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBcImNsYXNzXCI6IFwiVXBweUljb25cIiwgd2lkdGg6IFwiMjdcIiwgaGVpZ2h0OiBcIjI1XCIsIHZpZXdCb3g6IFwiMCAwIDI3IDI1XCIgfSxcbiAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTUuNTg2IDkuMjg4YS4zMTMuMzEzIDAgMCAwIC4yODIuMTc2aDQuODR2My45MjJjMCAxLjUxNCAxLjI1IDIuMjQgMi43OTIgMi4yNCAxLjU0IDAgMi43OS0uNzI2IDIuNzktMi4yNFY5LjQ2NGg0Ljg0Yy4xMjIgMCAuMjMtLjA2OC4yODQtLjE3NmEuMzA0LjMwNCAwIDAgMC0uMDQ2LS4zMjRMMTMuNzM1LjEwNmEuMzE2LjMxNiAwIDAgMC0uNDcyIDBsLTcuNjMgOC44NTdhLjMwMi4zMDIgMCAwIDAtLjA0Ny4zMjV6XCIgfSksXG4gICAgaChcInBhdGhcIiwgeyBkOiBcIk0yNC4zIDUuMDkzYy0uMjE4LS43Ni0uNTQtMS4xODctMS4yMDgtMS4xODdoLTQuODU2bDEuMDE4IDEuMThoMy45NDhsMi4wNDMgMTEuMDM4aC03LjE5M3YyLjcyOEg5LjExNHYtMi43MjVoLTcuMzZsMi42Ni0xMS4wNGgzLjMzbDEuMDE4LTEuMThIMy45MDdjLS42NjggMC0xLjA2LjQ2LTEuMjEgMS4xODZMMCAxNi40NTZ2Ny4wNjJDMCAyNC4zMzguNjc2IDI1IDEuNTEgMjVoMjMuOThjLjgzMyAwIDEuNTEtLjY2MyAxLjUxLTEuNDgydi03LjA2MkwyNC4zIDUuMDkzelwiIH0pXG4gICk7XG59XG5cbmZ1bmN0aW9uIGljb25SZXRyeSgpIHtcbiAgcmV0dXJuIGgoXG4gICAgXCJzdmdcIixcbiAgICB7IFwiY2xhc3NcIjogXCJVcHB5SWNvbiByZXRyeVwiLCB3aWR0aDogXCIyOFwiLCBoZWlnaHQ6IFwiMzFcIiwgdmlld0JveDogXCIwIDAgMTYgMTlcIiwgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB9LFxuICAgIGgoXCJwYXRoXCIsIHsgZDogXCJNMTYgMTFhOCA4IDAgMSAxLTgtOHYyYTYgNiAwIDEgMCA2IDZoMnpcIiB9KSxcbiAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTcuOSAzSDEwdjJINy45elwiIH0pLFxuICAgIGgoXCJwYXRoXCIsIHsgZDogXCJNOC41MzYuNWwzLjUzNSAzLjUzNi0xLjQxNCAxLjQxNEw3LjEyIDEuOTE0elwiIH0pLFxuICAgIGgoXCJwYXRoXCIsIHsgZDogXCJNMTAuNjU3IDIuNjIxbDEuNDE0IDEuNDE1TDguNTM2IDcuNTcgNy4xMiA2LjE1N3pcIiB9KVxuICApO1xufVxuXG5mdW5jdGlvbiBjaGVja0ljb24oKSB7XG4gIHJldHVybiBoKFxuICAgIFwic3ZnXCIsXG4gICAgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBcImNsYXNzXCI6IFwiVXBweUljb24gVXBweUljb24tY2hlY2tcIiwgd2lkdGg6IFwiMTNcIiwgaGVpZ2h0OiBcIjlcIiwgdmlld0JveDogXCIwIDAgMTMgOVwiIH0sXG4gICAgaChcInBvbHlnb25cIiwgeyBwb2ludHM6IFwiNSA3LjI5MyAxLjM1NCAzLjY0NyAwLjY0NiA0LjM1NCA1IDguNzA3IDEyLjM1NCAxLjM1NCAxMS42NDYgMC42NDdcIiB9KVxuICApO1xufVxuXG5mdW5jdGlvbiBpY29uQXVkaW8oKSB7XG4gIHJldHVybiBoKFxuICAgIFwic3ZnXCIsXG4gICAgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBcImNsYXNzXCI6IFwiVXBweUljb25cIiwgd2lkdGg6IFwiNTVcIiwgaGVpZ2h0OiBcIjU1XCIsIHZpZXdCb3g6IFwiMCAwIDU1IDU1XCIgfSxcbiAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTUyLjY2LjI1Yy0uMjE2LS4xOS0uNS0uMjc2LS43OS0uMjQybC0zMSA0LjAxYTEgMSAwIDAgMC0uODcuOTkyVjQwLjYyMkMxOC4xNzQgMzguNDI4IDE1LjI3MyAzNyAxMiAzN2MtNS41MTQgMC0xMCA0LjAzNy0xMCA5czQuNDg2IDkgMTAgOSAxMC00LjAzNyAxMC05YzAtLjIzMi0uMDItLjQ2LS4wNC0uNjg3LjAxNC0uMDY1LjA0LS4xMjQuMDQtLjE5MlYxNi4xMmwyOS0zLjc1M3YxOC4yNTdDNDkuMTc0IDI4LjQyOCA0Ni4yNzMgMjcgNDMgMjdjLTUuNTE0IDAtMTAgNC4wMzctMTAgOXM0LjQ4NiA5IDEwIDljNS40NjQgMCA5LjkxMy0zLjk2NiA5Ljk5My04Ljg2NyAwLS4wMTMuMDA3LS4wMjQuMDA3LS4wMzdWMWEuOTk4Ljk5OCAwIDAgMC0uMzQtLjc1ek0xMiA1M2MtNC40MSAwLTgtMy4xNC04LTdzMy41OS03IDgtNyA4IDMuMTQgOCA3LTMuNTkgNy04IDd6bTMxLTEwYy00LjQxIDAtOC0zLjE0LTgtN3MzLjU5LTcgOC03IDggMy4xNCA4IDctMy41OSA3LTggN3pNMjIgMTQuMVY1Ljg5bDI5LTMuNzUzdjguMjFsLTI5IDMuNzU0elwiIH0pXG4gICk7XG59XG5cbmZ1bmN0aW9uIGljb25WaWRlbygpIHtcbiAgcmV0dXJuIGgoXG4gICAgXCJzdmdcIixcbiAgICB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIFwiY2xhc3NcIjogXCJVcHB5SWNvblwiLCB2aWV3Qm94OiBcIjAgMCA1OCA1OFwiIH0sXG4gICAgaChcInBhdGhcIiwgeyBkOiBcIk0zNi41MzcgMjguMTU2bC0xMS03YTEuMDA1IDEuMDA1IDAgMCAwLTEuMDItLjAzM0MyNC4yIDIxLjMgMjQgMjEuNjM1IDI0IDIydjE0YTEgMSAwIDAgMCAxLjUzNy44NDRsMTEtN2ExLjAwMiAxLjAwMiAwIDAgMCAwLTEuNjg4ek0yNiAzNC4xOFYyMy44MkwzNC4xMzcgMjkgMjYgMzQuMTh6XCIgfSksXG4gICAgaChcInBhdGhcIiwgeyBkOiBcIk01NyA2SDFhMSAxIDAgMCAwLTEgMXY0NGExIDEgMCAwIDAgMSAxaDU2YTEgMSAwIDAgMCAxLTFWN2ExIDEgMCAwIDAtMS0xek0xMCAyOEgydi05aDh2OXptLTggMmg4djlIMnYtOXptMTAgMTBWOGgzNHY0MkgxMlY0MHptNDQtMTJoLTh2LTloOHY5em0tOCAyaDh2OWgtOHYtOXptOC0yMnY5aC04VjhoOHpNMiA4aDh2OUgyVjh6bTAgNDJ2LTloOHY5SDJ6bTU0IDBoLTh2LTloOHY5elwiIH0pXG4gICk7XG59XG5cbmZ1bmN0aW9uIGljb25QREYoKSB7XG4gIHJldHVybiBoKFxuICAgIFwic3ZnXCIsXG4gICAgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBcImNsYXNzXCI6IFwiVXBweUljb25cIiwgdmlld0JveDogXCIwIDAgMzQyIDMzNVwiIH0sXG4gICAgaChcInBhdGhcIiwgeyBkOiBcIk0zMjkuMzM3IDIyNy44NGMtMi4xIDEuMy04LjEgMi4xLTExLjkgMi4xLTEyLjQgMC0yNy42LTUuNy00OS4xLTE0LjkgOC4zLS42IDE1LjgtLjkgMjIuNi0uOSAxMi40IDAgMTYgMCAyOC4yIDMuMSAxMi4xIDMgMTIuMiA5LjMgMTAuMiAxMC42em0tMjE1LjEgMS45YzQuOC04LjQgOS43LTE3LjMgMTQuNy0yNi44IDEyLjItMjMuMSAyMC00MS4zIDI1LjctNTYuMiAxMS41IDIwLjkgMjUuOCAzOC42IDQyLjUgNTIuOCAyLjEgMS44IDQuMyAzLjUgNi43IDUuMy0zNC4xIDYuOC02My42IDE1LTg5LjYgMjQuOXptMzkuOC0yMTguOWM2LjggMCAxMC43IDE3LjA2IDExIDMzLjE2LjMgMTYtMy40IDI3LjItOC4xIDM1LjYtMy45LTEyLjQtNS43LTMxLjgtNS43LTQ0LjUgMCAwLS4zLTI0LjI2IDIuOC0yNC4yNnptLTEzMy40IDMwNy4yYzMuOS0xMC41IDE5LjEtMzEuMyA0MS42LTQ5LjggMS40LTEuMSA0LjktNC40IDguMS03LjQtMjMuNSAzNy42LTM5LjMgNTIuNS00OS43IDU3LjJ6bTMxNS4yLTExMi4zYy02LjgtNi43LTIyLTEwLjItNDUtMTAuNS0xNS42LS4yLTM0LjMgMS4yLTU0LjEgMy45LTguOC01LjEtMTcuOS0xMC42LTI1LjEtMTcuMy0xOS4yLTE4LTM1LjItNDIuOS00NS4yLTcwLjMuNi0yLjYgMS4yLTQuOCAxLjctNy4xIDAgMCAxMC44LTYxLjUgNy45LTgyLjMtLjQtMi45LS42LTMuNy0xLjQtNS45bC0uOS0yLjVjLTIuOS02Ljc2LTguNy0xMy45Ni0xNy44LTEzLjU3bC01LjMtLjE3aC0uMWMtMTAuMSAwLTE4LjQgNS4xNy0yMC41IDEyLjg0LTYuNiAyNC4zLjIgNjAuNSAxMi41IDEwNy40bC0zLjIgNy43Yy04LjggMjEuNC0xOS44IDQzLTI5LjUgNjJsLTEuMyAyLjVjLTEwLjIgMjAtMTkuNSAzNy0yNy45IDUxLjRsLTguNyA0LjZjLS42LjQtMTUuNSA4LjItMTkgMTAuMy0yOS42IDE3LjctNDkuMjggMzcuOC01Mi41NCA1My44LTEuMDQgNS0uMjYgMTEuNSA1LjAxIDE0LjZsOC40IDQuMmMzLjYzIDEuOCA3LjUzIDIuNyAxMS40MyAyLjcgMjEuMSAwIDQ1LjYtMjYuMiA3OS4zLTg1LjEgMzktMTIuNyA4My40LTIzLjMgMTIyLjMtMjkuMSAyOS42IDE2LjcgNjYgMjguMyA4OSAyOC4zIDQuMSAwIDcuNi0uNCAxMC41LTEuMiA0LjQtMS4xIDguMS0zLjYgMTAuNC03LjEgNC40LTYuNyA1LjQtMTUuOSA0LjEtMjUuNC0uMy0yLjgtMi42LTYuMy01LTguN3pcIiB9KVxuICApO1xufVxuXG5mdW5jdGlvbiBpY29uRmlsZSgpIHtcbiAgcmV0dXJuIGgoXG4gICAgXCJzdmdcIixcbiAgICB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIFwiY2xhc3NcIjogXCJVcHB5SWNvblwiLCB3aWR0aDogXCI0NFwiLCBoZWlnaHQ6IFwiNThcIiwgdmlld0JveDogXCIwIDAgNDQgNThcIiB9LFxuICAgIGgoXCJwYXRoXCIsIHsgZDogXCJNMjcuNDM3LjUxN2ExIDEgMCAwIDAtLjA5NC4wM0g0LjI1QzIuMDM3LjU0OC4yMTcgMi4zNjguMjE3IDQuNTh2NDguNDA1YzAgMi4yMTIgMS44MiA0LjAzIDQuMDMgNC4wM0gzOS4wM2MyLjIxIDAgNC4wMy0xLjgxOCA0LjAzLTQuMDNWMTUuNjFhMSAxIDAgMCAwLS4wMy0uMjggMSAxIDAgMCAwIDAtLjA5MyAxIDEgMCAwIDAtLjAzLS4wMzIgMSAxIDAgMCAwIDAtLjAzIDEgMSAwIDAgMC0uMDMyLS4wNjMgMSAxIDAgMCAwLS4wMy0uMDYzIDEgMSAwIDAgMC0uMDMyIDAgMSAxIDAgMCAwLS4wMy0uMDYzIDEgMSAwIDAgMC0uMDMyLS4wMyAxIDEgMCAwIDAtLjAzLS4wNjMgMSAxIDAgMCAwLS4wNjMtLjA2MmwtMTQuNTkzLTE0YTEgMSAwIDAgMC0uMDYyLS4wNjJBMSAxIDAgMCAwIDI4IC43MDhhMSAxIDAgMCAwLS4zNzQtLjE1NyAxIDEgMCAwIDAtLjE1NiAwIDEgMSAwIDAgMC0uMDMtLjAzbC0uMDAzLS4wMDN6TTQuMjUgMi41NDdoMjIuMjE4djkuOTdjMCAyLjIxIDEuODIgNC4wMyA0LjAzIDQuMDNoMTAuNTY0djM2LjQzOGEyLjAyIDIuMDIgMCAwIDEtMi4wMzIgMi4wMzJINC4yNWMtMS4xMyAwLTIuMDMyLS45LTIuMDMyLTIuMDMyVjQuNThjMC0xLjEzLjkwMi0yLjAzMiAyLjAzLTIuMDMyem0yNC4yMTggMS4zNDVsMTAuMzc1IDkuOTM3Ljc1LjcxOEgzMC41Yy0xLjEzIDAtMi4wMzItLjktMi4wMzItMi4wM1YzLjg5elwiIH0pXG4gICk7XG59XG5cbmZ1bmN0aW9uIGljb25UZXh0KCkge1xuICByZXR1cm4gaChcbiAgICBcInN2Z1wiLFxuICAgIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgXCJjbGFzc1wiOiBcIlVwcHlJY29uXCIsIHdpZHRoOiBcIjYyXCIsIGhlaWdodDogXCI2MlwiLCB2aWV3Qm94OiBcIjAgMCA2MiA2MlwiLCB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIH0sXG4gICAgaChcInBhdGhcIiwgeyBkOiBcIk00LjMwOSA0LjMwOWgyNC45MTJ2NTMuMzgyaC02LjUyNXYzLjU1OWgxNi42MDh2LTMuNTU5aC02LjUyNVY0LjMwOWgyNC45MTJ2MTAuNjc2aDMuNTU5Vi43NUguNzV2MTQuMjM1aDMuNTU5elwiLCBcImZpbGwtcnVsZVwiOiBcIm5vbnplcm9cIiwgZmlsbDogXCIjMDAwXCIgfSlcbiAgKTtcbn1cblxuZnVuY3Rpb24gZGFzaGJvYXJkQmdJY29uKCkge1xuICByZXR1cm4gaChcbiAgICBcInN2Z1wiLFxuICAgIHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiwgXCJjbGFzc1wiOiBcIlVwcHlJY29uXCIsIHdpZHRoOiBcIjQ4XCIsIGhlaWdodDogXCI2OVwiLCB2aWV3Qm94OiBcIjAgMCA0OCA2OVwiIH0sXG4gICAgaChcInBhdGhcIiwgeyBkOiBcIk0uNSAxLjVoNXpNMTAuNSAxLjVoNXpNMjAuNSAxLjVoNXpNMzAuNTA0IDEuNWg1ek00NS41IDExLjV2NXpNNDUuNSAyMS41djV6TTQ1LjUgMzEuNXY1ek00NS41IDQxLjUwMnY1ek00NS41IDUxLjUwMnY1ek00NS41IDYxLjV2NXpNNDUuNSA2Ni41MDJoLTQuOTk4ek0zNS41MDMgNjYuNTAyaC01ek0yNS41IDY2LjUwMmgtNXpNMTUuNSA2Ni41MDJoLTV6TTUuNSA2Ni41MDJoLTV6TS41IDY2LjUwMnYtNXpNLjUgNTYuNTAydi01ek0uNSA0Ni41MDNWNDEuNXpNLjUgMzYuNXYtNXpNLjUgMjYuNXYtNXpNLjUgMTYuNXYtNXpNLjUgNi41VjEuNDk4ek00NC44MDcgMTFIMzZWMi4xOTV6XCIgfSlcbiAgKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGRlZmF1bHRUYWJJY29uOiBkZWZhdWx0VGFiSWNvbixcbiAgaWNvbkNvcHk6IGljb25Db3B5LFxuICBpY29uUmVzdW1lOiBpY29uUmVzdW1lLFxuICBpY29uUGF1c2U6IGljb25QYXVzZSxcbiAgaWNvblJldHJ5OiBpY29uUmV0cnksXG4gIGljb25FZGl0OiBpY29uRWRpdCxcbiAgbG9jYWxJY29uOiBsb2NhbEljb24sXG4gIGNoZWNrSWNvbjogY2hlY2tJY29uLFxuICBpY29uQXVkaW86IGljb25BdWRpbyxcbiAgaWNvblZpZGVvOiBpY29uVmlkZW8sXG4gIGljb25QREY6IGljb25QREYsXG4gIGljb25GaWxlOiBpY29uRmlsZSxcbiAgaWNvblRleHQ6IGljb25UZXh0LFxuICBkYXNoYm9hcmRCZ0ljb246IGRhc2hib2FyZEJnSWNvblxufTsiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ0B1cHB5L2NvcmUnKSxcbiAgICBQbHVnaW4gPSBfcmVxdWlyZS5QbHVnaW47XG5cbnZhciBUcmFuc2xhdG9yID0gcmVxdWlyZSgnQHVwcHkvdXRpbHMvbGliL1RyYW5zbGF0b3InKTtcbnZhciBkcmFnRHJvcCA9IHJlcXVpcmUoJ2RyYWctZHJvcCcpO1xudmFyIERhc2hib2FyZFVJID0gcmVxdWlyZSgnLi9EYXNoYm9hcmQnKTtcbnZhciBTdGF0dXNCYXIgPSByZXF1aXJlKCdAdXBweS9zdGF0dXMtYmFyJyk7XG52YXIgSW5mb3JtZXIgPSByZXF1aXJlKCdAdXBweS9pbmZvcm1lcicpO1xudmFyIFRodW1ibmFpbEdlbmVyYXRvciA9IHJlcXVpcmUoJ0B1cHB5L3RodW1ibmFpbC1nZW5lcmF0b3InKTtcbnZhciBmaW5kQWxsRE9NRWxlbWVudHMgPSByZXF1aXJlKCdAdXBweS91dGlscy9saWIvZmluZEFsbERPTUVsZW1lbnRzJyk7XG52YXIgdG9BcnJheSA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi90b0FycmF5Jyk7XG52YXIgcHJldHR5Qnl0ZXMgPSByZXF1aXJlKCdwcmV0dGllci1ieXRlcycpO1xuXG52YXIgX3JlcXVpcmUyID0gcmVxdWlyZSgnLi9pY29ucycpLFxuICAgIGRlZmF1bHRUYWJJY29uID0gX3JlcXVpcmUyLmRlZmF1bHRUYWJJY29uO1xuXG4vLyBTb21lIGNvZGUgZm9yIG1hbmFnaW5nIGZvY3VzIHdhcyBhZG9wdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2dob3NoL21pY3JvbW9kYWxcbi8vIE1JVCBsaWNlbmNlLCBodHRwczovL2dpdGh1Yi5jb20vZ2hvc2gvbWljcm9tb2RhbC9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTcgSW5kcmFzaGlzaCBHaG9zaFxuXG5cbnZhciBGT0NVU0FCTEVfRUxFTUVOVFMgPSBbJ2FbaHJlZl06bm90KFt0YWJpbmRleF49XCItXCJdKTpub3QoW2luZXJ0XSk6bm90KFthcmlhLWhpZGRlbl0pJywgJ2FyZWFbaHJlZl06bm90KFt0YWJpbmRleF49XCItXCJdKTpub3QoW2luZXJ0XSk6bm90KFthcmlhLWhpZGRlbl0pJywgJ2lucHV0Om5vdChbZGlzYWJsZWRdKTpub3QoW2luZXJ0XSk6bm90KFthcmlhLWhpZGRlbl0pJywgJ3NlbGVjdDpub3QoW2Rpc2FibGVkXSk6bm90KFtpbmVydF0pOm5vdChbYXJpYS1oaWRkZW5dKScsICd0ZXh0YXJlYTpub3QoW2Rpc2FibGVkXSk6bm90KFtpbmVydF0pOm5vdChbYXJpYS1oaWRkZW5dKScsICdidXR0b246bm90KFtkaXNhYmxlZF0pOm5vdChbaW5lcnRdKTpub3QoW2FyaWEtaGlkZGVuXSknLCAnaWZyYW1lOm5vdChbdGFiaW5kZXhePVwiLVwiXSk6bm90KFtpbmVydF0pOm5vdChbYXJpYS1oaWRkZW5dKScsICdvYmplY3Q6bm90KFt0YWJpbmRleF49XCItXCJdKTpub3QoW2luZXJ0XSk6bm90KFthcmlhLWhpZGRlbl0pJywgJ2VtYmVkOm5vdChbdGFiaW5kZXhePVwiLVwiXSk6bm90KFtpbmVydF0pOm5vdChbYXJpYS1oaWRkZW5dKScsICdbY29udGVudGVkaXRhYmxlXTpub3QoW3RhYmluZGV4Xj1cIi1cIl0pOm5vdChbaW5lcnRdKTpub3QoW2FyaWEtaGlkZGVuXSknLCAnW3RhYmluZGV4XTpub3QoW3RhYmluZGV4Xj1cIi1cIl0pOm5vdChbaW5lcnRdKTpub3QoW2FyaWEtaGlkZGVuXSknXTtcblxudmFyIFRBQl9LRVkgPSA5O1xudmFyIEVTQ19LRVkgPSAyNztcblxuLyoqXG4gKiBEYXNoYm9hcmQgVUkgd2l0aCBwcmV2aWV3cywgbWV0YWRhdGEgZWRpdGluZywgdGFicyBmb3IgdmFyaW91cyBzZXJ2aWNlcyBhbmQgbW9yZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChfUGx1Z2luKSB7XG4gIF9pbmhlcml0cyhEYXNoYm9hcmQsIF9QbHVnaW4pO1xuXG4gIGZ1bmN0aW9uIERhc2hib2FyZCh1cHB5LCBvcHRzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhc2hib2FyZCk7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUGx1Z2luLmNhbGwodGhpcywgdXBweSwgb3B0cykpO1xuXG4gICAgX3RoaXMuaWQgPSBfdGhpcy5vcHRzLmlkIHx8ICdEYXNoYm9hcmQnO1xuICAgIF90aGlzLnRpdGxlID0gJ0Rhc2hib2FyZCc7XG4gICAgX3RoaXMudHlwZSA9ICdvcmNoZXN0cmF0b3InO1xuICAgIF90aGlzLm1vZGFsTmFtZSA9ICd1cHB5LURhc2hib2FyZCc7XG5cbiAgICB2YXIgZGVmYXVsdExvY2FsZSA9IHtcbiAgICAgIHN0cmluZ3M6IHtcbiAgICAgICAgc2VsZWN0VG9VcGxvYWQ6ICdTZWxlY3QgZmlsZXMgdG8gdXBsb2FkJyxcbiAgICAgICAgY2xvc2VNb2RhbDogJ0Nsb3NlIE1vZGFsJyxcbiAgICAgICAgdXBsb2FkOiAnVXBsb2FkJyxcbiAgICAgICAgaW1wb3J0RnJvbTogJ0ltcG9ydCBmcm9tICV7bmFtZX0nLFxuICAgICAgICBkYXNoYm9hcmRXaW5kb3dUaXRsZTogJ1VwcHkgRGFzaGJvYXJkIFdpbmRvdyAoUHJlc3MgZXNjYXBlIHRvIGNsb3NlKScsXG4gICAgICAgIGRhc2hib2FyZFRpdGxlOiAnVXBweSBEYXNoYm9hcmQnLFxuICAgICAgICBjb3B5TGlua1RvQ2xpcGJvYXJkU3VjY2VzczogJ0xpbmsgY29waWVkIHRvIGNsaXBib2FyZCcsXG4gICAgICAgIGNvcHlMaW5rVG9DbGlwYm9hcmRGYWxsYmFjazogJ0NvcHkgdGhlIFVSTCBiZWxvdycsXG4gICAgICAgIGNvcHlMaW5rOiAnQ29weSBsaW5rJyxcbiAgICAgICAgZmlsZVNvdXJjZTogJ0ZpbGUgc291cmNlOiAle25hbWV9JyxcbiAgICAgICAgZG9uZTogJ0RvbmUnLFxuICAgICAgICBuYW1lOiAnTmFtZScsXG4gICAgICAgIHJlbW92ZUZpbGU6ICdSZW1vdmUgZmlsZScsXG4gICAgICAgIGVkaXRGaWxlOiAnRWRpdCBmaWxlJyxcbiAgICAgICAgZWRpdGluZzogJ0VkaXRpbmcgJXtmaWxlfScsXG4gICAgICAgIGZpbmlzaEVkaXRpbmdGaWxlOiAnRmluaXNoIGVkaXRpbmcgZmlsZScsXG4gICAgICAgIHNhdmVDaGFuZ2VzOiAnU2F2ZSBjaGFuZ2VzJyxcbiAgICAgICAgY2FuY2VsOiAnQ2FuY2VsJyxcbiAgICAgICAgbG9jYWxEaXNrOiAnTG9jYWwgRGlzaycsXG4gICAgICAgIG15RGV2aWNlOiAnTXkgRGV2aWNlJyxcbiAgICAgICAgZHJvcFBhc3RlSW1wb3J0OiAnRHJvcCBmaWxlcyBoZXJlLCBwYXN0ZSwgaW1wb3J0IGZyb20gb25lIG9mIHRoZSBsb2NhdGlvbnMgYWJvdmUgb3IgJXticm93c2V9JyxcbiAgICAgICAgZHJvcFBhc3RlOiAnRHJvcCBmaWxlcyBoZXJlLCBwYXN0ZSBvciAle2Jyb3dzZX0nLFxuICAgICAgICBicm93c2U6ICdicm93c2UnLFxuICAgICAgICBmaWxlUHJvZ3Jlc3M6ICdGaWxlIHByb2dyZXNzOiB1cGxvYWQgc3BlZWQgYW5kIEVUQScsXG4gICAgICAgIG51bWJlck9mU2VsZWN0ZWRGaWxlczogJ051bWJlciBvZiBzZWxlY3RlZCBmaWxlcycsXG4gICAgICAgIHVwbG9hZEFsbE5ld0ZpbGVzOiAnVXBsb2FkIGFsbCBuZXcgZmlsZXMnLFxuICAgICAgICBlbXB0eUZvbGRlckFkZGVkOiAnTm8gZmlsZXMgd2VyZSBhZGRlZCBmcm9tIGVtcHR5IGZvbGRlcicsXG4gICAgICAgIHVwbG9hZENvbXBsZXRlOiAnVXBsb2FkIGNvbXBsZXRlJyxcbiAgICAgICAgcmVzdW1lVXBsb2FkOiAnUmVzdW1lIHVwbG9hZCcsXG4gICAgICAgIHBhdXNlVXBsb2FkOiAnUGF1c2UgdXBsb2FkJyxcbiAgICAgICAgcmV0cnlVcGxvYWQ6ICdSZXRyeSB1cGxvYWQnLFxuICAgICAgICB1cGxvYWRYRmlsZXM6IHtcbiAgICAgICAgICAwOiAnVXBsb2FkICV7c21hcnRfY291bnR9IGZpbGUnLFxuICAgICAgICAgIDE6ICdVcGxvYWQgJXtzbWFydF9jb3VudH0gZmlsZXMnXG4gICAgICAgIH0sXG4gICAgICAgIHVwbG9hZFhOZXdGaWxlczoge1xuICAgICAgICAgIDA6ICdVcGxvYWQgKyV7c21hcnRfY291bnR9IGZpbGUnLFxuICAgICAgICAgIDE6ICdVcGxvYWQgKyV7c21hcnRfY291bnR9IGZpbGVzJ1xuICAgICAgICB9LFxuICAgICAgICBmb2xkZXJBZGRlZDoge1xuICAgICAgICAgIDA6ICdBZGRlZCAle3NtYXJ0X2NvdW50fSBmaWxlIGZyb20gJXtmb2xkZXJ9JyxcbiAgICAgICAgICAxOiAnQWRkZWQgJXtzbWFydF9jb3VudH0gZmlsZXMgZnJvbSAle2ZvbGRlcn0nXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuICAgIH07dmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgdGFyZ2V0OiAnYm9keScsXG4gICAgICBtZXRhRmllbGRzOiBbXSxcbiAgICAgIHRyaWdnZXI6ICcjdXBweS1zZWxlY3QtZmlsZXMnLFxuICAgICAgaW5saW5lOiBmYWxzZSxcbiAgICAgIHdpZHRoOiA3NTAsXG4gICAgICBoZWlnaHQ6IDU1MCxcbiAgICAgIHRodW1ibmFpbFdpZHRoOiAyODAsXG4gICAgICBkZWZhdWx0VGFiSWNvbjogZGVmYXVsdFRhYkljb24sXG4gICAgICBzaG93TGlua1RvRmlsZVVwbG9hZFJlc3VsdDogdHJ1ZSxcbiAgICAgIHNob3dQcm9ncmVzc0RldGFpbHM6IGZhbHNlLFxuICAgICAgaGlkZVVwbG9hZEJ1dHRvbjogZmFsc2UsXG4gICAgICBoaWRlUmV0cnlCdXR0b246IGZhbHNlLFxuICAgICAgaGlkZVBhdXNlUmVzdW1lQ2FuY2VsQnV0dG9uczogZmFsc2UsXG4gICAgICBoaWRlUHJvZ3Jlc3NBZnRlckZpbmlzaDogZmFsc2UsXG4gICAgICBub3RlOiBudWxsLFxuICAgICAgY2xvc2VNb2RhbE9uQ2xpY2tPdXRzaWRlOiBmYWxzZSxcbiAgICAgIGRpc2FibGVTdGF0dXNCYXI6IGZhbHNlLFxuICAgICAgZGlzYWJsZUluZm9ybWVyOiBmYWxzZSxcbiAgICAgIGRpc2FibGVUaHVtYm5haWxHZW5lcmF0b3I6IGZhbHNlLFxuICAgICAgZGlzYWJsZVBhZ2VTY3JvbGxXaGVuTW9kYWxPcGVuOiB0cnVlLFxuICAgICAgYW5pbWF0ZU9wZW5DbG9zZTogdHJ1ZSxcbiAgICAgIHByb3VkbHlEaXNwbGF5UG93ZXJlZEJ5VXBweTogdHJ1ZSxcbiAgICAgIG9uUmVxdWVzdENsb3NlTW9kYWw6IGZ1bmN0aW9uIG9uUmVxdWVzdENsb3NlTW9kYWwoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgICB9LFxuICAgICAgbG9jYWxlOiBkZWZhdWx0TG9jYWxlLFxuICAgICAgYnJvd3NlckJhY2tCdXR0b25DbG9zZTogZmFsc2VcblxuICAgICAgLy8gbWVyZ2UgZGVmYXVsdCBvcHRpb25zIHdpdGggdGhlIG9uZXMgc2V0IGJ5IHVzZXJcbiAgICB9O190aGlzLm9wdHMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdHMpO1xuXG4gICAgX3RoaXMubG9jYWxlID0gX2V4dGVuZHMoe30sIGRlZmF1bHRMb2NhbGUsIF90aGlzLm9wdHMubG9jYWxlKTtcbiAgICBfdGhpcy5sb2NhbGUuc3RyaW5ncyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0TG9jYWxlLnN0cmluZ3MsIF90aGlzLm9wdHMubG9jYWxlLnN0cmluZ3MpO1xuXG4gICAgX3RoaXMudHJhbnNsYXRvciA9IG5ldyBUcmFuc2xhdG9yKHsgbG9jYWxlOiBfdGhpcy5sb2NhbGUgfSk7XG4gICAgX3RoaXMuaTE4biA9IF90aGlzLnRyYW5zbGF0b3IudHJhbnNsYXRlLmJpbmQoX3RoaXMudHJhbnNsYXRvcik7XG4gICAgX3RoaXMuaTE4bkFycmF5ID0gX3RoaXMudHJhbnNsYXRvci50cmFuc2xhdGVBcnJheS5iaW5kKF90aGlzLnRyYW5zbGF0b3IpO1xuXG4gICAgX3RoaXMub3Blbk1vZGFsID0gX3RoaXMub3Blbk1vZGFsLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLmNsb3NlTW9kYWwgPSBfdGhpcy5jbG9zZU1vZGFsLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLnJlcXVlc3RDbG9zZU1vZGFsID0gX3RoaXMucmVxdWVzdENsb3NlTW9kYWwuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuaXNNb2RhbE9wZW4gPSBfdGhpcy5pc01vZGFsT3Blbi5iaW5kKF90aGlzKTtcblxuICAgIF90aGlzLmFkZFRhcmdldCA9IF90aGlzLmFkZFRhcmdldC5iaW5kKF90aGlzKTtcbiAgICBfdGhpcy5yZW1vdmVUYXJnZXQgPSBfdGhpcy5yZW1vdmVUYXJnZXQuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuaGlkZUFsbFBhbmVscyA9IF90aGlzLmhpZGVBbGxQYW5lbHMuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuc2hvd1BhbmVsID0gX3RoaXMuc2hvd1BhbmVsLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLmdldEZvY3VzYWJsZU5vZGVzID0gX3RoaXMuZ2V0Rm9jdXNhYmxlTm9kZXMuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuc2V0Rm9jdXNUb0ZpcnN0Tm9kZSA9IF90aGlzLnNldEZvY3VzVG9GaXJzdE5vZGUuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuaGFuZGxlUG9wU3RhdGUgPSBfdGhpcy5oYW5kbGVQb3BTdGF0ZS5iaW5kKF90aGlzKTtcbiAgICBfdGhpcy5tYWludGFpbkZvY3VzID0gX3RoaXMubWFpbnRhaW5Gb2N1cy5iaW5kKF90aGlzKTtcblxuICAgIF90aGlzLmluaXRFdmVudHMgPSBfdGhpcy5pbml0RXZlbnRzLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLm9uS2V5ZG93biA9IF90aGlzLm9uS2V5ZG93bi5iaW5kKF90aGlzKTtcbiAgICBfdGhpcy5oYW5kbGVDbGlja091dHNpZGUgPSBfdGhpcy5oYW5kbGVDbGlja091dHNpZGUuYmluZChfdGhpcyk7XG4gICAgX3RoaXMudG9nZ2xlRmlsZUNhcmQgPSBfdGhpcy50b2dnbGVGaWxlQ2FyZC5iaW5kKF90aGlzKTtcbiAgICBfdGhpcy5oYW5kbGVEcm9wID0gX3RoaXMuaGFuZGxlRHJvcC5iaW5kKF90aGlzKTtcbiAgICBfdGhpcy5oYW5kbGVQYXN0ZSA9IF90aGlzLmhhbmRsZVBhc3RlLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLmhhbmRsZUlucHV0Q2hhbmdlID0gX3RoaXMuaGFuZGxlSW5wdXRDaGFuZ2UuYmluZChfdGhpcyk7XG4gICAgX3RoaXMudXBkYXRlRGFzaGJvYXJkRWxXaWR0aCA9IF90aGlzLnVwZGF0ZURhc2hib2FyZEVsV2lkdGguYmluZChfdGhpcyk7XG4gICAgX3RoaXMucmVuZGVyID0gX3RoaXMucmVuZGVyLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLmluc3RhbGwgPSBfdGhpcy5pbnN0YWxsLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIERhc2hib2FyZC5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0ID0gZnVuY3Rpb24gcmVtb3ZlVGFyZ2V0KHBsdWdpbikge1xuICAgIHZhciBwbHVnaW5TdGF0ZSA9IHRoaXMuZ2V0UGx1Z2luU3RhdGUoKTtcbiAgICAvLyBmaWx0ZXIgb3V0IHRoZSBvbmUgd2Ugd2FudCB0byByZW1vdmVcbiAgICB2YXIgbmV3VGFyZ2V0cyA9IHBsdWdpblN0YXRlLnRhcmdldHMuZmlsdGVyKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIHJldHVybiB0YXJnZXQuaWQgIT09IHBsdWdpbi5pZDtcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0UGx1Z2luU3RhdGUoe1xuICAgICAgdGFyZ2V0czogbmV3VGFyZ2V0c1xuICAgIH0pO1xuICB9O1xuXG4gIERhc2hib2FyZC5wcm90b3R5cGUuYWRkVGFyZ2V0ID0gZnVuY3Rpb24gYWRkVGFyZ2V0KHBsdWdpbikge1xuICAgIHZhciBjYWxsZXJQbHVnaW5JZCA9IHBsdWdpbi5pZCB8fCBwbHVnaW4uY29uc3RydWN0b3IubmFtZTtcbiAgICB2YXIgY2FsbGVyUGx1Z2luTmFtZSA9IHBsdWdpbi50aXRsZSB8fCBjYWxsZXJQbHVnaW5JZDtcbiAgICB2YXIgY2FsbGVyUGx1Z2luVHlwZSA9IHBsdWdpbi50eXBlO1xuXG4gICAgaWYgKGNhbGxlclBsdWdpblR5cGUgIT09ICdhY3F1aXJlcicgJiYgY2FsbGVyUGx1Z2luVHlwZSAhPT0gJ3Byb2dyZXNzaW5kaWNhdG9yJyAmJiBjYWxsZXJQbHVnaW5UeXBlICE9PSAncHJlc2VudGVyJykge1xuICAgICAgdmFyIG1zZyA9ICdEYXNoYm9hcmQ6IE1vZGFsIGNhbiBvbmx5IGJlIHVzZWQgYnkgcGx1Z2lucyBvZiB0eXBlczogYWNxdWlyZXIsIHByb2dyZXNzaW5kaWNhdG9yLCBwcmVzZW50ZXInO1xuICAgICAgdGhpcy51cHB5LmxvZyhtc2cpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB0YXJnZXQgPSB7XG4gICAgICBpZDogY2FsbGVyUGx1Z2luSWQsXG4gICAgICBuYW1lOiBjYWxsZXJQbHVnaW5OYW1lLFxuICAgICAgdHlwZTogY2FsbGVyUGx1Z2luVHlwZVxuICAgIH07XG5cbiAgICB2YXIgc3RhdGUgPSB0aGlzLmdldFBsdWdpblN0YXRlKCk7XG4gICAgdmFyIG5ld1RhcmdldHMgPSBzdGF0ZS50YXJnZXRzLnNsaWNlKCk7XG4gICAgbmV3VGFyZ2V0cy5wdXNoKHRhcmdldCk7XG5cbiAgICB0aGlzLnNldFBsdWdpblN0YXRlKHtcbiAgICAgIHRhcmdldHM6IG5ld1RhcmdldHNcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmVsO1xuICB9O1xuXG4gIERhc2hib2FyZC5wcm90b3R5cGUuaGlkZUFsbFBhbmVscyA9IGZ1bmN0aW9uIGhpZGVBbGxQYW5lbHMoKSB7XG4gICAgdGhpcy5zZXRQbHVnaW5TdGF0ZSh7XG4gICAgICBhY3RpdmVQYW5lbDogZmFsc2VcbiAgICB9KTtcbiAgfTtcblxuICBEYXNoYm9hcmQucHJvdG90eXBlLnNob3dQYW5lbCA9IGZ1bmN0aW9uIHNob3dQYW5lbChpZCkge1xuICAgIHZhciBfZ2V0UGx1Z2luU3RhdGUgPSB0aGlzLmdldFBsdWdpblN0YXRlKCksXG4gICAgICAgIHRhcmdldHMgPSBfZ2V0UGx1Z2luU3RhdGUudGFyZ2V0cztcblxuICAgIHZhciBhY3RpdmVQYW5lbCA9IHRhcmdldHMuZmlsdGVyKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIHJldHVybiB0YXJnZXQudHlwZSA9PT0gJ2FjcXVpcmVyJyAmJiB0YXJnZXQuaWQgPT09IGlkO1xuICAgIH0pWzBdO1xuXG4gICAgdGhpcy5zZXRQbHVnaW5TdGF0ZSh7XG4gICAgICBhY3RpdmVQYW5lbDogYWN0aXZlUGFuZWxcbiAgICB9KTtcbiAgfTtcblxuICBEYXNoYm9hcmQucHJvdG90eXBlLnJlcXVlc3RDbG9zZU1vZGFsID0gZnVuY3Rpb24gcmVxdWVzdENsb3NlTW9kYWwoKSB7XG4gICAgaWYgKHRoaXMub3B0cy5vblJlcXVlc3RDbG9zZU1vZGFsKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRzLm9uUmVxdWVzdENsb3NlTW9kYWwoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgfVxuICB9O1xuXG4gIERhc2hib2FyZC5wcm90b3R5cGUuZ2V0Rm9jdXNhYmxlTm9kZXMgPSBmdW5jdGlvbiBnZXRGb2N1c2FibGVOb2RlcygpIHtcbiAgICB2YXIgbm9kZXMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoRk9DVVNBQkxFX0VMRU1FTlRTKTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMobm9kZXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gbm9kZXNba2V5XTtcbiAgICB9KTtcbiAgfTtcblxuICBEYXNoYm9hcmQucHJvdG90eXBlLnNldEZvY3VzVG9GaXJzdE5vZGUgPSBmdW5jdGlvbiBzZXRGb2N1c1RvRmlyc3ROb2RlKCkge1xuICAgIHZhciBmb2N1c2FibGVOb2RlcyA9IHRoaXMuZ2V0Rm9jdXNhYmxlTm9kZXMoKTtcbiAgICBpZiAoZm9jdXNhYmxlTm9kZXMubGVuZ3RoKSBmb2N1c2FibGVOb2Rlc1swXS5mb2N1cygpO1xuICB9O1xuXG4gIERhc2hib2FyZC5wcm90b3R5cGUudXBkYXRlQnJvd3Nlckhpc3RvcnkgPSBmdW5jdGlvbiB1cGRhdGVCcm93c2VySGlzdG9yeSgpIHtcbiAgICAvLyBFbnN1cmUgaGlzdG9yeSBzdGF0ZSBkb2VzIG5vdCBhbHJlYWR5IGNvbnRhaW4gb3VyIG1vZGFsIG5hbWUgdG8gYXZvaWQgZG91YmxlLXB1c2hpbmdcbiAgICBpZiAoIWhpc3Rvcnkuc3RhdGUgfHwgIWhpc3Rvcnkuc3RhdGVbdGhpcy5tb2RhbE5hbWVdKSB7XG4gICAgICB2YXIgX2hpc3RvcnkkcHVzaFN0YXRlO1xuXG4gICAgICAvLyBQdXNoIHRvIGhpc3Rvcnkgc28gdGhhdCB0aGUgcGFnZSBpcyBub3QgbG9zdCBvbiBicm93c2VyIGJhY2sgYnV0dG9uIHByZXNzXG4gICAgICBoaXN0b3J5LnB1c2hTdGF0ZSgoX2hpc3RvcnkkcHVzaFN0YXRlID0ge30sIF9oaXN0b3J5JHB1c2hTdGF0ZVt0aGlzLm1vZGFsTmFtZV0gPSB0cnVlLCBfaGlzdG9yeSRwdXNoU3RhdGUpLCAnJyk7XG4gICAgfVxuXG4gICAgLy8gTGlzdGVuIGZvciBiYWNrIGJ1dHRvbiBwcmVzc2VzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5oYW5kbGVQb3BTdGF0ZSwgZmFsc2UpO1xuICB9O1xuXG4gIERhc2hib2FyZC5wcm90b3R5cGUuaGFuZGxlUG9wU3RhdGUgPSBmdW5jdGlvbiBoYW5kbGVQb3BTdGF0ZShldmVudCkge1xuICAgIC8vIENsb3NlIHRoZSBtb2RhbCBpZiB0aGUgaGlzdG9yeSBzdGF0ZSBubyBsb25nZXIgY29udGFpbnMgb3VyIG1vZGFsIG5hbWVcbiAgICBpZiAoIWV2ZW50LnN0YXRlIHx8ICFldmVudC5zdGF0ZVt0aGlzLm1vZGFsTmFtZV0pIHtcbiAgICAgIHRoaXMuY2xvc2VNb2RhbCh7IG1hbnVhbENsb3NlOiBmYWxzZSB9KTtcbiAgICB9XG5cbiAgICAvLyBXaGVuIHRoZSBicm93c2VyIGJhY2sgYnV0dG9uIGlzIHByZXNzZWQgYW5kIHVwcHkgaXMgbm93IHRoZSBsYXRlc3QgZW50cnkgaW4gdGhlIGhpc3RvcnkgYnV0IHRoZSBtb2RhbCBpcyBjbG9zZWQsIGZpeCB0aGUgaGlzdG9yeSBieSByZW1vdmluZyB0aGUgdXBweSBoaXN0b3J5IGVudHJ5XG4gICAgLy8gVGhpcyBvY2N1cnMgd2hlbiBhbm90aGVyIGVudHJ5IGlzIGFkZGVkIGludG8gdGhlIGhpc3Rvcnkgc3RhdGUgd2hpbGUgdGhlIG1vZGFsIGlzIG9wZW4sIGFuZCB0aGVuIHRoZSBtb2RhbCBnZXRzIG1hbnVhbGx5IGNsb3NlZFxuICAgIC8vIFNvbHZlcyBQUiAjNTc1IChodHRwczovL2dpdGh1Yi5jb20vdHJhbnNsb2FkaXQvdXBweS9wdWxsLzU3NSlcbiAgICBpZiAoIXRoaXMuaXNNb2RhbE9wZW4oKSAmJiBldmVudC5zdGF0ZSAmJiBldmVudC5zdGF0ZVt0aGlzLm1vZGFsTmFtZV0pIHtcbiAgICAgIGhpc3RvcnkuZ28oLTEpO1xuICAgIH1cbiAgfTtcblxuICBEYXNoYm9hcmQucHJvdG90eXBlLnNldEZvY3VzVG9Ccm93c2UgPSBmdW5jdGlvbiBzZXRGb2N1c1RvQnJvd3NlKCkge1xuICAgIHZhciBicm93c2VCdG4gPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy51cHB5LURhc2hib2FyZC1icm93c2UnKTtcbiAgICBpZiAoYnJvd3NlQnRuKSBicm93c2VCdG4uZm9jdXMoKTtcbiAgfTtcblxuICBEYXNoYm9hcmQucHJvdG90eXBlLm1haW50YWluRm9jdXMgPSBmdW5jdGlvbiBtYWludGFpbkZvY3VzKGV2ZW50KSB7XG4gICAgdmFyIGZvY3VzYWJsZU5vZGVzID0gdGhpcy5nZXRGb2N1c2FibGVOb2RlcygpO1xuICAgIHZhciBmb2N1c2VkSXRlbUluZGV4ID0gZm9jdXNhYmxlTm9kZXMuaW5kZXhPZihkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcblxuICAgIGlmIChldmVudC5zaGlmdEtleSAmJiBmb2N1c2VkSXRlbUluZGV4ID09PSAwKSB7XG4gICAgICBmb2N1c2FibGVOb2Rlc1tmb2N1c2FibGVOb2Rlcy5sZW5ndGggLSAxXS5mb2N1cygpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5ICYmIGZvY3VzZWRJdGVtSW5kZXggPT09IGZvY3VzYWJsZU5vZGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgIGZvY3VzYWJsZU5vZGVzWzBdLmZvY3VzKCk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfTtcblxuICBEYXNoYm9hcmQucHJvdG90eXBlLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uIG9wZW5Nb2RhbCgpIHtcbiAgICB0aGlzLnNldFBsdWdpblN0YXRlKHtcbiAgICAgIGlzSGlkZGVuOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgLy8gc2F2ZSBzY3JvbGwgcG9zaXRpb25cbiAgICB0aGlzLnNhdmVkU2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cuc2Nyb2xsWTtcbiAgICAvLyBzYXZlIGFjdGl2ZSBlbGVtZW50LCBzbyB3ZSBjYW4gcmVzdG9yZSBmb2N1cyB3aGVuIG1vZGFsIGlzIGNsb3NlZFxuICAgIHRoaXMuc2F2ZWRBY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblxuICAgIGlmICh0aGlzLm9wdHMuZGlzYWJsZVBhZ2VTY3JvbGxXaGVuTW9kYWxPcGVuKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3VwcHktRGFzaGJvYXJkLWlzRml4ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRzLmJyb3dzZXJCYWNrQnV0dG9uQ2xvc2UpIHtcbiAgICAgIHRoaXMudXBkYXRlQnJvd3Nlckhpc3RvcnkoKTtcbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgRVNDIGFuZCBUQUIga2V5cyBpbiBtb2RhbCBkaWFsb2dcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleWRvd24pO1xuXG4gICAgdGhpcy5yZXJlbmRlcih0aGlzLnVwcHkuZ2V0U3RhdGUoKSk7XG4gICAgdGhpcy51cGRhdGVEYXNoYm9hcmRFbFdpZHRoKCk7XG4gICAgdGhpcy5zZXRGb2N1c1RvQnJvd3NlKCk7XG4gIH07XG5cbiAgRGFzaGJvYXJkLnByb3RvdHlwZS5jbG9zZU1vZGFsID0gZnVuY3Rpb24gY2xvc2VNb2RhbCgpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB2YXIgX29wdHMkbWFudWFsQ2xvc2UgPSBvcHRzLm1hbnVhbENsb3NlLFxuICAgICAgICBtYW51YWxDbG9zZSA9IF9vcHRzJG1hbnVhbENsb3NlID09PSB1bmRlZmluZWQgPyB0cnVlIDogX29wdHMkbWFudWFsQ2xvc2U7XG5cblxuICAgIGlmICh0aGlzLm9wdHMuZGlzYWJsZVBhZ2VTY3JvbGxXaGVuTW9kYWxPcGVuKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3VwcHktRGFzaGJvYXJkLWlzRml4ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRzLmFuaW1hdGVPcGVuQ2xvc2UpIHtcbiAgICAgIHRoaXMuc2V0UGx1Z2luU3RhdGUoe1xuICAgICAgICBpc0Nsb3Npbmc6IHRydWVcbiAgICAgIH0pO1xuICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBfdGhpczIuc2V0UGx1Z2luU3RhdGUoe1xuICAgICAgICAgIGlzSGlkZGVuOiB0cnVlLFxuICAgICAgICAgIGlzQ2xvc2luZzogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIF90aGlzMi5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0UGx1Z2luU3RhdGUoe1xuICAgICAgICBpc0hpZGRlbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gaGFuZGxlIEVTQyBhbmQgVEFCIGtleXMgaW4gbW9kYWwgZGlhbG9nXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlkb3duKTtcblxuICAgIHRoaXMuc2F2ZWRBY3RpdmVFbGVtZW50LmZvY3VzKCk7XG5cbiAgICBpZiAobWFudWFsQ2xvc2UpIHtcbiAgICAgIGlmICh0aGlzLm9wdHMuYnJvd3NlckJhY2tCdXR0b25DbG9zZSkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgbGF0ZXN0IGVudHJ5IGluIHRoZSBoaXN0b3J5IHN0YXRlIGlzIG91ciBtb2RhbCBuYW1lXG4gICAgICAgIGlmIChoaXN0b3J5LnN0YXRlICYmIGhpc3Rvcnkuc3RhdGVbdGhpcy5tb2RhbE5hbWVdKSB7XG4gICAgICAgICAgLy8gR28gYmFjayBpbiBoaXN0b3J5IHRvIGNsZWFyIG91dCB0aGUgZW50cnkgd2UgY3JlYXRlZCAodWx0aW1hdGVseSBjbG9zaW5nIHRoZSBtb2RhbClcbiAgICAgICAgICBoaXN0b3J5LmdvKC0xKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBEYXNoYm9hcmQucHJvdG90eXBlLmlzTW9kYWxPcGVuID0gZnVuY3Rpb24gaXNNb2RhbE9wZW4oKSB7XG4gICAgcmV0dXJuICF0aGlzLmdldFBsdWdpblN0YXRlKCkuaXNIaWRkZW4gfHwgZmFsc2U7XG4gIH07XG5cbiAgRGFzaGJvYXJkLnByb3RvdHlwZS5vbktleWRvd24gPSBmdW5jdGlvbiBvbktleWRvd24oZXZlbnQpIHtcbiAgICAvLyBjbG9zZSBtb2RhbCBvbiBlc2Mga2V5IHByZXNzXG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEVTQ19LRVkpIHRoaXMucmVxdWVzdENsb3NlTW9kYWwoZXZlbnQpO1xuICAgIC8vIG1haW50YWluRm9jdXMgb24gdGFiIGtleSBwcmVzc1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSBUQUJfS0VZKSB0aGlzLm1haW50YWluRm9jdXMoZXZlbnQpO1xuICB9O1xuXG4gIERhc2hib2FyZC5wcm90b3R5cGUuaGFuZGxlQ2xpY2tPdXRzaWRlID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2tPdXRzaWRlKCkge1xuICAgIGlmICh0aGlzLm9wdHMuY2xvc2VNb2RhbE9uQ2xpY2tPdXRzaWRlKSB0aGlzLnJlcXVlc3RDbG9zZU1vZGFsKCk7XG4gIH07XG5cbiAgRGFzaGJvYXJkLnByb3RvdHlwZS5oYW5kbGVQYXN0ZSA9IGZ1bmN0aW9uIGhhbmRsZVBhc3RlKGV2KSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB2YXIgZmlsZXMgPSB0b0FycmF5KGV2LmNsaXBib2FyZERhdGEuaXRlbXMpO1xuICAgIGZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIGlmIChmaWxlLmtpbmQgIT09ICdmaWxlJykgcmV0dXJuO1xuXG4gICAgICB2YXIgYmxvYiA9IGZpbGUuZ2V0QXNGaWxlKCk7XG4gICAgICBpZiAoIWJsb2IpIHtcbiAgICAgICAgX3RoaXMzLnVwcHkubG9nKCdbRGFzaGJvYXJkXSBGaWxlIHBhc3RlZCwgYnV0IHRoZSBmaWxlIGJsb2IgaXMgZW1wdHknKTtcbiAgICAgICAgX3RoaXMzLnVwcHkuaW5mbygnRXJyb3IgcGFzdGluZyBmaWxlJywgJ2Vycm9yJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIF90aGlzMy51cHB5LmxvZygnW0Rhc2hib2FyZF0gRmlsZSBwYXN0ZWQnKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIF90aGlzMy51cHB5LmFkZEZpbGUoe1xuICAgICAgICAgIHNvdXJjZTogX3RoaXMzLmlkLFxuICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgZGF0YTogYmxvYlxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBOb3RoaW5nLCByZXN0cmljdGlvbiBlcnJvcnMgaGFuZGxlZCBpbiBDb3JlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgRGFzaGJvYXJkLnByb3RvdHlwZS5oYW5kbGVJbnB1dENoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUlucHV0Q2hhbmdlKGV2KSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBmaWxlcyA9IHRvQXJyYXkoZXYudGFyZ2V0LmZpbGVzKTtcblxuICAgIGZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIF90aGlzNC51cHB5LmFkZEZpbGUoe1xuICAgICAgICAgIHNvdXJjZTogX3RoaXM0LmlkLFxuICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgZGF0YTogZmlsZVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBOb3RoaW5nLCByZXN0cmljdGlvbiBlcnJvcnMgaGFuZGxlZCBpbiBDb3JlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgRGFzaGJvYXJkLnByb3RvdHlwZS5pbml0RXZlbnRzID0gZnVuY3Rpb24gaW5pdEV2ZW50cygpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIC8vIE1vZGFsIG9wZW4gYnV0dG9uXG4gICAgdmFyIHNob3dNb2RhbFRyaWdnZXIgPSBmaW5kQWxsRE9NRWxlbWVudHModGhpcy5vcHRzLnRyaWdnZXIpO1xuICAgIGlmICghdGhpcy5vcHRzLmlubGluZSAmJiBzaG93TW9kYWxUcmlnZ2VyKSB7XG4gICAgICBzaG93TW9kYWxUcmlnZ2VyLmZvckVhY2goZnVuY3Rpb24gKHRyaWdnZXIpIHtcbiAgICAgICAgcmV0dXJuIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGhpczUub3Blbk1vZGFsKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5vcHRzLmlubGluZSAmJiAhc2hvd01vZGFsVHJpZ2dlcikge1xuICAgICAgdGhpcy51cHB5LmxvZygnRGFzaGJvYXJkIG1vZGFsIHRyaWdnZXIgbm90IGZvdW5kLiBNYWtlIHN1cmUgYHRyaWdnZXJgIGlzIHNldCBpbiBEYXNoYm9hcmQgb3B0aW9ucyB1bmxlc3MgeW91IGFyZSBwbGFubmluZyB0byBjYWxsIG9wZW5Nb2RhbCgpIG1ldGhvZCB5b3Vyc2VsZicpO1xuICAgIH1cblxuICAgIC8vIERyYWcgRHJvcFxuICAgIHRoaXMucmVtb3ZlRHJhZ0Ryb3BMaXN0ZW5lciA9IGRyYWdEcm9wKHRoaXMuZWwsIGZ1bmN0aW9uIChmaWxlcykge1xuICAgICAgX3RoaXM1LmhhbmRsZURyb3AoZmlsZXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVEYXNoYm9hcmRFbFdpZHRoKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMudXBkYXRlRGFzaGJvYXJkRWxXaWR0aCk7XG5cbiAgICB0aGlzLnVwcHkub24oJ3BsdWdpbi1yZW1vdmUnLCB0aGlzLnJlbW92ZVRhcmdldCk7XG4gIH07XG5cbiAgRGFzaGJvYXJkLnByb3RvdHlwZS5yZW1vdmVFdmVudHMgPSBmdW5jdGlvbiByZW1vdmVFdmVudHMoKSB7XG4gICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICB2YXIgc2hvd01vZGFsVHJpZ2dlciA9IGZpbmRBbGxET01FbGVtZW50cyh0aGlzLm9wdHMudHJpZ2dlcik7XG4gICAgaWYgKCF0aGlzLm9wdHMuaW5saW5lICYmIHNob3dNb2RhbFRyaWdnZXIpIHtcbiAgICAgIHNob3dNb2RhbFRyaWdnZXIuZm9yRWFjaChmdW5jdGlvbiAodHJpZ2dlcikge1xuICAgICAgICByZXR1cm4gdHJpZ2dlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIF90aGlzNi5vcGVuTW9kYWwpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5yZW1vdmVEcmFnRHJvcExpc3RlbmVyKCk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMudXBkYXRlRGFzaGJvYXJkRWxXaWR0aCk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5oYW5kbGVQb3BTdGF0ZSwgZmFsc2UpO1xuICAgIHRoaXMudXBweS5vZmYoJ3BsdWdpbi1yZW1vdmUnLCB0aGlzLnJlbW92ZVRhcmdldCk7XG4gIH07XG5cbiAgRGFzaGJvYXJkLnByb3RvdHlwZS51cGRhdGVEYXNoYm9hcmRFbFdpZHRoID0gZnVuY3Rpb24gdXBkYXRlRGFzaGJvYXJkRWxXaWR0aCgpIHtcbiAgICB2YXIgZGFzaGJvYXJkRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy51cHB5LURhc2hib2FyZC1pbm5lcicpO1xuICAgIHRoaXMudXBweS5sb2coJ0Rhc2hib2FyZCB3aWR0aDogJyArIGRhc2hib2FyZEVsLm9mZnNldFdpZHRoKTtcblxuICAgIHRoaXMuc2V0UGx1Z2luU3RhdGUoe1xuICAgICAgY29udGFpbmVyV2lkdGg6IGRhc2hib2FyZEVsLm9mZnNldFdpZHRoXG4gICAgfSk7XG4gIH07XG5cbiAgRGFzaGJvYXJkLnByb3RvdHlwZS50b2dnbGVGaWxlQ2FyZCA9IGZ1bmN0aW9uIHRvZ2dsZUZpbGVDYXJkKGZpbGVJZCkge1xuICAgIHRoaXMuc2V0UGx1Z2luU3RhdGUoe1xuICAgICAgZmlsZUNhcmRGb3I6IGZpbGVJZCB8fCBmYWxzZVxuICAgIH0pO1xuICB9O1xuXG4gIERhc2hib2FyZC5wcm90b3R5cGUuaGFuZGxlRHJvcCA9IGZ1bmN0aW9uIGhhbmRsZURyb3AoZmlsZXMpIHtcbiAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgIHRoaXMudXBweS5sb2coJ1tEYXNoYm9hcmRdIEZpbGVzIHdlcmUgZHJvcHBlZCcpO1xuXG4gICAgZmlsZXMuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgX3RoaXM3LnVwcHkuYWRkRmlsZSh7XG4gICAgICAgICAgc291cmNlOiBfdGhpczcuaWQsXG4gICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICBkYXRhOiBmaWxlXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIE5vdGhpbmcsIHJlc3RyaWN0aW9uIGVycm9ycyBoYW5kbGVkIGluIENvcmVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBEYXNoYm9hcmQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihzdGF0ZSkge1xuICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgdmFyIHBsdWdpblN0YXRlID0gdGhpcy5nZXRQbHVnaW5TdGF0ZSgpO1xuICAgIHZhciBmaWxlcyA9IHN0YXRlLmZpbGVzLFxuICAgICAgICBjYXBhYmlsaXRpZXMgPSBzdGF0ZS5jYXBhYmlsaXRpZXM7XG5cblxuICAgIHZhciBuZXdGaWxlcyA9IE9iamVjdC5rZXlzKGZpbGVzKS5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHJldHVybiAhZmlsZXNbZmlsZV0ucHJvZ3Jlc3MudXBsb2FkU3RhcnRlZDtcbiAgICB9KTtcbiAgICB2YXIgaW5Qcm9ncmVzc0ZpbGVzID0gT2JqZWN0LmtleXMoZmlsZXMpLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgcmV0dXJuICFmaWxlc1tmaWxlXS5wcm9ncmVzcy51cGxvYWRDb21wbGV0ZSAmJiBmaWxlc1tmaWxlXS5wcm9ncmVzcy51cGxvYWRTdGFydGVkICYmICFmaWxlc1tmaWxlXS5pc1BhdXNlZDtcbiAgICB9KTtcblxuICAgIHZhciBpblByb2dyZXNzRmlsZXNBcnJheSA9IFtdO1xuICAgIGluUHJvZ3Jlc3NGaWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICBpblByb2dyZXNzRmlsZXNBcnJheS5wdXNoKGZpbGVzW2ZpbGVdKTtcbiAgICB9KTtcblxuICAgIHZhciB0b3RhbFNpemUgPSAwO1xuICAgIHZhciB0b3RhbFVwbG9hZGVkU2l6ZSA9IDA7XG4gICAgaW5Qcm9ncmVzc0ZpbGVzQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgdG90YWxTaXplID0gdG90YWxTaXplICsgKGZpbGUucHJvZ3Jlc3MuYnl0ZXNUb3RhbCB8fCAwKTtcbiAgICAgIHRvdGFsVXBsb2FkZWRTaXplID0gdG90YWxVcGxvYWRlZFNpemUgKyAoZmlsZS5wcm9ncmVzcy5ieXRlc1VwbG9hZGVkIHx8IDApO1xuICAgIH0pO1xuICAgIHRvdGFsU2l6ZSA9IHByZXR0eUJ5dGVzKHRvdGFsU2l6ZSk7XG4gICAgdG90YWxVcGxvYWRlZFNpemUgPSBwcmV0dHlCeXRlcyh0b3RhbFVwbG9hZGVkU2l6ZSk7XG5cbiAgICB2YXIgYXR0YWNoUmVuZGVyRnVuY3Rpb25Ub1RhcmdldCA9IGZ1bmN0aW9uIGF0dGFjaFJlbmRlckZ1bmN0aW9uVG9UYXJnZXQodGFyZ2V0KSB7XG4gICAgICB2YXIgcGx1Z2luID0gX3RoaXM4LnVwcHkuZ2V0UGx1Z2luKHRhcmdldC5pZCk7XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHRhcmdldCwge1xuICAgICAgICBpY29uOiBwbHVnaW4uaWNvbiB8fCBfdGhpczgub3B0cy5kZWZhdWx0VGFiSWNvbixcbiAgICAgICAgcmVuZGVyOiBwbHVnaW4ucmVuZGVyXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGlzU3VwcG9ydGVkID0gZnVuY3Rpb24gaXNTdXBwb3J0ZWQodGFyZ2V0KSB7XG4gICAgICB2YXIgcGx1Z2luID0gX3RoaXM4LnVwcHkuZ2V0UGx1Z2luKHRhcmdldC5pZCk7XG4gICAgICAvLyBJZiB0aGUgcGx1Z2luIGRvZXMgbm90IHByb3ZpZGUgYSBgc3VwcG9ydGVkYCBjaGVjaywgYXNzdW1lIHRoZSBwbHVnaW4gd29ya3MgZXZlcnl3aGVyZS5cbiAgICAgIGlmICh0eXBlb2YgcGx1Z2luLmlzU3VwcG9ydGVkICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBsdWdpbi5pc1N1cHBvcnRlZCgpO1xuICAgIH07XG5cbiAgICB2YXIgYWNxdWlyZXJzID0gcGx1Z2luU3RhdGUudGFyZ2V0cy5maWx0ZXIoZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgcmV0dXJuIHRhcmdldC50eXBlID09PSAnYWNxdWlyZXInICYmIGlzU3VwcG9ydGVkKHRhcmdldCk7XG4gICAgfSkubWFwKGF0dGFjaFJlbmRlckZ1bmN0aW9uVG9UYXJnZXQpO1xuXG4gICAgdmFyIHByb2dyZXNzaW5kaWNhdG9ycyA9IHBsdWdpblN0YXRlLnRhcmdldHMuZmlsdGVyKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIHJldHVybiB0YXJnZXQudHlwZSA9PT0gJ3Byb2dyZXNzaW5kaWNhdG9yJztcbiAgICB9KS5tYXAoYXR0YWNoUmVuZGVyRnVuY3Rpb25Ub1RhcmdldCk7XG5cbiAgICB2YXIgc3RhcnRVcGxvYWQgPSBmdW5jdGlvbiBzdGFydFVwbG9hZChldikge1xuICAgICAgX3RoaXM4LnVwcHkudXBsb2FkKCkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAvLyBMb2cgZXJyb3IuXG4gICAgICAgIF90aGlzOC51cHB5LmxvZyhlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UgfHwgZXJyKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgY2FuY2VsVXBsb2FkID0gZnVuY3Rpb24gY2FuY2VsVXBsb2FkKGZpbGVJRCkge1xuICAgICAgX3RoaXM4LnVwcHkuZW1pdCgndXBsb2FkLWNhbmNlbCcsIGZpbGVJRCk7XG4gICAgICBfdGhpczgudXBweS5yZW1vdmVGaWxlKGZpbGVJRCk7XG4gICAgfTtcblxuICAgIHZhciBzYXZlRmlsZUNhcmQgPSBmdW5jdGlvbiBzYXZlRmlsZUNhcmQobWV0YSwgZmlsZUlEKSB7XG4gICAgICBfdGhpczgudXBweS5zZXRGaWxlTWV0YShmaWxlSUQsIG1ldGEpO1xuICAgICAgX3RoaXM4LnRvZ2dsZUZpbGVDYXJkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBEYXNoYm9hcmRVSSh7XG4gICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICBtb2RhbDogcGx1Z2luU3RhdGUsXG4gICAgICBuZXdGaWxlczogbmV3RmlsZXMsXG4gICAgICBmaWxlczogZmlsZXMsXG4gICAgICB0b3RhbEZpbGVDb3VudDogT2JqZWN0LmtleXMoZmlsZXMpLmxlbmd0aCxcbiAgICAgIHRvdGFsUHJvZ3Jlc3M6IHN0YXRlLnRvdGFsUHJvZ3Jlc3MsXG4gICAgICBhY3F1aXJlcnM6IGFjcXVpcmVycyxcbiAgICAgIGFjdGl2ZVBhbmVsOiBwbHVnaW5TdGF0ZS5hY3RpdmVQYW5lbCxcbiAgICAgIGFuaW1hdGVPcGVuQ2xvc2U6IHRoaXMub3B0cy5hbmltYXRlT3BlbkNsb3NlLFxuICAgICAgaXNDbG9zaW5nOiBwbHVnaW5TdGF0ZS5pc0Nsb3NpbmcsXG4gICAgICBnZXRQbHVnaW46IHRoaXMudXBweS5nZXRQbHVnaW4sXG4gICAgICBwcm9ncmVzc2luZGljYXRvcnM6IHByb2dyZXNzaW5kaWNhdG9ycyxcbiAgICAgIGF1dG9Qcm9jZWVkOiB0aGlzLnVwcHkub3B0cy5hdXRvUHJvY2VlZCxcbiAgICAgIGhpZGVVcGxvYWRCdXR0b246IHRoaXMub3B0cy5oaWRlVXBsb2FkQnV0dG9uLFxuICAgICAgaGlkZVJldHJ5QnV0dG9uOiB0aGlzLm9wdHMuaGlkZVJldHJ5QnV0dG9uLFxuICAgICAgaGlkZVBhdXNlUmVzdW1lQ2FuY2VsQnV0dG9uczogdGhpcy5vcHRzLmhpZGVQYXVzZVJlc3VtZUNhbmNlbEJ1dHRvbnMsXG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIGNsb3NlTW9kYWw6IHRoaXMucmVxdWVzdENsb3NlTW9kYWwsXG4gICAgICBoYW5kbGVDbGlja091dHNpZGU6IHRoaXMuaGFuZGxlQ2xpY2tPdXRzaWRlLFxuICAgICAgaGFuZGxlSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICBoYW5kbGVQYXN0ZTogdGhpcy5oYW5kbGVQYXN0ZSxcbiAgICAgIGlubGluZTogdGhpcy5vcHRzLmlubGluZSxcbiAgICAgIHNob3dQYW5lbDogdGhpcy5zaG93UGFuZWwsXG4gICAgICBoaWRlQWxsUGFuZWxzOiB0aGlzLmhpZGVBbGxQYW5lbHMsXG4gICAgICBsb2c6IHRoaXMudXBweS5sb2csXG4gICAgICBpMThuOiB0aGlzLmkxOG4sXG4gICAgICBpMThuQXJyYXk6IHRoaXMuaTE4bkFycmF5LFxuICAgICAgYWRkRmlsZTogdGhpcy51cHB5LmFkZEZpbGUsXG4gICAgICByZW1vdmVGaWxlOiB0aGlzLnVwcHkucmVtb3ZlRmlsZSxcbiAgICAgIGluZm86IHRoaXMudXBweS5pbmZvLFxuICAgICAgbm90ZTogdGhpcy5vcHRzLm5vdGUsXG4gICAgICBtZXRhRmllbGRzOiBwbHVnaW5TdGF0ZS5tZXRhRmllbGRzLFxuICAgICAgcmVzdW1hYmxlVXBsb2FkczogY2FwYWJpbGl0aWVzLnJlc3VtYWJsZVVwbG9hZHMgfHwgZmFsc2UsXG4gICAgICBidW5kbGVkOiBjYXBhYmlsaXRpZXMuYnVuZGxlZCB8fCBmYWxzZSxcbiAgICAgIHN0YXJ0VXBsb2FkOiBzdGFydFVwbG9hZCxcbiAgICAgIHBhdXNlVXBsb2FkOiB0aGlzLnVwcHkucGF1c2VSZXN1bWUsXG4gICAgICByZXRyeVVwbG9hZDogdGhpcy51cHB5LnJldHJ5VXBsb2FkLFxuICAgICAgY2FuY2VsVXBsb2FkOiBjYW5jZWxVcGxvYWQsXG4gICAgICBmaWxlQ2FyZEZvcjogcGx1Z2luU3RhdGUuZmlsZUNhcmRGb3IsXG4gICAgICB0b2dnbGVGaWxlQ2FyZDogdGhpcy50b2dnbGVGaWxlQ2FyZCxcbiAgICAgIHNhdmVGaWxlQ2FyZDogc2F2ZUZpbGVDYXJkLFxuICAgICAgdXBkYXRlRGFzaGJvYXJkRWxXaWR0aDogdGhpcy51cGRhdGVEYXNoYm9hcmRFbFdpZHRoLFxuICAgICAgd2lkdGg6IHRoaXMub3B0cy53aWR0aCxcbiAgICAgIGhlaWdodDogdGhpcy5vcHRzLmhlaWdodCxcbiAgICAgIHNob3dMaW5rVG9GaWxlVXBsb2FkUmVzdWx0OiB0aGlzLm9wdHMuc2hvd0xpbmtUb0ZpbGVVcGxvYWRSZXN1bHQsXG4gICAgICBwcm91ZGx5RGlzcGxheVBvd2VyZWRCeVVwcHk6IHRoaXMub3B0cy5wcm91ZGx5RGlzcGxheVBvd2VyZWRCeVVwcHksXG4gICAgICBjdXJyZW50V2lkdGg6IHBsdWdpblN0YXRlLmNvbnRhaW5lcldpZHRoLFxuICAgICAgaXNXaWRlOiBwbHVnaW5TdGF0ZS5jb250YWluZXJXaWR0aCA+IDQwMCxcbiAgICAgIGlzVGFyZ2V0RE9NRWw6IHRoaXMuaXNUYXJnZXRET01FbCxcbiAgICAgIGFsbG93ZWRGaWxlVHlwZXM6IHRoaXMudXBweS5vcHRzLnJlc3RyaWN0aW9ucy5hbGxvd2VkRmlsZVR5cGVzLFxuICAgICAgbWF4TnVtYmVyT2ZGaWxlczogdGhpcy51cHB5Lm9wdHMucmVzdHJpY3Rpb25zLm1heE51bWJlck9mRmlsZXNcbiAgICB9KTtcbiAgfTtcblxuICBEYXNoYm9hcmQucHJvdG90eXBlLmRpc2NvdmVyUHJvdmlkZXJQbHVnaW5zID0gZnVuY3Rpb24gZGlzY292ZXJQcm92aWRlclBsdWdpbnMoKSB7XG4gICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cbiAgICB0aGlzLnVwcHkuaXRlcmF0ZVBsdWdpbnMoZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgaWYgKHBsdWdpbiAmJiAhcGx1Z2luLnRhcmdldCAmJiBwbHVnaW4ub3B0cyAmJiBwbHVnaW4ub3B0cy50YXJnZXQgPT09IF90aGlzOS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICBfdGhpczkuYWRkVGFyZ2V0KHBsdWdpbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgRGFzaGJvYXJkLnByb3RvdHlwZS5pbnN0YWxsID0gZnVuY3Rpb24gaW5zdGFsbCgpIHtcbiAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICAvLyBTZXQgZGVmYXVsdCBzdGF0ZSBmb3IgRGFzaGJvYXJkXG4gICAgdGhpcy5zZXRQbHVnaW5TdGF0ZSh7XG4gICAgICBpc0hpZGRlbjogdHJ1ZSxcbiAgICAgIHNob3dGaWxlQ2FyZDogZmFsc2UsXG4gICAgICBhY3RpdmVQYW5lbDogZmFsc2UsXG4gICAgICBtZXRhRmllbGRzOiB0aGlzLm9wdHMubWV0YUZpZWxkcyxcbiAgICAgIHRhcmdldHM6IFtdXG4gICAgfSk7XG5cbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5vcHRzLnRhcmdldDtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICB0aGlzLm1vdW50KHRhcmdldCwgdGhpcyk7XG4gICAgfVxuXG4gICAgdmFyIHBsdWdpbnMgPSB0aGlzLm9wdHMucGx1Z2lucyB8fCBbXTtcbiAgICBwbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbklEKSB7XG4gICAgICB2YXIgcGx1Z2luID0gX3RoaXMxMC51cHB5LmdldFBsdWdpbihwbHVnaW5JRCk7XG4gICAgICBpZiAocGx1Z2luKSBwbHVnaW4ubW91bnQoX3RoaXMxMCwgcGx1Z2luKTtcbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5vcHRzLmRpc2FibGVTdGF0dXNCYXIpIHtcbiAgICAgIHRoaXMudXBweS51c2UoU3RhdHVzQmFyLCB7XG4gICAgICAgIGlkOiB0aGlzLmlkICsgJzpTdGF0dXNCYXInLFxuICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgIGhpZGVVcGxvYWRCdXR0b246IHRoaXMub3B0cy5oaWRlVXBsb2FkQnV0dG9uLFxuICAgICAgICBoaWRlUmV0cnlCdXR0b246IHRoaXMub3B0cy5oaWRlUmV0cnlCdXR0b24sXG4gICAgICAgIGhpZGVQYXVzZVJlc3VtZUNhbmNlbEJ1dHRvbnM6IHRoaXMub3B0cy5oaWRlUGF1c2VSZXN1bWVDYW5jZWxCdXR0b25zLFxuICAgICAgICBzaG93UHJvZ3Jlc3NEZXRhaWxzOiB0aGlzLm9wdHMuc2hvd1Byb2dyZXNzRGV0YWlscyxcbiAgICAgICAgaGlkZUFmdGVyRmluaXNoOiB0aGlzLm9wdHMuaGlkZVByb2dyZXNzQWZ0ZXJGaW5pc2gsXG4gICAgICAgIGxvY2FsZTogdGhpcy5vcHRzLmxvY2FsZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm9wdHMuZGlzYWJsZUluZm9ybWVyKSB7XG4gICAgICB0aGlzLnVwcHkudXNlKEluZm9ybWVyLCB7XG4gICAgICAgIGlkOiB0aGlzLmlkICsgJzpJbmZvcm1lcicsXG4gICAgICAgIHRhcmdldDogdGhpc1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm9wdHMuZGlzYWJsZVRodW1ibmFpbEdlbmVyYXRvcikge1xuICAgICAgdGhpcy51cHB5LnVzZShUaHVtYm5haWxHZW5lcmF0b3IsIHtcbiAgICAgICAgaWQ6IHRoaXMuaWQgKyAnOlRodW1ibmFpbEdlbmVyYXRvcicsXG4gICAgICAgIHRodW1ibmFpbFdpZHRoOiB0aGlzLm9wdHMudGh1bWJuYWlsV2lkdGhcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZGlzY292ZXJQcm92aWRlclBsdWdpbnMoKTtcblxuICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuICB9O1xuXG4gIERhc2hib2FyZC5wcm90b3R5cGUudW5pbnN0YWxsID0gZnVuY3Rpb24gdW5pbnN0YWxsKCkge1xuICAgIHZhciBfdGhpczExID0gdGhpcztcblxuICAgIGlmICghdGhpcy5vcHRzLmRpc2FibGVJbmZvcm1lcikge1xuICAgICAgdmFyIGluZm9ybWVyID0gdGhpcy51cHB5LmdldFBsdWdpbih0aGlzLmlkICsgJzpJbmZvcm1lcicpO1xuICAgICAgLy8gQ2hlY2tpbmcgaWYgdGhpcyBwbHVnaW4gZXhpc3RzLCBpbiBjYXNlIGl0IHdhcyByZW1vdmVkIGJ5IHVwcHktY29yZVxuICAgICAgLy8gYmVmb3JlIHRoZSBEYXNoYm9hcmQgd2FzLlxuICAgICAgaWYgKGluZm9ybWVyKSB0aGlzLnVwcHkucmVtb3ZlUGx1Z2luKGluZm9ybWVyKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMub3B0cy5kaXNhYmxlU3RhdHVzQmFyKSB7XG4gICAgICB2YXIgc3RhdHVzQmFyID0gdGhpcy51cHB5LmdldFBsdWdpbih0aGlzLmlkICsgJzpTdGF0dXNCYXInKTtcbiAgICAgIGlmIChzdGF0dXNCYXIpIHRoaXMudXBweS5yZW1vdmVQbHVnaW4oc3RhdHVzQmFyKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMub3B0cy5kaXNhYmxlVGh1bWJuYWlsR2VuZXJhdG9yKSB7XG4gICAgICB2YXIgdGh1bWJuYWlsID0gdGhpcy51cHB5LmdldFBsdWdpbih0aGlzLmlkICsgJzpUaHVtYm5haWxHZW5lcmF0b3InKTtcbiAgICAgIGlmICh0aHVtYm5haWwpIHRoaXMudXBweS5yZW1vdmVQbHVnaW4odGh1bWJuYWlsKTtcbiAgICB9XG5cbiAgICB2YXIgcGx1Z2lucyA9IHRoaXMub3B0cy5wbHVnaW5zIHx8IFtdO1xuICAgIHBsdWdpbnMuZm9yRWFjaChmdW5jdGlvbiAocGx1Z2luSUQpIHtcbiAgICAgIHZhciBwbHVnaW4gPSBfdGhpczExLnVwcHkuZ2V0UGx1Z2luKHBsdWdpbklEKTtcbiAgICAgIGlmIChwbHVnaW4pIHBsdWdpbi51bm1vdW50KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnVubW91bnQoKTtcbiAgICB0aGlzLnJlbW92ZUV2ZW50cygpO1xuICB9O1xuXG4gIHJldHVybiBEYXNoYm9hcmQ7XG59KFBsdWdpbik7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cnVuY2F0ZVN0cmluZyhzdHIsIGxlbmd0aCkge1xuICBpZiAoc3RyLmxlbmd0aCA+IGxlbmd0aCkge1xuICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIGxlbmd0aCAvIDIpICsgJy4uLicgKyBzdHIuc3Vic3RyKHN0ci5sZW5ndGggLSBsZW5ndGggLyA0LCBzdHIubGVuZ3RoKTtcbiAgfVxuICByZXR1cm4gc3RyO1xuXG4gIC8vIG1vcmUgcHJlY2lzZSB2ZXJzaW9uIGlmIG5lZWRlZFxuICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS84MzE1ODNcbn07IiwidmFyIF9yZXF1aXJlID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlLmg7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBmb2xkZXI6IGZ1bmN0aW9uIGZvbGRlcigpIHtcbiAgICByZXR1cm4gaChcbiAgICAgIFwic3ZnXCIsXG4gICAgICB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIFwiY2xhc3NcIjogXCJVcHB5SWNvblwiLCBzdHlsZTogeyB3aWR0aDogMTYsIG1hcmdpblJpZ2h0OiAzIH0sIHZpZXdCb3g6IFwiMCAwIDI3Ni4xNTcgMjc2LjE1N1wiIH0sXG4gICAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTI3My4wOCAxMDEuMzc4Yy0zLjMtNC42NS04Ljg2LTcuMzItMTUuMjU0LTcuMzJoLTI0LjM0VjY3LjU5YzAtMTAuMi04LjMtMTguNS0xOC41LTE4LjVoLTg1LjMyMmMtMy42MyAwLTkuMjk1LTIuODc1LTExLjQzNi01LjgwNWwtNi4zODYtOC43MzVjLTQuOTgyLTYuODE0LTE1LjEwNC0xMS45NTQtMjMuNTQ2LTExLjk1NEg1OC43M2MtOS4yOTIgMC0xOC42MzggNi42MDgtMjEuNzM3IDE1LjM3MmwtMi4wMzMgNS43NTJjLS45NTggMi43MS00LjcyIDUuMzctNy41OTYgNS4zN0gxOC41QzguMyA0OS4wOSAwIDU3LjM5IDAgNjcuNTl2MTY3LjA3YzAgLjg4Ni4xNiAxLjczLjQ0MyAyLjUyLjE1MiAzLjMwNiAxLjE4IDYuNDI0IDMuMDUzIDkuMDY0IDMuMyA0LjY1MiA4Ljg2IDcuMzIgMTUuMjU1IDcuMzJoMTg4LjQ4N2MxMS4zOTUgMCAyMy4yNy04LjQyNSAyNy4wMzUtMTkuMThsNDAuNjc3LTExNi4xODhjMi4xMS02LjAzNSAxLjQzLTEyLjE2NC0xLjg3LTE2LjgxNnpNMTguNSA2NC4wODhoOC44NjRjOS4yOTUgMCAxOC42NC02LjYwNyAyMS43MzgtMTUuMzdsMi4wMzItNS43NWMuOTYtMi43MTIgNC43MjItNS4zNzMgNy41OTctNS4zNzNoMjkuNTY1YzMuNjMgMCA5LjI5NSAyLjg3NiAxMS40MzcgNS44MDZsNi4zODYgOC43MzVjNC45ODIgNi44MTUgMTUuMTA0IDExLjk1NCAyMy41NDYgMTEuOTU0aDg1LjMyMmMxLjg5OCAwIDMuNSAxLjYwMiAzLjUgMy41djI2LjQ3SDY5LjM0Yy0xMS4zOTUgMC0yMy4yNyA4LjQyMy0yNy4wMzUgMTkuMTc4TDE1IDE5MS4yM1Y2Ny41OWMwLTEuODk4IDEuNjAzLTMuNSAzLjUtMy41em0yNDIuMjkgNDkuMTVsLTQwLjY3NiAxMTYuMTg4Yy0xLjY3NCA0Ljc4LTcuODEyIDkuMTM1LTEyLjg3NyA5LjEzNUgxOC43NWMtMS40NDcgMC0yLjU3Ni0uMzcyLTMuMDItLjk5Ny0uNDQyLS42MjUtLjQyMi0xLjgxNC4wNTctMy4xOGw0MC42NzctMTE2LjE5YzEuNjc0LTQuNzggNy44MTItOS4xMzQgMTIuODc3LTkuMTM0aDE4OC40ODdjMS40NDggMCAyLjU3Ny4zNzIgMy4wMi45OTcuNDQzLjYyNS40MjMgMS44MTQtLjA1NiAzLjE4elwiIH0pXG4gICAgKTtcbiAgfSxcbiAgZmlsZTogZnVuY3Rpb24gZmlsZSgpIHtcbiAgICByZXR1cm4gaChcbiAgICAgIFwic3ZnXCIsXG4gICAgICB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIFwiY2xhc3NcIjogXCJVcHB5SWNvblwiLCB3aWR0aDogMTEsIGhlaWdodDogMTQuNSwgdmlld0JveDogXCIwIDAgNDQgNThcIiB9LFxuICAgICAgaChcInBhdGhcIiwgeyBkOiBcIk0yNy40MzcuNTE3YTEgMSAwIDAgMC0uMDk0LjAzSDQuMjVDMi4wMzcuNTQ4LjIxNyAyLjM2OC4yMTcgNC41OHY0OC40MDVjMCAyLjIxMiAxLjgyIDQuMDMgNC4wMyA0LjAzSDM5LjAzYzIuMjEgMCA0LjAzLTEuODE4IDQuMDMtNC4wM1YxNS42MWExIDEgMCAwIDAtLjAzLS4yOCAxIDEgMCAwIDAgMC0uMDkzIDEgMSAwIDAgMC0uMDMtLjAzMiAxIDEgMCAwIDAgMC0uMDMgMSAxIDAgMCAwLS4wMzItLjA2MyAxIDEgMCAwIDAtLjAzLS4wNjMgMSAxIDAgMCAwLS4wMzIgMCAxIDEgMCAwIDAtLjAzLS4wNjMgMSAxIDAgMCAwLS4wMzItLjAzIDEgMSAwIDAgMC0uMDMtLjA2MyAxIDEgMCAwIDAtLjA2My0uMDYybC0xNC41OTMtMTRhMSAxIDAgMCAwLS4wNjItLjA2MkExIDEgMCAwIDAgMjggLjcwOGExIDEgMCAwIDAtLjM3NC0uMTU3IDEgMSAwIDAgMC0uMTU2IDAgMSAxIDAgMCAwLS4wMy0uMDNsLS4wMDMtLjAwM3pNNC4yNSAyLjU0N2gyMi4yMTh2OS45N2MwIDIuMjEgMS44MiA0LjAzIDQuMDMgNC4wM2gxMC41NjR2MzYuNDM4YTIuMDIgMi4wMiAwIDAgMS0yLjAzMiAyLjAzMkg0LjI1Yy0xLjEzIDAtMi4wMzItLjktMi4wMzItMi4wMzJWNC41OGMwLTEuMTMuOTAyLTIuMDMyIDIuMDMtMi4wMzJ6bTI0LjIxOCAxLjM0NWwxMC4zNzUgOS45MzcuNzUuNzE4SDMwLjVjLTEuMTMgMC0yLjAzMi0uOS0yLjAzMi0yLjAzVjMuODl6XCIgfSlcbiAgICApO1xuICB9XG59OyIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnQHVwcHkvY29yZScpLFxuICAgIFBsdWdpbiA9IF9yZXF1aXJlLlBsdWdpbjtcblxudmFyIF9yZXF1aXJlMiA9IHJlcXVpcmUoJ0B1cHB5L3NlcnZlci11dGlscycpLFxuICAgIFByb3ZpZGVyID0gX3JlcXVpcmUyLlByb3ZpZGVyO1xuXG52YXIgUHJvdmlkZXJWaWV3cyA9IHJlcXVpcmUoJ0B1cHB5L3Byb3ZpZGVyLXZpZXdzJyk7XG52YXIgaWNvbnMgPSByZXF1aXJlKCcuL2ljb25zJyk7XG5cbnZhciBfcmVxdWlyZTMgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUzLmg7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKF9QbHVnaW4pIHtcbiAgX2luaGVyaXRzKERyb3Bib3gsIF9QbHVnaW4pO1xuXG4gIGZ1bmN0aW9uIERyb3Bib3godXBweSwgb3B0cykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEcm9wYm94KTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9QbHVnaW4uY2FsbCh0aGlzLCB1cHB5LCBvcHRzKSk7XG5cbiAgICBfdGhpcy50eXBlID0gJ2FjcXVpcmVyJztcbiAgICBfdGhpcy5pZCA9IF90aGlzLm9wdHMuaWQgfHwgJ0Ryb3Bib3gnO1xuICAgIF90aGlzLnRpdGxlID0gJ0Ryb3Bib3gnO1xuICAgIF90aGlzLmljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaChcbiAgICAgICAgJ3N2ZycsXG4gICAgICAgIHsgJ2NsYXNzJzogJ1VwcHlJY29uJywgd2lkdGg6ICcxMjgnLCBoZWlnaHQ6ICcxMTgnLCB2aWV3Qm94OiAnMCAwIDEyOCAxMTgnIH0sXG4gICAgICAgIGgoJ3BhdGgnLCB7IGQ6ICdNMzguMTQ1Ljc3N0wxLjEwOCAyNC45NmwyNS42MDggMjAuNTA3IDM3LjM0NC0yMy4wNnonIH0pLFxuICAgICAgICBoKCdwYXRoJywgeyBkOiAnTTEuMTA4IDY1Ljk3NWwzNy4wMzcgMjQuMTgzTDY0LjA2IDY4LjUyNWwtMzcuMzQzLTIzLjA2ek02NC4wNiA2OC41MjVsMjUuOTE3IDIxLjYzMyAzNy4wMzYtMjQuMTgzLTI1LjYxLTIwLjUxeicgfSksXG4gICAgICAgIGgoJ3BhdGgnLCB7IGQ6ICdNMTI3LjAxNCAyNC45Nkw4OS45NzcuNzc2IDY0LjA2IDIyLjQwN2wzNy4zNDUgMjMuMDZ6TTY0LjEzNiA3My4xOGwtMjUuOTkgMjEuNTY3LTExLjEyMi03LjI2MnY4LjE0MmwzNy4xMTIgMjIuMjU2IDM3LjExNC0yMi4yNTZ2LTguMTQybC0xMS4xMiA3LjI2MnonIH0pXG4gICAgICApO1xuICAgIH07XG5cbiAgICAvLyB3cml0aW5nIG91dCB0aGUga2V5IGV4cGxpY2l0bHkgZm9yIHJlYWRhYmlsaXR5IHRoZSBrZXkgdXNlZCB0byBzdG9yZVxuICAgIC8vIHRoZSBwcm92aWRlciBpbnN0YW5jZSBtdXN0IGJlIGVxdWFsIHRvIHRoaXMuaWQuXG4gICAgX3RoaXNbX3RoaXMuaWRdID0gbmV3IFByb3ZpZGVyKHVwcHksIHtcbiAgICAgIHNlcnZlclVybDogX3RoaXMub3B0cy5zZXJ2ZXJVcmwsXG4gICAgICBzZXJ2ZXJIZWFkZXJzOiBfdGhpcy5vcHRzLnNlcnZlckhlYWRlcnMsXG4gICAgICBwcm92aWRlcjogJ2Ryb3Bib3gnXG4gICAgfSk7XG5cbiAgICBfdGhpcy5maWxlcyA9IFtdO1xuXG4gICAgX3RoaXMub25BdXRoID0gX3RoaXMub25BdXRoLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLnJlbmRlciA9IF90aGlzLnJlbmRlci5iaW5kKF90aGlzKTtcblxuICAgIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7fTtcblxuICAgIC8vIG1lcmdlIGRlZmF1bHQgb3B0aW9ucyB3aXRoIHRoZSBvbmVzIHNldCBieSB1c2VyXG4gICAgX3RoaXMub3B0cyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0cyk7XG4gICAgX3RoaXMub3B0cy5zZXJ2ZXJQYXR0ZXJuID0gb3B0cy5zZXJ2ZXJQYXR0ZXJuIHx8IG9wdHMuc2VydmVyVXJsO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIERyb3Bib3gucHJvdG90eXBlLmluc3RhbGwgPSBmdW5jdGlvbiBpbnN0YWxsKCkge1xuICAgIHRoaXMudmlldyA9IG5ldyBQcm92aWRlclZpZXdzKHRoaXMpO1xuICAgIC8vIFNldCBkZWZhdWx0IHN0YXRlIGZvciBEcm9wYm94XG4gICAgdGhpcy5zZXRQbHVnaW5TdGF0ZSh7XG4gICAgICBhdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICAgIGZpbGVzOiBbXSxcbiAgICAgIGZvbGRlcnM6IFtdLFxuICAgICAgZGlyZWN0b3JpZXM6IFtdLFxuICAgICAgYWN0aXZlUm93OiAtMSxcbiAgICAgIGZpbHRlcklucHV0OiAnJyxcbiAgICAgIGlzU2VhcmNoVmlzaWJsZTogZmFsc2VcbiAgICB9KTtcblxuICAgIHZhciB0YXJnZXQgPSB0aGlzLm9wdHMudGFyZ2V0O1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRoaXMubW91bnQodGFyZ2V0LCB0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgRHJvcGJveC5wcm90b3R5cGUudW5pbnN0YWxsID0gZnVuY3Rpb24gdW5pbnN0YWxsKCkge1xuICAgIHRoaXMudmlldy50ZWFyRG93bigpO1xuICAgIHRoaXMudW5tb3VudCgpO1xuICB9O1xuXG4gIERyb3Bib3gucHJvdG90eXBlLm9uQXV0aCA9IGZ1bmN0aW9uIG9uQXV0aChhdXRoZW50aWNhdGVkKSB7XG4gICAgdGhpcy5zZXRQbHVnaW5TdGF0ZSh7IGF1dGhlbnRpY2F0ZWQ6IGF1dGhlbnRpY2F0ZWQgfSk7XG4gICAgaWYgKGF1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIHRoaXMudmlldy5nZXRGb2xkZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgRHJvcGJveC5wcm90b3R5cGUuZ2V0VXNlcm5hbWUgPSBmdW5jdGlvbiBnZXRVc2VybmFtZShkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGEudXNlcl9lbWFpbDtcbiAgfTtcblxuICBEcm9wYm94LnByb3RvdHlwZS5pc0ZvbGRlciA9IGZ1bmN0aW9uIGlzRm9sZGVyKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbVsnLnRhZyddID09PSAnZm9sZGVyJztcbiAgfTtcblxuICBEcm9wYm94LnByb3RvdHlwZS5nZXRJdGVtRGF0YSA9IGZ1bmN0aW9uIGdldEl0ZW1EYXRhKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbTtcbiAgfTtcblxuICBEcm9wYm94LnByb3RvdHlwZS5nZXRJdGVtSWNvbiA9IGZ1bmN0aW9uIGdldEl0ZW1JY29uKGl0ZW0pIHtcbiAgICByZXR1cm4gaWNvbnNbaXRlbVsnLnRhZyddXSgpO1xuICB9O1xuXG4gIERyb3Bib3gucHJvdG90eXBlLmdldEl0ZW1TdWJMaXN0ID0gZnVuY3Rpb24gZ2V0SXRlbVN1Ykxpc3QoaXRlbSkge1xuICAgIHJldHVybiBpdGVtLmVudHJpZXM7XG4gIH07XG5cbiAgRHJvcGJveC5wcm90b3R5cGUuZ2V0SXRlbU5hbWUgPSBmdW5jdGlvbiBnZXRJdGVtTmFtZShpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0ubmFtZSB8fCAnJztcbiAgfTtcblxuICBEcm9wYm94LnByb3RvdHlwZS5nZXRNaW1lVHlwZSA9IGZ1bmN0aW9uIGdldE1pbWVUeXBlKGl0ZW0pIHtcbiAgICAvLyBtaW1lIHR5cGVzIGFyZW4ndCBzdXBwb3J0ZWQuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgRHJvcGJveC5wcm90b3R5cGUuZ2V0SXRlbUlkID0gZnVuY3Rpb24gZ2V0SXRlbUlkKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbS5pZDtcbiAgfTtcblxuICBEcm9wYm94LnByb3RvdHlwZS5nZXRJdGVtUmVxdWVzdFBhdGggPSBmdW5jdGlvbiBnZXRJdGVtUmVxdWVzdFBhdGgoaXRlbSkge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoaXRlbS5wYXRoX2xvd2VyKTtcbiAgfTtcblxuICBEcm9wYm94LnByb3RvdHlwZS5nZXRJdGVtTW9kaWZpZWREYXRlID0gZnVuY3Rpb24gZ2V0SXRlbU1vZGlmaWVkRGF0ZShpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0uc2VydmVyX21vZGlmaWVkO1xuICB9O1xuXG4gIERyb3Bib3gucHJvdG90eXBlLmdldEl0ZW1UaHVtYm5haWxVcmwgPSBmdW5jdGlvbiBnZXRJdGVtVGh1bWJuYWlsVXJsKGl0ZW0pIHtcbiAgICByZXR1cm4gdGhpcy5vcHRzLnNlcnZlclVybCArICcvJyArIHRoaXMuRHJvcGJveC5pZCArICcvdGh1bWJuYWlsLycgKyB0aGlzLmdldEl0ZW1SZXF1ZXN0UGF0aChpdGVtKTtcbiAgfTtcblxuICBEcm9wYm94LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoc3RhdGUpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3LnJlbmRlcihzdGF0ZSk7XG4gIH07XG5cbiAgcmV0dXJuIERyb3Bib3g7XG59KFBsdWdpbik7IiwidmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdAdXBweS9jb3JlJyksXG4gICAgUGx1Z2luID0gX3JlcXVpcmUuUGx1Z2luO1xuXG52YXIgX3JlcXVpcmUyID0gcmVxdWlyZSgnQHVwcHkvc2VydmVyLXV0aWxzJyksXG4gICAgUHJvdmlkZXIgPSBfcmVxdWlyZTIuUHJvdmlkZXI7XG5cbnZhciBQcm92aWRlclZpZXdzID0gcmVxdWlyZSgnQHVwcHkvcHJvdmlkZXItdmlld3MnKTtcblxudmFyIF9yZXF1aXJlMyA9IHJlcXVpcmUoJ3ByZWFjdCcpLFxuICAgIGggPSBfcmVxdWlyZTMuaDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX1BsdWdpbikge1xuICBfaW5oZXJpdHMoR29vZ2xlRHJpdmUsIF9QbHVnaW4pO1xuXG4gIGZ1bmN0aW9uIEdvb2dsZURyaXZlKHVwcHksIG9wdHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR29vZ2xlRHJpdmUpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1BsdWdpbi5jYWxsKHRoaXMsIHVwcHksIG9wdHMpKTtcblxuICAgIF90aGlzLnR5cGUgPSAnYWNxdWlyZXInO1xuICAgIF90aGlzLmlkID0gX3RoaXMub3B0cy5pZCB8fCAnR29vZ2xlRHJpdmUnO1xuICAgIF90aGlzLnRpdGxlID0gJ0dvb2dsZSBEcml2ZSc7XG4gICAgX3RoaXMuaWNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBoKFxuICAgICAgICAnc3ZnJyxcbiAgICAgICAgeyAnYXJpYS1oaWRkZW4nOiAndHJ1ZScsICdjbGFzcyc6ICdVcHB5SWNvbiBVcHB5TW9kYWxUYWItaWNvbicsIHdpZHRoOiAnMjgnLCBoZWlnaHQ6ICcyOCcsIHZpZXdCb3g6ICcwIDAgMTYgMTYnIH0sXG4gICAgICAgIGgoJ3BhdGgnLCB7IGQ6ICdNMi45NTUgMTQuOTNsMi42NjctNC42MkgxNmwtMi42NjcgNC42MkgyLjk1NXptMi4zNzgtNC42MmwtMi42NjYgNC42MkwwIDEwLjMxbDUuMTktOC45OSAyLjY2NiA0LjYyLTIuNTIzIDQuMzd6bTEwLjUyMy0uMjVoLTUuMzMzbC01LjE5LTguOTloNS4zMzRsNS4xOSA4Ljk5eicgfSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIF90aGlzW190aGlzLmlkXSA9IG5ldyBQcm92aWRlcih1cHB5LCB7XG4gICAgICBzZXJ2ZXJVcmw6IF90aGlzLm9wdHMuc2VydmVyVXJsLFxuICAgICAgc2VydmVySGVhZGVyczogX3RoaXMub3B0cy5zZXJ2ZXJIZWFkZXJzLFxuICAgICAgcHJvdmlkZXI6ICdkcml2ZScsXG4gICAgICBhdXRoUHJvdmlkZXI6ICdnb29nbGUnXG4gICAgfSk7XG5cbiAgICBfdGhpcy5maWxlcyA9IFtdO1xuXG4gICAgX3RoaXMub25BdXRoID0gX3RoaXMub25BdXRoLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLnJlbmRlciA9IF90aGlzLnJlbmRlci5iaW5kKF90aGlzKTtcblxuICAgIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7fTtcblxuICAgIC8vIG1lcmdlIGRlZmF1bHQgb3B0aW9ucyB3aXRoIHRoZSBvbmVzIHNldCBieSB1c2VyXG4gICAgX3RoaXMub3B0cyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0cyk7XG4gICAgX3RoaXMub3B0cy5zZXJ2ZXJQYXR0ZXJuID0gb3B0cy5zZXJ2ZXJQYXR0ZXJuIHx8IG9wdHMuc2VydmVyVXJsO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIEdvb2dsZURyaXZlLnByb3RvdHlwZS5pbnN0YWxsID0gZnVuY3Rpb24gaW5zdGFsbCgpIHtcbiAgICB0aGlzLnZpZXcgPSBuZXcgUHJvdmlkZXJWaWV3cyh0aGlzKTtcbiAgICAvLyBTZXQgZGVmYXVsdCBzdGF0ZSBmb3IgR29vZ2xlIERyaXZlXG4gICAgdGhpcy5zZXRQbHVnaW5TdGF0ZSh7XG4gICAgICBhdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICAgIGZpbGVzOiBbXSxcbiAgICAgIGZvbGRlcnM6IFtdLFxuICAgICAgZGlyZWN0b3JpZXM6IFtdLFxuICAgICAgYWN0aXZlUm93OiAtMSxcbiAgICAgIGZpbHRlcklucHV0OiAnJyxcbiAgICAgIGlzU2VhcmNoVmlzaWJsZTogZmFsc2VcbiAgICB9KTtcblxuICAgIHZhciB0YXJnZXQgPSB0aGlzLm9wdHMudGFyZ2V0O1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRoaXMubW91bnQodGFyZ2V0LCB0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgR29vZ2xlRHJpdmUucHJvdG90eXBlLnVuaW5zdGFsbCA9IGZ1bmN0aW9uIHVuaW5zdGFsbCgpIHtcbiAgICB0aGlzLnZpZXcudGVhckRvd24oKTtcbiAgICB0aGlzLnVubW91bnQoKTtcbiAgfTtcblxuICBHb29nbGVEcml2ZS5wcm90b3R5cGUub25BdXRoID0gZnVuY3Rpb24gb25BdXRoKGF1dGhlbnRpY2F0ZWQpIHtcbiAgICB0aGlzLnNldFBsdWdpblN0YXRlKHsgYXV0aGVudGljYXRlZDogYXV0aGVudGljYXRlZCB9KTtcbiAgICBpZiAoYXV0aGVudGljYXRlZCkge1xuICAgICAgdGhpcy52aWV3LmdldEZvbGRlcigncm9vdCcpO1xuICAgIH1cbiAgfTtcblxuICBHb29nbGVEcml2ZS5wcm90b3R5cGUuZ2V0VXNlcm5hbWUgPSBmdW5jdGlvbiBnZXRVc2VybmFtZShkYXRhKSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gZGF0YS5pdGVtcywgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvciksIF9pID0gMCwgX2l0ZXJhdG9yID0gX2lzQXJyYXkgPyBfaXRlcmF0b3IgOiBfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgIHZhciBfcmVmO1xuXG4gICAgICBpZiAoX2lzQXJyYXkpIHtcbiAgICAgICAgaWYgKF9pID49IF9pdGVyYXRvci5sZW5ndGgpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2l0ZXJhdG9yW19pKytdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2kgPSBfaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAoX2kuZG9uZSkgYnJlYWs7XG4gICAgICAgIF9yZWYgPSBfaS52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGl0ZW0gPSBfcmVmO1xuXG4gICAgICBpZiAoaXRlbS51c2VyUGVybWlzc2lvbi5yb2xlID09PSAnb3duZXInKSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBpdGVtLm93bmVycywgX2lzQXJyYXkyID0gQXJyYXkuaXNBcnJheShfaXRlcmF0b3IyKSwgX2kyID0gMCwgX2l0ZXJhdG9yMiA9IF9pc0FycmF5MiA/IF9pdGVyYXRvcjIgOiBfaXRlcmF0b3IyW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XG4gICAgICAgICAgdmFyIF9yZWYyO1xuXG4gICAgICAgICAgaWYgKF9pc0FycmF5Mikge1xuICAgICAgICAgICAgaWYgKF9pMiA+PSBfaXRlcmF0b3IyLmxlbmd0aCkgYnJlYWs7XG4gICAgICAgICAgICBfcmVmMiA9IF9pdGVyYXRvcjJbX2kyKytdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfaTIgPSBfaXRlcmF0b3IyLm5leHQoKTtcbiAgICAgICAgICAgIGlmIChfaTIuZG9uZSkgYnJlYWs7XG4gICAgICAgICAgICBfcmVmMiA9IF9pMi52YWx1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgb3duZXIgPSBfcmVmMjtcblxuICAgICAgICAgIGlmIChvd25lci5pc0F1dGhlbnRpY2F0ZWRVc2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gb3duZXIuZW1haWxBZGRyZXNzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBHb29nbGVEcml2ZS5wcm90b3R5cGUuaXNGb2xkZXIgPSBmdW5jdGlvbiBpc0ZvbGRlcihpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0ubWltZVR5cGUgPT09ICdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyJztcbiAgfTtcblxuICBHb29nbGVEcml2ZS5wcm90b3R5cGUuZ2V0SXRlbURhdGEgPSBmdW5jdGlvbiBnZXRJdGVtRGF0YShpdGVtKSB7XG4gICAgcmV0dXJuIF9leHRlbmRzKHt9LCBpdGVtLCB7IHNpemU6IHBhcnNlRmxvYXQoaXRlbS5maWxlU2l6ZSkgfSk7XG4gIH07XG5cbiAgR29vZ2xlRHJpdmUucHJvdG90eXBlLmdldEl0ZW1JY29uID0gZnVuY3Rpb24gZ2V0SXRlbUljb24oaXRlbSkge1xuICAgIHJldHVybiBoKCdpbWcnLCB7IHNyYzogaXRlbS5pY29uTGluayB9KTtcbiAgfTtcblxuICBHb29nbGVEcml2ZS5wcm90b3R5cGUuZ2V0SXRlbVN1Ykxpc3QgPSBmdW5jdGlvbiBnZXRJdGVtU3ViTGlzdChpdGVtKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICByZXR1cm4gaXRlbS5pdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBfdGhpczIuaXNGb2xkZXIoaSkgfHwgIWkubWltZVR5cGUuc3RhcnRzV2l0aCgnYXBwbGljYXRpb24vdm5kLmdvb2dsZScpO1xuICAgIH0pO1xuICB9O1xuXG4gIEdvb2dsZURyaXZlLnByb3RvdHlwZS5nZXRJdGVtTmFtZSA9IGZ1bmN0aW9uIGdldEl0ZW1OYW1lKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbS50aXRsZSA/IGl0ZW0udGl0bGUgOiAnLyc7XG4gIH07XG5cbiAgR29vZ2xlRHJpdmUucHJvdG90eXBlLmdldE1pbWVUeXBlID0gZnVuY3Rpb24gZ2V0TWltZVR5cGUoaXRlbSkge1xuICAgIHJldHVybiBpdGVtLm1pbWVUeXBlO1xuICB9O1xuXG4gIEdvb2dsZURyaXZlLnByb3RvdHlwZS5nZXRJdGVtSWQgPSBmdW5jdGlvbiBnZXRJdGVtSWQoaXRlbSkge1xuICAgIHJldHVybiBpdGVtLmlkO1xuICB9O1xuXG4gIEdvb2dsZURyaXZlLnByb3RvdHlwZS5nZXRJdGVtUmVxdWVzdFBhdGggPSBmdW5jdGlvbiBnZXRJdGVtUmVxdWVzdFBhdGgoaXRlbSkge1xuICAgIHJldHVybiB0aGlzLmdldEl0ZW1JZChpdGVtKTtcbiAgfTtcblxuICBHb29nbGVEcml2ZS5wcm90b3R5cGUuZ2V0SXRlbU1vZGlmaWVkRGF0ZSA9IGZ1bmN0aW9uIGdldEl0ZW1Nb2RpZmllZERhdGUoaXRlbSkge1xuICAgIHJldHVybiBpdGVtLm1vZGlmaWVkQnlNZURhdGU7XG4gIH07XG5cbiAgR29vZ2xlRHJpdmUucHJvdG90eXBlLmdldEl0ZW1UaHVtYm5haWxVcmwgPSBmdW5jdGlvbiBnZXRJdGVtVGh1bWJuYWlsVXJsKGl0ZW0pIHtcbiAgICByZXR1cm4gdGhpcy5vcHRzLnNlcnZlclVybCArICcvJyArIHRoaXMuR29vZ2xlRHJpdmUuaWQgKyAnL3RodW1ibmFpbC8nICsgdGhpcy5nZXRJdGVtUmVxdWVzdFBhdGgoaXRlbSk7XG4gIH07XG5cbiAgR29vZ2xlRHJpdmUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihzdGF0ZSkge1xuICAgIHJldHVybiB0aGlzLnZpZXcucmVuZGVyKHN0YXRlKTtcbiAgfTtcblxuICByZXR1cm4gR29vZ2xlRHJpdmU7XG59KFBsdWdpbik7IiwidmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdAdXBweS9jb3JlJyksXG4gICAgUGx1Z2luID0gX3JlcXVpcmUuUGx1Z2luO1xuXG52YXIgX3JlcXVpcmUyID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlMi5oO1xuXG4vKipcbiAqIEluZm9ybWVyXG4gKiBTaG93cyByYWQgbWVzc2FnZSBidWJibGVzXG4gKiB1c2VkIGxpa2UgdGhpczogYHVwcHkuaW5mbygnaGVsbG8gd29ybGQnLCAnaW5mbycsIDUwMDApYFxuICogb3IgZm9yIGVycm9yczogYHVwcHkuaW5mbygnRXJyb3IgdXBsb2FkaW5nIGltZy5qcGcnLCAnZXJyb3InLCA1MDAwKWBcbiAqXG4gKi9cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChfUGx1Z2luKSB7XG4gIF9pbmhlcml0cyhJbmZvcm1lciwgX1BsdWdpbik7XG5cbiAgZnVuY3Rpb24gSW5mb3JtZXIodXBweSwgb3B0cykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbmZvcm1lcik7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUGx1Z2luLmNhbGwodGhpcywgdXBweSwgb3B0cykpO1xuXG4gICAgX3RoaXMudHlwZSA9ICdwcm9ncmVzc2luZGljYXRvcic7XG4gICAgX3RoaXMuaWQgPSBfdGhpcy5vcHRzLmlkIHx8ICdJbmZvcm1lcic7XG4gICAgX3RoaXMudGl0bGUgPSAnSW5mb3JtZXInO1xuXG4gICAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgIHR5cGVDb2xvcnM6IHtcbiAgICAgICAgaW5mbzoge1xuICAgICAgICAgIHRleHQ6ICcjZmZmJyxcbiAgICAgICAgICBiZzogJyMwMDAnXG4gICAgICAgIH0sXG4gICAgICAgIHdhcm5pbmc6IHtcbiAgICAgICAgICB0ZXh0OiAnI2ZmZicsXG4gICAgICAgICAgYmc6ICcjRjZBNjIzJ1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIHRleHQ6ICcjZmZmJyxcbiAgICAgICAgICBiZzogJyNEMzJGMkYnXG4gICAgICAgIH0sXG4gICAgICAgIHN1Y2Nlc3M6IHtcbiAgICAgICAgICB0ZXh0OiAnI2ZmZicsXG4gICAgICAgICAgYmc6ICcjMUJCMjQwJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIG1lcmdlIGRlZmF1bHQgb3B0aW9ucyB3aXRoIHRoZSBvbmVzIHNldCBieSB1c2VyXG4gICAgfTtfdGhpcy5vcHRzID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zLCBvcHRzKTtcblxuICAgIF90aGlzLnJlbmRlciA9IF90aGlzLnJlbmRlci5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBJbmZvcm1lci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKHN0YXRlKSB7XG4gICAgdmFyIF9zdGF0ZSRpbmZvID0gc3RhdGUuaW5mbyxcbiAgICAgICAgaXNIaWRkZW4gPSBfc3RhdGUkaW5mby5pc0hpZGRlbixcbiAgICAgICAgdHlwZSA9IF9zdGF0ZSRpbmZvLnR5cGUsXG4gICAgICAgIG1lc3NhZ2UgPSBfc3RhdGUkaW5mby5tZXNzYWdlLFxuICAgICAgICBkZXRhaWxzID0gX3N0YXRlJGluZm8uZGV0YWlscztcblxuICAgIHZhciBzdHlsZSA9IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5vcHRzLnR5cGVDb2xvcnNbdHlwZV0uYmcsXG4gICAgICBjb2xvcjogdGhpcy5vcHRzLnR5cGVDb2xvcnNbdHlwZV0udGV4dFxuICAgIH07XG5cbiAgICByZXR1cm4gaChcbiAgICAgICdkaXYnLFxuICAgICAgeyAnY2xhc3MnOiAndXBweSB1cHB5LUluZm9ybWVyJyxcbiAgICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgICAnYXJpYS1oaWRkZW4nOiBpc0hpZGRlbiB9LFxuICAgICAgaChcbiAgICAgICAgJ3AnLFxuICAgICAgICB7IHJvbGU6ICdhbGVydCcgfSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgJyAnLFxuICAgICAgICBkZXRhaWxzICYmIGgoXG4gICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgIHsgc3R5bGU6IHsgY29sb3I6IHRoaXMub3B0cy50eXBlQ29sb3JzW3R5cGVdLmJnIH0sXG4gICAgICAgICAgICAnYXJpYS1sYWJlbCc6IGRldGFpbHMsXG4gICAgICAgICAgICAnZGF0YS1taWNyb3RpcC1wb3NpdGlvbic6ICd0b3AnLFxuICAgICAgICAgICAgJ2RhdGEtbWljcm90aXAtc2l6ZSc6ICdsYXJnZScsXG4gICAgICAgICAgICByb2xlOiAndG9vbHRpcCcgfSxcbiAgICAgICAgICAnPydcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgSW5mb3JtZXIucHJvdG90eXBlLmluc3RhbGwgPSBmdW5jdGlvbiBpbnN0YWxsKCkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLm9wdHMudGFyZ2V0O1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRoaXMubW91bnQodGFyZ2V0LCB0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEluZm9ybWVyO1xufShQbHVnaW4pOyIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnQHVwcHkvY29yZScpLFxuICAgIFBsdWdpbiA9IF9yZXF1aXJlLlBsdWdpbjtcblxudmFyIF9yZXF1aXJlMiA9IHJlcXVpcmUoJ0B1cHB5L3NlcnZlci11dGlscycpLFxuICAgIFByb3ZpZGVyID0gX3JlcXVpcmUyLlByb3ZpZGVyO1xuXG52YXIgUHJvdmlkZXJWaWV3cyA9IHJlcXVpcmUoJ0B1cHB5L3Byb3ZpZGVyLXZpZXdzJyk7XG5cbnZhciBfcmVxdWlyZTMgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUzLmg7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKF9QbHVnaW4pIHtcbiAgX2luaGVyaXRzKEluc3RhZ3JhbSwgX1BsdWdpbik7XG5cbiAgZnVuY3Rpb24gSW5zdGFncmFtKHVwcHksIG9wdHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSW5zdGFncmFtKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9QbHVnaW4uY2FsbCh0aGlzLCB1cHB5LCBvcHRzKSk7XG5cbiAgICBfdGhpcy50eXBlID0gJ2FjcXVpcmVyJztcbiAgICBfdGhpcy5pZCA9IF90aGlzLm9wdHMuaWQgfHwgJ0luc3RhZ3JhbSc7XG4gICAgX3RoaXMudGl0bGUgPSAnSW5zdGFncmFtJztcbiAgICBfdGhpcy5pY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGgoXG4gICAgICAgICdzdmcnLFxuICAgICAgICB7ICdhcmlhLWhpZGRlbic6ICd0cnVlJywgJ2NsYXNzJzogJ1VwcHlJY29uJywgd2lkdGg6ICcyOCcsIGhlaWdodDogJzI4Jywgdmlld0JveDogJzAgMCA1MTIgNTEyJyB9LFxuICAgICAgICBoKCdwYXRoJywgeyBkOiAnTTI1Niw0OS40NzFjNjcuMjY2LDAsNzUuMjMzLjI1NywxMDEuOCwxLjQ2OSwyNC41NjIsMS4xMjEsMzcuOSw1LjIyNCw0Ni43NzgsOC42NzRhNzguMDUyLDc4LjA1MiwwLDAsMSwyOC45NjYsMTguODQ1LDc4LjA1Miw3OC4wNTIsMCwwLDEsMTguODQ1LDI4Ljk2NmMzLjQ1LDguODc3LDcuNTU0LDIyLjIxNiw4LjY3NCw0Ni43NzgsMS4yMTIsMjYuNTY1LDEuNDY5LDM0LjUzMiwxLjQ2OSwxMDEuOHMtMC4yNTcsNzUuMjMzLTEuNDY5LDEwMS44Yy0xLjEyMSwyNC41NjItNS4yMjUsMzcuOS04LjY3NCw0Ni43NzhhODMuNDI3LDgzLjQyNywwLDAsMS00Ny44MTEsNDcuODExYy04Ljg3NywzLjQ1LTIyLjIxNiw3LjU1NC00Ni43NzgsOC42NzQtMjYuNTYsMS4yMTItMzQuNTI3LDEuNDY5LTEwMS44LDEuNDY5cy03NS4yMzctLjI1Ny0xMDEuOC0xLjQ2OWMtMjQuNTYyLTEuMTIxLTM3LjktNS4yMjUtNDYuNzc4LTguNjc0YTc4LjA1MSw3OC4wNTEsMCwwLDEtMjguOTY2LTE4Ljg0NSw3OC4wNTMsNzguMDUzLDAsMCwxLTE4Ljg0NS0yOC45NjZjLTMuNDUtOC44NzctNy41NTQtMjIuMjE2LTguNjc0LTQ2Ljc3OC0xLjIxMi0yNi41NjQtMS40NjktMzQuNTMyLTEuNDY5LTEwMS44czAuMjU3LTc1LjIzMywxLjQ2OS0xMDEuOGMxLjEyMS0yNC41NjIsNS4yMjQtMzcuOSw4LjY3NC00Ni43NzhBNzguMDUyLDc4LjA1MiwwLDAsMSw3OC40NTgsNzguNDU4YTc4LjA1Myw3OC4wNTMsMCwwLDEsMjguOTY2LTE4Ljg0NWM4Ljg3Ny0zLjQ1LDIyLjIxNi03LjU1NCw0Ni43NzgtOC42NzQsMjYuNTY1LTEuMjEyLDM0LjUzMi0xLjQ2OSwxMDEuOC0xLjQ2OW0wLTQ1LjM5MWMtNjguNDE4LDAtNzcsLjI5LTEwMy44NjYsMS41MTYtMjYuODE1LDEuMjI0LTQ1LjEyNyw1LjQ4Mi02MS4xNTEsMTEuNzFhMTIzLjQ4OCwxMjMuNDg4LDAsMCwwLTQ0LjYyLDI5LjA1N0ExMjMuNDg4LDEyMy40ODgsMCwwLDAsMTcuMyw5MC45ODJDMTEuMDc3LDEwNy4wMDcsNi44MTksMTI1LjMxOSw1LjYsMTUyLjEzNCw0LjM2OSwxNzksNC4wNzksMTg3LjU4Miw0LjA3OSwyNTZTNC4zNjksMzMzLDUuNiwzNTkuODY2YzEuMjI0LDI2LjgxNSw1LjQ4Miw0NS4xMjcsMTEuNzEsNjEuMTUxYTEyMy40ODksMTIzLjQ4OSwwLDAsMCwyOS4wNTcsNDQuNjIsMTIzLjQ4NiwxMjMuNDg2LDAsMCwwLDQ0LjYyLDI5LjA1N2MxNi4wMjUsNi4yMjgsMzQuMzM3LDEwLjQ4Niw2MS4xNTEsMTEuNzEsMjYuODcsMS4yMjYsMzUuNDQ5LDEuNTE2LDEwMy44NjYsMS41MTZzNzctLjI5LDEwMy44NjYtMS41MTZjMjYuODE1LTEuMjI0LDQ1LjEyNy01LjQ4Miw2MS4xNTEtMTEuNzFhMTI4LjgxNywxMjguODE3LDAsMCwwLDczLjY3Ny03My42NzdjNi4yMjgtMTYuMDI1LDEwLjQ4Ni0zNC4zMzcsMTEuNzEtNjEuMTUxLDEuMjI2LTI2Ljg3LDEuNTE2LTM1LjQ0OSwxLjUxNi0xMDMuODY2cy0wLjI5LTc3LTEuNTE2LTEwMy44NjZjLTEuMjI0LTI2LjgxNS01LjQ4Mi00NS4xMjctMTEuNzEtNjEuMTUxYTEyMy40ODYsMTIzLjQ4NiwwLDAsMC0yOS4wNTctNDQuNjJBMTIzLjQ4NywxMjMuNDg3LDAsMCwwLDQyMS4wMTgsMTcuM0M0MDQuOTkzLDExLjA3NywzODYuNjgxLDYuODE5LDM1OS44NjYsNS42LDMzMyw0LjM2OSwzMjQuNDE4LDQuMDc5LDI1Niw0LjA3OWgwWicgfSksXG4gICAgICAgIGgoJ3BhdGgnLCB7IGQ6ICdNMjU2LDEyNi42MzVBMTI5LjM2NSwxMjkuMzY1LDAsMSwwLDM4NS4zNjUsMjU2LDEyOS4zNjUsMTI5LjM2NSwwLDAsMCwyNTYsMTI2LjYzNVptMCwyMTMuMzM4QTgzLjk3Myw4My45NzMsMCwxLDEsMzM5Ljk3NCwyNTYsODMuOTc0LDgzLjk3NCwwLDAsMSwyNTYsMzM5Ljk3M1onIH0pLFxuICAgICAgICBoKCdjaXJjbGUnLCB7IGN4OiAnMzkwLjQ3NicsIGN5OiAnMTIxLjUyNCcsIHI6ICczMC4yMycgfSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIF90aGlzW190aGlzLmlkXSA9IG5ldyBQcm92aWRlcih1cHB5LCB7XG4gICAgICBzZXJ2ZXJVcmw6IF90aGlzLm9wdHMuc2VydmVyVXJsLFxuICAgICAgc2VydmVySGVhZGVyczogX3RoaXMub3B0cy5zZXJ2ZXJIZWFkZXJzLFxuICAgICAgcHJvdmlkZXI6ICdpbnN0YWdyYW0nLFxuICAgICAgYXV0aFByb3ZpZGVyOiAnaW5zdGFncmFtJ1xuICAgIH0pO1xuXG4gICAgX3RoaXMuZmlsZXMgPSBbXTtcblxuICAgIF90aGlzLm9uQXV0aCA9IF90aGlzLm9uQXV0aC5iaW5kKF90aGlzKTtcbiAgICBfdGhpcy5yZW5kZXIgPSBfdGhpcy5yZW5kZXIuYmluZChfdGhpcyk7XG5cbiAgICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zXG4gICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge307XG5cbiAgICAvLyBtZXJnZSBkZWZhdWx0IG9wdGlvbnMgd2l0aCB0aGUgb25lcyBzZXQgYnkgdXNlclxuICAgIF90aGlzLm9wdHMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdHMpO1xuICAgIF90aGlzLm9wdHMuc2VydmVyUGF0dGVybiA9IG9wdHMuc2VydmVyUGF0dGVybiB8fCBvcHRzLnNlcnZlclVybDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBJbnN0YWdyYW0ucHJvdG90eXBlLmluc3RhbGwgPSBmdW5jdGlvbiBpbnN0YWxsKCkge1xuICAgIHRoaXMudmlldyA9IG5ldyBQcm92aWRlclZpZXdzKHRoaXMsIHtcbiAgICAgIHZpZXdUeXBlOiAnZ3JpZCcsXG4gICAgICBzaG93VGl0bGVzOiBmYWxzZSxcbiAgICAgIHNob3dGaWx0ZXI6IGZhbHNlLFxuICAgICAgc2hvd0JyZWFkY3J1bWJzOiBmYWxzZVxuICAgIH0pO1xuICAgIC8vIFNldCBkZWZhdWx0IHN0YXRlIGZvciBJbnN0YWdyYW1cbiAgICB0aGlzLnNldFBsdWdpblN0YXRlKHtcbiAgICAgIGF1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgZmlsZXM6IFtdLFxuICAgICAgZm9sZGVyczogW10sXG4gICAgICBkaXJlY3RvcmllczogW10sXG4gICAgICBhY3RpdmVSb3c6IC0xLFxuICAgICAgZmlsdGVySW5wdXQ6ICcnLFxuICAgICAgaXNTZWFyY2hWaXNpYmxlOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgdmFyIHRhcmdldCA9IHRoaXMub3B0cy50YXJnZXQ7XG4gICAgaWYgKHRhcmdldCkge1xuICAgICAgdGhpcy5tb3VudCh0YXJnZXQsIHRoaXMpO1xuICAgIH1cbiAgfTtcblxuICBJbnN0YWdyYW0ucHJvdG90eXBlLnVuaW5zdGFsbCA9IGZ1bmN0aW9uIHVuaW5zdGFsbCgpIHtcbiAgICB0aGlzLnZpZXcudGVhckRvd24oKTtcbiAgICB0aGlzLnVubW91bnQoKTtcbiAgfTtcblxuICBJbnN0YWdyYW0ucHJvdG90eXBlLm9uQXV0aCA9IGZ1bmN0aW9uIG9uQXV0aChhdXRoZW50aWNhdGVkKSB7XG4gICAgdGhpcy5zZXRQbHVnaW5TdGF0ZSh7IGF1dGhlbnRpY2F0ZWQ6IGF1dGhlbnRpY2F0ZWQgfSk7XG4gICAgaWYgKGF1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIHRoaXMudmlldy5nZXRGb2xkZXIoJ3JlY2VudCcpO1xuICAgIH1cbiAgfTtcblxuICBJbnN0YWdyYW0ucHJvdG90eXBlLmdldFVzZXJuYW1lID0gZnVuY3Rpb24gZ2V0VXNlcm5hbWUoZGF0YSkge1xuICAgIHJldHVybiBkYXRhLmRhdGFbMF0udXNlci51c2VybmFtZTtcbiAgfTtcblxuICBJbnN0YWdyYW0ucHJvdG90eXBlLmlzRm9sZGVyID0gZnVuY3Rpb24gaXNGb2xkZXIoaXRlbSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBJbnN0YWdyYW0ucHJvdG90eXBlLmdldEl0ZW1EYXRhID0gZnVuY3Rpb24gZ2V0SXRlbURhdGEoaXRlbSkge1xuICAgIHJldHVybiBpdGVtO1xuICB9O1xuXG4gIEluc3RhZ3JhbS5wcm90b3R5cGUuZ2V0SXRlbUljb24gPSBmdW5jdGlvbiBnZXRJdGVtSWNvbihpdGVtKSB7XG4gICAgaWYgKCFpdGVtLmltYWdlcykge1xuICAgICAgcmV0dXJuIGgoXG4gICAgICAgICdzdmcnLFxuICAgICAgICB7IHZpZXdCb3g6ICcwIDAgNTggNTgnLCBvcGFjaXR5OiAnMC42JyB9LFxuICAgICAgICBoKCdwYXRoJywgeyBkOiAnTTM2LjUzNyAyOC4xNTZsLTExLTdhMS4wMDUgMS4wMDUgMCAwIDAtMS4wMi0uMDMzQzI0LjIgMjEuMyAyNCAyMS42MzUgMjQgMjJ2MTRhMSAxIDAgMCAwIDEuNTM3Ljg0NGwxMS03YTEuMDAyIDEuMDAyIDAgMCAwIDAtMS42ODh6TTI2IDM0LjE4VjIzLjgyTDM0LjEzNyAyOSAyNiAzNC4xOHonIH0pLFxuICAgICAgICBoKCdwYXRoJywgeyBkOiAnTTU3IDZIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoNTZhMSAxIDAgMCAwIDEtMVY3YTEgMSAwIDAgMC0xLTF6TTEwIDI4SDJ2LTloOHY5em0tOCAyaDh2OUgydi05em0xMCAxMFY4aDM0djQySDEyVjQwem00NC0xMmgtOHYtOWg4djl6bS04IDJoOHY5aC04di05em04LTIydjloLThWOGg4ek0yIDhoOHY5SDJWOHptMCA0MnYtOWg4djlIMnptNTQgMGgtOHYtOWg4djl6JyB9KVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGgoJ2ltZycsIHsgc3JjOiBpdGVtLmltYWdlcy5sb3dfcmVzb2x1dGlvbi51cmwgfSk7XG4gIH07XG5cbiAgSW5zdGFncmFtLnByb3RvdHlwZS5nZXRJdGVtU3ViTGlzdCA9IGZ1bmN0aW9uIGdldEl0ZW1TdWJMaXN0KGl0ZW0pIHtcbiAgICB2YXIgc3ViSXRlbXMgPSBbXTtcbiAgICBpdGVtLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoc3ViSXRlbSkge1xuICAgICAgaWYgKHN1Ykl0ZW0uY2Fyb3VzZWxfbWVkaWEpIHtcbiAgICAgICAgc3ViSXRlbS5jYXJvdXNlbF9tZWRpYS5mb3JFYWNoKGZ1bmN0aW9uIChpLCBpbmRleCkge1xuICAgICAgICAgIHZhciBpZCA9IHN1Ykl0ZW0uaWQsXG4gICAgICAgICAgICAgIGNyZWF0ZWRfdGltZSA9IHN1Ykl0ZW0uY3JlYXRlZF90aW1lO1xuXG4gICAgICAgICAgdmFyIG5ld1N1Ykl0ZW0gPSBfZXh0ZW5kcyh7fSwgaSwgeyBpZDogaWQsIGNyZWF0ZWRfdGltZTogY3JlYXRlZF90aW1lIH0pO1xuICAgICAgICAgIG5ld1N1Ykl0ZW0uY2Fyb3VzZWxfaWQgPSBpbmRleDtcbiAgICAgICAgICBzdWJJdGVtcy5wdXNoKG5ld1N1Ykl0ZW0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ykl0ZW1zLnB1c2goc3ViSXRlbSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN1Ykl0ZW1zO1xuICB9O1xuXG4gIEluc3RhZ3JhbS5wcm90b3R5cGUuZ2V0SXRlbU5hbWUgPSBmdW5jdGlvbiBnZXRJdGVtTmFtZShpdGVtKSB7XG4gICAgaWYgKGl0ZW0gJiYgaXRlbVsnY3JlYXRlZF90aW1lJ10pIHtcbiAgICAgIHZhciBleHQgPSBpdGVtLnR5cGUgPT09ICd2aWRlbycgPyAnbXA0JyA6ICdqcGVnJztcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoaXRlbVsnY3JlYXRlZF90aW1lJ10gKiAxMDAwKTtcbiAgICAgIGRhdGUgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhbXSwge1xuICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICAgIG1vbnRoOiAnc2hvcnQnLFxuICAgICAgICBkYXk6ICdudW1lcmljJyxcbiAgICAgICAgaG91cjogJ251bWVyaWMnLFxuICAgICAgICBtaW51dGU6ICdudW1lcmljJ1xuICAgICAgfSk7XG4gICAgICAvLyBhZGRpbmcgYm90aCBkYXRlIGFuZCBjYXJvdXNlbF9pZCwgc28gdGhlIG5hbWUgaXMgdW5pcXVlXG4gICAgICByZXR1cm4gJ0luc3RhZ3JhbSAnICsgZGF0ZSArICcgJyArIChpdGVtLmNhcm91c2VsX2lkIHx8ICcnKSArICcuJyArIGV4dDtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9O1xuXG4gIEluc3RhZ3JhbS5wcm90b3R5cGUuZ2V0TWltZVR5cGUgPSBmdW5jdGlvbiBnZXRNaW1lVHlwZShpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0udHlwZSA9PT0gJ3ZpZGVvJyA/ICd2aWRlby9tcDQnIDogJ2ltYWdlL2pwZWcnO1xuICB9O1xuXG4gIEluc3RhZ3JhbS5wcm90b3R5cGUuZ2V0SXRlbUlkID0gZnVuY3Rpb24gZ2V0SXRlbUlkKGl0ZW0pIHtcbiAgICByZXR1cm4gJycgKyBpdGVtLmlkICsgKGl0ZW0uY2Fyb3VzZWxfaWQgfHwgJycpO1xuICB9O1xuXG4gIEluc3RhZ3JhbS5wcm90b3R5cGUuZ2V0SXRlbVJlcXVlc3RQYXRoID0gZnVuY3Rpb24gZ2V0SXRlbVJlcXVlc3RQYXRoKGl0ZW0pIHtcbiAgICB2YXIgc3VmZml4ID0gaXNOYU4oaXRlbS5jYXJvdXNlbF9pZCkgPyAnJyA6ICc/Y2Fyb3VzZWxfaWQ9JyArIGl0ZW0uY2Fyb3VzZWxfaWQ7XG4gICAgcmV0dXJuICcnICsgaXRlbS5pZCArIHN1ZmZpeDtcbiAgfTtcblxuICBJbnN0YWdyYW0ucHJvdG90eXBlLmdldEl0ZW1Nb2RpZmllZERhdGUgPSBmdW5jdGlvbiBnZXRJdGVtTW9kaWZpZWREYXRlKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbS5jcmVhdGVkX3RpbWU7XG4gIH07XG5cbiAgSW5zdGFncmFtLnByb3RvdHlwZS5nZXRJdGVtVGh1bWJuYWlsVXJsID0gZnVuY3Rpb24gZ2V0SXRlbVRodW1ibmFpbFVybChpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0uaW1hZ2VzLnRodW1ibmFpbC51cmw7XG4gIH07XG5cbiAgSW5zdGFncmFtLnByb3RvdHlwZS5nZXROZXh0UGFnZVBhdGggPSBmdW5jdGlvbiBnZXROZXh0UGFnZVBhdGgoKSB7XG4gICAgdmFyIF9nZXRQbHVnaW5TdGF0ZSA9IHRoaXMuZ2V0UGx1Z2luU3RhdGUoKSxcbiAgICAgICAgZmlsZXMgPSBfZ2V0UGx1Z2luU3RhdGUuZmlsZXM7XG5cbiAgICByZXR1cm4gJ3JlY2VudD9tYXhfaWQ9JyArIHRoaXMuZ2V0SXRlbUlkKGZpbGVzW2ZpbGVzLmxlbmd0aCAtIDFdKTtcbiAgfTtcblxuICBJbnN0YWdyYW0ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihzdGF0ZSkge1xuICAgIHJldHVybiB0aGlzLnZpZXcucmVuZGVyKHN0YXRlKTtcbiAgfTtcblxuICByZXR1cm4gSW5zdGFncmFtO1xufShQbHVnaW4pOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIExvYWRlclZpZXcgPSByZXF1aXJlKCcuL0xvYWRlcicpO1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUuaCxcbiAgICBDb21wb25lbnQgPSBfcmVxdWlyZS5Db21wb25lbnQ7XG5cbnZhciBBdXRoQmxvY2sgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQXV0aEJsb2NrLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBBdXRoQmxvY2soKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGhCbG9jayk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0NvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIEF1dGhCbG9jay5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFfdGhpczIuY29ubmVjdEJ1dHRvbikgcmV0dXJuO1xuICAgICAgX3RoaXMyLmNvbm5lY3RCdXR0b24uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xuICAgIH0sIDE1MCk7XG4gIH07XG5cbiAgQXV0aEJsb2NrLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICByZXR1cm4gaChcbiAgICAgICdkaXYnLFxuICAgICAgeyAnY2xhc3MnOiAndXBweS1Qcm92aWRlci1hdXRoJyB9LFxuICAgICAgaChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktUHJvdmlkZXItYXV0aEljb24nIH0sXG4gICAgICAgIHRoaXMucHJvcHMucGx1Z2luSWNvbigpXG4gICAgICApLFxuICAgICAgaChcbiAgICAgICAgJ2gxJyxcbiAgICAgICAgeyAnY2xhc3MnOiAndXBweS1Qcm92aWRlci1hdXRoVGl0bGUnIH0sXG4gICAgICAgICdQbGVhc2UgYXV0aGVudGljYXRlIHdpdGggJyxcbiAgICAgICAgaChcbiAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1Qcm92aWRlci1hdXRoVGl0bGVOYW1lJyB9LFxuICAgICAgICAgIHRoaXMucHJvcHMucGx1Z2luTmFtZVxuICAgICAgICApLFxuICAgICAgICBoKCdicicsIG51bGwpLFxuICAgICAgICAnIHRvIHNlbGVjdCBmaWxlcydcbiAgICAgICksXG4gICAgICBoKFxuICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdidXR0b24nLFxuICAgICAgICAgICdjbGFzcyc6ICd1cHB5LXUtcmVzZXQgdXBweS1jLWJ0biB1cHB5LWMtYnRuLXByaW1hcnkgdXBweS1Qcm92aWRlci1hdXRoQnRuJyxcbiAgICAgICAgICBvbmNsaWNrOiB0aGlzLnByb3BzLmhhbmRsZUF1dGgsXG4gICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoZWwpIHtcbiAgICAgICAgICAgIF90aGlzMy5jb25uZWN0QnV0dG9uID0gZWw7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnQ29ubmVjdCB0byAnLFxuICAgICAgICB0aGlzLnByb3BzLnBsdWdpbk5hbWVcbiAgICAgICksXG4gICAgICB0aGlzLnByb3BzLmRlbW8gJiYgaChcbiAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktdS1yZXNldCB1cHB5LWMtYnRuIHVwcHktYy1idG4tcHJpbWFyeSB1cHB5LVByb3ZpZGVyLWF1dGhCdG4nLCBvbmNsaWNrOiB0aGlzLnByb3BzLmhhbmRsZURlbW9BdXRoIH0sXG4gICAgICAgICdQcm9jZWVkIHdpdGggRGVtbyBBY2NvdW50J1xuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIEF1dGhCbG9jaztcbn0oQ29tcG9uZW50KTtcblxudmFyIEF1dGhWaWV3ID0gZnVuY3Rpb24gKF9Db21wb25lbnQyKSB7XG4gIF9pbmhlcml0cyhBdXRoVmlldywgX0NvbXBvbmVudDIpO1xuXG4gIGZ1bmN0aW9uIEF1dGhWaWV3KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoVmlldyk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0NvbXBvbmVudDIuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBBdXRoVmlldy5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnByb3BzLmNoZWNrQXV0aCgpO1xuICB9O1xuXG4gIEF1dGhWaWV3LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGgoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgc3R5bGU6IHsgaGVpZ2h0OiAnMTAwJScgfSB9LFxuICAgICAgdGhpcy5wcm9wcy5jaGVja0F1dGhJblByb2dyZXNzID8gaChMb2FkZXJWaWV3LCBudWxsKSA6IGgoQXV0aEJsb2NrLCB0aGlzLnByb3BzKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIEF1dGhWaWV3O1xufShDb21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEF1dGhWaWV3OyIsInZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ3ByZWFjdCcpLFxuICAgIGggPSBfcmVxdWlyZS5oO1xuXG52YXIgQnJlYWRjcnVtYiA9IGZ1bmN0aW9uIEJyZWFkY3J1bWIocHJvcHMpIHtcbiAgcmV0dXJuIGgoXG4gICAgXCJsaVwiLFxuICAgIG51bGwsXG4gICAgaChcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICB7IHR5cGU6IFwiYnV0dG9uXCIsIG9uY2xpY2s6IHByb3BzLmdldEZvbGRlciB9LFxuICAgICAgcHJvcHMudGl0bGVcbiAgICApXG4gICk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICByZXR1cm4gaChcbiAgICBcInVsXCIsXG4gICAgeyBcImNsYXNzXCI6IFwidXBweS1Qcm92aWRlci1icmVhZGNydW1ic1wiIH0sXG4gICAgcHJvcHMuZGlyZWN0b3JpZXMubWFwKGZ1bmN0aW9uIChkaXJlY3RvcnksIGkpIHtcbiAgICAgIHJldHVybiBCcmVhZGNydW1iKHtcbiAgICAgICAgZ2V0Rm9sZGVyOiBmdW5jdGlvbiBnZXRGb2xkZXIoKSB7XG4gICAgICAgICAgcmV0dXJuIHByb3BzLmdldEZvbGRlcihkaXJlY3RvcnkuaWQpO1xuICAgICAgICB9LFxuICAgICAgICB0aXRsZTogaSA9PT0gMCA/IHByb3BzLnRpdGxlIDogZGlyZWN0b3J5LnRpdGxlXG4gICAgICB9KTtcbiAgICB9KVxuICApO1xufTsiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgY2xhc3NOYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcbnZhciBCcmVhZGNydW1icyA9IHJlcXVpcmUoJy4vQnJlYWRjcnVtYnMnKTtcbnZhciBGaWx0ZXIgPSByZXF1aXJlKCcuL0ZpbHRlcicpO1xudmFyIFRhYmxlID0gcmVxdWlyZSgnLi9JdGVtTGlzdCcpO1xudmFyIEZvb3RlckFjdGlvbnMgPSByZXF1aXJlKCcuL0Zvb3RlckFjdGlvbnMnKTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlLmg7XG5cbnZhciBCcm93c2VyID0gZnVuY3Rpb24gQnJvd3Nlcihwcm9wcykge1xuICB2YXIgZmlsdGVyZWRGb2xkZXJzID0gcHJvcHMuZm9sZGVycztcbiAgdmFyIGZpbHRlcmVkRmlsZXMgPSBwcm9wcy5maWxlcztcblxuICBpZiAocHJvcHMuZmlsdGVySW5wdXQgIT09ICcnKSB7XG4gICAgZmlsdGVyZWRGb2xkZXJzID0gcHJvcHMuZmlsdGVySXRlbXMocHJvcHMuZm9sZGVycyk7XG4gICAgZmlsdGVyZWRGaWxlcyA9IHByb3BzLmZpbHRlckl0ZW1zKHByb3BzLmZpbGVzKTtcbiAgfVxuXG4gIHZhciBzZWxlY3RlZCA9IHByb3BzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoO1xuXG4gIHJldHVybiBoKFxuICAgICdkaXYnLFxuICAgIHsgJ2NsYXNzJzogY2xhc3NOYW1lcygndXBweS1Qcm92aWRlckJyb3dzZXInLCAndXBweS1Qcm92aWRlckJyb3dzZXItdmlld1R5cGUtLScgKyBwcm9wcy52aWV3VHlwZSkgfSxcbiAgICBoKFxuICAgICAgJ2RpdicsXG4gICAgICB7ICdjbGFzcyc6ICd1cHB5LVByb3ZpZGVyQnJvd3Nlci1oZWFkZXInIH0sXG4gICAgICBoKFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyAnY2xhc3MnOiBjbGFzc05hbWVzKCd1cHB5LVByb3ZpZGVyQnJvd3Nlci1oZWFkZXJCYXInLCAhcHJvcHMuc2hvd0JyZWFkY3J1bWJzICYmICd1cHB5LVByb3ZpZGVyQnJvd3Nlci1oZWFkZXJCYXItLXNpbXBsZScpIH0sXG4gICAgICAgIGgoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyAnY2xhc3MnOiAndXBweS1Qcm92aWRlci1icmVhZGNydW1ic0ljb24nIH0sXG4gICAgICAgICAgcHJvcHMucGx1Z2luSWNvbiAmJiBwcm9wcy5wbHVnaW5JY29uKClcbiAgICAgICAgKSxcbiAgICAgICAgcHJvcHMuc2hvd0JyZWFkY3J1bWJzICYmIEJyZWFkY3J1bWJzKHtcbiAgICAgICAgICBnZXRGb2xkZXI6IHByb3BzLmdldEZvbGRlcixcbiAgICAgICAgICBkaXJlY3RvcmllczogcHJvcHMuZGlyZWN0b3JpZXMsXG4gICAgICAgICAgdGl0bGU6IHByb3BzLnRpdGxlXG4gICAgICAgIH0pLFxuICAgICAgICBoKFxuICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LVByb3ZpZGVyQnJvd3Nlci11c2VyJyB9LFxuICAgICAgICAgIHByb3BzLnVzZXJuYW1lXG4gICAgICAgICksXG4gICAgICAgIGgoXG4gICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgb25jbGljazogcHJvcHMubG9nb3V0LCAnY2xhc3MnOiAndXBweS1Qcm92aWRlckJyb3dzZXItdXNlckxvZ291dCcgfSxcbiAgICAgICAgICBwcm9wcy5pMThuKCdsb2dPdXQnKVxuICAgICAgICApXG4gICAgICApXG4gICAgKSxcbiAgICBwcm9wcy5zaG93RmlsdGVyICYmIGgoRmlsdGVyLCBwcm9wcyksXG4gICAgaChUYWJsZSwge1xuICAgICAgY29sdW1uczogW3tcbiAgICAgICAgbmFtZTogJ05hbWUnLFxuICAgICAgICBrZXk6ICd0aXRsZSdcbiAgICAgIH1dLFxuICAgICAgZm9sZGVyczogZmlsdGVyZWRGb2xkZXJzLFxuICAgICAgZmlsZXM6IGZpbHRlcmVkRmlsZXMsXG4gICAgICBhY3RpdmVSb3c6IHByb3BzLmlzQWN0aXZlUm93LFxuICAgICAgc29ydEJ5VGl0bGU6IHByb3BzLnNvcnRCeVRpdGxlLFxuICAgICAgc29ydEJ5RGF0ZTogcHJvcHMuc29ydEJ5RGF0ZSxcbiAgICAgIGlzQ2hlY2tlZDogcHJvcHMuaXNDaGVja2VkLFxuICAgICAgaGFuZGxlRm9sZGVyQ2xpY2s6IHByb3BzLmdldE5leHRGb2xkZXIsXG4gICAgICB0b2dnbGVDaGVja2JveDogcHJvcHMudG9nZ2xlQ2hlY2tib3gsXG4gICAgICBnZXRJdGVtTmFtZTogcHJvcHMuZ2V0SXRlbU5hbWUsXG4gICAgICBnZXRJdGVtSWNvbjogcHJvcHMuZ2V0SXRlbUljb24sXG4gICAgICBoYW5kbGVTY3JvbGw6IHByb3BzLmhhbmRsZVNjcm9sbCxcbiAgICAgIHRpdGxlOiBwcm9wcy50aXRsZSxcbiAgICAgIHNob3dUaXRsZXM6IHByb3BzLnNob3dUaXRsZXMsXG4gICAgICBnZXRJdGVtSWQ6IHByb3BzLmdldEl0ZW1JZCxcbiAgICAgIGkxOG46IHByb3BzLmkxOG5cbiAgICB9KSxcbiAgICBzZWxlY3RlZCA+IDAgJiYgaChGb290ZXJBY3Rpb25zLCBfZXh0ZW5kcyh7IHNlbGVjdGVkOiBzZWxlY3RlZCB9LCBwcm9wcykpXG4gICk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJyb3dzZXI7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUuaCxcbiAgICBDb21wb25lbnQgPSBfcmVxdWlyZS5Db21wb25lbnQ7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEZpbHRlciwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRmlsdGVyKHByb3BzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbHRlcik7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmlzRW1wdHkgPSB0cnVlO1xuICAgIF90aGlzLmhhbmRsZUtleVByZXNzID0gX3RoaXMuaGFuZGxlS2V5UHJlc3MuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuaGFuZGxlQ2xlYXIgPSBfdGhpcy5oYW5kbGVDbGVhci5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICAvLyBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gIC8vICAgdGhpcy5pc0VtcHR5ID0gdHJ1ZVxuICAvLyAgIC8vIHRoaXMuaW5wdXQuZm9jdXMoKVxuICAvLyB9XG5cbiAgRmlsdGVyLnByb3RvdHlwZS5oYW5kbGVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2KSB7XG4gICAgaWYgKGV2LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNFbXB0eSA9ICF0aGlzLmlucHV0LnZhbHVlLmxlbmd0aCA+IDA7XG4gICAgdGhpcy5wcm9wcy5maWx0ZXJRdWVyeShldik7XG4gIH07XG5cbiAgRmlsdGVyLnByb3RvdHlwZS5oYW5kbGVDbGVhciA9IGZ1bmN0aW9uIGhhbmRsZUNsZWFyKGV2KSB7XG4gICAgdGhpcy5pbnB1dC52YWx1ZSA9ICcnO1xuICAgIHRoaXMucHJvcHMuZmlsdGVyUXVlcnkoKTtcbiAgfTtcblxuICBGaWx0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHJldHVybiBoKFxuICAgICAgJ2RpdicsXG4gICAgICB7ICdjbGFzcyc6ICd1cHB5LXUtcmVzZXQgdXBweS1Qcm92aWRlckJyb3dzZXItc2VhcmNoJyB9LFxuICAgICAgaChcbiAgICAgICAgJ3N2ZycsXG4gICAgICAgIHsgJ2NsYXNzJzogJ1VwcHlJY29uIHVwcHktUHJvdmlkZXJCcm93c2VyLXNlYXJjaEljb24nLCB2aWV3Qm94OiAnMCAwIDEwMCAxMDAnIH0sXG4gICAgICAgIGgoJ3BhdGgnLCB7IGQ6ICdNODcuNTMzIDgwLjAzTDYyLjk0MiA1NS40MzljMy4zMjQtNC41ODcgNS4zMTItMTAuMjA3IDUuMzEyLTE2LjI5NSAwLS4zMTItLjA0My0uNjExLS4wOTItLjkwOC4wNS0uMzAxLjA5My0uNjA1LjA5My0uOTIyIDAtMTUuMzYtMTIuNDk3LTI3Ljg1Ny0yNy44NTctMjcuODU3LS4yNzMgMC0uNTM2LjA0My0uNzk5LjA4LS4yNjUtLjAzNy0uNTI2LS4wOC0uNzk5LS4wOC0xNS4zNjEgMC0yNy44NTggMTIuNDk3LTI3Ljg1OCAyNy44NTcgMCAuMzEyLjA0Mi42MTEuMDkyLjkwOWE1LjQ2NiA1LjQ2NiAwIDAgMC0uMDkzLjkyMWMwIDE1LjM2IDEyLjQ5NiAyNy44NTggMjcuODU3IDI3Ljg1OC4yNzMgMCAuNTM1LS4wNDMuOC0uMDgxLjI2My4wMzguNTI0LjA4MS43OTguMDgxIDUuMjA4IDAgMTAuMDcxLTEuNDY0IDE0LjI0NS0zLjk2M0w3OS41ODIgODcuOThhNS42MDMgNS42MDMgMCAwIDAgMy45NzYgMS42NDcgNS42MjEgNS42MjEgMCAwIDAgMy45NzUtOS41OTd6TTM5LjU5OCA1NS44MzhjLS4yNjUtLjAzOC0uNTI2LS4wODEtLjgtLjA4MS05LjE2IDAtMTYuNjEyLTcuNDUyLTE2LjYxMi0xNi42MTIgMC0uMzEyLS4wNDItLjYxMS0uMDkyLS45MDguMDUxLS4zMDEuMDkzLS42MDUuMDkzLS45MjIgMC05LjE2IDcuNDUzLTE2LjYxMiAxNi42MTMtMTYuNjEyLjI3MiAwIC41MzQtLjA0Mi43OTktLjA3OS4yNjMuMDM3LjUyNS4wNzkuNzk5LjA3OSA5LjE2IDAgMTYuNjEyIDcuNDUyIDE2LjYxMiAxNi42MTIgMCAuMzEyLjA0My42MTEuMDkyLjkwOS0uMDUuMzAxLS4wOTQuNjA0LS4wOTQuOTIxIDAgOS4xNi03LjQ1MiAxNi42MTItMTYuNjEyIDE2LjYxMi0uMjc0IDAtLjUzNi4wNDMtLjc5OC4wODF6JyB9KVxuICAgICAgKSxcbiAgICAgIGgoJ2lucHV0Jywge1xuICAgICAgICAnY2xhc3MnOiAndXBweS11LXJlc2V0IHVwcHktUHJvdmlkZXJCcm93c2VyLXNlYXJjaElucHV0JyxcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICBwbGFjZWhvbGRlcjogJ0ZpbHRlcicsXG4gICAgICAgICdhcmlhLWxhYmVsJzogJ0ZpbHRlcicsXG4gICAgICAgIG9ua2V5dXA6IHRoaXMuaGFuZGxlS2V5UHJlc3MsXG4gICAgICAgIG9ua2V5ZG93bjogdGhpcy5oYW5kbGVLZXlQcmVzcyxcbiAgICAgICAgb25rZXlwcmVzczogdGhpcy5oYW5kbGVLZXlQcmVzcyxcbiAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMuZmlsdGVySW5wdXQsXG4gICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGlucHV0KSB7XG4gICAgICAgICAgX3RoaXMyLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIH0gfSksXG4gICAgICAhdGhpcy5pc0VtcHR5ICYmIGgoXG4gICAgICAgICdidXR0b24nLFxuICAgICAgICB7XG4gICAgICAgICAgJ2NsYXNzJzogJ3VwcHktdS1yZXNldCB1cHB5LVByb3ZpZGVyQnJvd3Nlci1zZWFyY2hDbG9zZScsXG4gICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgb25jbGljazogdGhpcy5oYW5kbGVDbGVhciB9LFxuICAgICAgICBoKFxuICAgICAgICAgICdzdmcnLFxuICAgICAgICAgIHsgJ2NsYXNzJzogJ1VwcHlJY29uJywgdmlld0JveDogJzAgMCAxOSAxOScgfSxcbiAgICAgICAgICBoKCdwYXRoJywgeyBkOiAnTTE3LjMxOCAxNy4yMzJMOS45NCA5Ljg1NCA5LjU4NiA5LjVsLS4zNTQuMzU0LTcuMzc4IDcuMzc4aC43MDdsLS42Mi0uNjJ2LjcwNkw5LjMxOCA5Ljk0bC4zNTQtLjM1NC0uMzU0LS4zNTRMMS45NCAxLjg1NHYuNzA3bC42Mi0uNjJoLS43MDZsNy4zNzggNy4zNzguMzU0LjM1NC4zNTQtLjM1NCA3LjM3OC03LjM3OGgtLjcwN2wuNjIyLjYydi0uNzA2TDkuODU0IDkuMjMybC0uMzU0LjM1NC4zNTQuMzU0IDcuMzc4IDcuMzc4LjcwOC0uNzA3LTcuMzgtNy4zNzh2LjcwOGw3LjM4LTcuMzguMzUzLS4zNTMtLjM1My0uMzUzLS42MjItLjYyMi0uMzUzLS4zNTMtLjM1NC4zNTItNy4zNzggNy4zOGguNzA4TDIuNTYgMS4yMyAyLjIwOC44OGwtLjM1My4zNTMtLjYyMi42Mi0uMzUzLjM1NS4zNTIuMzUzIDcuMzggNy4zOHYtLjcwOGwtNy4zOCA3LjM4LS4zNTMuMzUzLjM1Mi4zNTMuNjIyLjYyMi4zNTMuMzUzLjM1NC0uMzUzIDcuMzgtNy4zOGgtLjcwOGw3LjM4IDcuMzh6JyB9KVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gRmlsdGVyO1xufShDb21wb25lbnQpOyIsInZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ3ByZWFjdCcpLFxuICAgIGggPSBfcmVxdWlyZS5oO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICByZXR1cm4gaChcbiAgICBcImRpdlwiLFxuICAgIHsgXCJjbGFzc1wiOiBcInVwcHktUHJvdmlkZXJCcm93c2VyLWZvb3RlclwiIH0sXG4gICAgaChcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICB7IFwiY2xhc3NcIjogXCJ1cHB5LXUtcmVzZXQgdXBweS1jLWJ0biB1cHB5LWMtYnRuLXByaW1hcnlcIiwgb25jbGljazogcHJvcHMuZG9uZSB9LFxuICAgICAgcHJvcHMuaTE4bignc2VsZWN0WEZpbGVzJywge1xuICAgICAgICBzbWFydF9jb3VudDogcHJvcHMuc2VsZWN0ZWRcbiAgICAgIH0pXG4gICAgKSxcbiAgICBoKFxuICAgICAgXCJidXR0b25cIixcbiAgICAgIHsgXCJjbGFzc1wiOiBcInVwcHktdS1yZXNldCB1cHB5LWMtYnRuIHVwcHktYy1idG4tbGlua1wiLCBvbmNsaWNrOiBwcm9wcy5jYW5jZWwgfSxcbiAgICAgIHByb3BzLmkxOG4oJ2NhbmNlbCcpXG4gICAgKVxuICApO1xufTsiLCJ2YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUuaDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgdmFyIHN0b3AgPSBmdW5jdGlvbiBzdG9wKGV2KSB7XG4gICAgaWYgKGV2LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoYW5kbGVJdGVtQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVJdGVtQ2xpY2soZXYpIHtcbiAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vIHdoZW4gZmlsZSBpcyBjbGlja2VkLCBzZWxlY3QgaXQsIGJ1dCB3aGVuIGZvbGRlciBpcyBjbGlja2VkLCBvcGVuIGl0XG4gICAgaWYgKHByb3BzLnR5cGUgPT09ICdmb2xkZXInKSB7XG4gICAgICByZXR1cm4gcHJvcHMuaGFuZGxlRm9sZGVyQ2xpY2soZXYpO1xuICAgIH1cbiAgICBwcm9wcy5oYW5kbGVDbGljayhldik7XG4gIH07XG5cbiAgcmV0dXJuIGgoXG4gICAgJ2xpJyxcbiAgICB7ICdjbGFzcyc6ICd1cHB5LVByb3ZpZGVyQnJvd3Nlckl0ZW0nICsgKHByb3BzLmlzQ2hlY2tlZCA/ICcgdXBweS1Qcm92aWRlckJyb3dzZXJJdGVtLS1zZWxlY3RlZCcgOiAnJykgfSxcbiAgICBoKFxuICAgICAgJ2RpdicsXG4gICAgICB7ICdjbGFzcyc6ICd1cHB5LVByb3ZpZGVyQnJvd3Nlckl0ZW0tY2hlY2tib3gnIH0sXG4gICAgICBoKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgcm9sZTogJ29wdGlvbicsXG4gICAgICAgIHRhYmluZGV4OiAwLFxuICAgICAgICAnYXJpYS1sYWJlbCc6ICdTZWxlY3QgJyArIHByb3BzLnRpdGxlLFxuICAgICAgICBpZDogcHJvcHMuaWQsXG4gICAgICAgIGNoZWNrZWQ6IHByb3BzLmlzQ2hlY2tlZCxcbiAgICAgICAgZGlzYWJsZWQ6IHByb3BzLmlzRGlzYWJsZWQsXG4gICAgICAgIG9uY2hhbmdlOiBwcm9wcy5oYW5kbGVDbGljayxcbiAgICAgICAgb25rZXl1cDogc3RvcCxcbiAgICAgICAgb25rZXlkb3duOiBzdG9wLFxuICAgICAgICBvbmtleXByZXNzOiBzdG9wIH0pLFxuICAgICAgaCgnbGFiZWwnLCB7XG4gICAgICAgICdmb3InOiBwcm9wcy5pZCxcbiAgICAgICAgb25jbGljazogcHJvcHMuaGFuZGxlQ2xpY2tcbiAgICAgIH0pXG4gICAgKSxcbiAgICBoKFxuICAgICAgJ2J1dHRvbicsXG4gICAgICB7IHR5cGU6ICdidXR0b24nLFxuICAgICAgICAnY2xhc3MnOiAndXBweS1Qcm92aWRlckJyb3dzZXJJdGVtLWlubmVyJyxcbiAgICAgICAgJ2FyaWEtbGFiZWwnOiAnU2VsZWN0ICcgKyBwcm9wcy50aXRsZSxcbiAgICAgICAgdGFiaW5kZXg6IDAsXG4gICAgICAgIG9uY2xpY2s6IGhhbmRsZUl0ZW1DbGljayB9LFxuICAgICAgcHJvcHMuZ2V0SXRlbUljb24oKSxcbiAgICAgICcgJyxcbiAgICAgIHByb3BzLnNob3dUaXRsZXMgJiYgcHJvcHMudGl0bGVcbiAgICApXG4gICk7XG59OyIsInZhciBSb3cgPSByZXF1aXJlKCcuL0l0ZW0nKTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlLmg7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gIGlmICghcHJvcHMuZm9sZGVycy5sZW5ndGggJiYgIXByb3BzLmZpbGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBoKFxuICAgICAgJ2RpdicsXG4gICAgICB7ICdjbGFzcyc6ICd1cHB5LVByb3ZpZGVyLWVtcHR5JyB9LFxuICAgICAgcHJvcHMuaTE4bignbm9GaWxlc0ZvdW5kJylcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGgoXG4gICAgJ2RpdicsXG4gICAgeyAnY2xhc3MnOiAndXBweS1Qcm92aWRlckJyb3dzZXItYm9keScgfSxcbiAgICBoKFxuICAgICAgJ3VsJyxcbiAgICAgIHsgJ2NsYXNzJzogJ3VwcHktUHJvdmlkZXJCcm93c2VyLWxpc3QnLFxuICAgICAgICBvbnNjcm9sbDogcHJvcHMuaGFuZGxlU2Nyb2xsLFxuICAgICAgICByb2xlOiAnbGlzdGJveCcsXG4gICAgICAgICdhcmlhLWxhYmVsJzogJ0xpc3Qgb2YgZmlsZXMgZnJvbSAnICsgcHJvcHMudGl0bGUgfSxcbiAgICAgIHByb3BzLmZvbGRlcnMubWFwKGZ1bmN0aW9uIChmb2xkZXIpIHtcbiAgICAgICAgdmFyIGlzRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGlzQ2hlY2tlZCA9IHByb3BzLmlzQ2hlY2tlZChmb2xkZXIpO1xuICAgICAgICBpZiAoaXNDaGVja2VkKSB7XG4gICAgICAgICAgaXNEaXNhYmxlZCA9IGlzQ2hlY2tlZC5sb2FkaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSb3coe1xuICAgICAgICAgIHRpdGxlOiBwcm9wcy5nZXRJdGVtTmFtZShmb2xkZXIpLFxuICAgICAgICAgIGlkOiBwcm9wcy5nZXRJdGVtSWQoZm9sZGVyKSxcbiAgICAgICAgICB0eXBlOiAnZm9sZGVyJyxcbiAgICAgICAgICAvLyBhY3RpdmU6IHByb3BzLmFjdGl2ZVJvdyhmb2xkZXIpLFxuICAgICAgICAgIGdldEl0ZW1JY29uOiBmdW5jdGlvbiBnZXRJdGVtSWNvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5nZXRJdGVtSWNvbihmb2xkZXIpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCxcbiAgICAgICAgICBpc0NoZWNrZWQ6IGlzQ2hlY2tlZCxcbiAgICAgICAgICBoYW5kbGVGb2xkZXJDbGljazogZnVuY3Rpb24gaGFuZGxlRm9sZGVyQ2xpY2soKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcHMuaGFuZGxlRm9sZGVyQ2xpY2soZm9sZGVyKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcHMudG9nZ2xlQ2hlY2tib3goZSwgZm9sZGVyKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbHVtbnM6IHByb3BzLmNvbHVtbnMsXG4gICAgICAgICAgc2hvd1RpdGxlczogcHJvcHMuc2hvd1RpdGxlc1xuICAgICAgICB9KTtcbiAgICAgIH0pLFxuICAgICAgcHJvcHMuZmlsZXMubWFwKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICAgIHJldHVybiBSb3coe1xuICAgICAgICAgIHRpdGxlOiBwcm9wcy5nZXRJdGVtTmFtZShmaWxlKSxcbiAgICAgICAgICBpZDogcHJvcHMuZ2V0SXRlbUlkKGZpbGUpLFxuICAgICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgICAvLyBhY3RpdmU6IHByb3BzLmFjdGl2ZVJvdyhmaWxlKSxcbiAgICAgICAgICBnZXRJdGVtSWNvbjogZnVuY3Rpb24gZ2V0SXRlbUljb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcHMuZ2V0SXRlbUljb24oZmlsZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpc0Rpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgICBpc0NoZWNrZWQ6IHByb3BzLmlzQ2hlY2tlZChmaWxlKSxcbiAgICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3BzLnRvZ2dsZUNoZWNrYm94KGUsIGZpbGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY29sdW1uczogcHJvcHMuY29sdW1ucyxcbiAgICAgICAgICBzaG93VGl0bGVzOiBwcm9wcy5zaG93VGl0bGVzXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICApXG4gICk7XG59OyIsInZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ3ByZWFjdCcpLFxuICAgIGggPSBfcmVxdWlyZS5oO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICByZXR1cm4gaChcbiAgICBcImRpdlwiLFxuICAgIHsgXCJjbGFzc1wiOiBcInVwcHktUHJvdmlkZXItbG9hZGluZ1wiIH0sXG4gICAgaChcbiAgICAgIFwic3BhblwiLFxuICAgICAgbnVsbCxcbiAgICAgIFwiTG9hZGluZy4uLlwiXG4gICAgKVxuICApO1xufTsiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ3ByZWFjdCcpLFxuICAgIGggPSBfcmVxdWlyZS5oLFxuICAgIENvbXBvbmVudCA9IF9yZXF1aXJlLkNvbXBvbmVudDtcblxudmFyIEF1dGhWaWV3ID0gcmVxdWlyZSgnLi9BdXRoVmlldycpO1xudmFyIEJyb3dzZXIgPSByZXF1aXJlKCcuL0Jyb3dzZXInKTtcbnZhciBMb2FkZXJWaWV3ID0gcmVxdWlyZSgnLi9Mb2FkZXInKTtcbnZhciBnZW5lcmF0ZUZpbGVJRCA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi9nZW5lcmF0ZUZpbGVJRCcpO1xudmFyIGdldEZpbGVUeXBlID0gcmVxdWlyZSgnQHVwcHkvdXRpbHMvbGliL2dldEZpbGVUeXBlJyk7XG52YXIgaXNQcmV2aWV3U3VwcG9ydGVkID0gcmVxdWlyZSgnQHVwcHkvdXRpbHMvbGliL2lzUHJldmlld1N1cHBvcnRlZCcpO1xuXG4vKipcbiAqIEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXggcG9ueWZpbGwgZm9yIG9sZCBicm93c2Vycy5cbiAqL1xuZnVuY3Rpb24gZmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaV0pKSByZXR1cm4gaTtcbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbnZhciBDbG9zZVdyYXBwZXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQ2xvc2VXcmFwcGVyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDbG9zZVdyYXBwZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENsb3NlV3JhcHBlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0NvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIENsb3NlV3JhcHBlci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLnByb3BzLm9uVW5tb3VudCgpO1xuICB9O1xuXG4gIENsb3NlV3JhcHBlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuWzBdO1xuICB9O1xuXG4gIHJldHVybiBDbG9zZVdyYXBwZXI7XG59KENvbXBvbmVudCk7XG5cbi8qKlxuICogQ2xhc3MgdG8gZWFzaWx5IGdlbmVyYXRlIGdlbmVyaWMgdmlld3MgZm9yIHBsdWdpbnNcbiAqXG4gKlxuICogVGhpcyBjbGFzcyBleHBlY3RzIHRoZSBwbHVnaW4gaW5zdGFuY2UgdXNpbmcgaXQgdG8gaGF2ZSB0aGUgZm9sbG93aW5nXG4gKiBhY2Nlc3NvciBtZXRob2RzLlxuICogRWFjaCBtZXRob2QgdGFrZXMgdGhlIGl0ZW0gd2hvc2UgcHJvcGVydHkgaXMgdG8gYmUgYWNjZXNzZWRcbiAqIGFzIGEgcGFyYW1cbiAqXG4gKiBpc0ZvbGRlclxuICogICAgQHJldHVybiB7Qm9vbGVhbn0gZm9yIGlmIHRoZSBpdGVtIGlzIGEgZm9sZGVyIG9yIG5vdFxuICogZ2V0SXRlbURhdGFcbiAqICAgIEByZXR1cm4ge09iamVjdH0gdGhhdCBpcyBmb3JtYXQgcmVhZHkgZm9yIHVwcHkgdXBsb2FkL2Rvd25sb2FkXG4gKiBnZXRJdGVtSWNvblxuICogICAgQHJldHVybiB7T2JqZWN0fSBodG1sIGluc3RhbmNlIG9mIHRoZSBpdGVtJ3MgaWNvblxuICogZ2V0SXRlbVN1Ykxpc3RcbiAqICAgIEByZXR1cm4ge0FycmF5fSBzdWItaXRlbXMgaW4gdGhlIGl0ZW0uIGUuZyBhIGZvbGRlciBtYXkgY29udGFpbiBzdWItaXRlbXNcbiAqIGdldEl0ZW1OYW1lXG4gKiAgICBAcmV0dXJuIHtTdHJpbmd9IGRpc3BsYXkgZnJpZW5kbHkgbmFtZSBvZiB0aGUgaXRlbVxuICogZ2V0TWltZVR5cGVcbiAqICAgIEByZXR1cm4ge1N0cmluZ30gbWltZSB0eXBlIG9mIHRoZSBpdGVtXG4gKiBnZXRJdGVtSWRcbiAqICAgIEByZXR1cm4ge1N0cmluZ30gdW5pcXVlIGlkIG9mIHRoZSBpdGVtXG4gKiBnZXRJdGVtUmVxdWVzdFBhdGhcbiAqICAgIEByZXR1cm4ge1N0cmluZ30gdW5pcXVlIHJlcXVlc3QgcGF0aCBvZiB0aGUgaXRlbSB3aGVuIG1ha2luZyBjYWxscyB0byB1cHB5IHNlcnZlclxuICogZ2V0SXRlbU1vZGlmaWVkRGF0ZVxuICogICAgQHJldHVybiB7b2JqZWN0fSBvciB7U3RyaW5nfSBkYXRlIG9mIHdoZW4gbGFzdCB0aGUgaXRlbSB3YXMgbW9kaWZpZWRcbiAqIGdldEl0ZW1UaHVtYm5haWxVcmxcbiAqICAgIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGluc3RhbmNlIG9mIHRoZSBwbHVnaW5cbiAgICovXG4gIGZ1bmN0aW9uIFByb3ZpZGVyVmlldyhwbHVnaW4sIG9wdHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXJWaWV3KTtcblxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuUHJvdmlkZXIgPSBwbHVnaW5bcGx1Z2luLmlkXTtcblxuICAgIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICB2aWV3VHlwZTogJ2xpc3QnLFxuICAgICAgc2hvd1RpdGxlczogdHJ1ZSxcbiAgICAgIHNob3dGaWx0ZXI6IHRydWUsXG4gICAgICBzaG93QnJlYWRjcnVtYnM6IHRydWVcblxuICAgICAgLy8gbWVyZ2UgZGVmYXVsdCBvcHRpb25zIHdpdGggdGhlIG9uZXMgc2V0IGJ5IHVzZXJcbiAgICB9O3RoaXMub3B0cyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0cyk7XG5cbiAgICAvLyBMb2dpY1xuICAgIHRoaXMuYWRkRmlsZSA9IHRoaXMuYWRkRmlsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmlsdGVySXRlbXMgPSB0aGlzLmZpbHRlckl0ZW1zLmJpbmQodGhpcyk7XG4gICAgdGhpcy5maWx0ZXJRdWVyeSA9IHRoaXMuZmlsdGVyUXVlcnkuYmluZCh0aGlzKTtcbiAgICB0aGlzLnRvZ2dsZVNlYXJjaCA9IHRoaXMudG9nZ2xlU2VhcmNoLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZXRGb2xkZXIgPSB0aGlzLmdldEZvbGRlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0TmV4dEZvbGRlciA9IHRoaXMuZ2V0TmV4dEZvbGRlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMubG9nb3V0ID0gdGhpcy5sb2dvdXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNoZWNrQXV0aCA9IHRoaXMuY2hlY2tBdXRoLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVBdXRoID0gdGhpcy5oYW5kbGVBdXRoLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVEZW1vQXV0aCA9IHRoaXMuaGFuZGxlRGVtb0F1dGguYmluZCh0aGlzKTtcbiAgICB0aGlzLnNvcnRCeVRpdGxlID0gdGhpcy5zb3J0QnlUaXRsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc29ydEJ5RGF0ZSA9IHRoaXMuc29ydEJ5RGF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaXNBY3RpdmVSb3cgPSB0aGlzLmlzQWN0aXZlUm93LmJpbmQodGhpcyk7XG4gICAgdGhpcy5pc0NoZWNrZWQgPSB0aGlzLmlzQ2hlY2tlZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudG9nZ2xlQ2hlY2tib3ggPSB0aGlzLnRvZ2dsZUNoZWNrYm94LmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVFcnJvciA9IHRoaXMuaGFuZGxlRXJyb3IuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZVNjcm9sbCA9IHRoaXMuaGFuZGxlU2Nyb2xsLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kb25lUGlja2luZyA9IHRoaXMuZG9uZVBpY2tpbmcuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNhbmNlbFBpY2tpbmcgPSB0aGlzLmNhbmNlbFBpY2tpbmcuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNsZWFyU2VsZWN0aW9uID0gdGhpcy5jbGVhclNlbGVjdGlvbi5iaW5kKHRoaXMpO1xuXG4gICAgLy8gVmlzdWFsXG4gICAgdGhpcy5yZW5kZXIgPSB0aGlzLnJlbmRlci5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICB9XG5cbiAgUHJvdmlkZXJWaWV3LnByb3RvdHlwZS50ZWFyRG93biA9IGZ1bmN0aW9uIHRlYXJEb3duKCkge1xuICAgIC8vIE5vdGhpbmcuXG4gIH07XG5cbiAgUHJvdmlkZXJWaWV3LnByb3RvdHlwZS5fdXBkYXRlRmlsZXNBbmRGb2xkZXJzID0gZnVuY3Rpb24gX3VwZGF0ZUZpbGVzQW5kRm9sZGVycyhyZXMsIGZpbGVzLCBmb2xkZXJzKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB0aGlzLnBsdWdpbi5nZXRJdGVtU3ViTGlzdChyZXMpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIGlmIChfdGhpczIucGx1Z2luLmlzRm9sZGVyKGl0ZW0pKSB7XG4gICAgICAgIGZvbGRlcnMucHVzaChpdGVtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbGVzLnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnBsdWdpbi5zZXRQbHVnaW5TdGF0ZSh7IGZvbGRlcnM6IGZvbGRlcnMsIGZpbGVzOiBmaWxlcyB9KTtcbiAgfTtcblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLmNoZWNrQXV0aCA9IGZ1bmN0aW9uIGNoZWNrQXV0aCgpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHRoaXMucGx1Z2luLnNldFBsdWdpblN0YXRlKHsgY2hlY2tBdXRoSW5Qcm9ncmVzczogdHJ1ZSB9KTtcbiAgICB0aGlzLlByb3ZpZGVyLmNoZWNrQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIF90aGlzMy5wbHVnaW4uc2V0UGx1Z2luU3RhdGUoeyBjaGVja0F1dGhJblByb2dyZXNzOiBmYWxzZSB9KTtcbiAgICAgIF90aGlzMy5wbHVnaW4ub25BdXRoKGF1dGhlbnRpY2F0ZWQpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIF90aGlzMy5wbHVnaW4uc2V0UGx1Z2luU3RhdGUoeyBjaGVja0F1dGhJblByb2dyZXNzOiBmYWxzZSB9KTtcbiAgICAgIF90aGlzMy5oYW5kbGVFcnJvcihlcnIpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBCYXNlZCBvbiBmb2xkZXIgSUQsIGZldGNoIGEgbmV3IGZvbGRlciBhbmQgdXBkYXRlIGl0IHRvIHN0YXRlXG4gICAqIEBwYXJhbSAge1N0cmluZ30gaWQgRm9sZGVyIGlkXG4gICAqIEByZXR1cm4ge1Byb21pc2V9ICAgRm9sZGVycy9maWxlcyBpbiBmb2xkZXJcbiAgICovXG5cblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLmdldEZvbGRlciA9IGZ1bmN0aW9uIGdldEZvbGRlcihpZCwgbmFtZSkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHRoaXMuX2xvYWRlcldyYXBwZXIodGhpcy5Qcm92aWRlci5saXN0KGlkKSwgZnVuY3Rpb24gKHJlcykge1xuICAgICAgdmFyIGZvbGRlcnMgPSBbXTtcbiAgICAgIHZhciBmaWxlcyA9IFtdO1xuICAgICAgdmFyIHVwZGF0ZWREaXJlY3RvcmllcyA9IHZvaWQgMDtcblxuICAgICAgdmFyIHN0YXRlID0gX3RoaXM0LnBsdWdpbi5nZXRQbHVnaW5TdGF0ZSgpO1xuICAgICAgdmFyIGluZGV4ID0gZmluZEluZGV4KHN0YXRlLmRpcmVjdG9yaWVzLCBmdW5jdGlvbiAoZGlyKSB7XG4gICAgICAgIHJldHVybiBpZCA9PT0gZGlyLmlkO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdXBkYXRlZERpcmVjdG9yaWVzID0gc3RhdGUuZGlyZWN0b3JpZXMuc2xpY2UoMCwgaW5kZXggKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZWREaXJlY3RvcmllcyA9IHN0YXRlLmRpcmVjdG9yaWVzLmNvbmNhdChbeyBpZDogaWQsIHRpdGxlOiBuYW1lIHx8IF90aGlzNC5wbHVnaW4uZ2V0SXRlbU5hbWUocmVzKSB9XSk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzNC51c2VybmFtZSA9IF90aGlzNC51c2VybmFtZSA/IF90aGlzNC51c2VybmFtZSA6IF90aGlzNC5wbHVnaW4uZ2V0VXNlcm5hbWUocmVzKTtcbiAgICAgIF90aGlzNC5fdXBkYXRlRmlsZXNBbmRGb2xkZXJzKHJlcywgZmlsZXMsIGZvbGRlcnMpO1xuICAgICAgX3RoaXM0LnBsdWdpbi5zZXRQbHVnaW5TdGF0ZSh7IGRpcmVjdG9yaWVzOiB1cGRhdGVkRGlyZWN0b3JpZXMgfSk7XG4gICAgfSwgdGhpcy5oYW5kbGVFcnJvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgbmV3IGZvbGRlclxuICAgKiBAcGFyYW0gIHtPYmplY3R9IEZvbGRlclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHRpdGxlIEZvbGRlciB0aXRsZVxuICAgKi9cblxuXG4gIFByb3ZpZGVyVmlldy5wcm90b3R5cGUuZ2V0TmV4dEZvbGRlciA9IGZ1bmN0aW9uIGdldE5leHRGb2xkZXIoZm9sZGVyKSB7XG4gICAgdmFyIGlkID0gdGhpcy5wbHVnaW4uZ2V0SXRlbVJlcXVlc3RQYXRoKGZvbGRlcik7XG4gICAgdGhpcy5nZXRGb2xkZXIoaWQsIHRoaXMucGx1Z2luLmdldEl0ZW1OYW1lKGZvbGRlcikpO1xuICAgIHRoaXMubGFzdENoZWNrYm94ID0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIFByb3ZpZGVyVmlldy5wcm90b3R5cGUuYWRkRmlsZSA9IGZ1bmN0aW9uIGFkZEZpbGUoZmlsZSkge1xuICAgIHZhciB0YWdGaWxlID0ge1xuICAgICAgaWQ6IHRoaXMucHJvdmlkZXJGaWxlVG9JZChmaWxlKSxcbiAgICAgIHNvdXJjZTogdGhpcy5wbHVnaW4uaWQsXG4gICAgICBkYXRhOiB0aGlzLnBsdWdpbi5nZXRJdGVtRGF0YShmaWxlKSxcbiAgICAgIG5hbWU6IHRoaXMucGx1Z2luLmdldEl0ZW1OYW1lKGZpbGUpIHx8IHRoaXMucGx1Z2luLmdldEl0ZW1JZChmaWxlKSxcbiAgICAgIHR5cGU6IHRoaXMucGx1Z2luLmdldE1pbWVUeXBlKGZpbGUpLFxuICAgICAgaXNSZW1vdGU6IHRydWUsXG4gICAgICBib2R5OiB7XG4gICAgICAgIGZpbGVJZDogdGhpcy5wbHVnaW4uZ2V0SXRlbUlkKGZpbGUpXG4gICAgICB9LFxuICAgICAgcmVtb3RlOiB7XG4gICAgICAgIHNlcnZlclVybDogdGhpcy5wbHVnaW4ub3B0cy5zZXJ2ZXJVcmwsXG4gICAgICAgIHVybDogJycgKyB0aGlzLlByb3ZpZGVyLmZpbGVVcmwodGhpcy5wbHVnaW4uZ2V0SXRlbVJlcXVlc3RQYXRoKGZpbGUpKSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIGZpbGVJZDogdGhpcy5wbHVnaW4uZ2V0SXRlbUlkKGZpbGUpXG4gICAgICAgIH0sXG4gICAgICAgIHByb3ZpZGVyT3B0aW9uczogdGhpcy5Qcm92aWRlci5vcHRzXG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBmaWxlVHlwZSA9IGdldEZpbGVUeXBlKHRhZ0ZpbGUpO1xuICAgIC8vIFRPRE8gU2hvdWxkIHdlIGp1c3QgYWx3YXlzIHVzZSB0aGUgdGh1bWJuYWlsIFVSTCBpZiBpdCBleGlzdHM/XG4gICAgaWYgKGZpbGVUeXBlICYmIGlzUHJldmlld1N1cHBvcnRlZChmaWxlVHlwZSkpIHtcbiAgICAgIHRhZ0ZpbGUucHJldmlldyA9IHRoaXMucGx1Z2luLmdldEl0ZW1UaHVtYm5haWxVcmwoZmlsZSk7XG4gICAgfVxuICAgIHRoaXMucGx1Z2luLnVwcHkubG9nKCdBZGRpbmcgcmVtb3RlIGZpbGUnKTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5wbHVnaW4udXBweS5hZGRGaWxlKHRhZ0ZpbGUpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gTm90aGluZywgcmVzdHJpY3Rpb24gZXJyb3JzIGhhbmRsZWQgaW4gQ29yZVxuICAgIH1cbiAgfTtcblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLnJlbW92ZUZpbGUgPSBmdW5jdGlvbiByZW1vdmVGaWxlKGlkKSB7XG4gICAgdmFyIF9wbHVnaW4kZ2V0UGx1Z2luU3RhdCA9IHRoaXMucGx1Z2luLmdldFBsdWdpblN0YXRlKCksXG4gICAgICAgIGN1cnJlbnRTZWxlY3Rpb24gPSBfcGx1Z2luJGdldFBsdWdpblN0YXQuY3VycmVudFNlbGVjdGlvbjtcblxuICAgIHRoaXMucGx1Z2luLnNldFBsdWdpblN0YXRlKHtcbiAgICAgIGN1cnJlbnRTZWxlY3Rpb246IGN1cnJlbnRTZWxlY3Rpb24uZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICAgIHJldHVybiBmaWxlLmlkICE9PSBpZDtcbiAgICAgIH0pXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgc2Vzc2lvbiB0b2tlbiBvbiBjbGllbnQgc2lkZS5cbiAgICovXG5cblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIHRoaXMuUHJvdmlkZXIubG9nb3V0KGxvY2F0aW9uLmhyZWYpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICB2YXIgbmV3U3RhdGUgPSB7XG4gICAgICAgICAgYXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgICAgZmlsZXM6IFtdLFxuICAgICAgICAgIGZvbGRlcnM6IFtdLFxuICAgICAgICAgIGRpcmVjdG9yaWVzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBfdGhpczUucGx1Z2luLnNldFBsdWdpblN0YXRlKG5ld1N0YXRlKTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaCh0aGlzLmhhbmRsZUVycm9yKTtcbiAgfTtcblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLmZpbHRlclF1ZXJ5ID0gZnVuY3Rpb24gZmlsdGVyUXVlcnkoZSkge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMucGx1Z2luLmdldFBsdWdpblN0YXRlKCk7XG4gICAgdGhpcy5wbHVnaW4uc2V0UGx1Z2luU3RhdGUoX2V4dGVuZHMoe30sIHN0YXRlLCB7XG4gICAgICBmaWx0ZXJJbnB1dDogZSA/IGUudGFyZ2V0LnZhbHVlIDogJydcbiAgICB9KSk7XG4gIH07XG5cbiAgUHJvdmlkZXJWaWV3LnByb3RvdHlwZS50b2dnbGVTZWFyY2ggPSBmdW5jdGlvbiB0b2dnbGVTZWFyY2goaW5wdXRFbCkge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMucGx1Z2luLmdldFBsdWdpblN0YXRlKCk7XG5cbiAgICB0aGlzLnBsdWdpbi5zZXRQbHVnaW5TdGF0ZSh7XG4gICAgICBpc1NlYXJjaFZpc2libGU6ICFzdGF0ZS5pc1NlYXJjaFZpc2libGUsXG4gICAgICBmaWx0ZXJJbnB1dDogJydcbiAgICB9KTtcbiAgfTtcblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLmZpbHRlckl0ZW1zID0gZnVuY3Rpb24gZmlsdGVySXRlbXMoaXRlbXMpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIHZhciBzdGF0ZSA9IHRoaXMucGx1Z2luLmdldFBsdWdpblN0YXRlKCk7XG4gICAgaWYgKHN0YXRlLmZpbHRlcklucHV0ID09PSAnJykge1xuICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChmb2xkZXIpIHtcbiAgICAgIHJldHVybiBfdGhpczYucGx1Z2luLmdldEl0ZW1OYW1lKGZvbGRlcikudG9Mb3dlckNhc2UoKS5pbmRleE9mKHN0YXRlLmZpbHRlcklucHV0LnRvTG93ZXJDYXNlKCkpICE9PSAtMTtcbiAgICB9KTtcbiAgfTtcblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLnNvcnRCeVRpdGxlID0gZnVuY3Rpb24gc29ydEJ5VGl0bGUoKSB7XG4gICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICB2YXIgc3RhdGUgPSBfZXh0ZW5kcyh7fSwgdGhpcy5wbHVnaW4uZ2V0UGx1Z2luU3RhdGUoKSk7XG4gICAgdmFyIGZpbGVzID0gc3RhdGUuZmlsZXMsXG4gICAgICAgIGZvbGRlcnMgPSBzdGF0ZS5mb2xkZXJzLFxuICAgICAgICBzb3J0aW5nID0gc3RhdGUuc29ydGluZztcblxuXG4gICAgdmFyIHNvcnRlZEZpbGVzID0gZmlsZXMuc29ydChmdW5jdGlvbiAoZmlsZUEsIGZpbGVCKSB7XG4gICAgICBpZiAoc29ydGluZyA9PT0gJ3RpdGxlRGVzY2VuZGluZycpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNy5wbHVnaW4uZ2V0SXRlbU5hbWUoZmlsZUIpLmxvY2FsZUNvbXBhcmUoX3RoaXM3LnBsdWdpbi5nZXRJdGVtTmFtZShmaWxlQSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF90aGlzNy5wbHVnaW4uZ2V0SXRlbU5hbWUoZmlsZUEpLmxvY2FsZUNvbXBhcmUoX3RoaXM3LnBsdWdpbi5nZXRJdGVtTmFtZShmaWxlQikpO1xuICAgIH0pO1xuXG4gICAgdmFyIHNvcnRlZEZvbGRlcnMgPSBmb2xkZXJzLnNvcnQoZnVuY3Rpb24gKGZvbGRlckEsIGZvbGRlckIpIHtcbiAgICAgIGlmIChzb3J0aW5nID09PSAndGl0bGVEZXNjZW5kaW5nJykge1xuICAgICAgICByZXR1cm4gX3RoaXM3LnBsdWdpbi5nZXRJdGVtTmFtZShmb2xkZXJCKS5sb2NhbGVDb21wYXJlKF90aGlzNy5wbHVnaW4uZ2V0SXRlbU5hbWUoZm9sZGVyQSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF90aGlzNy5wbHVnaW4uZ2V0SXRlbU5hbWUoZm9sZGVyQSkubG9jYWxlQ29tcGFyZShfdGhpczcucGx1Z2luLmdldEl0ZW1OYW1lKGZvbGRlckIpKTtcbiAgICB9KTtcblxuICAgIHRoaXMucGx1Z2luLnNldFBsdWdpblN0YXRlKF9leHRlbmRzKHt9LCBzdGF0ZSwge1xuICAgICAgZmlsZXM6IHNvcnRlZEZpbGVzLFxuICAgICAgZm9sZGVyczogc29ydGVkRm9sZGVycyxcbiAgICAgIHNvcnRpbmc6IHNvcnRpbmcgPT09ICd0aXRsZURlc2NlbmRpbmcnID8gJ3RpdGxlQXNjZW5kaW5nJyA6ICd0aXRsZURlc2NlbmRpbmcnXG4gICAgfSkpO1xuICB9O1xuXG4gIFByb3ZpZGVyVmlldy5wcm90b3R5cGUuc29ydEJ5RGF0ZSA9IGZ1bmN0aW9uIHNvcnRCeURhdGUoKSB7XG4gICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICB2YXIgc3RhdGUgPSBfZXh0ZW5kcyh7fSwgdGhpcy5wbHVnaW4uZ2V0UGx1Z2luU3RhdGUoKSk7XG4gICAgdmFyIGZpbGVzID0gc3RhdGUuZmlsZXMsXG4gICAgICAgIGZvbGRlcnMgPSBzdGF0ZS5mb2xkZXJzLFxuICAgICAgICBzb3J0aW5nID0gc3RhdGUuc29ydGluZztcblxuXG4gICAgdmFyIHNvcnRlZEZpbGVzID0gZmlsZXMuc29ydChmdW5jdGlvbiAoZmlsZUEsIGZpbGVCKSB7XG4gICAgICB2YXIgYSA9IG5ldyBEYXRlKF90aGlzOC5wbHVnaW4uZ2V0SXRlbU1vZGlmaWVkRGF0ZShmaWxlQSkpO1xuICAgICAgdmFyIGIgPSBuZXcgRGF0ZShfdGhpczgucGx1Z2luLmdldEl0ZW1Nb2RpZmllZERhdGUoZmlsZUIpKTtcblxuICAgICAgaWYgKHNvcnRpbmcgPT09ICdkYXRlRGVzY2VuZGluZycpIHtcbiAgICAgICAgcmV0dXJuIGEgPiBiID8gLTEgOiBhIDwgYiA/IDEgOiAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGEgPiBiID8gMSA6IGEgPCBiID8gLTEgOiAwO1xuICAgIH0pO1xuXG4gICAgdmFyIHNvcnRlZEZvbGRlcnMgPSBmb2xkZXJzLnNvcnQoZnVuY3Rpb24gKGZvbGRlckEsIGZvbGRlckIpIHtcbiAgICAgIHZhciBhID0gbmV3IERhdGUoX3RoaXM4LnBsdWdpbi5nZXRJdGVtTW9kaWZpZWREYXRlKGZvbGRlckEpKTtcbiAgICAgIHZhciBiID0gbmV3IERhdGUoX3RoaXM4LnBsdWdpbi5nZXRJdGVtTW9kaWZpZWREYXRlKGZvbGRlckIpKTtcblxuICAgICAgaWYgKHNvcnRpbmcgPT09ICdkYXRlRGVzY2VuZGluZycpIHtcbiAgICAgICAgcmV0dXJuIGEgPiBiID8gLTEgOiBhIDwgYiA/IDEgOiAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG4gICAgfSk7XG5cbiAgICB0aGlzLnBsdWdpbi5zZXRQbHVnaW5TdGF0ZShfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgIGZpbGVzOiBzb3J0ZWRGaWxlcyxcbiAgICAgIGZvbGRlcnM6IHNvcnRlZEZvbGRlcnMsXG4gICAgICBzb3J0aW5nOiBzb3J0aW5nID09PSAnZGF0ZURlc2NlbmRpbmcnID8gJ2RhdGVBc2NlbmRpbmcnIDogJ2RhdGVEZXNjZW5kaW5nJ1xuICAgIH0pKTtcbiAgfTtcblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLnNvcnRCeVNpemUgPSBmdW5jdGlvbiBzb3J0QnlTaXplKCkge1xuICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgdmFyIHN0YXRlID0gX2V4dGVuZHMoe30sIHRoaXMucGx1Z2luLmdldFBsdWdpblN0YXRlKCkpO1xuICAgIHZhciBmaWxlcyA9IHN0YXRlLmZpbGVzLFxuICAgICAgICBzb3J0aW5nID0gc3RhdGUuc29ydGluZztcblxuICAgIC8vIGNoZWNrIHRoYXQgcGx1Z2luIHN1cHBvcnRzIGZpbGUgc2l6ZXNcblxuICAgIGlmICghZmlsZXMubGVuZ3RoIHx8ICF0aGlzLnBsdWdpbi5nZXRJdGVtRGF0YShmaWxlc1swXSkuc2l6ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzb3J0ZWRGaWxlcyA9IGZpbGVzLnNvcnQoZnVuY3Rpb24gKGZpbGVBLCBmaWxlQikge1xuICAgICAgdmFyIGEgPSBfdGhpczkucGx1Z2luLmdldEl0ZW1EYXRhKGZpbGVBKS5zaXplO1xuICAgICAgdmFyIGIgPSBfdGhpczkucGx1Z2luLmdldEl0ZW1EYXRhKGZpbGVCKS5zaXplO1xuXG4gICAgICBpZiAoc29ydGluZyA9PT0gJ3NpemVEZXNjZW5kaW5nJykge1xuICAgICAgICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPCBiID8gMSA6IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG4gICAgfSk7XG5cbiAgICB0aGlzLnBsdWdpbi5zZXRQbHVnaW5TdGF0ZShfZXh0ZW5kcyh7fSwgc3RhdGUsIHtcbiAgICAgIGZpbGVzOiBzb3J0ZWRGaWxlcyxcbiAgICAgIHNvcnRpbmc6IHNvcnRpbmcgPT09ICdzaXplRGVzY2VuZGluZycgPyAnc2l6ZUFzY2VuZGluZycgOiAnc2l6ZURlc2NlbmRpbmcnXG4gICAgfSkpO1xuICB9O1xuXG4gIFByb3ZpZGVyVmlldy5wcm90b3R5cGUuaXNBY3RpdmVSb3cgPSBmdW5jdGlvbiBpc0FjdGl2ZVJvdyhmaWxlKSB7XG4gICAgcmV0dXJuIHRoaXMucGx1Z2luLmdldFBsdWdpblN0YXRlKCkuYWN0aXZlUm93ID09PSB0aGlzLnBsdWdpbi5nZXRJdGVtSWQoZmlsZSk7XG4gIH07XG5cbiAgUHJvdmlkZXJWaWV3LnByb3RvdHlwZS5pc0NoZWNrZWQgPSBmdW5jdGlvbiBpc0NoZWNrZWQoZmlsZSkge1xuICAgIHZhciBfcGx1Z2luJGdldFBsdWdpblN0YXQyID0gdGhpcy5wbHVnaW4uZ2V0UGx1Z2luU3RhdGUoKSxcbiAgICAgICAgY3VycmVudFNlbGVjdGlvbiA9IF9wbHVnaW4kZ2V0UGx1Z2luU3RhdDIuY3VycmVudFNlbGVjdGlvbjtcblxuICAgIHJldHVybiBjdXJyZW50U2VsZWN0aW9uLnNvbWUoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtID09PSBmaWxlO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGRzIGFsbCBmaWxlcyBmb3VuZCBpbnNpZGUgb2Ygc3BlY2lmaWVkIGZvbGRlci5cbiAgICpcbiAgICogVXNlcyBzZXBhcmF0ZWQgc3RhdGUgd2hpbGUgZm9sZGVyIGNvbnRlbnRzIGFyZSBiZWluZyBmZXRjaGVkIGFuZFxuICAgKiBtYW50YWlucyBsaXN0IG9mIHNlbGVjdGVkIGZvbGRlcnMsIHdoaWNoIGFyZSBzZXBhcmF0ZWQgZnJvbSBmaWxlcy5cbiAgICovXG5cblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLmFkZEZvbGRlciA9IGZ1bmN0aW9uIGFkZEZvbGRlcihmb2xkZXIpIHtcbiAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICB2YXIgZm9sZGVySWQgPSB0aGlzLnByb3ZpZGVyRmlsZVRvSWQoZm9sZGVyKTtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnBsdWdpbi5nZXRQbHVnaW5TdGF0ZSgpO1xuICAgIHZhciBmb2xkZXJzID0gc3RhdGUuc2VsZWN0ZWRGb2xkZXJzIHx8IHt9O1xuICAgIGlmIChmb2xkZXJJZCBpbiBmb2xkZXJzICYmIGZvbGRlcnNbZm9sZGVySWRdLmxvYWRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9sZGVyc1tmb2xkZXJJZF0gPSB7IGxvYWRpbmc6IHRydWUsIGZpbGVzOiBbXSB9O1xuICAgIHRoaXMucGx1Z2luLnNldFBsdWdpblN0YXRlKHsgc2VsZWN0ZWRGb2xkZXJzOiBmb2xkZXJzIH0pO1xuICAgIHJldHVybiB0aGlzLlByb3ZpZGVyLmxpc3QodGhpcy5wbHVnaW4uZ2V0SXRlbVJlcXVlc3RQYXRoKGZvbGRlcikpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgdmFyIGZpbGVzID0gW107XG4gICAgICBfdGhpczEwLnBsdWdpbi5nZXRJdGVtU3ViTGlzdChyZXMpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKCFfdGhpczEwLnBsdWdpbi5pc0ZvbGRlcihpdGVtKSkge1xuICAgICAgICAgIF90aGlzMTAuYWRkRmlsZShpdGVtKTtcbiAgICAgICAgICBmaWxlcy5wdXNoKF90aGlzMTAucHJvdmlkZXJGaWxlVG9JZChpdGVtKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgc3RhdGUgPSBfdGhpczEwLnBsdWdpbi5nZXRQbHVnaW5TdGF0ZSgpO1xuICAgICAgc3RhdGUuc2VsZWN0ZWRGb2xkZXJzW2ZvbGRlcklkXSA9IHsgbG9hZGluZzogZmFsc2UsIGZpbGVzOiBmaWxlcyB9O1xuICAgICAgX3RoaXMxMC5wbHVnaW4uc2V0UGx1Z2luU3RhdGUoeyBzZWxlY3RlZEZvbGRlcnM6IGZvbGRlcnMgfSk7XG4gICAgICB2YXIgZGFzaGJvYXJkID0gX3RoaXMxMC5wbHVnaW4udXBweS5nZXRQbHVnaW4oJ0Rhc2hib2FyZCcpO1xuICAgICAgdmFyIG1lc3NhZ2UgPSB2b2lkIDA7XG4gICAgICBpZiAoZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBkYXNoYm9hcmQuaTE4bignZm9sZGVyQWRkZWQnLCB7XG4gICAgICAgICAgc21hcnRfY291bnQ6IGZpbGVzLmxlbmd0aCwgZm9sZGVyOiBfdGhpczEwLnBsdWdpbi5nZXRJdGVtTmFtZShmb2xkZXIpXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSA9IGRhc2hib2FyZC5pMThuKCdlbXB0eUZvbGRlckFkZGVkJyk7XG4gICAgICB9XG4gICAgICBfdGhpczEwLnBsdWdpbi51cHB5LmluZm8obWVzc2FnZSk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIHN0YXRlID0gX3RoaXMxMC5wbHVnaW4uZ2V0UGx1Z2luU3RhdGUoKTtcbiAgICAgIGRlbGV0ZSBzdGF0ZS5zZWxlY3RlZEZvbGRlcnNbZm9sZGVySWRdO1xuICAgICAgX3RoaXMxMC5wbHVnaW4uc2V0UGx1Z2luU3RhdGUoeyBzZWxlY3RlZEZvbGRlcnM6IHN0YXRlLnNlbGVjdGVkRm9sZGVycyB9KTtcbiAgICAgIF90aGlzMTAuaGFuZGxlRXJyb3IoZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRvZ2dsZXMgZmlsZS9mb2xkZXIgY2hlY2tib3ggdG8gb24vb2ZmIHN0YXRlIHdoaWxlIHVwZGF0aW5nIGZpbGVzIGxpc3QuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBzb21lIGV4dHJhIGNvbXBsZXhpdHkgY29tZXMgZnJvbSBzdXBwb3J0aW5nIHNoaWZ0K2NsaWNrIHRvXG4gICAqIHRvZ2dsZSBtdWx0aXBsZSBjaGVja2JveGVzIGF0IG9uY2UsIHdoaWNoIGlzIGRvbmUgYnkgZ2V0dGluZyBhbGwgZmlsZXNcbiAgICogaW4gYmV0d2VlbiBsYXN0IGNoZWNrZWQgZmlsZSBhbmQgY3VycmVudCBvbmUuXG4gICAqL1xuXG5cbiAgUHJvdmlkZXJWaWV3LnByb3RvdHlwZS50b2dnbGVDaGVja2JveCA9IGZ1bmN0aW9uIHRvZ2dsZUNoZWNrYm94KGUsIGZpbGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBfcGx1Z2luJGdldFBsdWdpblN0YXQzID0gdGhpcy5wbHVnaW4uZ2V0UGx1Z2luU3RhdGUoKSxcbiAgICAgICAgZm9sZGVycyA9IF9wbHVnaW4kZ2V0UGx1Z2luU3RhdDMuZm9sZGVycyxcbiAgICAgICAgZmlsZXMgPSBfcGx1Z2luJGdldFBsdWdpblN0YXQzLmZpbGVzO1xuXG4gICAgdmFyIGl0ZW1zID0gdGhpcy5maWx0ZXJJdGVtcyhmb2xkZXJzLmNvbmNhdChmaWxlcykpO1xuXG4gICAgLy8gU2hpZnQtY2xpY2tpbmcgc2VsZWN0cyBhIHNpbmdsZSBjb25zZWN1dGl2ZSBsaXN0IG9mIGl0ZW1zXG4gICAgLy8gc3RhcnRpbmcgYXQgdGhlIHByZXZpb3VzIGNsaWNrIGFuZCBkZXNlbGVjdHMgZXZlcnl0aGluZyBlbHNlLlxuICAgIGlmICh0aGlzLmxhc3RDaGVja2JveCAmJiBlLnNoaWZ0S2V5KSB7XG4gICAgICB2YXIgX2N1cnJlbnRTZWxlY3Rpb24gPSB2b2lkIDA7XG4gICAgICB2YXIgcHJldkluZGV4ID0gaXRlbXMuaW5kZXhPZih0aGlzLmxhc3RDaGVja2JveCk7XG4gICAgICB2YXIgY3VycmVudEluZGV4ID0gaXRlbXMuaW5kZXhPZihmaWxlKTtcbiAgICAgIGlmIChwcmV2SW5kZXggPCBjdXJyZW50SW5kZXgpIHtcbiAgICAgICAgX2N1cnJlbnRTZWxlY3Rpb24gPSBpdGVtcy5zbGljZShwcmV2SW5kZXgsIGN1cnJlbnRJbmRleCArIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2N1cnJlbnRTZWxlY3Rpb24gPSBpdGVtcy5zbGljZShjdXJyZW50SW5kZXgsIHByZXZJbmRleCArIDEpO1xuICAgICAgfVxuICAgICAgdGhpcy5wbHVnaW4uc2V0UGx1Z2luU3RhdGUoeyBjdXJyZW50U2VsZWN0aW9uOiBfY3VycmVudFNlbGVjdGlvbiB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3RDaGVja2JveCA9IGZpbGU7XG5cbiAgICB2YXIgX3BsdWdpbiRnZXRQbHVnaW5TdGF0NCA9IHRoaXMucGx1Z2luLmdldFBsdWdpblN0YXRlKCksXG4gICAgICAgIGN1cnJlbnRTZWxlY3Rpb24gPSBfcGx1Z2luJGdldFBsdWdpblN0YXQ0LmN1cnJlbnRTZWxlY3Rpb247XG5cbiAgICBpZiAodGhpcy5pc0NoZWNrZWQoZmlsZSkpIHtcbiAgICAgIHRoaXMucGx1Z2luLnNldFBsdWdpblN0YXRlKHtcbiAgICAgICAgY3VycmVudFNlbGVjdGlvbjogY3VycmVudFNlbGVjdGlvbi5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gaXRlbSAhPT0gZmlsZTtcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsdWdpbi5zZXRQbHVnaW5TdGF0ZSh7XG4gICAgICAgIGN1cnJlbnRTZWxlY3Rpb246IGN1cnJlbnRTZWxlY3Rpb24uY29uY2F0KFtmaWxlXSlcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLnByb3ZpZGVyRmlsZVRvSWQgPSBmdW5jdGlvbiBwcm92aWRlckZpbGVUb0lkKGZpbGUpIHtcbiAgICByZXR1cm4gZ2VuZXJhdGVGaWxlSUQoe1xuICAgICAgZGF0YTogdGhpcy5wbHVnaW4uZ2V0SXRlbURhdGEoZmlsZSksXG4gICAgICBuYW1lOiB0aGlzLnBsdWdpbi5nZXRJdGVtTmFtZShmaWxlKSB8fCB0aGlzLnBsdWdpbi5nZXRJdGVtSWQoZmlsZSksXG4gICAgICB0eXBlOiB0aGlzLnBsdWdpbi5nZXRNaW1lVHlwZShmaWxlKVxuICAgIH0pO1xuICB9O1xuXG4gIFByb3ZpZGVyVmlldy5wcm90b3R5cGUuaGFuZGxlRGVtb0F1dGggPSBmdW5jdGlvbiBoYW5kbGVEZW1vQXV0aCgpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnBsdWdpbi5nZXRQbHVnaW5TdGF0ZSgpO1xuICAgIHRoaXMucGx1Z2luLnNldFBsdWdpblN0YXRlKHt9LCBzdGF0ZSwge1xuICAgICAgYXV0aGVudGljYXRlZDogdHJ1ZVxuICAgIH0pO1xuICB9O1xuXG4gIFByb3ZpZGVyVmlldy5wcm90b3R5cGUuaGFuZGxlQXV0aCA9IGZ1bmN0aW9uIGhhbmRsZUF1dGgoKSB7XG4gICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuXG4gICAgdmFyIGF1dGhTdGF0ZSA9IGJ0b2EoSlNPTi5zdHJpbmdpZnkoeyBvcmlnaW46IGxvY2F0aW9uLm9yaWdpbiB9KSk7XG4gICAgdmFyIGxpbmsgPSB0aGlzLlByb3ZpZGVyLmF1dGhVcmwoKSArICc/c3RhdGU9JyArIGF1dGhTdGF0ZTtcblxuICAgIHZhciBhdXRoV2luZG93ID0gd2luZG93Lm9wZW4obGluaywgJ19ibGFuaycpO1xuICAgIHZhciBub1Byb3RvY29sID0gZnVuY3Rpb24gbm9Qcm90b2NvbCh1cmwpIHtcbiAgICAgIHJldHVybiB1cmwucmVwbGFjZSgvXihodHRwcz86fClcXC9cXC8vLCAnJyk7XG4gICAgfTtcbiAgICB2YXIgaGFuZGxlVG9rZW4gPSBmdW5jdGlvbiBoYW5kbGVUb2tlbihlKSB7XG4gICAgICB2YXIgYWxsb3dlZE9yaWdpbiA9IG5ldyBSZWdFeHAobm9Qcm90b2NvbChfdGhpczExLnBsdWdpbi5vcHRzLnNlcnZlclBhdHRlcm4pKTtcbiAgICAgIGlmICghYWxsb3dlZE9yaWdpbi50ZXN0KG5vUHJvdG9jb2woZS5vcmlnaW4pKSB8fCBlLnNvdXJjZSAhPT0gYXV0aFdpbmRvdykge1xuICAgICAgICBfdGhpczExLnBsdWdpbi51cHB5LmxvZygncmVqZWN0aW5nIGV2ZW50IGZyb20gJyArIGUub3JpZ2luICsgJyB2cyBhbGxvd2VkIHBhdHRlcm4gJyArIF90aGlzMTEucGx1Z2luLm9wdHMuc2VydmVyUGF0dGVybik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGF1dGhXaW5kb3cuY2xvc2UoKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlVG9rZW4pO1xuICAgICAgX3RoaXMxMS5Qcm92aWRlci5zZXRBdXRoVG9rZW4oZS5kYXRhLnRva2VuKTtcbiAgICAgIF90aGlzMTEuX2xvYWRlcldyYXBwZXIoX3RoaXMxMS5Qcm92aWRlci5jaGVja0F1dGgoKSwgX3RoaXMxMS5wbHVnaW4ub25BdXRoLCBfdGhpczExLmhhbmRsZUVycm9yKTtcbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlVG9rZW4pO1xuICB9O1xuXG4gIFByb3ZpZGVyVmlldy5wcm90b3R5cGUuaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnJvcikge1xuICAgIHZhciB1cHB5ID0gdGhpcy5wbHVnaW4udXBweTtcbiAgICB2YXIgbWVzc2FnZSA9IHVwcHkuaTE4bigndXBweVNlcnZlckVycm9yJyk7XG4gICAgdXBweS5sb2coZXJyb3IudG9TdHJpbmcoKSk7XG4gICAgdXBweS5pbmZvKHsgbWVzc2FnZTogbWVzc2FnZSwgZGV0YWlsczogZXJyb3IudG9TdHJpbmcoKSB9LCAnZXJyb3InLCA1MDAwKTtcbiAgfTtcblxuICBQcm92aWRlclZpZXcucHJvdG90eXBlLmhhbmRsZVNjcm9sbCA9IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbChlKSB7XG4gICAgdmFyIF90aGlzMTIgPSB0aGlzO1xuXG4gICAgdmFyIHNjcm9sbFBvcyA9IGUudGFyZ2V0LnNjcm9sbEhlaWdodCAtIChlLnRhcmdldC5zY3JvbGxUb3AgKyBlLnRhcmdldC5vZmZzZXRIZWlnaHQpO1xuICAgIHZhciBwYXRoID0gdGhpcy5wbHVnaW4uZ2V0TmV4dFBhZ2VQYXRoID8gdGhpcy5wbHVnaW4uZ2V0TmV4dFBhZ2VQYXRoKCkgOiBudWxsO1xuXG4gICAgaWYgKHNjcm9sbFBvcyA8IDUwICYmIHBhdGggJiYgIXRoaXMuX2lzSGFuZGxpbmdTY3JvbGwpIHtcbiAgICAgIHRoaXMuUHJvdmlkZXIubGlzdChwYXRoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgdmFyIF9wbHVnaW4kZ2V0UGx1Z2luU3RhdDUgPSBfdGhpczEyLnBsdWdpbi5nZXRQbHVnaW5TdGF0ZSgpLFxuICAgICAgICAgICAgZmlsZXMgPSBfcGx1Z2luJGdldFBsdWdpblN0YXQ1LmZpbGVzLFxuICAgICAgICAgICAgZm9sZGVycyA9IF9wbHVnaW4kZ2V0UGx1Z2luU3RhdDUuZm9sZGVycztcblxuICAgICAgICBfdGhpczEyLl91cGRhdGVGaWxlc0FuZEZvbGRlcnMocmVzLCBmaWxlcywgZm9sZGVycyk7XG4gICAgICB9KS5jYXRjaCh0aGlzLmhhbmRsZUVycm9yKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMxMi5faXNIYW5kbGluZ1Njcm9sbCA9IGZhbHNlO1xuICAgICAgfSk7IC8vIGFsd2F5cyBjYWxsZWRcblxuICAgICAgdGhpcy5faXNIYW5kbGluZ1Njcm9sbCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIFByb3ZpZGVyVmlldy5wcm90b3R5cGUuZG9uZVBpY2tpbmcgPSBmdW5jdGlvbiBkb25lUGlja2luZygpIHtcbiAgICB2YXIgX3RoaXMxMyA9IHRoaXM7XG5cbiAgICB2YXIgX3BsdWdpbiRnZXRQbHVnaW5TdGF0NiA9IHRoaXMucGx1Z2luLmdldFBsdWdpblN0YXRlKCksXG4gICAgICAgIGN1cnJlbnRTZWxlY3Rpb24gPSBfcGx1Z2luJGdldFBsdWdpblN0YXQ2LmN1cnJlbnRTZWxlY3Rpb247XG5cbiAgICB2YXIgcHJvbWlzZXMgPSBjdXJyZW50U2VsZWN0aW9uLm1hcChmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgaWYgKF90aGlzMTMucGx1Z2luLmlzRm9sZGVyKGZpbGUpKSB7XG4gICAgICAgIHJldHVybiBfdGhpczEzLmFkZEZvbGRlcihmaWxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBfdGhpczEzLmFkZEZpbGUoZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLl9sb2FkZXJXcmFwcGVyKFByb21pc2UuYWxsKHByb21pc2VzKSwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMxMy5jbGVhclNlbGVjdGlvbigpO1xuXG4gICAgICB2YXIgZGFzaGJvYXJkID0gX3RoaXMxMy5wbHVnaW4udXBweS5nZXRQbHVnaW4oJ0Rhc2hib2FyZCcpO1xuICAgICAgaWYgKGRhc2hib2FyZCkgZGFzaGJvYXJkLmhpZGVBbGxQYW5lbHMoKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7fSk7XG4gIH07XG5cbiAgUHJvdmlkZXJWaWV3LnByb3RvdHlwZS5jYW5jZWxQaWNraW5nID0gZnVuY3Rpb24gY2FuY2VsUGlja2luZygpIHtcbiAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG5cbiAgICB2YXIgZGFzaGJvYXJkID0gdGhpcy5wbHVnaW4udXBweS5nZXRQbHVnaW4oJ0Rhc2hib2FyZCcpO1xuICAgIGlmIChkYXNoYm9hcmQpIGRhc2hib2FyZC5oaWRlQWxsUGFuZWxzKCk7XG4gIH07XG5cbiAgUHJvdmlkZXJWaWV3LnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbiA9IGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uKCkge1xuICAgIHRoaXMucGx1Z2luLnNldFBsdWdpblN0YXRlKHsgY3VycmVudFNlbGVjdGlvbjogW10gfSk7XG4gIH07XG5cbiAgLy8gZGlzcGxheXMgbG9hZGVyIHZpZXcgd2hpbGUgYXN5bmNocm9ub3VzIHJlcXVlc3QgaXMgYmVpbmcgbWFkZS5cblxuXG4gIFByb3ZpZGVyVmlldy5wcm90b3R5cGUuX2xvYWRlcldyYXBwZXIgPSBmdW5jdGlvbiBfbG9hZGVyV3JhcHBlcihwcm9taXNlLCB0aGVuLCBjYXRjaF8pIHtcbiAgICB2YXIgX3RoaXMxNCA9IHRoaXM7XG5cbiAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgX3RoaXMxNC5wbHVnaW4uc2V0UGx1Z2luU3RhdGUoeyBsb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgIHRoZW4ocmVzdWx0KTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBfdGhpczE0LnBsdWdpbi5zZXRQbHVnaW5TdGF0ZSh7IGxvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgY2F0Y2hfKGVycik7XG4gICAgfSk7XG4gICAgdGhpcy5wbHVnaW4uc2V0UGx1Z2luU3RhdGUoeyBsb2FkaW5nOiB0cnVlIH0pO1xuICB9O1xuXG4gIFByb3ZpZGVyVmlldy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKHN0YXRlKSB7XG4gICAgdmFyIF9wbHVnaW4kZ2V0UGx1Z2luU3RhdDcgPSB0aGlzLnBsdWdpbi5nZXRQbHVnaW5TdGF0ZSgpLFxuICAgICAgICBhdXRoZW50aWNhdGVkID0gX3BsdWdpbiRnZXRQbHVnaW5TdGF0Ny5hdXRoZW50aWNhdGVkLFxuICAgICAgICBjaGVja0F1dGhJblByb2dyZXNzID0gX3BsdWdpbiRnZXRQbHVnaW5TdGF0Ny5jaGVja0F1dGhJblByb2dyZXNzLFxuICAgICAgICBsb2FkaW5nID0gX3BsdWdpbiRnZXRQbHVnaW5TdGF0Ny5sb2FkaW5nO1xuXG4gICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgIHJldHVybiBoKFxuICAgICAgICBDbG9zZVdyYXBwZXIsXG4gICAgICAgIHsgb25Vbm1vdW50OiB0aGlzLmNsZWFyU2VsZWN0aW9uIH0sXG4gICAgICAgIGgoTG9hZGVyVmlldywgbnVsbClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFhdXRoZW50aWNhdGVkKSB7XG4gICAgICByZXR1cm4gaChcbiAgICAgICAgQ2xvc2VXcmFwcGVyLFxuICAgICAgICB7IG9uVW5tb3VudDogdGhpcy5jbGVhclNlbGVjdGlvbiB9LFxuICAgICAgICBoKEF1dGhWaWV3LCB7XG4gICAgICAgICAgcGx1Z2luTmFtZTogdGhpcy5wbHVnaW4udGl0bGUsXG4gICAgICAgICAgcGx1Z2luSWNvbjogdGhpcy5wbHVnaW4uaWNvbixcbiAgICAgICAgICBkZW1vOiB0aGlzLnBsdWdpbi5vcHRzLmRlbW8sXG4gICAgICAgICAgY2hlY2tBdXRoOiB0aGlzLmNoZWNrQXV0aCxcbiAgICAgICAgICBoYW5kbGVBdXRoOiB0aGlzLmhhbmRsZUF1dGgsXG4gICAgICAgICAgaGFuZGxlRGVtb0F1dGg6IHRoaXMuaGFuZGxlRGVtb0F1dGgsXG4gICAgICAgICAgY2hlY2tBdXRoSW5Qcm9ncmVzczogY2hlY2tBdXRoSW5Qcm9ncmVzcyB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgYnJvd3NlclByb3BzID0gX2V4dGVuZHMoe30sIHRoaXMucGx1Z2luLmdldFBsdWdpblN0YXRlKCksIHtcbiAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgZ2V0TmV4dEZvbGRlcjogdGhpcy5nZXROZXh0Rm9sZGVyLFxuICAgICAgZ2V0Rm9sZGVyOiB0aGlzLmdldEZvbGRlcixcbiAgICAgIGZpbHRlckl0ZW1zOiB0aGlzLmZpbHRlckl0ZW1zLFxuICAgICAgZmlsdGVyUXVlcnk6IHRoaXMuZmlsdGVyUXVlcnksXG4gICAgICB0b2dnbGVTZWFyY2g6IHRoaXMudG9nZ2xlU2VhcmNoLFxuICAgICAgc29ydEJ5VGl0bGU6IHRoaXMuc29ydEJ5VGl0bGUsXG4gICAgICBzb3J0QnlEYXRlOiB0aGlzLnNvcnRCeURhdGUsXG4gICAgICBsb2dvdXQ6IHRoaXMubG9nb3V0LFxuICAgICAgZGVtbzogdGhpcy5wbHVnaW4ub3B0cy5kZW1vLFxuICAgICAgaXNBY3RpdmVSb3c6IHRoaXMuaXNBY3RpdmVSb3csXG4gICAgICBpc0NoZWNrZWQ6IHRoaXMuaXNDaGVja2VkLFxuICAgICAgdG9nZ2xlQ2hlY2tib3g6IHRoaXMudG9nZ2xlQ2hlY2tib3gsXG4gICAgICBnZXRJdGVtSWQ6IHRoaXMucGx1Z2luLmdldEl0ZW1JZCxcbiAgICAgIGdldEl0ZW1OYW1lOiB0aGlzLnBsdWdpbi5nZXRJdGVtTmFtZSxcbiAgICAgIGdldEl0ZW1JY29uOiB0aGlzLnBsdWdpbi5nZXRJdGVtSWNvbixcbiAgICAgIGhhbmRsZVNjcm9sbDogdGhpcy5oYW5kbGVTY3JvbGwsXG4gICAgICBkb25lOiB0aGlzLmRvbmVQaWNraW5nLFxuICAgICAgY2FuY2VsOiB0aGlzLmNhbmNlbFBpY2tpbmcsXG4gICAgICB0aXRsZTogdGhpcy5wbHVnaW4udGl0bGUsXG4gICAgICB2aWV3VHlwZTogdGhpcy5vcHRzLnZpZXdUeXBlLFxuICAgICAgc2hvd1RpdGxlczogdGhpcy5vcHRzLnNob3dUaXRsZXMsXG4gICAgICBzaG93RmlsdGVyOiB0aGlzLm9wdHMuc2hvd0ZpbHRlcixcbiAgICAgIHNob3dCcmVhZGNydW1iczogdGhpcy5vcHRzLnNob3dCcmVhZGNydW1icyxcbiAgICAgIHBsdWdpbkljb246IHRoaXMucGx1Z2luLmljb24sXG4gICAgICBpMThuOiB0aGlzLnBsdWdpbi51cHB5LmkxOG5cbiAgICB9KTtcblxuICAgIHJldHVybiBoKFxuICAgICAgQ2xvc2VXcmFwcGVyLFxuICAgICAgeyBvblVubW91bnQ6IHRoaXMuY2xlYXJTZWxlY3Rpb24gfSxcbiAgICAgIGgoQnJvd3NlciwgYnJvd3NlclByb3BzKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIFByb3ZpZGVyVmlldztcbn0oKTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJlcXVlc3RDbGllbnQgPSByZXF1aXJlKCcuL1JlcXVlc3RDbGllbnQnKTtcblxudmFyIF9nZXROYW1lID0gZnVuY3Rpb24gX2dldE5hbWUoaWQpIHtcbiAgcmV0dXJuIGlkLnNwbGl0KCctJykubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xuICB9KS5qb2luKCcgJyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChfUmVxdWVzdENsaWVudCkge1xuICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9SZXF1ZXN0Q2xpZW50KTtcblxuICBmdW5jdGlvbiBQcm92aWRlcih1cHB5LCBvcHRzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZXF1ZXN0Q2xpZW50LmNhbGwodGhpcywgdXBweSwgb3B0cykpO1xuXG4gICAgX3RoaXMucHJvdmlkZXIgPSBvcHRzLnByb3ZpZGVyO1xuICAgIF90aGlzLmlkID0gX3RoaXMucHJvdmlkZXI7XG4gICAgX3RoaXMuYXV0aFByb3ZpZGVyID0gb3B0cy5hdXRoUHJvdmlkZXIgfHwgX3RoaXMucHJvdmlkZXI7XG4gICAgX3RoaXMubmFtZSA9IF90aGlzLm9wdHMubmFtZSB8fCBfZ2V0TmFtZShfdGhpcy5pZCk7XG4gICAgX3RoaXMudG9rZW5LZXkgPSAndXBweS1zZXJ2ZXItJyArIF90aGlzLmlkICsgJy1hdXRoLXRva2VuJztcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICAvLyBAdG9kbyhpLm9sYXJld2FqdSkgY29uc2lkZXIgd2hldGhlciBvciBub3QgdGhpcyBtZXRob2Qgc2hvdWxkIGJlIGV4cG9zZWRcbiAgUHJvdmlkZXIucHJvdG90eXBlLnNldEF1dGhUb2tlbiA9IGZ1bmN0aW9uIHNldEF1dGhUb2tlbih0b2tlbikge1xuICAgIC8vIEB0b2RvKGkub2xhcmV3YWp1KSBhZGQgZmFsbGJhY2sgZm9yIE9PTSBzdG9yYWdlXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy50b2tlbktleSwgdG9rZW4pO1xuICB9O1xuXG4gIFByb3ZpZGVyLnByb3RvdHlwZS5jaGVja0F1dGggPSBmdW5jdGlvbiBjaGVja0F1dGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMuaWQgKyAnL2F1dGhvcml6ZWQnKS50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gcGF5bG9hZC5hdXRoZW50aWNhdGVkO1xuICAgIH0pO1xuICB9O1xuXG4gIFByb3ZpZGVyLnByb3RvdHlwZS5hdXRoVXJsID0gZnVuY3Rpb24gYXV0aFVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5ob3N0bmFtZSArICcvJyArIHRoaXMuaWQgKyAnL2Nvbm5lY3QnO1xuICB9O1xuXG4gIFByb3ZpZGVyLnByb3RvdHlwZS5maWxlVXJsID0gZnVuY3Rpb24gZmlsZVVybChpZCkge1xuICAgIHJldHVybiB0aGlzLmhvc3RuYW1lICsgJy8nICsgdGhpcy5pZCArICcvZ2V0LycgKyBpZDtcbiAgfTtcblxuICBQcm92aWRlci5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uIGxpc3QoZGlyZWN0b3J5KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMuaWQgKyAnL2xpc3QvJyArIChkaXJlY3RvcnkgfHwgJycpKTtcbiAgfTtcblxuICBQcm92aWRlci5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIHJlZGlyZWN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBsb2NhdGlvbi5ocmVmO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMuaWQgKyAnL2xvZ291dD9yZWRpcmVjdD0nICsgcmVkaXJlY3QpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oX3RoaXMyLnRva2VuS2V5KTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfSk7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2RlZmF1bHRIZWFkZXJzJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgX1JlcXVlc3RDbGllbnQucHJvdG90eXBlLmRlZmF1bHRIZWFkZXJzLCB7ICd1cHB5LWF1dGgtdG9rZW4nOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnRva2VuS2V5KSB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KFJlcXVlc3RDbGllbnQpOyIsIid1c2Ugc3RyaWN0JztcblxuLy8gUmVtb3ZlIHRoZSB0cmFpbGluZyBzbGFzaCBzbyB3ZSBjYW4gYWx3YXlzIHNhZmVseSBhcHBlbmQgL3h5ei5cblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gc3RyaXBTbGFzaCh1cmwpIHtcbiAgcmV0dXJuIHVybC5yZXBsYWNlKC9cXC8kLywgJycpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUmVxdWVzdENsaWVudCh1cHB5LCBvcHRzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlcXVlc3RDbGllbnQpO1xuXG4gICAgdGhpcy51cHB5ID0gdXBweTtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIHRoaXMub25SZWNlaXZlUmVzcG9uc2UgPSB0aGlzLm9uUmVjZWl2ZVJlc3BvbnNlLmJpbmQodGhpcyk7XG4gIH1cblxuICBSZXF1ZXN0Q2xpZW50LnByb3RvdHlwZS5vblJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uIG9uUmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy51cHB5LmdldFN0YXRlKCk7XG4gICAgdmFyIHVwcHlTZXJ2ZXIgPSBzdGF0ZS51cHB5U2VydmVyIHx8IHt9O1xuICAgIHZhciBob3N0ID0gdGhpcy5vcHRzLnNlcnZlclVybDtcbiAgICB2YXIgaGVhZGVycyA9IHJlc3BvbnNlLmhlYWRlcnM7XG4gICAgLy8gU3RvcmUgdGhlIHNlbGYtaWRlbnRpZmllZCBkb21haW4gbmFtZSBmb3IgdGhlIHVwcHktc2VydmVyIHdlIGp1c3QgaGl0LlxuICAgIGlmIChoZWFkZXJzLmhhcygnaS1hbScpICYmIGhlYWRlcnMuZ2V0KCdpLWFtJykgIT09IHVwcHlTZXJ2ZXJbaG9zdF0pIHtcbiAgICAgIHZhciBfZXh0ZW5kczI7XG5cbiAgICAgIHRoaXMudXBweS5zZXRTdGF0ZSh7XG4gICAgICAgIHVwcHlTZXJ2ZXI6IF9leHRlbmRzKHt9LCB1cHB5U2VydmVyLCAoX2V4dGVuZHMyID0ge30sIF9leHRlbmRzMltob3N0XSA9IGhlYWRlcnMuZ2V0KCdpLWFtJyksIF9leHRlbmRzMikpXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9O1xuXG4gIFJlcXVlc3RDbGllbnQucHJvdG90eXBlLl9nZXRVcmwgPSBmdW5jdGlvbiBfZ2V0VXJsKHVybCkge1xuICAgIGlmICgvXihodHRwcz86fClcXC9cXC8vLnRlc3QodXJsKSkge1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaG9zdG5hbWUgKyAnLycgKyB1cmw7XG4gIH07XG5cbiAgUmVxdWVzdENsaWVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0KHBhdGgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2dldFVybChwYXRoKSwge1xuICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xuICAgIH0pXG4gICAgLy8gQHRvZG8gdmFsaWRhdGUgcmVzcG9uc2Ugc3RhdHVzIGJlZm9yZSBjYWxsaW5nIGpzb25cbiAgICAudGhlbih0aGlzLm9uUmVjZWl2ZVJlc3BvbnNlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGdldCAnICsgX3RoaXMuX2dldFVybChwYXRoKSArICcuICcgKyBlcnIpO1xuICAgIH0pO1xuICB9O1xuXG4gIFJlcXVlc3RDbGllbnQucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiBwb3N0KHBhdGgsIGRhdGEpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9nZXRVcmwocGF0aCksIHtcbiAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KS50aGVuKHRoaXMub25SZWNlaXZlUmVzcG9uc2UpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPCAyMDAgfHwgcmVzLnN0YXR1cyA+IDMwMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBwb3N0ICcgKyBfdGhpczIuX2dldFVybChwYXRoKSArICcuICcgKyByZXMuc3RhdHVzVGV4dCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBwb3N0ICcgKyBfdGhpczIuX2dldFVybChwYXRoKSArICcuICcgKyBlcnIpO1xuICAgIH0pO1xuICB9O1xuXG4gIFJlcXVlc3RDbGllbnQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIF9kZWxldGUocGF0aCwgZGF0YSkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuaG9zdG5hbWUgKyAnLycgKyBwYXRoLCB7XG4gICAgICBtZXRob2Q6ICdkZWxldGUnLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogZGF0YSA/IEpTT04uc3RyaW5naWZ5KGRhdGEpIDogbnVsbFxuICAgIH0pLnRoZW4odGhpcy5vblJlY2VpdmVSZXNwb25zZSlcbiAgICAvLyBAdG9kbyB2YWxpZGF0ZSByZXNwb25zZSBzdGF0dXMgYmVmb3JlIGNhbGxpbmcganNvblxuICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGRlbGV0ZSAnICsgX3RoaXMzLl9nZXRVcmwocGF0aCkgKyAnLiAnICsgZXJyKTtcbiAgICB9KTtcbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoUmVxdWVzdENsaWVudCwgW3tcbiAgICBrZXk6ICdob3N0bmFtZScsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgX3VwcHkkZ2V0U3RhdGUgPSB0aGlzLnVwcHkuZ2V0U3RhdGUoKSxcbiAgICAgICAgICB1cHB5U2VydmVyID0gX3VwcHkkZ2V0U3RhdGUudXBweVNlcnZlcjtcblxuICAgICAgdmFyIGhvc3QgPSB0aGlzLm9wdHMuc2VydmVyVXJsO1xuICAgICAgcmV0dXJuIHN0cmlwU2xhc2godXBweVNlcnZlciAmJiB1cHB5U2VydmVyW2hvc3RdID8gdXBweVNlcnZlcltob3N0XSA6IGhvc3QpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2RlZmF1bHRIZWFkZXJzJyxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaGVhZGVycycsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHRoaXMuZGVmYXVsdEhlYWRlcnMsIHRoaXMub3B0cy5zZXJ2ZXJIZWFkZXJzIHx8IHt9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmVxdWVzdENsaWVudDtcbn0oKTsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgZWUgPSByZXF1aXJlKCduYW1lc3BhY2UtZW1pdHRlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gVXBweVNvY2tldChvcHRzKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVcHB5U29ja2V0KTtcblxuICAgIHRoaXMucXVldWVkID0gW107XG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICB0aGlzLnNvY2tldCA9IG5ldyBXZWJTb2NrZXQob3B0cy50YXJnZXQpO1xuICAgIHRoaXMuZW1pdHRlciA9IGVlKCk7XG5cbiAgICB0aGlzLnNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMuaXNPcGVuID0gdHJ1ZTtcblxuICAgICAgd2hpbGUgKF90aGlzLnF1ZXVlZC5sZW5ndGggPiAwICYmIF90aGlzLmlzT3Blbikge1xuICAgICAgICB2YXIgZmlyc3QgPSBfdGhpcy5xdWV1ZWRbMF07XG4gICAgICAgIF90aGlzLnNlbmQoZmlyc3QuYWN0aW9uLCBmaXJzdC5wYXlsb2FkKTtcbiAgICAgICAgX3RoaXMucXVldWVkID0gX3RoaXMucXVldWVkLnNsaWNlKDEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLl9oYW5kbGVNZXNzYWdlID0gdGhpcy5faGFuZGxlTWVzc2FnZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5zb2NrZXQub25tZXNzYWdlID0gdGhpcy5faGFuZGxlTWVzc2FnZTtcblxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbWl0ID0gdGhpcy5lbWl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbiA9IHRoaXMub24uYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uY2UgPSB0aGlzLm9uY2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNlbmQgPSB0aGlzLnNlbmQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIFVwcHlTb2NrZXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuc29ja2V0LmNsb3NlKCk7XG4gIH07XG5cbiAgVXBweVNvY2tldC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIHNlbmQoYWN0aW9uLCBwYXlsb2FkKSB7XG4gICAgLy8gYXR0YWNoIHV1aWRcblxuICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgIHRoaXMucXVldWVkLnB1c2goeyBhY3Rpb246IGFjdGlvbiwgcGF5bG9hZDogcGF5bG9hZCB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgcGF5bG9hZDogcGF5bG9hZFxuICAgIH0pKTtcbiAgfTtcblxuICBVcHB5U29ja2V0LnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKGFjdGlvbiwgaGFuZGxlcikge1xuICAgIHRoaXMuZW1pdHRlci5vbihhY3Rpb24sIGhhbmRsZXIpO1xuICB9O1xuXG4gIFVwcHlTb2NrZXQucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGFjdGlvbiwgcGF5bG9hZCkge1xuICAgIHRoaXMuZW1pdHRlci5lbWl0KGFjdGlvbiwgcGF5bG9hZCk7XG4gIH07XG5cbiAgVXBweVNvY2tldC5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UoYWN0aW9uLCBoYW5kbGVyKSB7XG4gICAgdGhpcy5lbWl0dGVyLm9uY2UoYWN0aW9uLCBoYW5kbGVyKTtcbiAgfTtcblxuICBVcHB5U29ja2V0LnByb3RvdHlwZS5faGFuZGxlTWVzc2FnZSA9IGZ1bmN0aW9uIF9oYW5kbGVNZXNzYWdlKGUpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIG1lc3NhZ2UgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG4gICAgICB0aGlzLmVtaXQobWVzc2FnZS5hY3Rpb24sIG1lc3NhZ2UucGF5bG9hZCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gVXBweVNvY2tldDtcbn0oKTsiLCIndXNlLXN0cmljdCc7XG4vKipcbiAqIE1hbmFnZXMgY29tbXVuaWNhdGlvbnMgd2l0aCBVcHB5IFNlcnZlclxuICovXG5cbnZhciBSZXF1ZXN0Q2xpZW50ID0gcmVxdWlyZSgnLi9SZXF1ZXN0Q2xpZW50Jyk7XG52YXIgUHJvdmlkZXIgPSByZXF1aXJlKCcuL1Byb3ZpZGVyJyk7XG52YXIgU29ja2V0ID0gcmVxdWlyZSgnLi9Tb2NrZXQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFJlcXVlc3RDbGllbnQ6IFJlcXVlc3RDbGllbnQsXG4gIFByb3ZpZGVyOiBQcm92aWRlcixcbiAgU29ja2V0OiBTb2NrZXRcbn07IiwidmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIHRocm90dGxlID0gcmVxdWlyZSgnbG9kYXNoLnRocm90dGxlJyk7XG52YXIgY2xhc3NOYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcbnZhciBzdGF0dXNCYXJTdGF0ZXMgPSByZXF1aXJlKCcuL1N0YXR1c0JhclN0YXRlcycpO1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUuaDtcblxuZnVuY3Rpb24gY2FsY3VsYXRlUHJvY2Vzc2luZ1Byb2dyZXNzKGZpbGVzKSB7XG4gIC8vIENvbGxlY3QgcHJlIG9yIHBvc3Rwcm9jZXNzaW5nIHByb2dyZXNzIHN0YXRlcy5cbiAgdmFyIHByb2dyZXNzZXMgPSBbXTtcbiAgT2JqZWN0LmtleXMoZmlsZXMpLmZvckVhY2goZnVuY3Rpb24gKGZpbGVJRCkge1xuICAgIHZhciBwcm9ncmVzcyA9IGZpbGVzW2ZpbGVJRF0ucHJvZ3Jlc3M7XG5cbiAgICBpZiAocHJvZ3Jlc3MucHJlcHJvY2Vzcykge1xuICAgICAgcHJvZ3Jlc3Nlcy5wdXNoKHByb2dyZXNzLnByZXByb2Nlc3MpO1xuICAgIH1cbiAgICBpZiAocHJvZ3Jlc3MucG9zdHByb2Nlc3MpIHtcbiAgICAgIHByb2dyZXNzZXMucHVzaChwcm9ncmVzcy5wb3N0cHJvY2Vzcyk7XG4gICAgfVxuICB9KTtcblxuICAvLyBJbiB0aGUgZnV0dXJlIHdlIHNob3VsZCBwcm9iYWJseSBkbyB0aGlzIGRpZmZlcmVudGx5LiBGb3Igbm93IHdlJ2xsIHRha2UgdGhlXG4gIC8vIG1vZGUgYW5kIG1lc3NhZ2UgZnJvbSB0aGUgZmlyc3QgZmlsZeKAplxuICB2YXIgX3Byb2dyZXNzZXMkID0gcHJvZ3Jlc3Nlc1swXSxcbiAgICAgIG1vZGUgPSBfcHJvZ3Jlc3NlcyQubW9kZSxcbiAgICAgIG1lc3NhZ2UgPSBfcHJvZ3Jlc3NlcyQubWVzc2FnZTtcblxuICB2YXIgdmFsdWUgPSBwcm9ncmVzc2VzLmZpbHRlcihpc0RldGVybWluYXRlKS5yZWR1Y2UoZnVuY3Rpb24gKHRvdGFsLCBwcm9ncmVzcywgaW5kZXgsIGFsbCkge1xuICAgIHJldHVybiB0b3RhbCArIHByb2dyZXNzLnZhbHVlIC8gYWxsLmxlbmd0aDtcbiAgfSwgMCk7XG4gIGZ1bmN0aW9uIGlzRGV0ZXJtaW5hdGUocHJvZ3Jlc3MpIHtcbiAgICByZXR1cm4gcHJvZ3Jlc3MubW9kZSA9PT0gJ2RldGVybWluYXRlJztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW9kZTogbW9kZSxcbiAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgIHZhbHVlOiB2YWx1ZVxuICB9O1xufVxuXG5mdW5jdGlvbiB0b2dnbGVQYXVzZVJlc3VtZShwcm9wcykge1xuICBpZiAocHJvcHMuaXNBbGxDb21wbGV0ZSkgcmV0dXJuO1xuXG4gIGlmICghcHJvcHMucmVzdW1hYmxlVXBsb2Fkcykge1xuICAgIHJldHVybiBwcm9wcy5jYW5jZWxBbGwoKTtcbiAgfVxuXG4gIGlmIChwcm9wcy5pc0FsbFBhdXNlZCkge1xuICAgIHJldHVybiBwcm9wcy5yZXN1bWVBbGwoKTtcbiAgfVxuXG4gIHJldHVybiBwcm9wcy5wYXVzZUFsbCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwcm9wcykge1xuICBwcm9wcyA9IHByb3BzIHx8IHt9O1xuXG4gIHZhciB1cGxvYWRTdGF0ZSA9IHByb3BzLnVwbG9hZFN0YXRlO1xuXG4gIHZhciBwcm9ncmVzc1ZhbHVlID0gcHJvcHMudG90YWxQcm9ncmVzcztcbiAgdmFyIHByb2dyZXNzTW9kZSA9IHZvaWQgMDtcbiAgdmFyIHByb2dyZXNzQmFyQ29udGVudCA9IHZvaWQgMDtcblxuICBpZiAodXBsb2FkU3RhdGUgPT09IHN0YXR1c0JhclN0YXRlcy5TVEFURV9QUkVQUk9DRVNTSU5HIHx8IHVwbG9hZFN0YXRlID09PSBzdGF0dXNCYXJTdGF0ZXMuU1RBVEVfUE9TVFBST0NFU1NJTkcpIHtcbiAgICB2YXIgcHJvZ3Jlc3MgPSBjYWxjdWxhdGVQcm9jZXNzaW5nUHJvZ3Jlc3MocHJvcHMuZmlsZXMpO1xuICAgIHByb2dyZXNzTW9kZSA9IHByb2dyZXNzLm1vZGU7XG4gICAgaWYgKHByb2dyZXNzTW9kZSA9PT0gJ2RldGVybWluYXRlJykge1xuICAgICAgcHJvZ3Jlc3NWYWx1ZSA9IHByb2dyZXNzLnZhbHVlICogMTAwO1xuICAgIH1cblxuICAgIHByb2dyZXNzQmFyQ29udGVudCA9IFByb2dyZXNzQmFyUHJvY2Vzc2luZyhwcm9ncmVzcyk7XG4gIH0gZWxzZSBpZiAodXBsb2FkU3RhdGUgPT09IHN0YXR1c0JhclN0YXRlcy5TVEFURV9DT01QTEVURSkge1xuICAgIHByb2dyZXNzQmFyQ29udGVudCA9IFByb2dyZXNzQmFyQ29tcGxldGUocHJvcHMpO1xuICB9IGVsc2UgaWYgKHVwbG9hZFN0YXRlID09PSBzdGF0dXNCYXJTdGF0ZXMuU1RBVEVfVVBMT0FESU5HKSB7XG4gICAgcHJvZ3Jlc3NCYXJDb250ZW50ID0gUHJvZ3Jlc3NCYXJVcGxvYWRpbmcocHJvcHMpO1xuICB9IGVsc2UgaWYgKHVwbG9hZFN0YXRlID09PSBzdGF0dXNCYXJTdGF0ZXMuU1RBVEVfRVJST1IpIHtcbiAgICBwcm9ncmVzc1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgIHByb2dyZXNzQmFyQ29udGVudCA9IFByb2dyZXNzQmFyRXJyb3IocHJvcHMpO1xuICB9XG5cbiAgdmFyIHdpZHRoID0gdHlwZW9mIHByb2dyZXNzVmFsdWUgPT09ICdudW1iZXInID8gcHJvZ3Jlc3NWYWx1ZSA6IDEwMDtcbiAgdmFyIGlzSGlkZGVuID0gdXBsb2FkU3RhdGUgPT09IHN0YXR1c0JhclN0YXRlcy5TVEFURV9XQUlUSU5HICYmIHByb3BzLmhpZGVVcGxvYWRCdXR0b24gfHwgdXBsb2FkU3RhdGUgPT09IHN0YXR1c0JhclN0YXRlcy5TVEFURV9XQUlUSU5HICYmICFwcm9wcy5uZXdGaWxlcyA+IDAgfHwgdXBsb2FkU3RhdGUgPT09IHN0YXR1c0JhclN0YXRlcy5TVEFURV9DT01QTEVURSAmJiBwcm9wcy5oaWRlQWZ0ZXJGaW5pc2g7XG5cbiAgdmFyIHByb2dyZXNzQ2xhc3NOYW1lcyA9ICd1cHB5LVN0YXR1c0Jhci1wcm9ncmVzc1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICcgKyAocHJvZ3Jlc3NNb2RlID8gJ2lzLScgKyBwcm9ncmVzc01vZGUgOiAnJyk7XG5cbiAgdmFyIHN0YXR1c0JhckNsYXNzTmFtZXMgPSBjbGFzc05hbWVzKCd1cHB5JywgJ3VwcHktU3RhdHVzQmFyJywgJ2lzLScgKyB1cGxvYWRTdGF0ZSwgeyAndXBweS1TdGF0dXNCYXItLWRldGFpbGVkUHJvZ3Jlc3MnOiBwcm9wcy5zaG93UHJvZ3Jlc3NEZXRhaWxzIH0pO1xuXG4gIHJldHVybiBoKFxuICAgICdkaXYnLFxuICAgIHsgJ2NsYXNzJzogc3RhdHVzQmFyQ2xhc3NOYW1lcywgJ2FyaWEtaGlkZGVuJzogaXNIaWRkZW4gfSxcbiAgICBoKCdkaXYnLCB7ICdjbGFzcyc6IHByb2dyZXNzQ2xhc3NOYW1lcyxcbiAgICAgIHN0eWxlOiB7IHdpZHRoOiB3aWR0aCArICclJyB9LFxuICAgICAgcm9sZTogJ3Byb2dyZXNzYmFyJyxcbiAgICAgICdhcmlhLXZhbHVlbWluJzogJzAnLFxuICAgICAgJ2FyaWEtdmFsdWVtYXgnOiAnMTAwJyxcbiAgICAgICdhcmlhLXZhbHVlbm93JzogcHJvZ3Jlc3NWYWx1ZSB9KSxcbiAgICBwcm9ncmVzc0JhckNvbnRlbnQsXG4gICAgaChcbiAgICAgICdkaXYnLFxuICAgICAgeyAnY2xhc3MnOiAndXBweS1TdGF0dXNCYXItYWN0aW9ucycgfSxcbiAgICAgIHByb3BzLm5ld0ZpbGVzICYmICFwcm9wcy5oaWRlVXBsb2FkQnV0dG9uID8gaChVcGxvYWRCdG4sIF9leHRlbmRzKHt9LCBwcm9wcywgeyB1cGxvYWRTdGF0ZTogdXBsb2FkU3RhdGUgfSkpIDogbnVsbCxcbiAgICAgIHByb3BzLmVycm9yICYmICFwcm9wcy5oaWRlUmV0cnlCdXR0b24gPyBoKFJldHJ5QnRuLCBwcm9wcykgOiBudWxsLFxuICAgICAgIXByb3BzLmhpZGVQYXVzZVJlc3VtZUNhbmNlbEJ1dHRvbnMgJiYgdXBsb2FkU3RhdGUgIT09IHN0YXR1c0JhclN0YXRlcy5TVEFURV9XQUlUSU5HICYmIHVwbG9hZFN0YXRlICE9PSBzdGF0dXNCYXJTdGF0ZXMuU1RBVEVfQ09NUExFVEUgPyBoKENhbmNlbEJ0biwgcHJvcHMpIDogbnVsbFxuICAgIClcbiAgKTtcbn07XG5cbnZhciBVcGxvYWRCdG4gPSBmdW5jdGlvbiBVcGxvYWRCdG4ocHJvcHMpIHtcbiAgdmFyIHVwbG9hZEJ0bkNsYXNzTmFtZXMgPSBjbGFzc05hbWVzKCd1cHB5LXUtcmVzZXQnLCAndXBweS1jLWJ0bicsICd1cHB5LVN0YXR1c0Jhci1hY3Rpb25CdG4nLCAndXBweS1TdGF0dXNCYXItYWN0aW9uQnRuLS11cGxvYWQnLCB7ICd1cHB5LWMtYnRuLXByaW1hcnknOiBwcm9wcy51cGxvYWRTdGF0ZSA9PT0gc3RhdHVzQmFyU3RhdGVzLlNUQVRFX1dBSVRJTkcgfSk7XG5cbiAgcmV0dXJuIGgoXG4gICAgJ2J1dHRvbicsXG4gICAgeyB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICdjbGFzcyc6IHVwbG9hZEJ0bkNsYXNzTmFtZXMsXG4gICAgICAnYXJpYS1sYWJlbCc6IHByb3BzLmkxOG4oJ3VwbG9hZFhGaWxlcycsIHsgc21hcnRfY291bnQ6IHByb3BzLm5ld0ZpbGVzIH0pLFxuICAgICAgb25jbGljazogcHJvcHMuc3RhcnRVcGxvYWQgfSxcbiAgICBwcm9wcy5uZXdGaWxlcyAmJiBwcm9wcy51cGxvYWRTdGFydGVkID8gcHJvcHMuaTE4bigndXBsb2FkWE5ld0ZpbGVzJywgeyBzbWFydF9jb3VudDogcHJvcHMubmV3RmlsZXMgfSkgOiBwcm9wcy5pMThuKCd1cGxvYWRYRmlsZXMnLCB7IHNtYXJ0X2NvdW50OiBwcm9wcy5uZXdGaWxlcyB9KVxuICApO1xufTtcblxudmFyIFJldHJ5QnRuID0gZnVuY3Rpb24gUmV0cnlCdG4ocHJvcHMpIHtcbiAgcmV0dXJuIGgoXG4gICAgJ2J1dHRvbicsXG4gICAgeyB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICdjbGFzcyc6ICd1cHB5LXUtcmVzZXQgdXBweS1jLWJ0biB1cHB5LVN0YXR1c0Jhci1hY3Rpb25CdG4gdXBweS1TdGF0dXNCYXItYWN0aW9uQnRuLS1yZXRyeScsXG4gICAgICAnYXJpYS1sYWJlbCc6IHByb3BzLmkxOG4oJ3JldHJ5VXBsb2FkJyksXG4gICAgICBvbmNsaWNrOiBwcm9wcy5yZXRyeUFsbCB9LFxuICAgIHByb3BzLmkxOG4oJ3JldHJ5JylcbiAgKTtcbn07XG5cbnZhciBDYW5jZWxCdG4gPSBmdW5jdGlvbiBDYW5jZWxCdG4ocHJvcHMpIHtcbiAgcmV0dXJuIGgoXG4gICAgJ2J1dHRvbicsXG4gICAgeyB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICdjbGFzcyc6ICd1cHB5LXUtcmVzZXQgdXBweS1jLWJ0biB1cHB5LVN0YXR1c0Jhci1hY3Rpb25CdG4gdXBweS1TdGF0dXNCYXItYWN0aW9uQnRuLS1jYW5jZWwnLFxuICAgICAgJ2FyaWEtbGFiZWwnOiBwcm9wcy5pMThuKCdjYW5jZWwnKSxcbiAgICAgIG9uY2xpY2s6IHByb3BzLmNhbmNlbEFsbCB9LFxuICAgIHByb3BzLmkxOG4oJ2NhbmNlbCcpXG4gICk7XG59O1xuXG52YXIgUGF1c2VSZXN1bWVCdXR0b25zID0gZnVuY3Rpb24gUGF1c2VSZXN1bWVCdXR0b25zKHByb3BzKSB7XG4gIHZhciByZXN1bWFibGVVcGxvYWRzID0gcHJvcHMucmVzdW1hYmxlVXBsb2FkcyxcbiAgICAgIGlzQWxsUGF1c2VkID0gcHJvcHMuaXNBbGxQYXVzZWQsXG4gICAgICBpMThuID0gcHJvcHMuaTE4bjtcblxuICB2YXIgdGl0bGUgPSByZXN1bWFibGVVcGxvYWRzID8gaXNBbGxQYXVzZWQgPyBpMThuKCdyZXN1bWVVcGxvYWQnKSA6IGkxOG4oJ3BhdXNlVXBsb2FkJykgOiBpMThuKCdjYW5jZWxVcGxvYWQnKTtcblxuICByZXR1cm4gaChcbiAgICAnYnV0dG9uJyxcbiAgICB7IHRpdGxlOiB0aXRsZSwgJ2NsYXNzJzogJ3VwcHktdS1yZXNldCB1cHB5LVN0YXR1c0Jhci1zdGF0dXNJbmRpY2F0b3InLCB0eXBlOiAnYnV0dG9uJywgb25jbGljazogZnVuY3Rpb24gb25jbGljaygpIHtcbiAgICAgICAgcmV0dXJuIHRvZ2dsZVBhdXNlUmVzdW1lKHByb3BzKTtcbiAgICAgIH0gfSxcbiAgICByZXN1bWFibGVVcGxvYWRzID8gaXNBbGxQYXVzZWQgPyBoKFxuICAgICAgJ3N2ZycsXG4gICAgICB7ICdhcmlhLWhpZGRlbic6ICd0cnVlJywgJ2NsYXNzJzogJ1VwcHlJY29uJywgd2lkdGg6ICcxNScsIGhlaWdodDogJzE3Jywgdmlld0JveDogJzAgMCAxMSAxMycgfSxcbiAgICAgIGgoJ3BhdGgnLCB7IGQ6ICdNMS4yNiAxMi41MzRhLjY3LjY3IDAgMCAxLS42NzQuMDEyLjY3LjY3IDAgMCAxLS4zMzYtLjU4M3YtMTFDLjI1LjcyNC4zOC41LjU4Ni4zODJhLjY1OC42NTggMCAwIDEgLjY3My4wMTJsOS4xNjUgNS41YS42Ni42NiAwIDAgMSAuMzI1LjU3LjY2LjY2IDAgMCAxLS4zMjUuNTczbC05LjE2NiA1LjV6JyB9KVxuICAgICkgOiBoKFxuICAgICAgJ3N2ZycsXG4gICAgICB7ICdhcmlhLWhpZGRlbic6ICd0cnVlJywgJ2NsYXNzJzogJ1VwcHlJY29uJywgd2lkdGg6ICcxNicsIGhlaWdodDogJzE3Jywgdmlld0JveDogJzAgMCAxMiAxMycgfSxcbiAgICAgIGgoJ3BhdGgnLCB7IGQ6ICdNNC44ODguODF2MTEuMzhjMCAuNDQ2LS4zMjQuODEtLjcyMi44MUgyLjcyMkMyLjMyNCAxMyAyIDEyLjYzNiAyIDEyLjE5Vi44MWMwLS40NDYuMzI0LS44MS43MjItLjgxaDEuNDQ0Yy4zOTggMCAuNzIyLjM2NC43MjIuODF6TTkuODg4LjgxdjExLjM4YzAgLjQ0Ni0uMzI0LjgxLS43MjIuODFINy43MjJDNy4zMjQgMTMgNyAxMi42MzYgNyAxMi4xOVYuODFjMC0uNDQ2LjMyNC0uODEuNzIyLS44MWgxLjQ0NGMuMzk4IDAgLjcyMi4zNjQuNzIyLjgxeicgfSlcbiAgICApIDogaChcbiAgICAgICdzdmcnLFxuICAgICAgeyAnYXJpYS1oaWRkZW4nOiAndHJ1ZScsICdjbGFzcyc6ICdVcHB5SWNvbicsIHdpZHRoOiAnMTZweCcsIGhlaWdodDogJzE2cHgnLCB2aWV3Qm94OiAnMCAwIDE5IDE5JyB9LFxuICAgICAgaCgncGF0aCcsIHsgZDogJ00xNy4zMTggMTcuMjMyTDkuOTQgOS44NTQgOS41ODYgOS41bC0uMzU0LjM1NC03LjM3OCA3LjM3OGguNzA3bC0uNjItLjYydi43MDZMOS4zMTggOS45NGwuMzU0LS4zNTQtLjM1NC0uMzU0TDEuOTQgMS44NTR2LjcwN2wuNjItLjYyaC0uNzA2bDcuMzc4IDcuMzc4LjM1NC4zNTQuMzU0LS4zNTQgNy4zNzgtNy4zNzhoLS43MDdsLjYyMi42MnYtLjcwNkw5Ljg1NCA5LjIzMmwtLjM1NC4zNTQuMzU0LjM1NCA3LjM3OCA3LjM3OC43MDgtLjcwNy03LjM4LTcuMzc4di43MDhsNy4zOC03LjM4LjM1My0uMzUzLS4zNTMtLjM1My0uNjIyLS42MjItLjM1My0uMzUzLS4zNTQuMzUyLTcuMzc4IDcuMzhoLjcwOEwyLjU2IDEuMjMgMi4yMDguODhsLS4zNTMuMzUzLS42MjIuNjItLjM1My4zNTUuMzUyLjM1MyA3LjM4IDcuMzh2LS43MDhsLTcuMzggNy4zOC0uMzUzLjM1My4zNTIuMzUzLjYyMi42MjIuMzUzLjM1My4zNTQtLjM1MyA3LjM4LTcuMzhoLS43MDhsNy4zOCA3LjM4eicgfSlcbiAgICApXG4gICk7XG59O1xuXG52YXIgUHJvZ3Jlc3NCYXJQcm9jZXNzaW5nID0gZnVuY3Rpb24gUHJvZ3Jlc3NCYXJQcm9jZXNzaW5nKHByb3BzKSB7XG4gIHZhciB2YWx1ZSA9IE1hdGgucm91bmQocHJvcHMudmFsdWUgKiAxMDApO1xuXG4gIHJldHVybiBoKFxuICAgICdkaXYnLFxuICAgIHsgJ2NsYXNzJzogJ3VwcHktU3RhdHVzQmFyLWNvbnRlbnQnIH0sXG4gICAgcHJvcHMubW9kZSA9PT0gJ2RldGVybWluYXRlJyA/IHZhbHVlICsgJyUgXFx4QjcgJyA6ICcnLFxuICAgIHByb3BzLm1lc3NhZ2VcbiAgKTtcbn07XG5cbnZhciBwcm9ncmVzc0RldGFpbHMgPSBmdW5jdGlvbiBwcm9ncmVzc0RldGFpbHMocHJvcHMpIHtcbiAgcmV0dXJuIGgoXG4gICAgJ3NwYW4nLFxuICAgIHsgJ2NsYXNzJzogJ3VwcHktU3RhdHVzQmFyLXN0YXR1c1NlY29uZGFyeScgfSxcbiAgICBwcm9wcy5pblByb2dyZXNzID4gMSAmJiBwcm9wcy5pMThuKCdmaWxlc1VwbG9hZGVkT2ZUb3RhbCcsIHsgY29tcGxldGU6IHByb3BzLmNvbXBsZXRlLCBzbWFydF9jb3VudDogcHJvcHMuaW5Qcm9ncmVzcyB9KSArICcgXFx4QjcgJyxcbiAgICBwcm9wcy5pMThuKCdkYXRhVXBsb2FkZWRPZlRvdGFsJywgeyBjb21wbGV0ZTogcHJvcHMudG90YWxVcGxvYWRlZFNpemUsIHRvdGFsOiBwcm9wcy50b3RhbFNpemUgfSkgKyAnIFxceEI3ICcsXG4gICAgcHJvcHMuaTE4bigneFRpbWVMZWZ0JywgeyB0aW1lOiBwcm9wcy50b3RhbEVUQSB9KVxuICApO1xufTtcblxudmFyIFRocm90dGxlZFByb2dyZXNzRGV0YWlscyA9IHRocm90dGxlKHByb2dyZXNzRGV0YWlscywgNTAwLCB7IGxlYWRpbmc6IHRydWUsIHRyYWlsaW5nOiB0cnVlIH0pO1xuXG52YXIgUHJvZ3Jlc3NCYXJVcGxvYWRpbmcgPSBmdW5jdGlvbiBQcm9ncmVzc0JhclVwbG9hZGluZyhwcm9wcykge1xuICBpZiAoIXByb3BzLmlzVXBsb2FkU3RhcnRlZCB8fCBwcm9wcy5pc0FsbENvbXBsZXRlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgdGl0bGUgPSBwcm9wcy5pc0FsbFBhdXNlZCA/IHByb3BzLmkxOG4oJ3BhdXNlZCcpIDogcHJvcHMuaTE4bigndXBsb2FkaW5nJyk7XG5cbiAgcmV0dXJuIGgoXG4gICAgJ2RpdicsXG4gICAgeyAnY2xhc3MnOiAndXBweS1TdGF0dXNCYXItY29udGVudCcsICdhcmlhLWxhYmVsJzogdGl0bGUsIHRpdGxlOiB0aXRsZSB9LFxuICAgICFwcm9wcy5oaWRlUGF1c2VSZXN1bWVDYW5jZWxCdXR0b25zICYmIGgoUGF1c2VSZXN1bWVCdXR0b25zLCBwcm9wcyksXG4gICAgaChcbiAgICAgICdkaXYnLFxuICAgICAgeyAnY2xhc3MnOiAndXBweS1TdGF0dXNCYXItc3RhdHVzJyB9LFxuICAgICAgaChcbiAgICAgICAgJ3NwYW4nLFxuICAgICAgICB7ICdjbGFzcyc6ICd1cHB5LVN0YXR1c0Jhci1zdGF0dXNQcmltYXJ5JyB9LFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgJzogJyxcbiAgICAgICAgcHJvcHMudG90YWxQcm9ncmVzcyxcbiAgICAgICAgJyUnXG4gICAgICApLFxuICAgICAgaCgnYnInLCBudWxsKSxcbiAgICAgICFwcm9wcy5pc0FsbFBhdXNlZCAmJiBoKFRocm90dGxlZFByb2dyZXNzRGV0YWlscywgcHJvcHMpXG4gICAgKVxuICApO1xufTtcblxudmFyIFByb2dyZXNzQmFyQ29tcGxldGUgPSBmdW5jdGlvbiBQcm9ncmVzc0JhckNvbXBsZXRlKF9yZWYpIHtcbiAgdmFyIHRvdGFsUHJvZ3Jlc3MgPSBfcmVmLnRvdGFsUHJvZ3Jlc3MsXG4gICAgICBpMThuID0gX3JlZi5pMThuO1xuXG4gIHJldHVybiBoKFxuICAgICdkaXYnLFxuICAgIHsgJ2NsYXNzJzogJ3VwcHktU3RhdHVzQmFyLWNvbnRlbnQnLCByb2xlOiAnc3RhdHVzJywgdGl0bGU6IGkxOG4oJ2NvbXBsZXRlJykgfSxcbiAgICBoKFxuICAgICAgJ3N2ZycsXG4gICAgICB7ICdhcmlhLWhpZGRlbic6ICd0cnVlJywgJ2NsYXNzJzogJ3VwcHktU3RhdHVzQmFyLXN0YXR1c0luZGljYXRvciBVcHB5SWNvbicsIHdpZHRoOiAnMTgnLCBoZWlnaHQ6ICcxNycsIHZpZXdCb3g6ICcwIDAgMjMgMTcnIH0sXG4gICAgICBoKCdwYXRoJywgeyBkOiAnTTguOTQ0IDE3TDAgNy44NjVsMi41NTUtMi42MSA2LjM5IDYuNTI1TDIwLjQxIDAgMjMgMi42NDV6JyB9KVxuICAgICksXG4gICAgaTE4bignY29tcGxldGUnKVxuICApO1xufTtcblxudmFyIFByb2dyZXNzQmFyRXJyb3IgPSBmdW5jdGlvbiBQcm9ncmVzc0JhckVycm9yKF9yZWYyKSB7XG4gIHZhciBlcnJvciA9IF9yZWYyLmVycm9yLFxuICAgICAgcmV0cnlBbGwgPSBfcmVmMi5yZXRyeUFsbCxcbiAgICAgIGhpZGVSZXRyeUJ1dHRvbiA9IF9yZWYyLmhpZGVSZXRyeUJ1dHRvbixcbiAgICAgIGkxOG4gPSBfcmVmMi5pMThuO1xuXG4gIHJldHVybiBoKFxuICAgICdkaXYnLFxuICAgIHsgJ2NsYXNzJzogJ3VwcHktU3RhdHVzQmFyLWNvbnRlbnQnLCByb2xlOiAnYWxlcnQnIH0sXG4gICAgaChcbiAgICAgICdzdHJvbmcnLFxuICAgICAgeyAnY2xhc3MnOiAndXBweS1TdGF0dXNCYXItY29udGVudFBhZGRpbmcnIH0sXG4gICAgICBpMThuKCd1cGxvYWRGYWlsZWQnKSxcbiAgICAgICcuJ1xuICAgICksXG4gICAgIWhpZGVSZXRyeUJ1dHRvbiAmJiBoKFxuICAgICAgJ3NwYW4nLFxuICAgICAgeyAnY2xhc3MnOiAndXBweS1TdGF0dXNCYXItY29udGVudFBhZGRpbmcnIH0sXG4gICAgICBpMThuKCdwbGVhc2VQcmVzc1JldHJ5JylcbiAgICApLFxuICAgIGgoXG4gICAgICAnc3BhbicsXG4gICAgICB7ICdjbGFzcyc6ICd1cHB5LVN0YXR1c0Jhci1kZXRhaWxzJyxcbiAgICAgICAgJ2FyaWEtbGFiZWwnOiBlcnJvcixcbiAgICAgICAgJ2RhdGEtbWljcm90aXAtcG9zaXRpb24nOiAndG9wJyxcbiAgICAgICAgJ2RhdGEtbWljcm90aXAtc2l6ZSc6ICdsYXJnZScsXG4gICAgICAgIHJvbGU6ICd0b29sdGlwJyB9LFxuICAgICAgJz8nXG4gICAgKVxuICApO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgJ1NUQVRFX0VSUk9SJzogJ2Vycm9yJyxcbiAgJ1NUQVRFX1dBSVRJTkcnOiAnd2FpdGluZycsXG4gICdTVEFURV9QUkVQUk9DRVNTSU5HJzogJ3ByZXByb2Nlc3NpbmcnLFxuICAnU1RBVEVfVVBMT0FESU5HJzogJ3VwbG9hZGluZycsXG4gICdTVEFURV9QT1NUUFJPQ0VTU0lORyc6ICdwb3N0cHJvY2Vzc2luZycsXG4gICdTVEFURV9DT01QTEVURSc6ICdjb21wbGV0ZSdcbn07IiwidmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdAdXBweS9jb3JlJyksXG4gICAgUGx1Z2luID0gX3JlcXVpcmUuUGx1Z2luO1xuXG52YXIgVHJhbnNsYXRvciA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi9UcmFuc2xhdG9yJyk7XG52YXIgU3RhdHVzQmFyVUkgPSByZXF1aXJlKCcuL1N0YXR1c0JhcicpO1xudmFyIHN0YXR1c0JhclN0YXRlcyA9IHJlcXVpcmUoJy4vU3RhdHVzQmFyU3RhdGVzJyk7XG52YXIgZ2V0U3BlZWQgPSByZXF1aXJlKCdAdXBweS91dGlscy9saWIvZ2V0U3BlZWQnKTtcbnZhciBnZXRCeXRlc1JlbWFpbmluZyA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi9nZXRCeXRlc1JlbWFpbmluZycpO1xudmFyIHByZXR0eUVUQSA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi9wcmV0dHlFVEEnKTtcbnZhciBwcmV0dHlCeXRlcyA9IHJlcXVpcmUoJ3ByZXR0aWVyLWJ5dGVzJyk7XG5cbi8qKlxuICogU3RhdHVzQmFyOiByZW5kZXJzIGEgc3RhdHVzIGJhciB3aXRoIHVwbG9hZC9wYXVzZS9yZXN1bWUvY2FuY2VsL3JldHJ5IGJ1dHRvbnMsXG4gKiBwcm9ncmVzcyBwZXJjZW50YWdlIGFuZCB0aW1lIHJlbWFpbmluZy5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX1BsdWdpbikge1xuICBfaW5oZXJpdHMoU3RhdHVzQmFyLCBfUGx1Z2luKTtcblxuICBmdW5jdGlvbiBTdGF0dXNCYXIodXBweSwgb3B0cykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGF0dXNCYXIpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1BsdWdpbi5jYWxsKHRoaXMsIHVwcHksIG9wdHMpKTtcblxuICAgIF90aGlzLmlkID0gX3RoaXMub3B0cy5pZCB8fCAnU3RhdHVzQmFyJztcbiAgICBfdGhpcy50aXRsZSA9ICdTdGF0dXNCYXInO1xuICAgIF90aGlzLnR5cGUgPSAncHJvZ3Jlc3NpbmRpY2F0b3InO1xuXG4gICAgdmFyIGRlZmF1bHRMb2NhbGUgPSB7XG4gICAgICBzdHJpbmdzOiB7XG4gICAgICAgIHVwbG9hZGluZzogJ1VwbG9hZGluZycsXG4gICAgICAgIGNvbXBsZXRlOiAnQ29tcGxldGUnLFxuICAgICAgICB1cGxvYWRGYWlsZWQ6ICdVcGxvYWQgZmFpbGVkJyxcbiAgICAgICAgcGxlYXNlUHJlc3NSZXRyeTogJ1BsZWFzZSBwcmVzcyBSZXRyeSB0byB1cGxvYWQgYWdhaW4nLFxuICAgICAgICBwYXVzZWQ6ICdQYXVzZWQnLFxuICAgICAgICBlcnJvcjogJ0Vycm9yJyxcbiAgICAgICAgcmV0cnk6ICdSZXRyeScsXG4gICAgICAgIGNhbmNlbDogJ0NhbmNlbCcsXG4gICAgICAgIHByZXNzVG9SZXRyeTogJ1ByZXNzIHRvIHJldHJ5JyxcbiAgICAgICAgcmV0cnlVcGxvYWQ6ICdSZXRyeSB1cGxvYWQnLFxuICAgICAgICByZXN1bWVVcGxvYWQ6ICdSZXN1bWUgdXBsb2FkJyxcbiAgICAgICAgY2FuY2VsVXBsb2FkOiAnQ2FuY2VsIHVwbG9hZCcsXG4gICAgICAgIHBhdXNlVXBsb2FkOiAnUGF1c2UgdXBsb2FkJyxcbiAgICAgICAgZmlsZXNVcGxvYWRlZE9mVG90YWw6IHtcbiAgICAgICAgICAwOiAnJXtjb21wbGV0ZX0gb2YgJXtzbWFydF9jb3VudH0gZmlsZSB1cGxvYWRlZCcsXG4gICAgICAgICAgMTogJyV7Y29tcGxldGV9IG9mICV7c21hcnRfY291bnR9IGZpbGVzIHVwbG9hZGVkJ1xuICAgICAgICB9LFxuICAgICAgICBkYXRhVXBsb2FkZWRPZlRvdGFsOiAnJXtjb21wbGV0ZX0gb2YgJXt0b3RhbH0nLFxuICAgICAgICB4VGltZUxlZnQ6ICcle3RpbWV9IGxlZnQnLFxuICAgICAgICB1cGxvYWRYRmlsZXM6IHtcbiAgICAgICAgICAwOiAnVXBsb2FkICV7c21hcnRfY291bnR9IGZpbGUnLFxuICAgICAgICAgIDE6ICdVcGxvYWQgJXtzbWFydF9jb3VudH0gZmlsZXMnXG4gICAgICAgIH0sXG4gICAgICAgIHVwbG9hZFhOZXdGaWxlczoge1xuICAgICAgICAgIDA6ICdVcGxvYWQgKyV7c21hcnRfY291bnR9IGZpbGUnLFxuICAgICAgICAgIDE6ICdVcGxvYWQgKyV7c21hcnRfY291bnR9IGZpbGVzJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgICB9O3ZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgIHRhcmdldDogJ2JvZHknLFxuICAgICAgaGlkZVVwbG9hZEJ1dHRvbjogZmFsc2UsXG4gICAgICBoaWRlUmV0cnlCdXR0b246IGZhbHNlLFxuICAgICAgaGlkZVBhdXNlUmVzdW1lQ2FuY2VsQnV0dG9uczogZmFsc2UsXG4gICAgICBzaG93UHJvZ3Jlc3NEZXRhaWxzOiBmYWxzZSxcbiAgICAgIGxvY2FsZTogZGVmYXVsdExvY2FsZSxcbiAgICAgIGhpZGVBZnRlckZpbmlzaDogdHJ1ZVxuXG4gICAgICAvLyBtZXJnZSBkZWZhdWx0IG9wdGlvbnMgd2l0aCB0aGUgb25lcyBzZXQgYnkgdXNlclxuICAgIH07X3RoaXMub3B0cyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0cyk7XG5cbiAgICBfdGhpcy5sb2NhbGUgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdExvY2FsZSwgX3RoaXMub3B0cy5sb2NhbGUpO1xuICAgIF90aGlzLmxvY2FsZS5zdHJpbmdzID0gX2V4dGVuZHMoe30sIGRlZmF1bHRMb2NhbGUuc3RyaW5ncywgX3RoaXMub3B0cy5sb2NhbGUuc3RyaW5ncyk7XG5cbiAgICBfdGhpcy50cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3IoeyBsb2NhbGU6IF90aGlzLmxvY2FsZSB9KTtcbiAgICBfdGhpcy5pMThuID0gX3RoaXMudHJhbnNsYXRvci50cmFuc2xhdGUuYmluZChfdGhpcy50cmFuc2xhdG9yKTtcblxuICAgIF90aGlzLnN0YXJ0VXBsb2FkID0gX3RoaXMuc3RhcnRVcGxvYWQuYmluZChfdGhpcyk7XG4gICAgX3RoaXMucmVuZGVyID0gX3RoaXMucmVuZGVyLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLmluc3RhbGwgPSBfdGhpcy5pbnN0YWxsLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFN0YXR1c0Jhci5wcm90b3R5cGUuZ2V0VG90YWxTcGVlZCA9IGZ1bmN0aW9uIGdldFRvdGFsU3BlZWQoZmlsZXMpIHtcbiAgICB2YXIgdG90YWxTcGVlZCA9IDA7XG4gICAgZmlsZXMuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgdG90YWxTcGVlZCA9IHRvdGFsU3BlZWQgKyBnZXRTcGVlZChmaWxlLnByb2dyZXNzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdG90YWxTcGVlZDtcbiAgfTtcblxuICBTdGF0dXNCYXIucHJvdG90eXBlLmdldFRvdGFsRVRBID0gZnVuY3Rpb24gZ2V0VG90YWxFVEEoZmlsZXMpIHtcbiAgICB2YXIgdG90YWxTcGVlZCA9IHRoaXMuZ2V0VG90YWxTcGVlZChmaWxlcyk7XG4gICAgaWYgKHRvdGFsU3BlZWQgPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHZhciB0b3RhbEJ5dGVzUmVtYWluaW5nID0gZmlsZXMucmVkdWNlKGZ1bmN0aW9uICh0b3RhbCwgZmlsZSkge1xuICAgICAgcmV0dXJuIHRvdGFsICsgZ2V0Qnl0ZXNSZW1haW5pbmcoZmlsZS5wcm9ncmVzcyk7XG4gICAgfSwgMCk7XG5cbiAgICByZXR1cm4gTWF0aC5yb3VuZCh0b3RhbEJ5dGVzUmVtYWluaW5nIC8gdG90YWxTcGVlZCAqIDEwKSAvIDEwO1xuICB9O1xuXG4gIFN0YXR1c0Jhci5wcm90b3R5cGUuc3RhcnRVcGxvYWQgPSBmdW5jdGlvbiBzdGFydFVwbG9hZCgpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHJldHVybiB0aGlzLnVwcHkudXBsb2FkKCkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgX3RoaXMyLnVwcHkubG9nKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSB8fCBlcnIpO1xuICAgICAgLy8gSWdub3JlXG4gICAgfSk7XG4gIH07XG5cbiAgU3RhdHVzQmFyLnByb3RvdHlwZS5nZXRVcGxvYWRpbmdTdGF0ZSA9IGZ1bmN0aW9uIGdldFVwbG9hZGluZ1N0YXRlKGlzQWxsRXJyb3JlZCwgaXNBbGxDb21wbGV0ZSwgZmlsZXMpIHtcbiAgICBpZiAoaXNBbGxFcnJvcmVkKSB7XG4gICAgICByZXR1cm4gc3RhdHVzQmFyU3RhdGVzLlNUQVRFX0VSUk9SO1xuICAgIH1cblxuICAgIGlmIChpc0FsbENvbXBsZXRlKSB7XG4gICAgICByZXR1cm4gc3RhdHVzQmFyU3RhdGVzLlNUQVRFX0NPTVBMRVRFO1xuICAgIH1cblxuICAgIHZhciBzdGF0ZSA9IHN0YXR1c0JhclN0YXRlcy5TVEFURV9XQUlUSU5HO1xuICAgIHZhciBmaWxlSURzID0gT2JqZWN0LmtleXMoZmlsZXMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZUlEcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHByb2dyZXNzID0gZmlsZXNbZmlsZUlEc1tpXV0ucHJvZ3Jlc3M7XG4gICAgICAvLyBJZiBBTlkgZmlsZXMgYXJlIGJlaW5nIHVwbG9hZGVkIHJpZ2h0IG5vdywgc2hvdyB0aGUgdXBsb2FkaW5nIHN0YXRlLlxuICAgICAgaWYgKHByb2dyZXNzLnVwbG9hZFN0YXJ0ZWQgJiYgIXByb2dyZXNzLnVwbG9hZENvbXBsZXRlKSB7XG4gICAgICAgIHJldHVybiBzdGF0dXNCYXJTdGF0ZXMuU1RBVEVfVVBMT0FESU5HO1xuICAgICAgfVxuICAgICAgLy8gSWYgZmlsZXMgYXJlIGJlaW5nIHByZXByb2Nlc3NlZCBBTkQgcG9zdHByb2Nlc3NlZCBhdCB0aGlzIHRpbWUsIHdlIHNob3cgdGhlXG4gICAgICAvLyBwcmVwcm9jZXNzIHN0YXRlLiBJZiBhbnkgZmlsZXMgYXJlIGJlaW5nIHVwbG9hZGVkIHdlIHNob3cgdXBsb2FkaW5nLlxuICAgICAgaWYgKHByb2dyZXNzLnByZXByb2Nlc3MgJiYgc3RhdGUgIT09IHN0YXR1c0JhclN0YXRlcy5TVEFURV9VUExPQURJTkcpIHtcbiAgICAgICAgc3RhdGUgPSBzdGF0dXNCYXJTdGF0ZXMuU1RBVEVfUFJFUFJPQ0VTU0lORztcbiAgICAgIH1cbiAgICAgIC8vIElmIE5PIGZpbGVzIGFyZSBiZWluZyBwcmVwcm9jZXNzZWQgb3IgdXBsb2FkZWQgcmlnaHQgbm93LCBidXQgc29tZSBmaWxlcyBhcmVcbiAgICAgIC8vIGJlaW5nIHBvc3Rwcm9jZXNzZWQsIHNob3cgdGhlIHBvc3Rwcm9jZXNzIHN0YXRlLlxuICAgICAgaWYgKHByb2dyZXNzLnBvc3Rwcm9jZXNzICYmIHN0YXRlICE9PSBzdGF0dXNCYXJTdGF0ZXMuU1RBVEVfVVBMT0FESU5HICYmIHN0YXRlICE9PSBzdGF0dXNCYXJTdGF0ZXMuU1RBVEVfUFJFUFJPQ0VTU0lORykge1xuICAgICAgICBzdGF0ZSA9IHN0YXR1c0JhclN0YXRlcy5TVEFURV9QT1NUUFJPQ0VTU0lORztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9O1xuXG4gIFN0YXR1c0Jhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKHN0YXRlKSB7XG4gICAgdmFyIGZpbGVzID0gc3RhdGUuZmlsZXM7XG5cbiAgICB2YXIgdXBsb2FkU3RhcnRlZEZpbGVzID0gT2JqZWN0LmtleXMoZmlsZXMpLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgcmV0dXJuIGZpbGVzW2ZpbGVdLnByb2dyZXNzLnVwbG9hZFN0YXJ0ZWQ7XG4gICAgfSk7XG4gICAgdmFyIG5ld0ZpbGVzID0gT2JqZWN0LmtleXMoZmlsZXMpLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgcmV0dXJuICFmaWxlc1tmaWxlXS5wcm9ncmVzcy51cGxvYWRTdGFydGVkICYmICFmaWxlc1tmaWxlXS5wcm9ncmVzcy5wcmVwcm9jZXNzICYmICFmaWxlc1tmaWxlXS5wcm9ncmVzcy5wb3N0cHJvY2VzcztcbiAgICB9KTtcbiAgICB2YXIgY29tcGxldGVGaWxlcyA9IE9iamVjdC5rZXlzKGZpbGVzKS5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHJldHVybiBmaWxlc1tmaWxlXS5wcm9ncmVzcy51cGxvYWRDb21wbGV0ZTtcbiAgICB9KTtcbiAgICB2YXIgZXJyb3JlZEZpbGVzID0gT2JqZWN0LmtleXMoZmlsZXMpLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgcmV0dXJuIGZpbGVzW2ZpbGVdLmVycm9yO1xuICAgIH0pO1xuICAgIHZhciBpblByb2dyZXNzRmlsZXMgPSBPYmplY3Qua2V5cyhmaWxlcykuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICByZXR1cm4gIWZpbGVzW2ZpbGVdLnByb2dyZXNzLnVwbG9hZENvbXBsZXRlICYmIGZpbGVzW2ZpbGVdLnByb2dyZXNzLnVwbG9hZFN0YXJ0ZWQgJiYgIWZpbGVzW2ZpbGVdLmlzUGF1c2VkO1xuICAgIH0pO1xuICAgIHZhciBwcm9jZXNzaW5nRmlsZXMgPSBPYmplY3Qua2V5cyhmaWxlcykuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICByZXR1cm4gZmlsZXNbZmlsZV0ucHJvZ3Jlc3MucHJlcHJvY2VzcyB8fCBmaWxlc1tmaWxlXS5wcm9ncmVzcy5wb3N0cHJvY2VzcztcbiAgICB9KTtcblxuICAgIHZhciBpblByb2dyZXNzRmlsZXNBcnJheSA9IGluUHJvZ3Jlc3NGaWxlcy5tYXAoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHJldHVybiBmaWxlc1tmaWxlXTtcbiAgICB9KTtcblxuICAgIHZhciB0b3RhbFNwZWVkID0gcHJldHR5Qnl0ZXModGhpcy5nZXRUb3RhbFNwZWVkKGluUHJvZ3Jlc3NGaWxlc0FycmF5KSk7XG4gICAgdmFyIHRvdGFsRVRBID0gcHJldHR5RVRBKHRoaXMuZ2V0VG90YWxFVEEoaW5Qcm9ncmVzc0ZpbGVzQXJyYXkpKTtcblxuICAgIC8vIHRvdGFsIHNpemUgYW5kIHVwbG9hZGVkIHNpemVcbiAgICB2YXIgdG90YWxTaXplID0gMDtcbiAgICB2YXIgdG90YWxVcGxvYWRlZFNpemUgPSAwO1xuICAgIGluUHJvZ3Jlc3NGaWxlc0FycmF5LmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHRvdGFsU2l6ZSA9IHRvdGFsU2l6ZSArIChmaWxlLnByb2dyZXNzLmJ5dGVzVG90YWwgfHwgMCk7XG4gICAgICB0b3RhbFVwbG9hZGVkU2l6ZSA9IHRvdGFsVXBsb2FkZWRTaXplICsgKGZpbGUucHJvZ3Jlc3MuYnl0ZXNVcGxvYWRlZCB8fCAwKTtcbiAgICB9KTtcbiAgICB0b3RhbFNpemUgPSBwcmV0dHlCeXRlcyh0b3RhbFNpemUpO1xuICAgIHRvdGFsVXBsb2FkZWRTaXplID0gcHJldHR5Qnl0ZXModG90YWxVcGxvYWRlZFNpemUpO1xuXG4gICAgdmFyIGlzVXBsb2FkU3RhcnRlZCA9IHVwbG9hZFN0YXJ0ZWRGaWxlcy5sZW5ndGggPiAwO1xuXG4gICAgdmFyIGlzQWxsQ29tcGxldGUgPSBzdGF0ZS50b3RhbFByb2dyZXNzID09PSAxMDAgJiYgY29tcGxldGVGaWxlcy5sZW5ndGggPT09IE9iamVjdC5rZXlzKGZpbGVzKS5sZW5ndGggJiYgcHJvY2Vzc2luZ0ZpbGVzLmxlbmd0aCA9PT0gMDtcblxuICAgIHZhciBpc0FsbEVycm9yZWQgPSBpc1VwbG9hZFN0YXJ0ZWQgJiYgZXJyb3JlZEZpbGVzLmxlbmd0aCA9PT0gdXBsb2FkU3RhcnRlZEZpbGVzLmxlbmd0aDtcblxuICAgIHZhciBpc0FsbFBhdXNlZCA9IGluUHJvZ3Jlc3NGaWxlcy5sZW5ndGggPT09IDAgJiYgIWlzQWxsQ29tcGxldGUgJiYgIWlzQWxsRXJyb3JlZCAmJiB1cGxvYWRTdGFydGVkRmlsZXMubGVuZ3RoID4gMDtcblxuICAgIHZhciByZXN1bWFibGVVcGxvYWRzID0gc3RhdGUuY2FwYWJpbGl0aWVzLnJlc3VtYWJsZVVwbG9hZHMgfHwgZmFsc2U7XG5cbiAgICByZXR1cm4gU3RhdHVzQmFyVUkoe1xuICAgICAgZXJyb3I6IHN0YXRlLmVycm9yLFxuICAgICAgdXBsb2FkU3RhdGU6IHRoaXMuZ2V0VXBsb2FkaW5nU3RhdGUoaXNBbGxFcnJvcmVkLCBpc0FsbENvbXBsZXRlLCBzdGF0ZS5maWxlcyB8fCB7fSksXG4gICAgICB0b3RhbFByb2dyZXNzOiBzdGF0ZS50b3RhbFByb2dyZXNzLFxuICAgICAgdG90YWxTaXplOiB0b3RhbFNpemUsXG4gICAgICB0b3RhbFVwbG9hZGVkU2l6ZTogdG90YWxVcGxvYWRlZFNpemUsXG4gICAgICB1cGxvYWRTdGFydGVkOiB1cGxvYWRTdGFydGVkRmlsZXMubGVuZ3RoLFxuICAgICAgaXNBbGxDb21wbGV0ZTogaXNBbGxDb21wbGV0ZSxcbiAgICAgIGlzQWxsUGF1c2VkOiBpc0FsbFBhdXNlZCxcbiAgICAgIGlzQWxsRXJyb3JlZDogaXNBbGxFcnJvcmVkLFxuICAgICAgaXNVcGxvYWRTdGFydGVkOiBpc1VwbG9hZFN0YXJ0ZWQsXG4gICAgICBjb21wbGV0ZTogY29tcGxldGVGaWxlcy5sZW5ndGgsXG4gICAgICBuZXdGaWxlczogbmV3RmlsZXMubGVuZ3RoLFxuICAgICAgaW5Qcm9ncmVzczogaW5Qcm9ncmVzc0ZpbGVzLmxlbmd0aCxcbiAgICAgIHRvdGFsU3BlZWQ6IHRvdGFsU3BlZWQsXG4gICAgICB0b3RhbEVUQTogdG90YWxFVEEsXG4gICAgICBmaWxlczogc3RhdGUuZmlsZXMsXG4gICAgICBpMThuOiB0aGlzLmkxOG4sXG4gICAgICBwYXVzZUFsbDogdGhpcy51cHB5LnBhdXNlQWxsLFxuICAgICAgcmVzdW1lQWxsOiB0aGlzLnVwcHkucmVzdW1lQWxsLFxuICAgICAgcmV0cnlBbGw6IHRoaXMudXBweS5yZXRyeUFsbCxcbiAgICAgIGNhbmNlbEFsbDogdGhpcy51cHB5LmNhbmNlbEFsbCxcbiAgICAgIHN0YXJ0VXBsb2FkOiB0aGlzLnN0YXJ0VXBsb2FkLFxuICAgICAgcmVzdW1hYmxlVXBsb2FkczogcmVzdW1hYmxlVXBsb2FkcyxcbiAgICAgIHNob3dQcm9ncmVzc0RldGFpbHM6IHRoaXMub3B0cy5zaG93UHJvZ3Jlc3NEZXRhaWxzLFxuICAgICAgaGlkZVVwbG9hZEJ1dHRvbjogdGhpcy5vcHRzLmhpZGVVcGxvYWRCdXR0b24sXG4gICAgICBoaWRlUmV0cnlCdXR0b246IHRoaXMub3B0cy5oaWRlUmV0cnlCdXR0b24sXG4gICAgICBoaWRlUGF1c2VSZXN1bWVDYW5jZWxCdXR0b25zOiB0aGlzLm9wdHMuaGlkZVBhdXNlUmVzdW1lQ2FuY2VsQnV0dG9ucyxcbiAgICAgIGhpZGVBZnRlckZpbmlzaDogdGhpcy5vcHRzLmhpZGVBZnRlckZpbmlzaFxuICAgIH0pO1xuICB9O1xuXG4gIFN0YXR1c0Jhci5wcm90b3R5cGUuaW5zdGFsbCA9IGZ1bmN0aW9uIGluc3RhbGwoKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMub3B0cy50YXJnZXQ7XG4gICAgaWYgKHRhcmdldCkge1xuICAgICAgdGhpcy5tb3VudCh0YXJnZXQsIHRoaXMpO1xuICAgIH1cbiAgfTtcblxuICBTdGF0dXNCYXIucHJvdG90eXBlLnVuaW5zdGFsbCA9IGZ1bmN0aW9uIHVuaW5zdGFsbCgpIHtcbiAgICB0aGlzLnVubW91bnQoKTtcbiAgfTtcblxuICByZXR1cm4gU3RhdHVzQmFyO1xufShQbHVnaW4pOyIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxuICogRGVmYXVsdCBzdG9yZSB0aGF0IGtlZXBzIHN0YXRlIGluIGEgc2ltcGxlIG9iamVjdC5cbiAqL1xudmFyIERlZmF1bHRTdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRGVmYXVsdFN0b3JlKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEZWZhdWx0U3RvcmUpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIHRoaXMuY2FsbGJhY2tzID0gW107XG4gIH1cblxuICBEZWZhdWx0U3RvcmUucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH07XG5cbiAgRGVmYXVsdFN0b3JlLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKHBhdGNoKSB7XG4gICAgdmFyIHByZXZTdGF0ZSA9IF9leHRlbmRzKHt9LCB0aGlzLnN0YXRlKTtcbiAgICB2YXIgbmV4dFN0YXRlID0gX2V4dGVuZHMoe30sIHRoaXMuc3RhdGUsIHBhdGNoKTtcblxuICAgIHRoaXMuc3RhdGUgPSBuZXh0U3RhdGU7XG4gICAgdGhpcy5fcHVibGlzaChwcmV2U3RhdGUsIG5leHRTdGF0ZSwgcGF0Y2gpO1xuICB9O1xuXG4gIERlZmF1bHRTdG9yZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gc3Vic2NyaWJlKGxpc3RlbmVyKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHRoaXMuY2FsbGJhY2tzLnB1c2gobGlzdGVuZXIpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIGxpc3RlbmVyLlxuICAgICAgX3RoaXMuY2FsbGJhY2tzLnNwbGljZShfdGhpcy5jYWxsYmFja3MuaW5kZXhPZihsaXN0ZW5lciksIDEpO1xuICAgIH07XG4gIH07XG5cbiAgRGVmYXVsdFN0b3JlLnByb3RvdHlwZS5fcHVibGlzaCA9IGZ1bmN0aW9uIF9wdWJsaXNoKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHRoaXMuY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICBsaXN0ZW5lci5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBEZWZhdWx0U3RvcmU7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmYXVsdFN0b3JlKCkge1xuICByZXR1cm4gbmV3IERlZmF1bHRTdG9yZSgpO1xufTsiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ0B1cHB5L2NvcmUnKSxcbiAgICBQbHVnaW4gPSBfcmVxdWlyZS5QbHVnaW47XG5cbnZhciBkYXRhVVJJdG9CbG9iID0gcmVxdWlyZSgnQHVwcHkvdXRpbHMvbGliL2RhdGFVUkl0b0Jsb2InKTtcbnZhciBpc1ByZXZpZXdTdXBwb3J0ZWQgPSByZXF1aXJlKCdAdXBweS91dGlscy9saWIvaXNQcmV2aWV3U3VwcG9ydGVkJyk7XG5cbi8qKlxuICogVGhlIFRodW1ibmFpbCBHZW5lcmF0b3IgcGx1Z2luXG4gKlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKF9QbHVnaW4pIHtcbiAgX2luaGVyaXRzKFRodW1ibmFpbEdlbmVyYXRvciwgX1BsdWdpbik7XG5cbiAgZnVuY3Rpb24gVGh1bWJuYWlsR2VuZXJhdG9yKHVwcHksIG9wdHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGh1bWJuYWlsR2VuZXJhdG9yKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9QbHVnaW4uY2FsbCh0aGlzLCB1cHB5LCBvcHRzKSk7XG5cbiAgICBfdGhpcy50eXBlID0gJ3RodW1ibmFpbCc7XG4gICAgX3RoaXMuaWQgPSBfdGhpcy5vcHRzLmlkIHx8ICdUaHVtYm5haWxHZW5lcmF0b3InO1xuICAgIF90aGlzLnRpdGxlID0gJ1RodW1ibmFpbCBHZW5lcmF0b3InO1xuICAgIF90aGlzLnF1ZXVlID0gW107XG4gICAgX3RoaXMucXVldWVQcm9jZXNzaW5nID0gZmFsc2U7XG5cbiAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICB0aHVtYm5haWxXaWR0aDogMjAwXG4gICAgfTtcblxuICAgIF90aGlzLm9wdHMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdHMpO1xuXG4gICAgX3RoaXMuYWRkVG9RdWV1ZSA9IF90aGlzLmFkZFRvUXVldWUuYmluZChfdGhpcyk7XG4gICAgX3RoaXMub25SZXN0b3JlZCA9IF90aGlzLm9uUmVzdG9yZWQuYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHRodW1ibmFpbCBmb3IgdGhlIGdpdmVuIFVwcHkgZmlsZSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7e2RhdGE6IEJsb2J9fSBmaWxlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cblxuXG4gIFRodW1ibmFpbEdlbmVyYXRvci5wcm90b3R5cGUuY3JlYXRlVGh1bWJuYWlsID0gZnVuY3Rpb24gY3JlYXRlVGh1bWJuYWlsKGZpbGUsIHRhcmdldFdpZHRoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgb3JpZ2luYWxVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUuZGF0YSk7XG4gICAgdmFyIG9ubG9hZCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1hZ2Uuc3JjID0gb3JpZ2luYWxVcmw7XG4gICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwob3JpZ2luYWxVcmwpO1xuICAgICAgICByZXNvbHZlKGltYWdlKTtcbiAgICAgIH07XG4gICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBUaGUgb25lcnJvciBldmVudCBpcyB0b3RhbGx5IHVzZWxlc3MgdW5mb3J0dW5hdGVseSwgYXMgZmFyIGFzIEkga25vd1xuICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKG9yaWdpbmFsVXJsKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignQ291bGQgbm90IGNyZWF0ZSB0aHVtYm5haWwnKSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9ubG9hZC50aGVuKGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgdmFyIHRhcmdldEhlaWdodCA9IF90aGlzMi5nZXRQcm9wb3J0aW9uYWxIZWlnaHQoaW1hZ2UsIHRhcmdldFdpZHRoKTtcbiAgICAgIHZhciBjYW52YXMgPSBfdGhpczIucmVzaXplSW1hZ2UoaW1hZ2UsIHRhcmdldFdpZHRoLCB0YXJnZXRIZWlnaHQpO1xuICAgICAgcmV0dXJuIF90aGlzMi5jYW52YXNUb0Jsb2IoY2FudmFzLCAnaW1hZ2UvcG5nJyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAoYmxvYikge1xuICAgICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2Ugc3VyZSB0aGUgaW1hZ2UgZG9lc27igJl0IGV4Y2VlZCBicm93c2VyL2RldmljZSBjYW52YXMgbGltaXRzLlxuICAgKiBGb3IgaW9zIHdpdGggMjU2IFJBTSBhbmQgaWVcbiAgICovXG5cblxuICBUaHVtYm5haWxHZW5lcmF0b3IucHJvdG90eXBlLnByb3RlY3QgPSBmdW5jdGlvbiBwcm90ZWN0KGltYWdlKSB7XG4gICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNjA4MTQ4My9tYXhpbXVtLXNpemUtb2YtYS1jYW52YXMtZWxlbWVudFxuXG4gICAgdmFyIHJhdGlvID0gaW1hZ2Uud2lkdGggLyBpbWFnZS5oZWlnaHQ7XG5cbiAgICB2YXIgbWF4U3F1YXJlID0gNTAwMDAwMDsgLy8gaW9zIG1heCBjYW52YXMgc3F1YXJlXG4gICAgdmFyIG1heFNpemUgPSA0MDk2OyAvLyBpZSBtYXggY2FudmFzIGRpbWVuc2lvbnNcblxuICAgIHZhciBtYXhXID0gTWF0aC5mbG9vcihNYXRoLnNxcnQobWF4U3F1YXJlICogcmF0aW8pKTtcbiAgICB2YXIgbWF4SCA9IE1hdGguZmxvb3IobWF4U3F1YXJlIC8gTWF0aC5zcXJ0KG1heFNxdWFyZSAqIHJhdGlvKSk7XG4gICAgaWYgKG1heFcgPiBtYXhTaXplKSB7XG4gICAgICBtYXhXID0gbWF4U2l6ZTtcbiAgICAgIG1heEggPSBNYXRoLnJvdW5kKG1heFcgLyByYXRpbyk7XG4gICAgfVxuICAgIGlmIChtYXhIID4gbWF4U2l6ZSkge1xuICAgICAgbWF4SCA9IG1heFNpemU7XG4gICAgICBtYXhXID0gTWF0aC5yb3VuZChyYXRpbyAqIG1heEgpO1xuICAgIH1cbiAgICBpZiAoaW1hZ2Uud2lkdGggPiBtYXhXKSB7XG4gICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICBjYW52YXMud2lkdGggPSBtYXhXO1xuICAgICAgY2FudmFzLmhlaWdodCA9IG1heEg7XG4gICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIG1heFcsIG1heEgpO1xuICAgICAgaW1hZ2Uuc3JjID0gJ2Fib3V0OmJsYW5rJztcbiAgICAgIGltYWdlLndpZHRoID0gMTtcbiAgICAgIGltYWdlLmhlaWdodCA9IDE7XG4gICAgICBpbWFnZSA9IGNhbnZhcztcbiAgICB9XG5cbiAgICByZXR1cm4gaW1hZ2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2l6ZSBhbiBpbWFnZSB0byB0aGUgdGFyZ2V0IGB3aWR0aGAgYW5kIGBoZWlnaHRgLlxuICAgKlxuICAgKiBSZXR1cm5zIGEgQ2FudmFzIHdpdGggdGhlIHJlc2l6ZWQgaW1hZ2Ugb24gaXQuXG4gICAqL1xuXG5cbiAgVGh1bWJuYWlsR2VuZXJhdG9yLnByb3RvdHlwZS5yZXNpemVJbWFnZSA9IGZ1bmN0aW9uIHJlc2l6ZUltYWdlKGltYWdlLCB0YXJnZXRXaWR0aCwgdGFyZ2V0SGVpZ2h0KSB7XG4gICAgLy8gUmVzaXppbmcgaW4gc3RlcHMgcmVmYWN0b3JlZCB0byB1c2UgYSBzb2x1dGlvbiBmcm9tXG4gICAgLy8gaHR0cHM6Ly9ibG9nLnVwbG9hZGNhcmUuY29tL2ltYWdlLXJlc2l6ZS1pbi1icm93c2Vycy1pcy1icm9rZW4tZTM4ZWVkMDhkZjAxXG5cbiAgICBpbWFnZSA9IHRoaXMucHJvdGVjdChpbWFnZSk7XG5cbiAgICAvLyBVc2UgdGhlIFBvbHlmaWxsIGZvciBNYXRoLmxvZzIoKSBzaW5jZSBJRSBkb2Vzbid0IHN1cHBvcnQgbG9nMlxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL01hdGgvbG9nMiNQb2x5ZmlsbFxuICAgIHZhciBzdGVwcyA9IE1hdGguY2VpbChNYXRoLmxvZyhpbWFnZS53aWR0aCAvIHRhcmdldFdpZHRoKSAqIE1hdGguTE9HMkUpO1xuICAgIGlmIChzdGVwcyA8IDEpIHtcbiAgICAgIHN0ZXBzID0gMTtcbiAgICB9XG4gICAgdmFyIHNXID0gdGFyZ2V0V2lkdGggKiBNYXRoLnBvdygyLCBzdGVwcyAtIDEpO1xuICAgIHZhciBzSCA9IHRhcmdldEhlaWdodCAqIE1hdGgucG93KDIsIHN0ZXBzIC0gMSk7XG4gICAgdmFyIHggPSAyO1xuXG4gICAgd2hpbGUgKHN0ZXBzLS0pIHtcbiAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgIGNhbnZhcy53aWR0aCA9IHNXO1xuICAgICAgY2FudmFzLmhlaWdodCA9IHNIO1xuICAgICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuZHJhd0ltYWdlKGltYWdlLCAwLCAwLCBzVywgc0gpO1xuICAgICAgaW1hZ2UgPSBjYW52YXM7XG5cbiAgICAgIHNXID0gTWF0aC5yb3VuZChzVyAvIHgpO1xuICAgICAgc0ggPSBNYXRoLnJvdW5kKHNIIC8geCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGltYWdlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTYXZlIGEgPGNhbnZhcz4gZWxlbWVudCdzIGNvbnRlbnQgdG8gYSBCbG9iIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2FudmFzXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuXG5cbiAgVGh1bWJuYWlsR2VuZXJhdG9yLnByb3RvdHlwZS5jYW52YXNUb0Jsb2IgPSBmdW5jdGlvbiBjYW52YXNUb0Jsb2IoY2FudmFzLCB0eXBlLCBxdWFsaXR5KSB7XG4gICAgaWYgKGNhbnZhcy50b0Jsb2IpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICBjYW52YXMudG9CbG9iKHJlc29sdmUsIHR5cGUsIHF1YWxpdHkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBkYXRhVVJJdG9CbG9iKGNhbnZhcy50b0RhdGFVUkwodHlwZSwgcXVhbGl0eSksIHt9KTtcbiAgICB9KTtcbiAgfTtcblxuICBUaHVtYm5haWxHZW5lcmF0b3IucHJvdG90eXBlLmdldFByb3BvcnRpb25hbEhlaWdodCA9IGZ1bmN0aW9uIGdldFByb3BvcnRpb25hbEhlaWdodChpbWcsIHdpZHRoKSB7XG4gICAgdmFyIGFzcGVjdCA9IGltZy53aWR0aCAvIGltZy5oZWlnaHQ7XG4gICAgcmV0dXJuIE1hdGgucm91bmQod2lkdGggLyBhc3BlY3QpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHByZXZpZXcgVVJMIGZvciBhIGZpbGUuXG4gICAqL1xuXG5cbiAgVGh1bWJuYWlsR2VuZXJhdG9yLnByb3RvdHlwZS5zZXRQcmV2aWV3VVJMID0gZnVuY3Rpb24gc2V0UHJldmlld1VSTChmaWxlSUQsIHByZXZpZXcpIHtcbiAgICB0aGlzLnVwcHkuc2V0RmlsZVN0YXRlKGZpbGVJRCwge1xuICAgICAgcHJldmlldzogcHJldmlld1xuICAgIH0pO1xuICB9O1xuXG4gIFRodW1ibmFpbEdlbmVyYXRvci5wcm90b3R5cGUuYWRkVG9RdWV1ZSA9IGZ1bmN0aW9uIGFkZFRvUXVldWUoaXRlbSkge1xuICAgIHRoaXMucXVldWUucHVzaChpdGVtKTtcbiAgICBpZiAodGhpcy5xdWV1ZVByb2Nlc3NpbmcgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgIH1cbiAgfTtcblxuICBUaHVtYm5haWxHZW5lcmF0b3IucHJvdG90eXBlLnByb2Nlc3NRdWV1ZSA9IGZ1bmN0aW9uIHByb2Nlc3NRdWV1ZSgpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHRoaXMucXVldWVQcm9jZXNzaW5nID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgY3VycmVudCA9IHRoaXMucXVldWUuc2hpZnQoKTtcbiAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RUaHVtYm5haWwoY3VycmVudCkuY2F0Y2goZnVuY3Rpb24gKGVycikge30pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgaGFuZGxlLWNhbGxiYWNrLWVyclxuICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMzLnByb2Nlc3NRdWV1ZSgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucXVldWVQcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIFRodW1ibmFpbEdlbmVyYXRvci5wcm90b3R5cGUucmVxdWVzdFRodW1ibmFpbCA9IGZ1bmN0aW9uIHJlcXVlc3RUaHVtYm5haWwoZmlsZSkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgaWYgKGlzUHJldmlld1N1cHBvcnRlZChmaWxlLnR5cGUpICYmICFmaWxlLmlzUmVtb3RlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaHVtYm5haWwoZmlsZSwgdGhpcy5vcHRzLnRodW1ibmFpbFdpZHRoKS50aGVuKGZ1bmN0aW9uIChwcmV2aWV3KSB7XG4gICAgICAgIF90aGlzNC5zZXRQcmV2aWV3VVJMKGZpbGUuaWQsIHByZXZpZXcpO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH07XG5cbiAgVGh1bWJuYWlsR2VuZXJhdG9yLnByb3RvdHlwZS5vblJlc3RvcmVkID0gZnVuY3Rpb24gb25SZXN0b3JlZCgpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIHZhciBmaWxlSURzID0gT2JqZWN0LmtleXModGhpcy51cHB5LmdldFN0YXRlKCkuZmlsZXMpO1xuICAgIGZpbGVJRHMuZm9yRWFjaChmdW5jdGlvbiAoZmlsZUlEKSB7XG4gICAgICB2YXIgZmlsZSA9IF90aGlzNS51cHB5LmdldEZpbGUoZmlsZUlEKTtcbiAgICAgIGlmICghZmlsZS5pc1Jlc3RvcmVkKSByZXR1cm47XG4gICAgICAvLyBPbmx5IGFkZCBibG9iIFVSTHM7IHRoZXkgYXJlIGxpa2VseSBpbnZhbGlkIGFmdGVyIGJlaW5nIHJlc3RvcmVkLlxuICAgICAgaWYgKCFmaWxlLnByZXZpZXcgfHwgL15ibG9iOi8udGVzdChmaWxlLnByZXZpZXcpKSB7XG4gICAgICAgIF90aGlzNS5hZGRUb1F1ZXVlKGZpbGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIFRodW1ibmFpbEdlbmVyYXRvci5wcm90b3R5cGUuaW5zdGFsbCA9IGZ1bmN0aW9uIGluc3RhbGwoKSB7XG4gICAgdGhpcy51cHB5Lm9uKCdmaWxlLWFkZGVkJywgdGhpcy5hZGRUb1F1ZXVlKTtcbiAgICB0aGlzLnVwcHkub24oJ3Jlc3RvcmVkJywgdGhpcy5vblJlc3RvcmVkKTtcbiAgfTtcblxuICBUaHVtYm5haWxHZW5lcmF0b3IucHJvdG90eXBlLnVuaW5zdGFsbCA9IGZ1bmN0aW9uIHVuaW5zdGFsbCgpIHtcbiAgICB0aGlzLnVwcHkub2ZmKCdmaWxlLWFkZGVkJywgdGhpcy5hZGRUb1F1ZXVlKTtcbiAgICB0aGlzLnVwcHkub2ZmKCdyZXN0b3JlZCcsIHRoaXMub25SZXN0b3JlZCk7XG4gIH07XG5cbiAgcmV0dXJuIFRodW1ibmFpbEdlbmVyYXRvcjtcbn0oUGx1Z2luKTsiLCJ2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ0B1cHB5L2NvcmUnKSxcbiAgICBQbHVnaW4gPSBfcmVxdWlyZS5QbHVnaW47XG5cbnZhciB0dXMgPSByZXF1aXJlKCd0dXMtanMtY2xpZW50Jyk7XG5cbnZhciBfcmVxdWlyZTIgPSByZXF1aXJlKCdAdXBweS9zZXJ2ZXItdXRpbHMnKSxcbiAgICBQcm92aWRlciA9IF9yZXF1aXJlMi5Qcm92aWRlcixcbiAgICBSZXF1ZXN0Q2xpZW50ID0gX3JlcXVpcmUyLlJlcXVlc3RDbGllbnQsXG4gICAgU29ja2V0ID0gX3JlcXVpcmUyLlNvY2tldDtcblxudmFyIGVtaXRTb2NrZXRQcm9ncmVzcyA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi9lbWl0U29ja2V0UHJvZ3Jlc3MnKTtcbnZhciBnZXRTb2NrZXRIb3N0ID0gcmVxdWlyZSgnQHVwcHkvdXRpbHMvbGliL2dldFNvY2tldEhvc3QnKTtcbnZhciBzZXR0bGUgPSByZXF1aXJlKCdAdXBweS91dGlscy9saWIvc2V0dGxlJyk7XG52YXIgbGltaXRQcm9taXNlcyA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi9saW1pdFByb21pc2VzJyk7XG5cbi8vIEV4dHJhY3RlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS90dXMvdHVzLWpzLWNsaWVudC9ibG9iL21hc3Rlci9saWIvdXBsb2FkLmpzI0wxM1xuLy8gZXhjZXB0ZWQgd2UgcmVtb3ZlZCAnZmluZ2VycHJpbnQnIGtleSB0byBhdm9pZCBhZGRpbmcgbW9yZSBkZXBlbmRlbmNpZXNcbnZhciB0dXNEZWZhdWx0T3B0aW9ucyA9IHtcbiAgZW5kcG9pbnQ6ICcnLFxuICByZXN1bWU6IHRydWUsXG4gIG9uUHJvZ3Jlc3M6IG51bGwsXG4gIG9uQ2h1bmtDb21wbGV0ZTogbnVsbCxcbiAgb25TdWNjZXNzOiBudWxsLFxuICBvbkVycm9yOiBudWxsLFxuICBoZWFkZXJzOiB7fSxcbiAgY2h1bmtTaXplOiBJbmZpbml0eSxcbiAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZSxcbiAgdXBsb2FkVXJsOiBudWxsLFxuICB1cGxvYWRTaXplOiBudWxsLFxuICBvdmVycmlkZVBhdGNoTWV0aG9kOiBmYWxzZSxcbiAgcmV0cnlEZWxheXM6IG51bGxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgd3JhcHBlciBhcm91bmQgYW4gZXZlbnQgZW1pdHRlciB3aXRoIGEgYHJlbW92ZWAgbWV0aG9kIHRvIHJlbW92ZVxuICAgKiBhbGwgZXZlbnRzIHRoYXQgd2VyZSBhZGRlZCB1c2luZyB0aGUgd3JhcHBlZCBlbWl0dGVyLlxuICAgKi9cbn07ZnVuY3Rpb24gY3JlYXRlRXZlbnRUcmFja2VyKGVtaXR0ZXIpIHtcbiAgdmFyIGV2ZW50cyA9IFtdO1xuICByZXR1cm4ge1xuICAgIG9uOiBmdW5jdGlvbiBvbihldmVudCwgZm4pIHtcbiAgICAgIGV2ZW50cy5wdXNoKFtldmVudCwgZm5dKTtcbiAgICAgIHJldHVybiBlbWl0dGVyLm9uKGV2ZW50LCBmbik7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIGV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgIHZhciBldmVudCA9IF9yZWZbMF0sXG4gICAgICAgICAgICBmbiA9IF9yZWZbMV07XG5cbiAgICAgICAgZW1pdHRlci5vZmYoZXZlbnQsIGZuKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBUdXMgcmVzdW1hYmxlIGZpbGUgdXBsb2FkZXJcbiAqXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKF9QbHVnaW4pIHtcbiAgX2luaGVyaXRzKFR1cywgX1BsdWdpbik7XG5cbiAgZnVuY3Rpb24gVHVzKHVwcHksIG9wdHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHVzKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9QbHVnaW4uY2FsbCh0aGlzLCB1cHB5LCBvcHRzKSk7XG5cbiAgICBfdGhpcy50eXBlID0gJ3VwbG9hZGVyJztcbiAgICBfdGhpcy5pZCA9ICdUdXMnO1xuICAgIF90aGlzLnRpdGxlID0gJ1R1cyc7XG5cbiAgICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zXG4gICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgcmVzdW1lOiB0cnVlLFxuICAgICAgYXV0b1JldHJ5OiB0cnVlLFxuICAgICAgdXNlRmFzdFJlbW90ZVJldHJ5OiB0cnVlLFxuICAgICAgbGltaXQ6IDAsXG4gICAgICByZXRyeURlbGF5czogWzAsIDEwMDAsIDMwMDAsIDUwMDBdXG5cbiAgICAgIC8vIG1lcmdlIGRlZmF1bHQgb3B0aW9ucyB3aXRoIHRoZSBvbmVzIHNldCBieSB1c2VyXG4gICAgfTtfdGhpcy5vcHRzID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zLCBvcHRzKTtcblxuICAgIC8vIFNpbXVsdGFuZW91cyB1cGxvYWQgbGltaXRpbmcgaXMgc2hhcmVkIGFjcm9zcyBhbGwgdXBsb2FkcyB3aXRoIHRoaXMgcGx1Z2luLlxuICAgIGlmICh0eXBlb2YgX3RoaXMub3B0cy5saW1pdCA9PT0gJ251bWJlcicgJiYgX3RoaXMub3B0cy5saW1pdCAhPT0gMCkge1xuICAgICAgX3RoaXMubGltaXRVcGxvYWRzID0gbGltaXRQcm9taXNlcyhfdGhpcy5vcHRzLmxpbWl0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgX3RoaXMubGltaXRVcGxvYWRzID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgX3RoaXMudXBsb2FkZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBfdGhpcy51cGxvYWRlckV2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgX3RoaXMudXBsb2FkZXJTb2NrZXRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIF90aGlzLmhhbmRsZVJlc2V0UHJvZ3Jlc3MgPSBfdGhpcy5oYW5kbGVSZXNldFByb2dyZXNzLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLmhhbmRsZVVwbG9hZCA9IF90aGlzLmhhbmRsZVVwbG9hZC5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBUdXMucHJvdG90eXBlLmhhbmRsZVJlc2V0UHJvZ3Jlc3MgPSBmdW5jdGlvbiBoYW5kbGVSZXNldFByb2dyZXNzKCkge1xuICAgIHZhciBmaWxlcyA9IF9leHRlbmRzKHt9LCB0aGlzLnVwcHkuZ2V0U3RhdGUoKS5maWxlcyk7XG4gICAgT2JqZWN0LmtleXMoZmlsZXMpLmZvckVhY2goZnVuY3Rpb24gKGZpbGVJRCkge1xuICAgICAgLy8gT25seSBjbG9uZSB0aGUgZmlsZSBvYmplY3QgaWYgaXQgaGFzIGEgVHVzIGB1cGxvYWRVcmxgIGF0dGFjaGVkLlxuICAgICAgaWYgKGZpbGVzW2ZpbGVJRF0udHVzICYmIGZpbGVzW2ZpbGVJRF0udHVzLnVwbG9hZFVybCkge1xuICAgICAgICB2YXIgdHVzU3RhdGUgPSBfZXh0ZW5kcyh7fSwgZmlsZXNbZmlsZUlEXS50dXMpO1xuICAgICAgICBkZWxldGUgdHVzU3RhdGUudXBsb2FkVXJsO1xuICAgICAgICBmaWxlc1tmaWxlSURdID0gX2V4dGVuZHMoe30sIGZpbGVzW2ZpbGVJRF0sIHsgdHVzOiB0dXNTdGF0ZSB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMudXBweS5zZXRTdGF0ZSh7IGZpbGVzOiBmaWxlcyB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYW4gdXAgYWxsIHJlZmVyZW5jZXMgZm9yIGEgZmlsZSdzIHVwbG9hZDogdGhlIHR1cy5VcGxvYWQgaW5zdGFuY2UsXG4gICAqIGFueSBldmVudHMgcmVsYXRlZCB0byB0aGUgZmlsZSwgYW5kIHRoZSB1cHB5LXNlcnZlciBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICovXG5cblxuICBUdXMucHJvdG90eXBlLnJlc2V0VXBsb2FkZXJSZWZlcmVuY2VzID0gZnVuY3Rpb24gcmVzZXRVcGxvYWRlclJlZmVyZW5jZXMoZmlsZUlEKSB7XG4gICAgaWYgKHRoaXMudXBsb2FkZXJzW2ZpbGVJRF0pIHtcbiAgICAgIHRoaXMudXBsb2FkZXJzW2ZpbGVJRF0uYWJvcnQoKTtcbiAgICAgIHRoaXMudXBsb2FkZXJzW2ZpbGVJRF0gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy51cGxvYWRlckV2ZW50c1tmaWxlSURdKSB7XG4gICAgICB0aGlzLnVwbG9hZGVyRXZlbnRzW2ZpbGVJRF0ucmVtb3ZlKCk7XG4gICAgICB0aGlzLnVwbG9hZGVyRXZlbnRzW2ZpbGVJRF0gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy51cGxvYWRlclNvY2tldHNbZmlsZUlEXSkge1xuICAgICAgdGhpcy51cGxvYWRlclNvY2tldHNbZmlsZUlEXS5jbG9zZSgpO1xuICAgICAgdGhpcy51cGxvYWRlclNvY2tldHNbZmlsZUlEXSA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgVHVzIHVwbG9hZFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZmlsZSBmb3IgdXNlIHdpdGggdXBsb2FkXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gY3VycmVudCBmaWxlIGluIGEgcXVldWVcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSB0b3RhbCBudW1iZXIgb2YgZmlsZXMgaW4gYSBxdWV1ZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICovXG5cblxuICBUdXMucHJvdG90eXBlLnVwbG9hZCA9IGZ1bmN0aW9uIHVwbG9hZChmaWxlLCBjdXJyZW50LCB0b3RhbCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdGhpcy5yZXNldFVwbG9hZGVyUmVmZXJlbmNlcyhmaWxlLmlkKTtcblxuICAgIC8vIENyZWF0ZSBhIG5ldyB0dXMgdXBsb2FkXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBvcHRzVHVzID0gX2V4dGVuZHMoe30sIHR1c0RlZmF1bHRPcHRpb25zLCBfdGhpczIub3B0cyxcbiAgICAgIC8vIEluc3RhbGwgZmlsZS1zcGVjaWZpYyB1cGxvYWQgb3ZlcnJpZGVzLlxuICAgICAgZmlsZS50dXMgfHwge30pO1xuXG4gICAgICBvcHRzVHVzLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIF90aGlzMi51cHB5LmxvZyhlcnIpO1xuICAgICAgICBfdGhpczIudXBweS5lbWl0KCd1cGxvYWQtZXJyb3InLCBmaWxlLCBlcnIpO1xuICAgICAgICBlcnIubWVzc2FnZSA9ICdGYWlsZWQgYmVjYXVzZTogJyArIGVyci5tZXNzYWdlO1xuXG4gICAgICAgIF90aGlzMi5yZXNldFVwbG9hZGVyUmVmZXJlbmNlcyhmaWxlLmlkKTtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9O1xuXG4gICAgICBvcHRzVHVzLm9uUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoYnl0ZXNVcGxvYWRlZCwgYnl0ZXNUb3RhbCkge1xuICAgICAgICBfdGhpczIub25SZWNlaXZlVXBsb2FkVXJsKGZpbGUsIHVwbG9hZC51cmwpO1xuICAgICAgICBfdGhpczIudXBweS5lbWl0KCd1cGxvYWQtcHJvZ3Jlc3MnLCBmaWxlLCB7XG4gICAgICAgICAgdXBsb2FkZXI6IF90aGlzMixcbiAgICAgICAgICBieXRlc1VwbG9hZGVkOiBieXRlc1VwbG9hZGVkLFxuICAgICAgICAgIGJ5dGVzVG90YWw6IGJ5dGVzVG90YWxcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBvcHRzVHVzLm9uU3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLnVwcHkuZW1pdCgndXBsb2FkLXN1Y2Nlc3MnLCBmaWxlLCB1cGxvYWQsIHVwbG9hZC51cmwpO1xuXG4gICAgICAgIGlmICh1cGxvYWQudXJsKSB7XG4gICAgICAgICAgX3RoaXMyLnVwcHkubG9nKCdEb3dubG9hZCAnICsgdXBsb2FkLmZpbGUubmFtZSArICcgZnJvbSAnICsgdXBsb2FkLnVybCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIucmVzZXRVcGxvYWRlclJlZmVyZW5jZXMoZmlsZS5pZCk7XG4gICAgICAgIHJlc29sdmUodXBsb2FkKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBjb3B5UHJvcCA9IGZ1bmN0aW9uIGNvcHlQcm9wKG9iaiwgc3JjUHJvcCwgZGVzdFByb3ApIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHNyY1Byb3ApICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBkZXN0UHJvcCkpIHtcbiAgICAgICAgICBvYmpbZGVzdFByb3BdID0gb2JqW3NyY1Byb3BdO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyB0dXNkIHVzZXMgbWV0YWRhdGEgZmllbGRzICdmaWxldHlwZScgYW5kICdmaWxlbmFtZSdcbiAgICAgIHZhciBtZXRhID0gX2V4dGVuZHMoe30sIGZpbGUubWV0YSk7XG4gICAgICBjb3B5UHJvcChtZXRhLCAndHlwZScsICdmaWxldHlwZScpO1xuICAgICAgY29weVByb3AobWV0YSwgJ25hbWUnLCAnZmlsZW5hbWUnKTtcbiAgICAgIG9wdHNUdXMubWV0YWRhdGEgPSBtZXRhO1xuXG4gICAgICB2YXIgdXBsb2FkID0gbmV3IHR1cy5VcGxvYWQoZmlsZS5kYXRhLCBvcHRzVHVzKTtcbiAgICAgIF90aGlzMi51cGxvYWRlcnNbZmlsZS5pZF0gPSB1cGxvYWQ7XG4gICAgICBfdGhpczIudXBsb2FkZXJFdmVudHNbZmlsZS5pZF0gPSBjcmVhdGVFdmVudFRyYWNrZXIoX3RoaXMyLnVwcHkpO1xuXG4gICAgICBfdGhpczIub25GaWxlUmVtb3ZlKGZpbGUuaWQsIGZ1bmN0aW9uICh0YXJnZXRGaWxlSUQpIHtcbiAgICAgICAgX3RoaXMyLnJlc2V0VXBsb2FkZXJSZWZlcmVuY2VzKGZpbGUuaWQpO1xuICAgICAgICByZXNvbHZlKCd1cGxvYWQgJyArIHRhcmdldEZpbGVJRCArICcgd2FzIHJlbW92ZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpczIub25QYXVzZShmaWxlLmlkLCBmdW5jdGlvbiAoaXNQYXVzZWQpIHtcbiAgICAgICAgaWYgKGlzUGF1c2VkKSB7XG4gICAgICAgICAgdXBsb2FkLmFib3J0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBsb2FkLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBfdGhpczIub25QYXVzZUFsbChmaWxlLmlkLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVwbG9hZC5hYm9ydCgpO1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzMi5vbkNhbmNlbEFsbChmaWxlLmlkLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMi5yZXNldFVwbG9hZGVyUmVmZXJlbmNlcyhmaWxlLmlkKTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpczIub25SZXN1bWVBbGwoZmlsZS5pZCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZmlsZS5lcnJvcikge1xuICAgICAgICAgIHVwbG9hZC5hYm9ydCgpO1xuICAgICAgICB9XG4gICAgICAgIHVwbG9hZC5zdGFydCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghZmlsZS5pc1BhdXNlZCkge1xuICAgICAgICB1cGxvYWQuc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBUdXMucHJvdG90eXBlLnVwbG9hZFJlbW90ZSA9IGZ1bmN0aW9uIHVwbG9hZFJlbW90ZShmaWxlLCBjdXJyZW50LCB0b3RhbCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdGhpcy5yZXNldFVwbG9hZGVyUmVmZXJlbmNlcyhmaWxlLmlkKTtcblxuICAgIHZhciBvcHRzID0gX2V4dGVuZHMoe30sIHRoaXMub3B0cyxcbiAgICAvLyBJbnN0YWxsIGZpbGUtc3BlY2lmaWMgdXBsb2FkIG92ZXJyaWRlcy5cbiAgICBmaWxlLnR1cyB8fCB7fSk7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgX3RoaXMzLnVwcHkubG9nKGZpbGUucmVtb3RlLnVybCk7XG4gICAgICBpZiAoZmlsZS5zZXJ2ZXJUb2tlbikge1xuICAgICAgICByZXR1cm4gX3RoaXMzLmNvbm5lY3RUb1NlcnZlclNvY2tldChmaWxlKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9KS5jYXRjaChyZWplY3QpO1xuICAgICAgfVxuXG4gICAgICBfdGhpczMudXBweS5lbWl0KCd1cGxvYWQtc3RhcnRlZCcsIGZpbGUpO1xuICAgICAgdmFyIENsaWVudCA9IGZpbGUucmVtb3RlLnByb3ZpZGVyT3B0aW9ucy5wcm92aWRlciA/IFByb3ZpZGVyIDogUmVxdWVzdENsaWVudDtcbiAgICAgIHZhciBjbGllbnQgPSBuZXcgQ2xpZW50KF90aGlzMy51cHB5LCBmaWxlLnJlbW90ZS5wcm92aWRlck9wdGlvbnMpO1xuICAgICAgY2xpZW50LnBvc3QoZmlsZS5yZW1vdGUudXJsLCBfZXh0ZW5kcyh7fSwgZmlsZS5yZW1vdGUuYm9keSwge1xuICAgICAgICBlbmRwb2ludDogb3B0cy5lbmRwb2ludCxcbiAgICAgICAgdXBsb2FkVXJsOiBvcHRzLnVwbG9hZFVybCxcbiAgICAgICAgcHJvdG9jb2w6ICd0dXMnLFxuICAgICAgICBzaXplOiBmaWxlLmRhdGEuc2l6ZSxcbiAgICAgICAgbWV0YWRhdGE6IGZpbGUubWV0YVxuICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBfdGhpczMudXBweS5zZXRGaWxlU3RhdGUoZmlsZS5pZCwgeyBzZXJ2ZXJUb2tlbjogcmVzLnRva2VuIH0pO1xuICAgICAgICBmaWxlID0gX3RoaXMzLnVwcHkuZ2V0RmlsZShmaWxlLmlkKTtcbiAgICAgICAgcmV0dXJuIGZpbGU7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICAgIHJldHVybiBfdGhpczMuY29ubmVjdFRvU2VydmVyU29ja2V0KGZpbGUpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihlcnIpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIFR1cy5wcm90b3R5cGUuY29ubmVjdFRvU2VydmVyU29ja2V0ID0gZnVuY3Rpb24gY29ubmVjdFRvU2VydmVyU29ja2V0KGZpbGUpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgdG9rZW4gPSBmaWxlLnNlcnZlclRva2VuO1xuICAgICAgdmFyIGhvc3QgPSBnZXRTb2NrZXRIb3N0KGZpbGUucmVtb3RlLnNlcnZlclVybCk7XG4gICAgICB2YXIgc29ja2V0ID0gbmV3IFNvY2tldCh7IHRhcmdldDogaG9zdCArICcvYXBpLycgKyB0b2tlbiB9KTtcbiAgICAgIF90aGlzNC51cGxvYWRlclNvY2tldHNbZmlsZS5pZF0gPSBzb2NrZXQ7XG4gICAgICBfdGhpczQudXBsb2FkZXJFdmVudHNbZmlsZS5pZF0gPSBjcmVhdGVFdmVudFRyYWNrZXIoX3RoaXM0LnVwcHkpO1xuXG4gICAgICBfdGhpczQub25GaWxlUmVtb3ZlKGZpbGUuaWQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc29ja2V0LnNlbmQoJ3BhdXNlJywge30pO1xuICAgICAgICByZXNvbHZlKCd1cGxvYWQgJyArIGZpbGUuaWQgKyAnIHdhcyByZW1vdmVkJyk7XG4gICAgICB9KTtcblxuICAgICAgX3RoaXM0Lm9uUGF1c2UoZmlsZS5pZCwgZnVuY3Rpb24gKGlzUGF1c2VkKSB7XG4gICAgICAgIGlzUGF1c2VkID8gc29ja2V0LnNlbmQoJ3BhdXNlJywge30pIDogc29ja2V0LnNlbmQoJ3Jlc3VtZScsIHt9KTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpczQub25QYXVzZUFsbChmaWxlLmlkLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzb2NrZXQuc2VuZCgncGF1c2UnLCB7fSk7XG4gICAgICB9KTtcblxuICAgICAgX3RoaXM0Lm9uQ2FuY2VsQWxsKGZpbGUuaWQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNvY2tldC5zZW5kKCdwYXVzZScsIHt9KTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpczQub25SZXN1bWVBbGwoZmlsZS5pZCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZmlsZS5lcnJvcikge1xuICAgICAgICAgIHNvY2tldC5zZW5kKCdwYXVzZScsIHt9KTtcbiAgICAgICAgfVxuICAgICAgICBzb2NrZXQuc2VuZCgncmVzdW1lJywge30pO1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzNC5vblJldHJ5KGZpbGUuaWQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc29ja2V0LnNlbmQoJ3BhdXNlJywge30pO1xuICAgICAgICBzb2NrZXQuc2VuZCgncmVzdW1lJywge30pO1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzNC5vblJldHJ5QWxsKGZpbGUuaWQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc29ja2V0LnNlbmQoJ3BhdXNlJywge30pO1xuICAgICAgICBzb2NrZXQuc2VuZCgncmVzdW1lJywge30pO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChmaWxlLmlzUGF1c2VkKSB7XG4gICAgICAgIHNvY2tldC5zZW5kKCdwYXVzZScsIHt9KTtcbiAgICAgIH1cblxuICAgICAgc29ja2V0Lm9uKCdwcm9ncmVzcycsIGZ1bmN0aW9uIChwcm9ncmVzc0RhdGEpIHtcbiAgICAgICAgcmV0dXJuIGVtaXRTb2NrZXRQcm9ncmVzcyhfdGhpczQsIHByb2dyZXNzRGF0YSwgZmlsZSk7XG4gICAgICB9KTtcblxuICAgICAgc29ja2V0Lm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlcnJEYXRhKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gZXJyRGF0YS5lcnJvci5tZXNzYWdlO1xuXG4gICAgICAgIHZhciBlcnJvciA9IF9leHRlbmRzKG5ldyBFcnJvcihtZXNzYWdlKSwgeyBjYXVzZTogZXJyRGF0YS5lcnJvciB9KTtcblxuICAgICAgICAvLyBJZiB0aGUgcmVtb3RlIHJldHJ5IG9wdGltaXNhdGlvbiBzaG91bGQgbm90IGJlIHVzZWQsXG4gICAgICAgIC8vIGNsb3NlIHRoZSBzb2NrZXTigJR0aGlzIHdpbGwgdGVsbCB1cHB5LXNlcnZlciB0byBjbGVhciBzdGF0ZSBhbmQgZGVsZXRlIHRoZSBmaWxlLlxuICAgICAgICBpZiAoIV90aGlzNC5vcHRzLnVzZUZhc3RSZW1vdGVSZXRyeSkge1xuICAgICAgICAgIF90aGlzNC5yZXNldFVwbG9hZGVyUmVmZXJlbmNlcyhmaWxlLmlkKTtcbiAgICAgICAgICAvLyBSZW1vdmUgdGhlIHNlcnZlclRva2VuIHNvIHRoYXQgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZCBmb3IgdGhlIHJldHJ5LlxuICAgICAgICAgIF90aGlzNC51cHB5LnNldEZpbGVTdGF0ZShmaWxlLmlkLCB7XG4gICAgICAgICAgICBzZXJ2ZXJUb2tlbjogbnVsbFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXM0LnVwcHkuZW1pdCgndXBsb2FkLWVycm9yJywgZmlsZSwgZXJyb3IpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG5cbiAgICAgIHNvY2tldC5vbignc3VjY2VzcycsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIF90aGlzNC51cHB5LmVtaXQoJ3VwbG9hZC1zdWNjZXNzJywgZmlsZSwgZGF0YSwgZGF0YS51cmwpO1xuICAgICAgICBfdGhpczQucmVzZXRVcGxvYWRlclJlZmVyZW5jZXMoZmlsZS5pZCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIFR1cy5wcm90b3R5cGUub25SZWNlaXZlVXBsb2FkVXJsID0gZnVuY3Rpb24gb25SZWNlaXZlVXBsb2FkVXJsKGZpbGUsIHVwbG9hZFVSTCkge1xuICAgIHZhciBjdXJyZW50RmlsZSA9IHRoaXMudXBweS5nZXRGaWxlKGZpbGUuaWQpO1xuICAgIGlmICghY3VycmVudEZpbGUpIHJldHVybjtcbiAgICAvLyBPbmx5IGRvIHRoZSB1cGRhdGUgaWYgd2UgZGlkbid0IGhhdmUgYW4gdXBsb2FkIFVSTCB5ZXQsXG4gICAgLy8gb3IgcmVzdW1lOiBmYWxzZSBpbiBvcHRpb25zXG4gICAgaWYgKCghY3VycmVudEZpbGUudHVzIHx8IGN1cnJlbnRGaWxlLnR1cy51cGxvYWRVcmwgIT09IHVwbG9hZFVSTCkgJiYgdGhpcy5vcHRzLnJlc3VtZSkge1xuICAgICAgdGhpcy51cHB5LmxvZygnW1R1c10gU3RvcmluZyB1cGxvYWQgdXJsJyk7XG4gICAgICB0aGlzLnVwcHkuc2V0RmlsZVN0YXRlKGN1cnJlbnRGaWxlLmlkLCB7XG4gICAgICAgIHR1czogX2V4dGVuZHMoe30sIGN1cnJlbnRGaWxlLnR1cywge1xuICAgICAgICAgIHVwbG9hZFVybDogdXBsb2FkVVJMXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgVHVzLnByb3RvdHlwZS5vbkZpbGVSZW1vdmUgPSBmdW5jdGlvbiBvbkZpbGVSZW1vdmUoZmlsZUlELCBjYikge1xuICAgIHRoaXMudXBsb2FkZXJFdmVudHNbZmlsZUlEXS5vbignZmlsZS1yZW1vdmVkJywgZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIGlmIChmaWxlSUQgPT09IGZpbGUuaWQpIGNiKGZpbGUuaWQpO1xuICAgIH0pO1xuICB9O1xuXG4gIFR1cy5wcm90b3R5cGUub25QYXVzZSA9IGZ1bmN0aW9uIG9uUGF1c2UoZmlsZUlELCBjYikge1xuICAgIHRoaXMudXBsb2FkZXJFdmVudHNbZmlsZUlEXS5vbigndXBsb2FkLXBhdXNlJywgZnVuY3Rpb24gKHRhcmdldEZpbGVJRCwgaXNQYXVzZWQpIHtcbiAgICAgIGlmIChmaWxlSUQgPT09IHRhcmdldEZpbGVJRCkge1xuICAgICAgICAvLyBjb25zdCBpc1BhdXNlZCA9IHRoaXMudXBweS5wYXVzZVJlc3VtZShmaWxlSUQpXG4gICAgICAgIGNiKGlzUGF1c2VkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBUdXMucHJvdG90eXBlLm9uUmV0cnkgPSBmdW5jdGlvbiBvblJldHJ5KGZpbGVJRCwgY2IpIHtcbiAgICB0aGlzLnVwbG9hZGVyRXZlbnRzW2ZpbGVJRF0ub24oJ3VwbG9hZC1yZXRyeScsIGZ1bmN0aW9uICh0YXJnZXRGaWxlSUQpIHtcbiAgICAgIGlmIChmaWxlSUQgPT09IHRhcmdldEZpbGVJRCkge1xuICAgICAgICBjYigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIFR1cy5wcm90b3R5cGUub25SZXRyeUFsbCA9IGZ1bmN0aW9uIG9uUmV0cnlBbGwoZmlsZUlELCBjYikge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgdGhpcy51cGxvYWRlckV2ZW50c1tmaWxlSURdLm9uKCdyZXRyeS1hbGwnLCBmdW5jdGlvbiAoZmlsZXNUb1JldHJ5KSB7XG4gICAgICBpZiAoIV90aGlzNS51cHB5LmdldEZpbGUoZmlsZUlEKSkgcmV0dXJuO1xuICAgICAgY2IoKTtcbiAgICB9KTtcbiAgfTtcblxuICBUdXMucHJvdG90eXBlLm9uUGF1c2VBbGwgPSBmdW5jdGlvbiBvblBhdXNlQWxsKGZpbGVJRCwgY2IpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIHRoaXMudXBsb2FkZXJFdmVudHNbZmlsZUlEXS5vbigncGF1c2UtYWxsJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFfdGhpczYudXBweS5nZXRGaWxlKGZpbGVJRCkpIHJldHVybjtcbiAgICAgIGNiKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgVHVzLnByb3RvdHlwZS5vbkNhbmNlbEFsbCA9IGZ1bmN0aW9uIG9uQ2FuY2VsQWxsKGZpbGVJRCwgY2IpIHtcbiAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgIHRoaXMudXBsb2FkZXJFdmVudHNbZmlsZUlEXS5vbignY2FuY2VsLWFsbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghX3RoaXM3LnVwcHkuZ2V0RmlsZShmaWxlSUQpKSByZXR1cm47XG4gICAgICBjYigpO1xuICAgIH0pO1xuICB9O1xuXG4gIFR1cy5wcm90b3R5cGUub25SZXN1bWVBbGwgPSBmdW5jdGlvbiBvblJlc3VtZUFsbChmaWxlSUQsIGNiKSB7XG4gICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICB0aGlzLnVwbG9hZGVyRXZlbnRzW2ZpbGVJRF0ub24oJ3Jlc3VtZS1hbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIV90aGlzOC51cHB5LmdldEZpbGUoZmlsZUlEKSkgcmV0dXJuO1xuICAgICAgY2IoKTtcbiAgICB9KTtcbiAgfTtcblxuICBUdXMucHJvdG90eXBlLnVwbG9hZEZpbGVzID0gZnVuY3Rpb24gdXBsb2FkRmlsZXMoZmlsZXMpIHtcbiAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgIHZhciBhY3Rpb25zID0gZmlsZXMubWFwKGZ1bmN0aW9uIChmaWxlLCBpKSB7XG4gICAgICB2YXIgY3VycmVudCA9IHBhcnNlSW50KGksIDEwKSArIDE7XG4gICAgICB2YXIgdG90YWwgPSBmaWxlcy5sZW5ndGg7XG5cbiAgICAgIGlmIChmaWxlLmVycm9yKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihmaWxlLmVycm9yKSk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2UgaWYgKGZpbGUuaXNSZW1vdGUpIHtcbiAgICAgICAgLy8gV2UgZW1pdCB1cGxvYWQtc3RhcnRlZCBoZXJlLCBzbyB0aGF0IGl0J3MgYWxzbyBlbWl0dGVkIGZvciBmaWxlc1xuICAgICAgICAvLyB0aGF0IGhhdmUgdG8gd2FpdCBkdWUgdG8gdGhlIGBsaW1pdGAgb3B0aW9uLlxuICAgICAgICBfdGhpczkudXBweS5lbWl0KCd1cGxvYWQtc3RhcnRlZCcsIGZpbGUpO1xuICAgICAgICByZXR1cm4gX3RoaXM5LnVwbG9hZFJlbW90ZS5iaW5kKF90aGlzOSwgZmlsZSwgY3VycmVudCwgdG90YWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXM5LnVwcHkuZW1pdCgndXBsb2FkLXN0YXJ0ZWQnLCBmaWxlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzOS51cGxvYWQuYmluZChfdGhpczksIGZpbGUsIGN1cnJlbnQsIHRvdGFsKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBwcm9taXNlcyA9IGFjdGlvbnMubWFwKGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgIHZhciBsaW1pdGVkQWN0aW9uID0gX3RoaXM5LmxpbWl0VXBsb2FkcyhhY3Rpb24pO1xuICAgICAgcmV0dXJuIGxpbWl0ZWRBY3Rpb24oKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzZXR0bGUocHJvbWlzZXMpO1xuICB9O1xuXG4gIFR1cy5wcm90b3R5cGUuaGFuZGxlVXBsb2FkID0gZnVuY3Rpb24gaGFuZGxlVXBsb2FkKGZpbGVJRHMpIHtcbiAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICBpZiAoZmlsZUlEcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMudXBweS5sb2coJ1R1czogbm8gZmlsZXMgdG8gdXBsb2FkIScpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHRoaXMudXBweS5sb2coJ1R1cyBpcyB1cGxvYWRpbmcuLi4nKTtcbiAgICB2YXIgZmlsZXNUb1VwbG9hZCA9IGZpbGVJRHMubWFwKGZ1bmN0aW9uIChmaWxlSUQpIHtcbiAgICAgIHJldHVybiBfdGhpczEwLnVwcHkuZ2V0RmlsZShmaWxlSUQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMudXBsb2FkRmlsZXMoZmlsZXNUb1VwbG9hZCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcbiAgfTtcblxuICBUdXMucHJvdG90eXBlLmluc3RhbGwgPSBmdW5jdGlvbiBpbnN0YWxsKCkge1xuICAgIHRoaXMudXBweS5zZXRTdGF0ZSh7XG4gICAgICBjYXBhYmlsaXRpZXM6IF9leHRlbmRzKHt9LCB0aGlzLnVwcHkuZ2V0U3RhdGUoKS5jYXBhYmlsaXRpZXMsIHtcbiAgICAgICAgcmVzdW1hYmxlVXBsb2FkczogdHJ1ZVxuICAgICAgfSlcbiAgICB9KTtcbiAgICB0aGlzLnVwcHkuYWRkVXBsb2FkZXIodGhpcy5oYW5kbGVVcGxvYWQpO1xuXG4gICAgdGhpcy51cHB5Lm9uKCdyZXNldC1wcm9ncmVzcycsIHRoaXMuaGFuZGxlUmVzZXRQcm9ncmVzcyk7XG5cbiAgICBpZiAodGhpcy5vcHRzLmF1dG9SZXRyeSkge1xuICAgICAgdGhpcy51cHB5Lm9uKCdiYWNrLW9ubGluZScsIHRoaXMudXBweS5yZXRyeUFsbCk7XG4gICAgfVxuICB9O1xuXG4gIFR1cy5wcm90b3R5cGUudW5pbnN0YWxsID0gZnVuY3Rpb24gdW5pbnN0YWxsKCkge1xuICAgIHRoaXMudXBweS5zZXRTdGF0ZSh7XG4gICAgICBjYXBhYmlsaXRpZXM6IF9leHRlbmRzKHt9LCB0aGlzLnVwcHkuZ2V0U3RhdGUoKS5jYXBhYmlsaXRpZXMsIHtcbiAgICAgICAgcmVzdW1hYmxlVXBsb2FkczogZmFsc2VcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgdGhpcy51cHB5LnJlbW92ZVVwbG9hZGVyKHRoaXMuaGFuZGxlVXBsb2FkKTtcblxuICAgIGlmICh0aGlzLm9wdHMuYXV0b1JldHJ5KSB7XG4gICAgICB0aGlzLnVwcHkub2ZmKCdiYWNrLW9ubGluZScsIHRoaXMudXBweS5yZXRyeUFsbCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBUdXM7XG59KFBsdWdpbik7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUuaCxcbiAgICBDb21wb25lbnQgPSBfcmVxdWlyZS5Db21wb25lbnQ7XG5cbnZhciBVcmxVSSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhVcmxVSSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gVXJsVUkocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXJsVUkpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0NvbXBvbmVudC5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5oYW5kbGVLZXlQcmVzcyA9IF90aGlzLmhhbmRsZUtleVByZXNzLmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLmhhbmRsZUNsaWNrID0gX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgVXJsVUkucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB0aGlzLmlucHV0LnZhbHVlID0gJyc7XG4gICAgLy8gTXkgZ3Vlc3MgYWJvdXQgd2h5IGJyb3dzZXIgc2Nyb2xscyB0byB0b3Agb24gZm9jdXM6XG4gICAgLy8gQ29tcG9uZW50IGlzIG1vdW50ZWQgcmlnaHQgYXdheSwgYnV0IHRoZSB0YWIgcGFuZWwgbWlnaHQgYmUgYW5pbWF0aW5nXG4gICAgLy8gc3RpbGwsIHNvIGlucHV0IGVsZW1lbnQgaXMgcG9zaXRpb25lZCBvdXRzaWRlIHZpZXdwb3J0LiBUaGlzIGZpeGVzIGl0LlxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFfdGhpczIuaW5wdXQpIHJldHVybjtcbiAgICAgIF90aGlzMi5pbnB1dC5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XG4gICAgfSwgMTUwKTtcbiAgfTtcblxuICBVcmxVSS5wcm90b3R5cGUuaGFuZGxlS2V5UHJlc3MgPSBmdW5jdGlvbiBoYW5kbGVLZXlQcmVzcyhldikge1xuICAgIGlmIChldi5rZXlDb2RlID09PSAxMykge1xuICAgICAgdGhpcy5wcm9wcy5hZGRGaWxlKHRoaXMuaW5wdXQudmFsdWUpO1xuICAgIH1cbiAgfTtcblxuICBVcmxVSS5wcm90b3R5cGUuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljaygpIHtcbiAgICB0aGlzLnByb3BzLmFkZEZpbGUodGhpcy5pbnB1dC52YWx1ZSk7XG4gIH07XG5cbiAgVXJsVUkucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHJldHVybiBoKFxuICAgICAgJ2RpdicsXG4gICAgICB7ICdjbGFzcyc6ICd1cHB5LVVybCcgfSxcbiAgICAgIGgoJ2lucHV0Jywge1xuICAgICAgICAnY2xhc3MnOiAndXBweS1jLXRleHRJbnB1dCB1cHB5LVVybC1pbnB1dCcsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgcGxhY2Vob2xkZXI6IHRoaXMucHJvcHMuaTE4bignZW50ZXJVcmxUb0ltcG9ydCcpLFxuICAgICAgICBvbmtleXVwOiB0aGlzLmhhbmRsZUtleVByZXNzLFxuICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgIF90aGlzMy5pbnB1dCA9IGlucHV0O1xuICAgICAgICB9IH0pLFxuICAgICAgaChcbiAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgIHtcbiAgICAgICAgICAnY2xhc3MnOiAndXBweS11LXJlc2V0IHVwcHktYy1idG4gdXBweS1jLWJ0bi1wcmltYXJ5IHVwcHktVXJsLWltcG9ydEJ1dHRvbicsXG4gICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLnByb3BzLmkxOG4oJ2ltcG9ydCcpLFxuICAgICAgICAgIG9uY2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2sgfSxcbiAgICAgICAgdGhpcy5wcm9wcy5pMThuKCdpbXBvcnQnKVxuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIFVybFVJO1xufShDb21wb25lbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFVybFVJOyIsInZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnQHVwcHkvY29yZScpLFxuICAgIFBsdWdpbiA9IF9yZXF1aXJlLlBsdWdpbjtcblxudmFyIFRyYW5zbGF0b3IgPSByZXF1aXJlKCdAdXBweS91dGlscy9saWIvVHJhbnNsYXRvcicpO1xuXG52YXIgX3JlcXVpcmUyID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlMi5oO1xuXG52YXIgX3JlcXVpcmUzID0gcmVxdWlyZSgnQHVwcHkvc2VydmVyLXV0aWxzJyksXG4gICAgUmVxdWVzdENsaWVudCA9IF9yZXF1aXJlMy5SZXF1ZXN0Q2xpZW50O1xuXG52YXIgVXJsVUkgPSByZXF1aXJlKCcuL1VybFVJLmpzJyk7XG52YXIgdG9BcnJheSA9IHJlcXVpcmUoJ0B1cHB5L3V0aWxzL2xpYi90b0FycmF5Jyk7XG5cbi8qKlxuICogVXJsXG4gKlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChfUGx1Z2luKSB7XG4gIF9pbmhlcml0cyhVcmwsIF9QbHVnaW4pO1xuXG4gIGZ1bmN0aW9uIFVybCh1cHB5LCBvcHRzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVybCk7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUGx1Z2luLmNhbGwodGhpcywgdXBweSwgb3B0cykpO1xuXG4gICAgX3RoaXMuaWQgPSBfdGhpcy5vcHRzLmlkIHx8ICdVcmwnO1xuICAgIF90aGlzLnRpdGxlID0gJ0xpbmsnO1xuICAgIF90aGlzLnR5cGUgPSAnYWNxdWlyZXInO1xuICAgIF90aGlzLmljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaChcbiAgICAgICAgJ3N2ZycsXG4gICAgICAgIHsgJ2FyaWEtaGlkZGVuJzogJ3RydWUnLCAnY2xhc3MnOiAnVXBweUljb24gVXBweU1vZGFsVGFiLWljb24nLCB3aWR0aDogJzY0JywgaGVpZ2h0OiAnNjQnLCB2aWV3Qm94OiAnMCAwIDY0IDY0JyB9LFxuICAgICAgICBoKCdjaXJjbGUnLCB7IGN4OiAnMzInLCBjeTogJzMyJywgcjogJzMxJyB9KSxcbiAgICAgICAgaChcbiAgICAgICAgICAnZycsXG4gICAgICAgICAgeyAnZmlsbC1ydWxlJzogJ25vbnplcm8nLCBmaWxsOiAnI0ZGRicgfSxcbiAgICAgICAgICBoKCdwYXRoJywgeyBkOiAnTTI1Ljc3NCA0Ny4zNTdhNC4wNzcgNC4wNzcgMCAwIDEtNS43NiAwTDE2LjkgNDQuMjRhNC4wNzYgNC4wNzYgMCAwIDEgMC01Ljc1OGw1LjEyLTUuMTItMS44MTctMS44MTgtNS4xMiA1LjEyMmE2LjY1MSA2LjY1MSAwIDAgMCAwIDkuMzkybDMuMTEzIDMuMTE2YTYuNjI2IDYuNjI2IDAgMCAwIDQuNjk5IDEuOTQzYzEuNyAwIDMuNDAxLS42NDkgNC42OTctMS45NDNsMTAuMjQxLTEwLjI0M2E2LjU5MSA2LjU5MSAwIDAgMCAxLjk0Ny00LjY5NiA2LjU5OSA2LjU5OSAwIDAgMC0xLjk0Ny00LjY5NmwtMy4xMTYtMy4xMTQtMS44MTcgMS44MTcgMy4xMTYgMy4xMTRhNC4wNDUgNC4wNDUgMCAwIDEgMS4xOTQgMi44OCA0LjA0NSA0LjA0NSAwIDAgMS0xLjE5NCAyLjg3OEwyNS43NzQgNDcuMzU3eicgfSksXG4gICAgICAgICAgaCgncGF0aCcsIHsgZDogJ000Ni4yMTYgMTQuOTI2YTYuNTk3IDYuNTk3IDAgMCAwLTQuNjk2LTEuOTQ2aC0uMDAxYTYuNTk5IDYuNTk5IDAgMCAwLTQuNjk2IDEuOTQ1TDI2LjU4MiAyNS4xNjdhNi41OTUgNi41OTUgMCAwIDAtMS45NDcgNC42OTcgNi41OTkgNi41OTkgMCAwIDAgMS45NDYgNC42OThsMy4xMTQgMy4xMTQgMS44MTgtMS44MTYtMy4xMTQtMy4xMTRhNC4wNSA0LjA1IDAgMCAxLTEuMTk0LTIuODgyYzAtMS4wODYuNDI0LTIuMTA4IDEuMTk0LTIuODc4TDM4LjY0IDE2Ljc0NGE0LjA0MiA0LjA0MiAwIDAgMSAyLjg4LTEuMTk0YzEuMDg5IDAgMi4xMS40MjUgMi44OCAxLjE5NGwzLjExNCAzLjExNGE0LjA3NiA0LjA3NiAwIDAgMSAwIDUuNzU4bC01LjEyIDUuMTIgMS44MTggMS44MTcgNS4xMi01LjEyMmE2LjY0OSA2LjY0OSAwIDAgMCAwLTkuMzkzbC0zLjExMy0zLjExNC0uMDAzLjAwMnonIH0pXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfTtcblxuICAgIC8vIFNldCBkZWZhdWx0IG9wdGlvbnMgYW5kIGxvY2FsZVxuICAgIHZhciBkZWZhdWx0TG9jYWxlID0ge1xuICAgICAgc3RyaW5nczoge1xuICAgICAgICBpbXBvcnQ6ICdJbXBvcnQnLFxuICAgICAgICBlbnRlclVybFRvSW1wb3J0OiAnRW50ZXIgVVJMIHRvIGltcG9ydCBhIGZpbGUnLFxuICAgICAgICBmYWlsZWRUb0ZldGNoOiAnVXBweSBTZXJ2ZXIgZmFpbGVkIHRvIGZldGNoIHRoaXMgVVJMLCBwbGVhc2UgbWFrZSBzdXJlIGl04oCZcyBjb3JyZWN0JyxcbiAgICAgICAgZW50ZXJDb3JyZWN0VXJsOiAnSW5jb3JyZWN0IFVSTDogUGxlYXNlIG1ha2Ugc3VyZSB5b3UgYXJlIGVudGVyaW5nIGEgZGlyZWN0IGxpbmsgdG8gYSBmaWxlJ1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICBsb2NhbGU6IGRlZmF1bHRMb2NhbGVcbiAgICB9O1xuXG4gICAgX3RoaXMub3B0cyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0cyk7XG5cbiAgICBfdGhpcy5sb2NhbGUgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdExvY2FsZSwgX3RoaXMub3B0cy5sb2NhbGUpO1xuICAgIF90aGlzLmxvY2FsZS5zdHJpbmdzID0gX2V4dGVuZHMoe30sIGRlZmF1bHRMb2NhbGUuc3RyaW5ncywgX3RoaXMub3B0cy5sb2NhbGUuc3RyaW5ncyk7XG5cbiAgICBfdGhpcy50cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3IoeyBsb2NhbGU6IF90aGlzLmxvY2FsZSB9KTtcbiAgICBfdGhpcy5pMThuID0gX3RoaXMudHJhbnNsYXRvci50cmFuc2xhdGUuYmluZChfdGhpcy50cmFuc2xhdG9yKTtcblxuICAgIF90aGlzLmhvc3RuYW1lID0gX3RoaXMub3B0cy5zZXJ2ZXJVcmw7XG5cbiAgICBpZiAoIV90aGlzLmhvc3RuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VwcHkgU2VydmVyIGhvc3RuYW1lIGlzIHJlcXVpcmVkLCBwbGVhc2UgY29uc3VsdCBodHRwczovL3VwcHkuaW8vZG9jcy9zZXJ2ZXInKTtcbiAgICB9XG5cbiAgICAvLyBCaW5kIGFsbCBldmVudCBoYW5kbGVycyBmb3IgcmVmZXJlbmNhYmlsaXR5XG4gICAgX3RoaXMuZ2V0TWV0YSA9IF90aGlzLmdldE1ldGEuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuYWRkRmlsZSA9IF90aGlzLmFkZEZpbGUuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuaGFuZGxlRHJvcCA9IF90aGlzLmhhbmRsZURyb3AuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuaGFuZGxlRHJhZ092ZXIgPSBfdGhpcy5oYW5kbGVEcmFnT3Zlci5iaW5kKF90aGlzKTtcbiAgICBfdGhpcy5oYW5kbGVEcmFnTGVhdmUgPSBfdGhpcy5oYW5kbGVEcmFnTGVhdmUuYmluZChfdGhpcyk7XG5cbiAgICBfdGhpcy5oYW5kbGVQYXN0ZSA9IF90aGlzLmhhbmRsZVBhc3RlLmJpbmQoX3RoaXMpO1xuXG4gICAgX3RoaXMuY2xpZW50ID0gbmV3IFJlcXVlc3RDbGllbnQodXBweSwge1xuICAgICAgc2VydmVyVXJsOiBfdGhpcy5vcHRzLnNlcnZlclVybCxcbiAgICAgIHNlcnZlckhlYWRlcnM6IF90aGlzLm9wdHMuc2VydmVySGVhZGVyc1xuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFVybC5wcm90b3R5cGUuZ2V0RmlsZU5hbWVGcm9tVXJsID0gZnVuY3Rpb24gZ2V0RmlsZU5hbWVGcm9tVXJsKHVybCkge1xuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gIH07XG5cbiAgVXJsLnByb3RvdHlwZS5jaGVja0lmQ29ycmVjdFVSTCA9IGZ1bmN0aW9uIGNoZWNrSWZDb3JyZWN0VVJMKHVybCkge1xuICAgIGlmICghdXJsKSByZXR1cm4gZmFsc2U7XG5cbiAgICB2YXIgcHJvdG9jb2wgPSB1cmwubWF0Y2goL14oW2EtejAtOV0rKTpcXC9cXC8vKVsxXTtcbiAgICBpZiAocHJvdG9jb2wgIT09ICdodHRwJyAmJiBwcm90b2NvbCAhPT0gJ2h0dHBzJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIFVybC5wcm90b3R5cGUuYWRkUHJvdG9jb2xUb1VSTCA9IGZ1bmN0aW9uIGFkZFByb3RvY29sVG9VUkwodXJsKSB7XG4gICAgdmFyIHByb3RvY29sUmVnZXggPSAvXlthLXowLTldKzpcXC9cXC8vO1xuICAgIHZhciBkZWZhdWx0UHJvdG9jb2wgPSAnaHR0cDovLyc7XG4gICAgaWYgKHByb3RvY29sUmVnZXgudGVzdCh1cmwpKSB7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIHJldHVybiBkZWZhdWx0UHJvdG9jb2wgKyB1cmw7XG4gIH07XG5cbiAgVXJsLnByb3RvdHlwZS5nZXRNZXRhID0gZnVuY3Rpb24gZ2V0TWV0YSh1cmwpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHJldHVybiB0aGlzLmNsaWVudC5wb3N0KCd1cmwvbWV0YScsIHsgdXJsOiB1cmwgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICBpZiAocmVzLmVycm9yKSB7XG4gICAgICAgIF90aGlzMi51cHB5LmxvZygnW1VSTF0gRXJyb3I6Jyk7XG4gICAgICAgIF90aGlzMi51cHB5LmxvZyhyZXMuZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCB0aGUgZmlsZScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9KTtcbiAgfTtcblxuICBVcmwucHJvdG90eXBlLmFkZEZpbGUgPSBmdW5jdGlvbiBhZGRGaWxlKHVybCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdXJsID0gdGhpcy5hZGRQcm90b2NvbFRvVVJMKHVybCk7XG4gICAgaWYgKCF0aGlzLmNoZWNrSWZDb3JyZWN0VVJMKHVybCkpIHtcbiAgICAgIHRoaXMudXBweS5sb2coJ1tVUkxdIEluY29ycmVjdCBVUkwgZW50ZXJlZDogJyArIHVybCk7XG4gICAgICB0aGlzLnVwcHkuaW5mbyh0aGlzLmkxOG4oJ2VudGVyQ29ycmVjdFVybCcpLCAnZXJyb3InLCA0MDAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5nZXRNZXRhKHVybCkudGhlbihmdW5jdGlvbiAobWV0YSkge1xuICAgICAgdmFyIHRhZ0ZpbGUgPSB7XG4gICAgICAgIHNvdXJjZTogX3RoaXMzLmlkLFxuICAgICAgICBuYW1lOiBfdGhpczMuZ2V0RmlsZU5hbWVGcm9tVXJsKHVybCksXG4gICAgICAgIHR5cGU6IG1ldGEudHlwZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNpemU6IG1ldGEuc2l6ZVxuICAgICAgICB9LFxuICAgICAgICBpc1JlbW90ZTogdHJ1ZSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIHVybDogdXJsXG4gICAgICAgIH0sXG4gICAgICAgIHJlbW90ZToge1xuICAgICAgICAgIHNlcnZlclVybDogX3RoaXMzLm9wdHMuc2VydmVyVXJsLFxuICAgICAgICAgIHVybDogX3RoaXMzLmhvc3RuYW1lICsgJy91cmwvZ2V0JyxcbiAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBmaWxlSWQ6IHVybCxcbiAgICAgICAgICAgIHVybDogdXJsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcm92aWRlck9wdGlvbnM6IF90aGlzMy5jbGllbnQub3B0c1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRhZ0ZpbGU7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodGFnRmlsZSkge1xuICAgICAgX3RoaXMzLnVwcHkubG9nKCdbVXJsXSBBZGRpbmcgcmVtb3RlIGZpbGUnKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIF90aGlzMy51cHB5LmFkZEZpbGUodGFnRmlsZSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gTm90aGluZywgcmVzdHJpY3Rpb24gZXJyb3JzIGhhbmRsZWQgaW4gQ29yZVxuICAgICAgfVxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGRhc2hib2FyZCA9IF90aGlzMy51cHB5LmdldFBsdWdpbignRGFzaGJvYXJkJyk7XG4gICAgICBpZiAoZGFzaGJvYXJkKSBkYXNoYm9hcmQuaGlkZUFsbFBhbmVscygpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIF90aGlzMy51cHB5LmxvZyhlcnIpO1xuICAgICAgX3RoaXMzLnVwcHkuaW5mbyh7XG4gICAgICAgIG1lc3NhZ2U6IF90aGlzMy5pMThuKCdmYWlsZWRUb0ZldGNoJyksXG4gICAgICAgIGRldGFpbHM6IGVyclxuICAgICAgfSwgJ2Vycm9yJywgNDAwMCk7XG4gICAgfSk7XG4gIH07XG5cbiAgVXJsLnByb3RvdHlwZS5oYW5kbGVEcm9wID0gZnVuY3Rpb24gaGFuZGxlRHJvcChlKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKGUuZGF0YVRyYW5zZmVyLml0ZW1zKSB7XG4gICAgICB2YXIgaXRlbXMgPSB0b0FycmF5KGUuZGF0YVRyYW5zZmVyLml0ZW1zKTtcbiAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0ua2luZCA9PT0gJ3N0cmluZycgJiYgaXRlbS50eXBlID09PSAndGV4dC91cmktbGlzdCcpIHtcbiAgICAgICAgICBpdGVtLmdldEFzU3RyaW5nKGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgICAgIF90aGlzNC51cHB5LmxvZygnW1VSTF0gQWRkaW5nIGZpbGUgZnJvbSBkcm9wcGVkIHVybDogJyArIHVybCk7XG4gICAgICAgICAgICBfdGhpczQuYWRkRmlsZSh1cmwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgVXJsLnByb3RvdHlwZS5oYW5kbGVEcmFnT3ZlciA9IGZ1bmN0aW9uIGhhbmRsZURyYWdPdmVyKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdkcmFnJyk7XG4gIH07XG5cbiAgVXJsLnByb3RvdHlwZS5oYW5kbGVEcmFnTGVhdmUgPSBmdW5jdGlvbiBoYW5kbGVEcmFnTGVhdmUoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWcnKTtcbiAgfTtcblxuICBVcmwucHJvdG90eXBlLmhhbmRsZVBhc3RlID0gZnVuY3Rpb24gaGFuZGxlUGFzdGUoZSkge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgaWYgKGUuY2xpcGJvYXJkRGF0YS5pdGVtcykge1xuICAgICAgdmFyIGl0ZW1zID0gdG9BcnJheShlLmNsaXBib2FyZERhdGEuaXRlbXMpO1xuXG4gICAgICAvLyBXaGVuIGEgZmlsZSBpcyBwYXN0ZWQsIGl0IGFwcGVhcnMgYXMgdHdvIGl0ZW1zOiBmaWxlIG5hbWUgc3RyaW5nLCB0aGVuXG4gICAgICAvLyB0aGUgZmlsZSBpdHNlbGY7IFVybCB0aGVuIHRyZWF0cyBmaWxlIG5hbWUgc3RyaW5nIGFzIFVSTCwgd2hpY2ggaXMgd3JvbmcuXG4gICAgICAvLyBUaGlzIG1ha2VzIHN1cmUgVXJsIGlnbm9yZXMgcGFzdGUgZXZlbnQgaWYgaXQgY29udGFpbnMgYW4gYWN0dWFsIGZpbGVcbiAgICAgIHZhciBoYXNGaWxlcyA9IGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS5raW5kID09PSAnZmlsZSc7XG4gICAgICB9KS5sZW5ndGggPiAwO1xuICAgICAgaWYgKGhhc0ZpbGVzKSByZXR1cm47XG5cbiAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0ua2luZCA9PT0gJ3N0cmluZycgJiYgaXRlbS50eXBlID09PSAndGV4dC9wbGFpbicpIHtcbiAgICAgICAgICBpdGVtLmdldEFzU3RyaW5nKGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgICAgIF90aGlzNS51cHB5LmxvZygnW1VSTF0gQWRkaW5nIGZpbGUgZnJvbSBwYXN0ZWQgdXJsOiAnICsgdXJsKTtcbiAgICAgICAgICAgIF90aGlzNS5hZGRGaWxlKHVybCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBVcmwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihzdGF0ZSkge1xuICAgIHJldHVybiBoKFVybFVJLCB7XG4gICAgICBpMThuOiB0aGlzLmkxOG4sXG4gICAgICBhZGRGaWxlOiB0aGlzLmFkZEZpbGUgfSk7XG4gIH07XG5cbiAgVXJsLnByb3RvdHlwZS5pbnN0YWxsID0gZnVuY3Rpb24gaW5zdGFsbCgpIHtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5vcHRzLnRhcmdldDtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICB0aGlzLm1vdW50KHRhcmdldCwgdGhpcyk7XG4gICAgfVxuXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5oYW5kbGVEcm9wKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5oYW5kbGVEcmFnT3Zlcik7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmhhbmRsZURyYWdMZWF2ZSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdwYXN0ZScsIHRoaXMuaGFuZGxlUGFzdGUpO1xuICB9O1xuXG4gIFVybC5wcm90b3R5cGUudW5pbnN0YWxsID0gZnVuY3Rpb24gdW5pbnN0YWxsKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuaGFuZGxlRHJvcCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuaGFuZGxlRHJhZ092ZXIpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgdGhpcy5oYW5kbGVEcmFnTGVhdmUpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGFzdGUnLCB0aGlzLmhhbmRsZVBhc3RlKTtcblxuICAgIHRoaXMudW5tb3VudCgpO1xuICB9O1xuXG4gIHJldHVybiBVcmw7XG59KFBsdWdpbik7IiwidmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXG4gKiBUcmFuc2xhdGVzIHN0cmluZ3Mgd2l0aCBpbnRlcnBvbGF0aW9uICYgcGx1cmFsaXphdGlvbiBzdXBwb3J0LlxuICogRXh0ZW5zaWJsZSB3aXRoIGN1c3RvbSBkaWN0aW9uYXJpZXMgYW5kIHBsdXJhbGl6YXRpb24gZnVuY3Rpb25zLlxuICpcbiAqIEJvcnJvd3MgaGVhdmlseSBmcm9tIGFuZCBpbnNwaXJlZCBieSBQb2x5Z2xvdCBodHRwczovL2dpdGh1Yi5jb20vYWlyYm5iL3BvbHlnbG90LmpzLFxuICogYmFzaWNhbGx5IGEgc3RyaXBwZWQtZG93biB2ZXJzaW9uIG9mIGl0LiBEaWZmZXJlbmNlczogcGx1cmFsaXphdGlvbiBmdW5jdGlvbnMgYXJlIG5vdCBoYXJkY29kZWRcbiAqIGFuZCBjYW4gYmUgZWFzaWx5IGFkZGVkIGFtb25nIHdpdGggZGljdGlvbmFyaWVzLCBuZXN0ZWQgb2JqZWN0cyBhcmUgdXNlZCBmb3IgcGx1cmFsaXphdGlvblxuICogYXMgb3Bwb3NlZCB0byBgfHx8fGAgZGVsaW1ldGVyXG4gKlxuICogVXNhZ2UgZXhhbXBsZTogYHRyYW5zbGF0b3IudHJhbnNsYXRlKCdmaWxlc19jaG9zZW4nLCB7c21hcnRfY291bnQ6IDN9KWBcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0c1xuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gVHJhbnNsYXRvcihvcHRzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyYW5zbGF0b3IpO1xuXG4gICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgbG9jYWxlOiB7XG4gICAgICAgIHN0cmluZ3M6IHt9LFxuICAgICAgICBwbHVyYWxpemU6IGZ1bmN0aW9uIHBsdXJhbGl6ZShuKSB7XG4gICAgICAgICAgaWYgKG4gPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm9wdHMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdHMpO1xuICAgIHRoaXMubG9jYWxlID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zLmxvY2FsZSwgb3B0cy5sb2NhbGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgc3RyaW5nIHdpdGggcGxhY2Vob2xkZXIgdmFyaWFibGVzIGxpa2UgYCV7c21hcnRfY291bnR9IGZpbGUgc2VsZWN0ZWRgXG4gICAqIGFuZCByZXBsYWNlcyBpdCB3aXRoIHZhbHVlcyBmcm9tIG9wdGlvbnMgYHtzbWFydF9jb3VudDogNX1gXG4gICAqXG4gICAqIEBsaWNlbnNlIGh0dHBzOi8vZ2l0aHViLmNvbS9haXJibmIvcG9seWdsb3QuanMvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICAgKiB0YWtlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9haXJibmIvcG9seWdsb3QuanMvYmxvYi9tYXN0ZXIvbGliL3BvbHlnbG90LmpzI0wyOTlcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBocmFzZSB0aGF0IG5lZWRzIGludGVycG9sYXRpb24sIHdpdGggcGxhY2Vob2xkZXJzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIHdpdGggdmFsdWVzIHRoYXQgd2lsbCBiZSB1c2VkIHRvIHJlcGxhY2UgcGxhY2Vob2xkZXJzXG4gICAqIEByZXR1cm4ge3N0cmluZ30gaW50ZXJwb2xhdGVkXG4gICAqL1xuXG5cbiAgVHJhbnNsYXRvci5wcm90b3R5cGUuaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiBpbnRlcnBvbGF0ZShwaHJhc2UsIG9wdGlvbnMpIHtcbiAgICB2YXIgX1N0cmluZyRwcm90b3R5cGUgPSBTdHJpbmcucHJvdG90eXBlLFxuICAgICAgICBzcGxpdCA9IF9TdHJpbmckcHJvdG90eXBlLnNwbGl0LFxuICAgICAgICByZXBsYWNlID0gX1N0cmluZyRwcm90b3R5cGUucmVwbGFjZTtcblxuICAgIHZhciBkb2xsYXJSZWdleCA9IC9cXCQvZztcbiAgICB2YXIgZG9sbGFyQmlsbHNZYWxsID0gJyQkJCQnO1xuICAgIHZhciBpbnRlcnBvbGF0ZWQgPSBbcGhyYXNlXTtcblxuICAgIGZvciAodmFyIGFyZyBpbiBvcHRpb25zKSB7XG4gICAgICBpZiAoYXJnICE9PSAnXycgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShhcmcpKSB7XG4gICAgICAgIC8vIEVuc3VyZSByZXBsYWNlbWVudCB2YWx1ZSBpcyBlc2NhcGVkIHRvIHByZXZlbnQgc3BlY2lhbCAkLXByZWZpeGVkXG4gICAgICAgIC8vIHJlZ2V4IHJlcGxhY2UgdG9rZW5zLiB0aGUgXCIkJCQkXCIgaXMgbmVlZGVkIGJlY2F1c2UgZWFjaCBcIiRcIiBuZWVkcyB0b1xuICAgICAgICAvLyBiZSBlc2NhcGVkIHdpdGggXCIkXCIgaXRzZWxmLCBhbmQgd2UgbmVlZCB0d28gaW4gdGhlIHJlc3VsdGluZyBvdXRwdXQuXG4gICAgICAgIHZhciByZXBsYWNlbWVudCA9IG9wdGlvbnNbYXJnXTtcbiAgICAgICAgaWYgKHR5cGVvZiByZXBsYWNlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXBsYWNlbWVudCA9IHJlcGxhY2UuY2FsbChvcHRpb25zW2FyZ10sIGRvbGxhclJlZ2V4LCBkb2xsYXJCaWxsc1lhbGwpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIGNyZWF0ZSBhIG5ldyBgUmVnRXhwYCBlYWNoIHRpbWUgaW5zdGVhZCBvZiB1c2luZyBhIG1vcmUtZWZmaWNpZW50XG4gICAgICAgIC8vIHN0cmluZyByZXBsYWNlIHNvIHRoYXQgdGhlIHNhbWUgYXJndW1lbnQgY2FuIGJlIHJlcGxhY2VkIG11bHRpcGxlIHRpbWVzXG4gICAgICAgIC8vIGluIHRoZSBzYW1lIHBocmFzZS5cbiAgICAgICAgaW50ZXJwb2xhdGVkID0gaW5zZXJ0UmVwbGFjZW1lbnQoaW50ZXJwb2xhdGVkLCBuZXcgUmVnRXhwKCclXFxcXHsnICsgYXJnICsgJ1xcXFx9JywgJ2cnKSwgcmVwbGFjZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbnRlcnBvbGF0ZWQ7XG5cbiAgICBmdW5jdGlvbiBpbnNlcnRSZXBsYWNlbWVudChzb3VyY2UsIHJ4LCByZXBsYWNlbWVudCkge1xuICAgICAgdmFyIG5ld1BhcnRzID0gW107XG4gICAgICBzb3VyY2UuZm9yRWFjaChmdW5jdGlvbiAoY2h1bmspIHtcbiAgICAgICAgc3BsaXQuY2FsbChjaHVuaywgcngpLmZvckVhY2goZnVuY3Rpb24gKHJhdywgaSwgbGlzdCkge1xuICAgICAgICAgIGlmIChyYXcgIT09ICcnKSB7XG4gICAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHJhdyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSW50ZXJsYWNlIHdpdGggdGhlIGByZXBsYWNlbWVudGAgdmFsdWVcbiAgICAgICAgICBpZiAoaSA8IGxpc3QubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgbmV3UGFydHMucHVzaChyZXBsYWNlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ld1BhcnRzO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUHVibGljIHRyYW5zbGF0ZSBtZXRob2RcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyB3aXRoIHZhbHVlcyB0aGF0IHdpbGwgYmUgdXNlZCBsYXRlciB0byByZXBsYWNlIHBsYWNlaG9sZGVycyBpbiBzdHJpbmdcbiAgICogQHJldHVybiB7c3RyaW5nfSB0cmFuc2xhdGVkIChhbmQgaW50ZXJwb2xhdGVkKVxuICAgKi9cblxuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIHRyYW5zbGF0ZShrZXksIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGVBcnJheShrZXksIG9wdGlvbnMpLmpvaW4oJycpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgYSB0cmFuc2xhdGlvbiBhbmQgcmV0dXJuIHRoZSB0cmFuc2xhdGVkIGFuZCBpbnRlcnBvbGF0ZWQgcGFydHMgYXMgYW4gYXJyYXkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgd2l0aCB2YWx1ZXMgdGhhdCB3aWxsIGJlIHVzZWQgdG8gcmVwbGFjZSBwbGFjZWhvbGRlcnNcbiAgICogQHJldHVybiB7QXJyYXl9IFRoZSB0cmFuc2xhdGVkIGFuZCBpbnRlcnBvbGF0ZWQgcGFydHMsIGluIG9yZGVyLlxuICAgKi9cblxuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLnRyYW5zbGF0ZUFycmF5ID0gZnVuY3Rpb24gdHJhbnNsYXRlQXJyYXkoa2V5LCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMuc21hcnRfY291bnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgcGx1cmFsID0gdGhpcy5sb2NhbGUucGx1cmFsaXplKG9wdGlvbnMuc21hcnRfY291bnQpO1xuICAgICAgcmV0dXJuIHRoaXMuaW50ZXJwb2xhdGUodGhpcy5vcHRzLmxvY2FsZS5zdHJpbmdzW2tleV1bcGx1cmFsXSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaW50ZXJwb2xhdGUodGhpcy5vcHRzLmxvY2FsZS5zdHJpbmdzW2tleV0sIG9wdGlvbnMpO1xuICB9O1xuXG4gIHJldHVybiBUcmFuc2xhdG9yO1xufSgpOyIsInZhciBkYXRhVVJJdG9CbG9iID0gcmVxdWlyZSgnLi9kYXRhVVJJdG9CbG9iJyk7XG5cbi8qKlxuICogU2F2ZSBhIDxjYW52YXM+IGVsZW1lbnQncyBjb250ZW50IHRvIGEgQmxvYiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2FudmFzXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNhbnZhc1RvQmxvYihjYW52YXMsIHR5cGUsIHF1YWxpdHkpIHtcbiAgaWYgKGNhbnZhcy50b0Jsb2IpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIGNhbnZhcy50b0Jsb2IocmVzb2x2ZSwgdHlwZSwgcXVhbGl0eSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkYXRhVVJJdG9CbG9iKGNhbnZhcy50b0RhdGFVUkwodHlwZSwgcXVhbGl0eSksIHt9KTtcbiAgfSk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGF0YVVSSXRvQmxvYihkYXRhVVJJLCBvcHRzLCB0b0ZpbGUpIHtcbiAgLy8gZ2V0IHRoZSBiYXNlNjQgZGF0YVxuICB2YXIgZGF0YSA9IGRhdGFVUkkuc3BsaXQoJywnKVsxXTtcblxuICAvLyB1c2VyIG1heSBwcm92aWRlIG1pbWUgdHlwZSwgaWYgbm90IGdldCBpdCBmcm9tIGRhdGEgVVJJXG4gIHZhciBtaW1lVHlwZSA9IG9wdHMubWltZVR5cGUgfHwgZGF0YVVSSS5zcGxpdCgnLCcpWzBdLnNwbGl0KCc6JylbMV0uc3BsaXQoJzsnKVswXTtcblxuICAvLyBkZWZhdWx0IHRvIHBsYWluL3RleHQgaWYgZGF0YSBVUkkgaGFzIG5vIG1pbWVUeXBlXG4gIGlmIChtaW1lVHlwZSA9PSBudWxsKSB7XG4gICAgbWltZVR5cGUgPSAncGxhaW4vdGV4dCc7XG4gIH1cblxuICB2YXIgYmluYXJ5ID0gYXRvYihkYXRhKTtcbiAgdmFyIGFycmF5ID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYmluYXJ5Lmxlbmd0aDsgaSsrKSB7XG4gICAgYXJyYXkucHVzaChiaW5hcnkuY2hhckNvZGVBdChpKSk7XG4gIH1cblxuICAvLyBDb252ZXJ0IHRvIGEgRmlsZT9cbiAgaWYgKHRvRmlsZSkge1xuICAgIHJldHVybiBuZXcgRmlsZShbbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXSwgb3B0cy5uYW1lIHx8ICcnLCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBCbG9iKFtuZXcgVWludDhBcnJheShhcnJheSldLCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xufTsiLCJ2YXIgdGhyb3R0bGUgPSByZXF1aXJlKCdsb2Rhc2gudGhyb3R0bGUnKTtcblxuZnVuY3Rpb24gX2VtaXRTb2NrZXRQcm9ncmVzcyh1cGxvYWRlciwgcHJvZ3Jlc3NEYXRhLCBmaWxlKSB7XG4gIHZhciBwcm9ncmVzcyA9IHByb2dyZXNzRGF0YS5wcm9ncmVzcyxcbiAgICAgIGJ5dGVzVXBsb2FkZWQgPSBwcm9ncmVzc0RhdGEuYnl0ZXNVcGxvYWRlZCxcbiAgICAgIGJ5dGVzVG90YWwgPSBwcm9ncmVzc0RhdGEuYnl0ZXNUb3RhbDtcblxuICBpZiAocHJvZ3Jlc3MpIHtcbiAgICB1cGxvYWRlci51cHB5LmxvZygnVXBsb2FkIHByb2dyZXNzOiAnICsgcHJvZ3Jlc3MpO1xuICAgIHVwbG9hZGVyLnVwcHkuZW1pdCgndXBsb2FkLXByb2dyZXNzJywgZmlsZSwge1xuICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuICAgICAgYnl0ZXNVcGxvYWRlZDogYnl0ZXNVcGxvYWRlZCxcbiAgICAgIGJ5dGVzVG90YWw6IGJ5dGVzVG90YWxcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlKF9lbWl0U29ja2V0UHJvZ3Jlc3MsIDMwMCwgeyBsZWFkaW5nOiB0cnVlLCB0cmFpbGluZzogdHJ1ZSB9KTsiLCJ2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBpc0RPTUVsZW1lbnQgPSByZXF1aXJlKCcuL2lzRE9NRWxlbWVudCcpO1xuXG4vKipcbiAqIEZpbmQgb25lIG9yIG1vcmUgRE9NIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50XG4gKiBAcmV0dXJuIHtBcnJheXxudWxsfVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZpbmRBbGxET01FbGVtZW50cyhlbGVtZW50KSB7XG4gIGlmICh0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWxlbWVudCkpO1xuICAgIHJldHVybiBlbGVtZW50cy5sZW5ndGggPiAwID8gZWxlbWVudHMgOiBudWxsO1xuICB9XG5cbiAgaWYgKCh0eXBlb2YgZWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZWxlbWVudCkpID09PSAnb2JqZWN0JyAmJiBpc0RPTUVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gW2VsZW1lbnRdO1xuICB9XG59OyIsInZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIGlzRE9NRWxlbWVudCA9IHJlcXVpcmUoJy4vaXNET01FbGVtZW50Jyk7XG5cbi8qKlxuICogRmluZCBhIERPTSBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZXxzdHJpbmd9IGVsZW1lbnRcbiAqIEByZXR1cm4ge05vZGV8bnVsbH1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBmaW5kRE9NRWxlbWVudChlbGVtZW50KSB7XG4gIGlmICh0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50KTtcbiAgfVxuXG4gIGlmICgodHlwZW9mIGVsZW1lbnQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGVsZW1lbnQpKSA9PT0gJ29iamVjdCcgJiYgaXNET01FbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cbn07IiwiLyoqXG4gKiBUYWtlcyBhIGZpbGUgb2JqZWN0IGFuZCB0dXJucyBpdCBpbnRvIGZpbGVJRCwgYnkgY29udmVydGluZyBmaWxlLm5hbWUgdG8gbG93ZXJjYXNlLFxuICogcmVtb3ZpbmcgZXh0cmEgY2hhcmFjdGVycyBhbmQgYWRkaW5nIHR5cGUsIHNpemUgYW5kIGxhc3RNb2RpZmllZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBmaWxlSURcbiAqXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2VuZXJhdGVGaWxlSUQoZmlsZSkge1xuICAvLyBmaWx0ZXIgaXMgbmVlZGVkIHRvIG5vdCBqb2luIGVtcHR5IHZhbHVlcyB3aXRoIGAtYFxuICByZXR1cm4gWyd1cHB5JywgZmlsZS5uYW1lID8gZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15BLVowLTldL2lnLCAnJykgOiAnJywgZmlsZS50eXBlLCBmaWxlLmRhdGEuc2l6ZSwgZmlsZS5kYXRhLmxhc3RNb2RpZmllZF0uZmlsdGVyKGZ1bmN0aW9uICh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xuICB9KS5qb2luKCctJyk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0Qnl0ZXNSZW1haW5pbmcoZmlsZVByb2dyZXNzKSB7XG4gIHJldHVybiBmaWxlUHJvZ3Jlc3MuYnl0ZXNUb3RhbCAtIGZpbGVQcm9ncmVzcy5ieXRlc1VwbG9hZGVkO1xufTsiLCIvKipcbiogVGFrZXMgYSBmdWxsIGZpbGVuYW1lIHN0cmluZyBhbmQgcmV0dXJucyBhbiBvYmplY3Qge25hbWUsIGV4dGVuc2lvbn1cbipcbiogQHBhcmFtIHtzdHJpbmd9IGZ1bGxGaWxlTmFtZVxuKiBAcmV0dXJuIHtvYmplY3R9IHtuYW1lLCBleHRlbnNpb259XG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRGaWxlTmFtZUFuZEV4dGVuc2lvbihmdWxsRmlsZU5hbWUpIHtcbiAgdmFyIHJlID0gLyg/OlxcLihbXi5dKykpPyQvO1xuICB2YXIgZmlsZUV4dCA9IHJlLmV4ZWMoZnVsbEZpbGVOYW1lKVsxXTtcbiAgdmFyIGZpbGVOYW1lID0gZnVsbEZpbGVOYW1lLnJlcGxhY2UoJy4nICsgZmlsZUV4dCwgJycpO1xuICByZXR1cm4ge1xuICAgIG5hbWU6IGZpbGVOYW1lLFxuICAgIGV4dGVuc2lvbjogZmlsZUV4dFxuICB9O1xufTsiLCJ2YXIgZ2V0RmlsZU5hbWVBbmRFeHRlbnNpb24gPSByZXF1aXJlKCcuL2dldEZpbGVOYW1lQW5kRXh0ZW5zaW9uJyk7XG52YXIgbWltZVR5cGVzID0gcmVxdWlyZSgnLi9taW1lVHlwZXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRGaWxlVHlwZShmaWxlKSB7XG4gIHZhciBmaWxlRXh0ZW5zaW9uID0gZmlsZS5uYW1lID8gZ2V0RmlsZU5hbWVBbmRFeHRlbnNpb24oZmlsZS5uYW1lKS5leHRlbnNpb24gOiBudWxsO1xuXG4gIGlmIChmaWxlLmlzUmVtb3RlKSB7XG4gICAgLy8gc29tZSByZW1vdGUgcHJvdmlkZXJzIGRvIG5vdCBzdXBwb3J0IGZpbGUgdHlwZXNcbiAgICByZXR1cm4gZmlsZS50eXBlID8gZmlsZS50eXBlIDogbWltZVR5cGVzW2ZpbGVFeHRlbnNpb25dO1xuICB9XG5cbiAgLy8gY2hlY2sgaWYgbWltZSB0eXBlIGlzIHNldCBpbiB0aGUgZmlsZSBvYmplY3RcbiAgaWYgKGZpbGUudHlwZSkge1xuICAgIHJldHVybiBmaWxlLnR5cGU7XG4gIH1cblxuICAvLyBzZWUgaWYgd2UgY2FuIG1hcCBleHRlbnNpb24gdG8gYSBtaW1lIHR5cGVcbiAgaWYgKGZpbGVFeHRlbnNpb24gJiYgbWltZVR5cGVzW2ZpbGVFeHRlbnNpb25dKSB7XG4gICAgcmV0dXJuIG1pbWVUeXBlc1tmaWxlRXh0ZW5zaW9uXTtcbiAgfVxuXG4gIC8vIGlmIGFsbCBmYWlscywgd2VsbCwgcmV0dXJuIGVtcHR5XG4gIHJldHVybiBudWxsO1xufTsiLCIvLyBUT0RPIENoZWNrIHdoaWNoIHR5cGVzIGFyZSBhY3R1YWxseSBzdXBwb3J0ZWQgaW4gYnJvd3NlcnMuIENocm9tZSBsaWtlcyB3ZWJtXG4vLyBmcm9tIG15IHRlc3RpbmcsIGJ1dCB3ZSBtYXkgbmVlZCBtb3JlLlxuLy8gV2UgY291bGQgdXNlIGEgbGlicmFyeSBidXQgdGhleSB0ZW5kIHRvIGNvbnRhaW4gZG96ZW5zIG9mIEtCcyBvZiBtYXBwaW5ncyxcbi8vIG1vc3Qgb2Ygd2hpY2ggd2lsbCBnbyB1bnVzZWQsIHNvIG5vdCBzdXJlIGlmIHRoYXQncyB3b3J0aCBpdC5cbnZhciBtaW1lVG9FeHRlbnNpb25zID0ge1xuICAndmlkZW8vb2dnJzogJ29ndicsXG4gICdhdWRpby9vZ2cnOiAnb2dnJyxcbiAgJ3ZpZGVvL3dlYm0nOiAnd2VibScsXG4gICdhdWRpby93ZWJtJzogJ3dlYm0nLFxuICAndmlkZW8vbXA0JzogJ21wNCcsXG4gICdhdWRpby9tcDMnOiAnbXAzJ1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRGaWxlVHlwZUV4dGVuc2lvbihtaW1lVHlwZSkge1xuICByZXR1cm4gbWltZVRvRXh0ZW5zaW9uc1ttaW1lVHlwZV0gfHwgbnVsbDtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRTb2NrZXRIb3N0KHVybCkge1xuICAvLyBnZXQgdGhlIGhvc3QgZG9tYWluXG4gIHZhciByZWdleCA9IC9eKD86aHR0cHM/OlxcL1xcL3xcXC9cXC8pPyg/OlteQFxcbl0rQCk/KD86d3d3XFwuKT8oW15cXG5dKykvO1xuICB2YXIgaG9zdCA9IHJlZ2V4LmV4ZWModXJsKVsxXTtcbiAgdmFyIHNvY2tldFByb3RvY29sID0gbG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonID8gJ3dzcycgOiAnd3MnO1xuXG4gIHJldHVybiBzb2NrZXRQcm90b2NvbCArICc6Ly8nICsgaG9zdDtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRTcGVlZChmaWxlUHJvZ3Jlc3MpIHtcbiAgaWYgKCFmaWxlUHJvZ3Jlc3MuYnl0ZXNVcGxvYWRlZCkgcmV0dXJuIDA7XG5cbiAgdmFyIHRpbWVFbGFwc2VkID0gbmV3IERhdGUoKSAtIGZpbGVQcm9ncmVzcy51cGxvYWRTdGFydGVkO1xuICB2YXIgdXBsb2FkU3BlZWQgPSBmaWxlUHJvZ3Jlc3MuYnl0ZXNVcGxvYWRlZCAvICh0aW1lRWxhcHNlZCAvIDEwMDApO1xuICByZXR1cm4gdXBsb2FkU3BlZWQ7XG59OyIsIi8qKlxuICogUmV0dXJucyBhIHRpbWVzdGFtcCBpbiB0aGUgZm9ybWF0IG9mIGBob3VyczptaW51dGVzOnNlY29uZHNgXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRUaW1lU3RhbXAoKSB7XG4gIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgdmFyIGhvdXJzID0gcGFkKGRhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpKTtcbiAgdmFyIG1pbnV0ZXMgPSBwYWQoZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKSk7XG4gIHZhciBzZWNvbmRzID0gcGFkKGRhdGUuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCkpO1xuICByZXR1cm4gaG91cnMgKyAnOicgKyBtaW51dGVzICsgJzonICsgc2Vjb25kcztcbn07XG5cbi8qKlxuICogQWRkcyB6ZXJvIHRvIHN0cmluZ3Mgc2hvcnRlciB0aGFuIHR3byBjaGFyYWN0ZXJzXG4qL1xuZnVuY3Rpb24gcGFkKHN0cikge1xuICByZXR1cm4gc3RyLmxlbmd0aCAhPT0gMiA/IDAgKyBzdHIgOiBzdHI7XG59IiwidmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG4vKipcbiAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhIERPTSBlbGVtZW50LiBEdWNrLXR5cGluZyBiYXNlZCBvbiBgbm9kZVR5cGVgLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNET01FbGVtZW50KG9iaikge1xuICByZXR1cm4gb2JqICYmICh0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvYmopKSA9PT0gJ29iamVjdCcgJiYgb2JqLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERTtcbn07IiwiLyoqXG4gKiBDaGVjayBpZiBhIFVSTCBzdHJpbmcgaXMgYW4gb2JqZWN0IFVSTCBmcm9tIGBVUkwuY3JlYXRlT2JqZWN0VVJMYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzT2JqZWN0VVJMKHVybCkge1xuICByZXR1cm4gdXJsLmluZGV4T2YoJ2Jsb2I6JykgPT09IDA7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNQcmV2aWV3U3VwcG9ydGVkKGZpbGVUeXBlKSB7XG4gIGlmICghZmlsZVR5cGUpIHJldHVybiBmYWxzZTtcbiAgdmFyIGZpbGVUeXBlU3BlY2lmaWMgPSBmaWxlVHlwZS5zcGxpdCgnLycpWzFdO1xuICAvLyBsaXN0IG9mIGltYWdlcyB0aGF0IGJyb3dzZXJzIGNhbiBwcmV2aWV3XG4gIGlmICgvXihqcGVnfGdpZnxwbmd8c3ZnfHN2Z1xcK3htbHxibXApJC8udGVzdChmaWxlVHlwZVNwZWNpZmljKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc1RvdWNoRGV2aWNlKCkge1xuICByZXR1cm4gJ29udG91Y2hzdGFydCcgaW4gd2luZG93IHx8IC8vIHdvcmtzIG9uIG1vc3QgYnJvd3NlcnNcbiAgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzOyAvLyB3b3JrcyBvbiBJRTEwLzExIGFuZCBTdXJmYWNlXG59OyIsIi8qKlxuICogTGltaXQgdGhlIGFtb3VudCBvZiBzaW11bHRhbmVvdXNseSBwZW5kaW5nIFByb21pc2VzLlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gcGFzc2VkIGEgZnVuY3Rpb24gYGZuYCxcbiAqIHdpbGwgbWFrZSBzdXJlIHRoYXQgYXQgbW9zdCBgbGltaXRgIGNhbGxzIHRvIGBmbmAgYXJlIHBlbmRpbmcuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0XG4gKiBAcmV0dXJuIHtmdW5jdGlvbigpfVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxpbWl0UHJvbWlzZXMobGltaXQpIHtcbiAgdmFyIHBlbmRpbmcgPSAwO1xuICB2YXIgcXVldWUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2FsbCA9IGZ1bmN0aW9uIGNhbGwoKSB7XG4gICAgICAgIHBlbmRpbmcrKztcbiAgICAgICAgdmFyIHByb21pc2UgPSBmbi5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICBwcm9taXNlLnRoZW4ob25maW5pc2gsIG9uZmluaXNoKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9O1xuXG4gICAgICBpZiAocGVuZGluZyA+PSBsaW1pdCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHF1ZXVlLnB1c2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FsbCgpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbCgpO1xuICAgIH07XG4gIH07XG4gIGZ1bmN0aW9uIG9uZmluaXNoKCkge1xuICAgIHBlbmRpbmctLTtcbiAgICB2YXIgbmV4dCA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgaWYgKG5leHQpIG5leHQoKTtcbiAgfVxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgJ21kJzogJ3RleHQvbWFya2Rvd24nLFxuICAnbWFya2Rvd24nOiAndGV4dC9tYXJrZG93bicsXG4gICdtcDQnOiAndmlkZW8vbXA0JyxcbiAgJ21wMyc6ICdhdWRpby9tcDMnLFxuICAnc3ZnJzogJ2ltYWdlL3N2Zyt4bWwnLFxuICAnanBnJzogJ2ltYWdlL2pwZWcnLFxuICAncG5nJzogJ2ltYWdlL3BuZycsXG4gICdnaWYnOiAnaW1hZ2UvZ2lmJyxcbiAgJ3lhbWwnOiAndGV4dC95YW1sJyxcbiAgJ3ltbCc6ICd0ZXh0L3lhbWwnLFxuICAnY3N2JzogJ3RleHQvY3N2JyxcbiAgJ2F2aSc6ICd2aWRlby94LW1zdmlkZW8nLFxuICAnbWtzJzogJ3ZpZGVvL3gtbWF0cm9za2EnLFxuICAnbWt2JzogJ3ZpZGVvL3gtbWF0cm9za2EnLFxuICAnbW92JzogJ3ZpZGVvL3F1aWNrdGltZScsXG4gICdkb2MnOiAnYXBwbGljYXRpb24vbXN3b3JkJyxcbiAgJ2RvY20nOiAnYXBwbGljYXRpb24vdm5kLm1zLXdvcmQuZG9jdW1lbnQubWFjcm9lbmFibGVkLjEyJyxcbiAgJ2RvY3gnOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnLFxuICAnZG90JzogJ2FwcGxpY2F0aW9uL21zd29yZCcsXG4gICdkb3RtJzogJ2FwcGxpY2F0aW9uL3ZuZC5tcy13b3JkLnRlbXBsYXRlLm1hY3JvZW5hYmxlZC4xMicsXG4gICdkb3R4JzogJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLnRlbXBsYXRlJyxcbiAgJ3hsYSc6ICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnLFxuICAneGxhbSc6ICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuYWRkaW4ubWFjcm9lbmFibGVkLjEyJyxcbiAgJ3hsYyc6ICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnLFxuICAneGxmJzogJ2FwcGxpY2F0aW9uL3gteGxpZmYreG1sJyxcbiAgJ3hsbSc6ICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnLFxuICAneGxzJzogJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCcsXG4gICd4bHNiJzogJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zaGVldC5iaW5hcnkubWFjcm9lbmFibGVkLjEyJyxcbiAgJ3hsc20nOiAnYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLnNoZWV0Lm1hY3JvZW5hYmxlZC4xMicsXG4gICd4bHN4JzogJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0JyxcbiAgJ3hsdCc6ICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnLFxuICAneGx0bSc6ICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwudGVtcGxhdGUubWFjcm9lbmFibGVkLjEyJyxcbiAgJ3hsdHgnOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwudGVtcGxhdGUnLFxuICAneGx3JzogJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCdcbn07IiwidmFyIHNlY29uZHNUb1RpbWUgPSByZXF1aXJlKCcuL3NlY29uZHNUb1RpbWUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwcmV0dHlFVEEoc2Vjb25kcykge1xuICB2YXIgdGltZSA9IHNlY29uZHNUb1RpbWUoc2Vjb25kcyk7XG5cbiAgLy8gT25seSBkaXNwbGF5IGhvdXJzIGFuZCBtaW51dGVzIGlmIHRoZXkgYXJlIGdyZWF0ZXIgdGhhbiAwIGJ1dCBhbHdheXNcbiAgLy8gZGlzcGxheSBtaW51dGVzIGlmIGhvdXJzIGlzIGJlaW5nIGRpc3BsYXllZFxuICAvLyBEaXNwbGF5IGEgbGVhZGluZyB6ZXJvIGlmIHRoZSB0aGVyZSBpcyBhIHByZWNlZGluZyB1bml0OiAxbSAwNXMsIGJ1dCA1c1xuICB2YXIgaG91cnNTdHIgPSB0aW1lLmhvdXJzID8gdGltZS5ob3VycyArICdoICcgOiAnJztcbiAgdmFyIG1pbnV0ZXNWYWwgPSB0aW1lLmhvdXJzID8gKCcwJyArIHRpbWUubWludXRlcykuc3Vic3RyKC0yKSA6IHRpbWUubWludXRlcztcbiAgdmFyIG1pbnV0ZXNTdHIgPSBtaW51dGVzVmFsID8gbWludXRlc1ZhbCArICdtICcgOiAnJztcbiAgdmFyIHNlY29uZHNWYWwgPSBtaW51dGVzVmFsID8gKCcwJyArIHRpbWUuc2Vjb25kcykuc3Vic3RyKC0yKSA6IHRpbWUuc2Vjb25kcztcbiAgdmFyIHNlY29uZHNTdHIgPSBzZWNvbmRzVmFsICsgJ3MnO1xuXG4gIHJldHVybiAnJyArIGhvdXJzU3RyICsgbWludXRlc1N0ciArIHNlY29uZHNTdHI7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2Vjb25kc1RvVGltZShyYXdTZWNvbmRzKSB7XG4gIHZhciBob3VycyA9IE1hdGguZmxvb3IocmF3U2Vjb25kcyAvIDM2MDApICUgMjQ7XG4gIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcihyYXdTZWNvbmRzIC8gNjApICUgNjA7XG4gIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcihyYXdTZWNvbmRzICUgNjApO1xuXG4gIHJldHVybiB7IGhvdXJzOiBob3VycywgbWludXRlczogbWludXRlcywgc2Vjb25kczogc2Vjb25kcyB9O1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldHRsZShwcm9taXNlcykge1xuICB2YXIgcmVzb2x1dGlvbnMgPSBbXTtcbiAgdmFyIHJlamVjdGlvbnMgPSBbXTtcbiAgZnVuY3Rpb24gcmVzb2x2ZWQodmFsdWUpIHtcbiAgICByZXNvbHV0aW9ucy5wdXNoKHZhbHVlKTtcbiAgfVxuICBmdW5jdGlvbiByZWplY3RlZChlcnJvcikge1xuICAgIHJlamVjdGlvbnMucHVzaChlcnJvcik7XG4gIH1cblxuICB2YXIgd2FpdCA9IFByb21pc2UuYWxsKHByb21pc2VzLm1hcChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4ocmVzb2x2ZWQsIHJlamVjdGVkKTtcbiAgfSkpO1xuXG4gIHJldHVybiB3YWl0LnRoZW4oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzZnVsOiByZXNvbHV0aW9ucyxcbiAgICAgIGZhaWxlZDogcmVqZWN0aW9uc1xuICAgIH07XG4gIH0pO1xufTsiLCIvKipcbiAqIENvbnZlcnRzIGxpc3QgaW50byBhcnJheVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdG9BcnJheShsaXN0KSB7XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChsaXN0IHx8IFtdLCAwKTtcbn07IiwidmFyIF9yZXF1aXJlID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlLmg7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gIHJldHVybiBoKFxuICAgIFwic3ZnXCIsXG4gICAgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBcImNsYXNzXCI6IFwiVXBweUljb25cIiwgd2lkdGg6IFwiNjZcIiwgaGVpZ2h0OiBcIjU1XCIsIHZpZXdCb3g6IFwiMCAwIDY2IDU1XCIsIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgfSxcbiAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTU3LjMgOC40MzNjNC41OSAwIDguMSAzLjUxIDguMSA4LjF2MjkuN2MwIDQuNTktMy41MSA4LjEtOC4xIDguMUg4LjdjLTQuNTkgMC04LjEtMy41MS04LjEtOC4xdi0yOS43YzAtNC41OSAzLjUxLTguMSA4LjEtOC4xaDkuNDVsNC41OS03LjAyYy41NC0uNTQgMS4zNS0xLjA4IDIuMTYtMS4wOGgxNi4yYy44MSAwIDEuNjIuNTQgMi4xNiAxLjA4bDQuNTkgNy4wMmg5LjQ1ek0zMyAxNC42NGMtOC42MiAwLTE1LjM5MyA2Ljc3My0xNS4zOTMgMTUuMzkzIDAgOC42MiA2Ljc3MyAxNS4zOTMgMTUuMzkzIDE1LjM5MyA4LjYyIDAgMTUuMzkzLTYuNzczIDE1LjM5My0xNS4zOTMgMC04LjYyLTYuNzczLTE1LjM5My0xNS4zOTMtMTUuMzkzek0zMyA0MGMtNS42NDggMC05Ljk2Ni00LjMxOS05Ljk2Ni05Ljk2NyAwLTUuNjQ3IDQuMzE4LTkuOTY2IDkuOTY2LTkuOTY2czkuOTY2IDQuMzE5IDkuOTY2IDkuOTY2QzQyLjk2NiAzNS42ODEgMzguNjQ4IDQwIDMzIDQwelwiLCBcImZpbGwtcnVsZVwiOiBcImV2ZW5vZGRcIiB9KVxuICApO1xufTsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ3ByZWFjdCcpLFxuICAgIGggPSBfcmVxdWlyZS5oLFxuICAgIENvbXBvbmVudCA9IF9yZXF1aXJlLkNvbXBvbmVudDtcblxudmFyIFNuYXBzaG90QnV0dG9uID0gcmVxdWlyZSgnLi9TbmFwc2hvdEJ1dHRvbicpO1xudmFyIFJlY29yZEJ1dHRvbiA9IHJlcXVpcmUoJy4vUmVjb3JkQnV0dG9uJyk7XG5cbmZ1bmN0aW9uIGlzTW9kZUF2YWlsYWJsZShtb2RlcywgbW9kZSkge1xuICByZXR1cm4gbW9kZXMuaW5kZXhPZihtb2RlKSAhPT0gLTE7XG59XG5cbnZhciBDYW1lcmFTY3JlZW4gPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQ2FtZXJhU2NyZWVuLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBDYW1lcmFTY3JlZW4oKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbWVyYVNjcmVlbik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0NvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIENhbWVyYVNjcmVlbi5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnByb3BzLm9uRm9jdXMoKTtcbiAgICB0aGlzLmJ0bkNvbnRhaW5lci5maXJzdENoaWxkLmZvY3VzKCk7XG4gIH07XG5cbiAgQ2FtZXJhU2NyZWVuLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMucHJvcHMub25TdG9wKCk7XG4gIH07XG5cbiAgQ2FtZXJhU2NyZWVuLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgc2hvdWxkU2hvd1JlY29yZEJ1dHRvbiA9IHRoaXMucHJvcHMuc3VwcG9ydHNSZWNvcmRpbmcgJiYgKGlzTW9kZUF2YWlsYWJsZSh0aGlzLnByb3BzLm1vZGVzLCAndmlkZW8tb25seScpIHx8IGlzTW9kZUF2YWlsYWJsZSh0aGlzLnByb3BzLm1vZGVzLCAnYXVkaW8tb25seScpIHx8IGlzTW9kZUF2YWlsYWJsZSh0aGlzLnByb3BzLm1vZGVzLCAndmlkZW8tYXVkaW8nKSk7XG4gICAgdmFyIHNob3VsZFNob3dTbmFwc2hvdEJ1dHRvbiA9IGlzTW9kZUF2YWlsYWJsZSh0aGlzLnByb3BzLm1vZGVzLCAncGljdHVyZScpO1xuXG4gICAgcmV0dXJuIGgoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgJ2NsYXNzJzogJ3VwcHkgdXBweS1XZWJjYW0tY29udGFpbmVyJyB9LFxuICAgICAgaChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgJ2NsYXNzJzogJ3VwcHktV2ViY2FtLXZpZGVvQ29udGFpbmVyJyB9LFxuICAgICAgICBoKCd2aWRlbycsIHsgJ2NsYXNzJzogJ3VwcHktV2ViY2FtLXZpZGVvICAnICsgKHRoaXMucHJvcHMubWlycm9yID8gJ3VwcHktV2ViY2FtLXZpZGVvLS1taXJyb3JlZCcgOiAnJyksIGF1dG9wbGF5OiB0cnVlLCBtdXRlZDogdHJ1ZSwgcGxheXNpbmxpbmU6IHRydWUsIHNyY09iamVjdDogdGhpcy5wcm9wcy5zcmMgfHwgJycgfSlcbiAgICAgICksXG4gICAgICBoKFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyAnY2xhc3MnOiAndXBweS1XZWJjYW0tYnV0dG9uQ29udGFpbmVyJywgcmVmOiBmdW5jdGlvbiByZWYoZWwpIHtcbiAgICAgICAgICAgIF90aGlzMi5idG5Db250YWluZXIgPSBlbDtcbiAgICAgICAgICB9IH0sXG4gICAgICAgIHNob3VsZFNob3dTbmFwc2hvdEJ1dHRvbiA/IFNuYXBzaG90QnV0dG9uKHRoaXMucHJvcHMpIDogbnVsbCxcbiAgICAgICAgJyAnLFxuICAgICAgICBzaG91bGRTaG93UmVjb3JkQnV0dG9uID8gUmVjb3JkQnV0dG9uKHRoaXMucHJvcHMpIDogbnVsbFxuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIENhbWVyYVNjcmVlbjtcbn0oQ29tcG9uZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW1lcmFTY3JlZW47IiwidmFyIF9yZXF1aXJlID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlLmg7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gIHJldHVybiBoKFxuICAgIFwiZGl2XCIsXG4gICAgeyBcImNsYXNzXCI6IFwidXBweS1XZWJjYW0tcGVybWlzc29uc1wiIH0sXG4gICAgaChcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7IFwiY2xhc3NcIjogXCJ1cHB5LVdlYmNhbS1wZXJtaXNzb25zSWNvblwiIH0sXG4gICAgICBwcm9wcy5pY29uKClcbiAgICApLFxuICAgIGgoXG4gICAgICBcImgxXCIsXG4gICAgICB7IFwiY2xhc3NcIjogXCJ1cHB5LVdlYmNhbS1UaXRsZVwiIH0sXG4gICAgICBcIlBsZWFzZSBhbGxvdyBhY2Nlc3MgdG8geW91ciBjYW1lcmFcIlxuICAgICksXG4gICAgaChcbiAgICAgIFwicFwiLFxuICAgICAgbnVsbCxcbiAgICAgIFwiWW91IGhhdmUgYmVlbiBwcm9tcHRlZCB0byBhbGxvdyBjYW1lcmEgYWNjZXNzIGZyb20gdGhpcyBzaXRlLlwiLFxuICAgICAgaChcImJyXCIsIG51bGwpLFxuICAgICAgXCJJbiBvcmRlciB0byB0YWtlIHBpY3R1cmVzIHdpdGggeW91ciBjYW1lcmEgeW91IG11c3QgYXBwcm92ZSB0aGlzIHJlcXVlc3QuXCJcbiAgICApXG4gICk7XG59OyIsInZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ3ByZWFjdCcpLFxuICAgIGggPSBfcmVxdWlyZS5oO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIFJlY29yZEJ1dHRvbihfcmVmKSB7XG4gIHZhciByZWNvcmRpbmcgPSBfcmVmLnJlY29yZGluZyxcbiAgICAgIG9uU3RhcnRSZWNvcmRpbmcgPSBfcmVmLm9uU3RhcnRSZWNvcmRpbmcsXG4gICAgICBvblN0b3BSZWNvcmRpbmcgPSBfcmVmLm9uU3RvcFJlY29yZGluZyxcbiAgICAgIGkxOG4gPSBfcmVmLmkxOG47XG5cbiAgY29uc29sZS5sb2coJ2lzIHJlY29yZGluZycsIHJlY29yZGluZyk7XG4gIGlmIChyZWNvcmRpbmcpIHtcbiAgICByZXR1cm4gaChcbiAgICAgICdidXR0b24nLFxuICAgICAgeyAnY2xhc3MnOiAndXBweS11LXJlc2V0IHVwcHktYy1idG4gdXBweS1XZWJjYW0tYnV0dG9uIHVwcHktV2ViY2FtLWJ1dHRvbi0tdmlkZW8nLFxuICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgdGl0bGU6IGkxOG4oJ3N0b3BSZWNvcmRpbmcnKSxcbiAgICAgICAgJ2FyaWEtbGFiZWwnOiBpMThuKCdzdG9wUmVjb3JkaW5nJyksXG4gICAgICAgIG9uY2xpY2s6IG9uU3RvcFJlY29yZGluZyB9LFxuICAgICAgaChcbiAgICAgICAgJ3N2ZycsXG4gICAgICAgIHsgJ2FyaWEtaGlkZGVuJzogJ3RydWUnLCAnY2xhc3MnOiAnVXBweUljb24nLCB3aWR0aDogJzEwMCcsIGhlaWdodDogJzEwMCcsIHZpZXdCb3g6ICcwIDAgMTAwIDEwMCcgfSxcbiAgICAgICAgaCgncmVjdCcsIHsgeDogJzE1JywgeTogJzE1Jywgd2lkdGg6ICc3MCcsIGhlaWdodDogJzcwJyB9KVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gaChcbiAgICAnYnV0dG9uJyxcbiAgICB7ICdjbGFzcyc6ICd1cHB5LXUtcmVzZXQgdXBweS1jLWJ0biB1cHB5LVdlYmNhbS1idXR0b24gdXBweS1XZWJjYW0tYnV0dG9uLS12aWRlbycsXG4gICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgIHRpdGxlOiBpMThuKCdzdGFydFJlY29yZGluZycpLFxuICAgICAgJ2FyaWEtbGFiZWwnOiBpMThuKCdzdGFydFJlY29yZGluZycpLFxuICAgICAgb25jbGljazogb25TdGFydFJlY29yZGluZyB9LFxuICAgIGgoXG4gICAgICAnc3ZnJyxcbiAgICAgIHsgJ2FyaWEtaGlkZGVuJzogJ3RydWUnLCAnY2xhc3MnOiAnVXBweUljb24nLCB3aWR0aDogJzEwMCcsIGhlaWdodDogJzEwMCcsIHZpZXdCb3g6ICcwIDAgMTAwIDEwMCcgfSxcbiAgICAgIGgoJ2NpcmNsZScsIHsgY3g6ICc1MCcsIGN5OiAnNTAnLCByOiAnNDAnIH0pXG4gICAgKVxuICApO1xufTsiLCJ2YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdwcmVhY3QnKSxcbiAgICBoID0gX3JlcXVpcmUuaDtcblxudmFyIENhbWVyYUljb24gPSByZXF1aXJlKCcuL0NhbWVyYUljb24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgb25TbmFwc2hvdCA9IF9yZWYub25TbmFwc2hvdCxcbiAgICAgIGkxOG4gPSBfcmVmLmkxOG47XG5cbiAgcmV0dXJuIGgoXG4gICAgJ2J1dHRvbicsXG4gICAgeyAnY2xhc3MnOiAndXBweS11LXJlc2V0IHVwcHktYy1idG4gdXBweS1XZWJjYW0tYnV0dG9uIHVwcHktV2ViY2FtLWJ1dHRvbi0tcGljdHVyZScsXG4gICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgIHRpdGxlOiBpMThuKCd0YWtlUGljdHVyZScpLFxuICAgICAgJ2FyaWEtbGFiZWwnOiBpMThuKCd0YWtlUGljdHVyZScpLFxuICAgICAgb25jbGljazogb25TbmFwc2hvdCB9LFxuICAgIENhbWVyYUljb24oKVxuICApO1xufTsiLCJ2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgncHJlYWN0JyksXG4gICAgaCA9IF9yZXF1aXJlLmg7XG5cbnZhciBfcmVxdWlyZTIgPSByZXF1aXJlKCdAdXBweS9jb3JlJyksXG4gICAgUGx1Z2luID0gX3JlcXVpcmUyLlBsdWdpbjtcblxudmFyIFRyYW5zbGF0b3IgPSByZXF1aXJlKCdAdXBweS91dGlscy9saWIvVHJhbnNsYXRvcicpO1xudmFyIGdldEZpbGVUeXBlRXh0ZW5zaW9uID0gcmVxdWlyZSgnQHVwcHkvdXRpbHMvbGliL2dldEZpbGVUeXBlRXh0ZW5zaW9uJyk7XG52YXIgY2FudmFzVG9CbG9iID0gcmVxdWlyZSgnQHVwcHkvdXRpbHMvbGliL2NhbnZhc1RvQmxvYicpO1xudmFyIHN1cHBvcnRzTWVkaWFSZWNvcmRlciA9IHJlcXVpcmUoJy4vc3VwcG9ydHNNZWRpYVJlY29yZGVyJyk7XG52YXIgQ2FtZXJhSWNvbiA9IHJlcXVpcmUoJy4vQ2FtZXJhSWNvbicpO1xudmFyIENhbWVyYVNjcmVlbiA9IHJlcXVpcmUoJy4vQ2FtZXJhU2NyZWVuJyk7XG52YXIgUGVybWlzc2lvbnNTY3JlZW4gPSByZXF1aXJlKCcuL1Blcm1pc3Npb25zU2NyZWVuJyk7XG5cbi8vIFNldHVwIGdldFVzZXJNZWRpYSwgd2l0aCBwb2x5ZmlsbCBmb3Igb2xkZXIgYnJvd3NlcnNcbi8vIEFkYXB0ZWQgZnJvbTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01lZGlhRGV2aWNlcy9nZXRVc2VyTWVkaWFcbmZ1bmN0aW9uIGdldE1lZGlhRGV2aWNlcygpIHtcbiAgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcztcbiAgfVxuXG4gIHZhciBfZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhO1xuICBpZiAoIV9nZXRVc2VyTWVkaWEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0VXNlck1lZGlhOiBmdW5jdGlvbiBnZXRVc2VyTWVkaWEob3B0cykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgX2dldFVzZXJNZWRpYS5jYWxsKG5hdmlnYXRvciwgb3B0cywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBXZWJjYW1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoX1BsdWdpbikge1xuICBfaW5oZXJpdHMoV2ViY2FtLCBfUGx1Z2luKTtcblxuICBmdW5jdGlvbiBXZWJjYW0odXBweSwgb3B0cykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXZWJjYW0pO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1BsdWdpbi5jYWxsKHRoaXMsIHVwcHksIG9wdHMpKTtcblxuICAgIF90aGlzLm1lZGlhRGV2aWNlcyA9IGdldE1lZGlhRGV2aWNlcygpO1xuICAgIF90aGlzLnN1cHBvcnRzVXNlck1lZGlhID0gISFfdGhpcy5tZWRpYURldmljZXM7XG4gICAgX3RoaXMucHJvdG9jb2wgPSBsb2NhdGlvbi5wcm90b2NvbC5tYXRjaCgvaHR0cHMvaSkgPyAnaHR0cHMnIDogJ2h0dHAnO1xuICAgIF90aGlzLmlkID0gX3RoaXMub3B0cy5pZCB8fCAnV2ViY2FtJztcbiAgICBfdGhpcy50aXRsZSA9ICdDYW1lcmEnO1xuICAgIF90aGlzLnR5cGUgPSAnYWNxdWlyZXInO1xuICAgIF90aGlzLmljb24gPSBDYW1lcmFJY29uO1xuXG4gICAgdmFyIGRlZmF1bHRMb2NhbGUgPSB7XG4gICAgICBzdHJpbmdzOiB7XG4gICAgICAgIHNtaWxlOiAnU21pbGUhJyxcbiAgICAgICAgdGFrZVBpY3R1cmU6ICdUYWtlIGEgcGljdHVyZScsXG4gICAgICAgIHN0YXJ0UmVjb3JkaW5nOiAnQmVnaW4gdmlkZW8gcmVjb3JkaW5nJyxcbiAgICAgICAgc3RvcFJlY29yZGluZzogJ1N0b3AgdmlkZW8gcmVjb3JkaW5nJ1xuICAgICAgfVxuXG4gICAgICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zXG4gICAgfTt2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICBvbkJlZm9yZVNuYXBzaG90OiBmdW5jdGlvbiBvbkJlZm9yZVNuYXBzaG90KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9LFxuICAgICAgY291bnRkb3duOiBmYWxzZSxcbiAgICAgIGxvY2FsZTogZGVmYXVsdExvY2FsZSxcbiAgICAgIG1vZGVzOiBbJ3ZpZGVvLWF1ZGlvJywgJ3ZpZGVvLW9ubHknLCAnYXVkaW8tb25seScsICdwaWN0dXJlJ10sXG4gICAgICBtaXJyb3I6IHRydWUsXG4gICAgICBmYWNpbmdNb2RlOiAndXNlcidcblxuICAgICAgLy8gbWVyZ2UgZGVmYXVsdCBvcHRpb25zIHdpdGggdGhlIG9uZXMgc2V0IGJ5IHVzZXJcbiAgICB9O190aGlzLm9wdHMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdHMpO1xuXG4gICAgX3RoaXMubG9jYWxlID0gX2V4dGVuZHMoe30sIGRlZmF1bHRMb2NhbGUsIF90aGlzLm9wdHMubG9jYWxlKTtcbiAgICBfdGhpcy5sb2NhbGUuc3RyaW5ncyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0TG9jYWxlLnN0cmluZ3MsIF90aGlzLm9wdHMubG9jYWxlLnN0cmluZ3MpO1xuXG4gICAgLy8gaTE4blxuICAgIF90aGlzLnRyYW5zbGF0b3IgPSBuZXcgVHJhbnNsYXRvcih7IGxvY2FsZTogX3RoaXMubG9jYWxlIH0pO1xuICAgIF90aGlzLmkxOG4gPSBfdGhpcy50cmFuc2xhdG9yLnRyYW5zbGF0ZS5iaW5kKF90aGlzLnRyYW5zbGF0b3IpO1xuXG4gICAgX3RoaXMuaW5zdGFsbCA9IF90aGlzLmluc3RhbGwuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuc2V0UGx1Z2luU3RhdGUgPSBfdGhpcy5zZXRQbHVnaW5TdGF0ZS5iaW5kKF90aGlzKTtcblxuICAgIF90aGlzLnJlbmRlciA9IF90aGlzLnJlbmRlci5iaW5kKF90aGlzKTtcblxuICAgIC8vIENhbWVyYSBjb250cm9sc1xuICAgIF90aGlzLnN0YXJ0ID0gX3RoaXMuc3RhcnQuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuc3RvcCA9IF90aGlzLnN0b3AuYmluZChfdGhpcyk7XG4gICAgX3RoaXMudGFrZVNuYXBzaG90ID0gX3RoaXMudGFrZVNuYXBzaG90LmJpbmQoX3RoaXMpO1xuICAgIF90aGlzLnN0YXJ0UmVjb3JkaW5nID0gX3RoaXMuc3RhcnRSZWNvcmRpbmcuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuc3RvcFJlY29yZGluZyA9IF90aGlzLnN0b3BSZWNvcmRpbmcuYmluZChfdGhpcyk7XG4gICAgX3RoaXMub25lVHdvVGhyZWVTbWlsZSA9IF90aGlzLm9uZVR3b1RocmVlU21pbGUuYmluZChfdGhpcyk7XG4gICAgX3RoaXMuZm9jdXMgPSBfdGhpcy5mb2N1cy5iaW5kKF90aGlzKTtcblxuICAgIF90aGlzLndlYmNhbUFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKF90aGlzLm9wdHMuY291bnRkb3duKSB7XG4gICAgICBfdGhpcy5vcHRzLm9uQmVmb3JlU25hcHNob3QgPSBfdGhpcy5vbmVUd29UaHJlZVNtaWxlO1xuICAgIH1cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBXZWJjYW0ucHJvdG90eXBlLmlzU3VwcG9ydGVkID0gZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5tZWRpYURldmljZXM7XG4gIH07XG5cbiAgV2ViY2FtLnByb3RvdHlwZS5nZXRDb25zdHJhaW50cyA9IGZ1bmN0aW9uIGdldENvbnN0cmFpbnRzKCkge1xuICAgIHZhciBhY2NlcHRzQXVkaW8gPSB0aGlzLm9wdHMubW9kZXMuaW5kZXhPZigndmlkZW8tYXVkaW8nKSAhPT0gLTEgfHwgdGhpcy5vcHRzLm1vZGVzLmluZGV4T2YoJ2F1ZGlvLW9ubHknKSAhPT0gLTE7XG4gICAgdmFyIGFjY2VwdHNWaWRlbyA9IHRoaXMub3B0cy5tb2Rlcy5pbmRleE9mKCd2aWRlby1hdWRpbycpICE9PSAtMSB8fCB0aGlzLm9wdHMubW9kZXMuaW5kZXhPZigndmlkZW8tb25seScpICE9PSAtMSB8fCB0aGlzLm9wdHMubW9kZXMuaW5kZXhPZigncGljdHVyZScpICE9PSAtMTtcblxuICAgIHJldHVybiB7XG4gICAgICBhdWRpbzogYWNjZXB0c0F1ZGlvLFxuICAgICAgdmlkZW86IGFjY2VwdHNWaWRlbyA/IHsgZmFjaW5nTW9kZTogdGhpcy5vcHRzLmZhY2luZ01vZGUgfSA6IGZhbHNlXG4gICAgfTtcbiAgfTtcblxuICBXZWJjYW0ucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV2ViY2FtIGFjY2VzcyBub3Qgc3VwcG9ydGVkJykpO1xuICAgIH1cblxuICAgIHRoaXMud2ViY2FtQWN0aXZlID0gdHJ1ZTtcblxuICAgIHZhciBjb25zdHJhaW50cyA9IHRoaXMuZ2V0Q29uc3RyYWludHMoKTtcblxuICAgIC8vIGFzayB1c2VyIGZvciBhY2Nlc3MgdG8gdGhlaXIgY2FtZXJhXG4gICAgcmV0dXJuIHRoaXMubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihmdW5jdGlvbiAoc3RyZWFtKSB7XG4gICAgICBfdGhpczIuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgLy8gdGhpcy5zdHJlYW1TcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuc3RyZWFtKVxuICAgICAgX3RoaXMyLnNldFBsdWdpblN0YXRlKHtcbiAgICAgICAgY2FtZXJhUmVhZHk6IHRydWVcbiAgICAgIH0pO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIF90aGlzMi5zZXRQbHVnaW5TdGF0ZSh7XG4gICAgICAgIGNhbWVyYUVycm9yOiBlcnJcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIFdlYmNhbS5wcm90b3R5cGUuc3RhcnRSZWNvcmRpbmcgPSBmdW5jdGlvbiBzdGFydFJlY29yZGluZygpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIC8vIFRPRE8gV2UgY2FuIGNoZWNrIGhlcmUgaWYgYW55IG9mIHRoZSBtaW1lIHR5cGVzIGxpc3RlZCBpbiB0aGVcbiAgICAvLyBtaW1lVG9FeHRlbnNpb25zIG1hcCBpbiBVdGlscy5qcyBhcmUgc3VwcG9ydGVkLCBhbmQgcHJlZmVyIHRvIHVzZSBvbmUgb2ZcbiAgICAvLyB0aG9zZS5cbiAgICAvLyBSaWdodCBub3cgd2UgbGV0IHRoZSBicm93c2VyIHBpY2sgYSB0eXBlIHRoYXQgaXQgZGVlbXMgYXBwcm9wcmlhdGUuXG4gICAgdGhpcy5yZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKHRoaXMuc3RyZWFtKTtcbiAgICB0aGlzLnJlY29yZGluZ0NodW5rcyA9IFtdO1xuICAgIHRoaXMucmVjb3JkZXIuYWRkRXZlbnRMaXN0ZW5lcignZGF0YWF2YWlsYWJsZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgX3RoaXMzLnJlY29yZGluZ0NodW5rcy5wdXNoKGV2ZW50LmRhdGEpO1xuICAgIH0pO1xuICAgIHRoaXMucmVjb3JkZXIuc3RhcnQoKTtcblxuICAgIHRoaXMuc2V0UGx1Z2luU3RhdGUoe1xuICAgICAgaXNSZWNvcmRpbmc6IHRydWVcbiAgICB9KTtcbiAgfTtcblxuICBXZWJjYW0ucHJvdG90eXBlLnN0b3BSZWNvcmRpbmcgPSBmdW5jdGlvbiBzdG9wUmVjb3JkaW5nKCkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgdmFyIHN0b3BwZWQgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBfdGhpczQucmVjb3JkZXIuYWRkRXZlbnRMaXN0ZW5lcignc3RvcCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgICBfdGhpczQucmVjb3JkZXIuc3RvcCgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0b3BwZWQudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczQuc2V0UGx1Z2luU3RhdGUoe1xuICAgICAgICBpc1JlY29yZGluZzogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIF90aGlzNC5nZXRWaWRlbygpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIF90aGlzNC51cHB5LmFkZEZpbGUoZmlsZSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gTm90aGluZywgcmVzdHJpY3Rpb24gZXJyb3JzIGhhbmRsZWQgaW4gQ29yZVxuICAgICAgfVxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXM0LnJlY29yZGluZ0NodW5rcyA9IG51bGw7XG4gICAgICBfdGhpczQucmVjb3JkZXIgPSBudWxsO1xuICAgICAgdmFyIGRhc2hib2FyZCA9IF90aGlzNC51cHB5LmdldFBsdWdpbignRGFzaGJvYXJkJyk7XG4gICAgICBpZiAoZGFzaGJvYXJkKSBkYXNoYm9hcmQuaGlkZUFsbFBhbmVscygpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgX3RoaXM0LnJlY29yZGluZ0NodW5rcyA9IG51bGw7XG4gICAgICBfdGhpczQucmVjb3JkZXIgPSBudWxsO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfSk7XG4gIH07XG5cbiAgV2ViY2FtLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcbiAgICB0aGlzLnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7XG4gICAgICB0cmFjay5zdG9wKCk7XG4gICAgfSk7XG4gICAgdGhpcy5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykge1xuICAgICAgdHJhY2suc3RvcCgpO1xuICAgIH0pO1xuICAgIHRoaXMud2ViY2FtQWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5zdHJlYW0gPSBudWxsO1xuICB9O1xuXG4gIFdlYmNhbS5wcm90b3R5cGUuZ2V0VmlkZW9FbGVtZW50ID0gZnVuY3Rpb24gZ2V0VmlkZW9FbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy51cHB5LVdlYmNhbS12aWRlbycpO1xuICB9O1xuXG4gIFdlYmNhbS5wcm90b3R5cGUub25lVHdvVGhyZWVTbWlsZSA9IGZ1bmN0aW9uIG9uZVR3b1RocmVlU21pbGUoKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGNvdW50ID0gX3RoaXM1Lm9wdHMuY291bnRkb3duO1xuXG4gICAgICB2YXIgY291bnREb3duID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIV90aGlzNS53ZWJjYW1BY3RpdmUpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKGNvdW50RG93bik7XG4gICAgICAgICAgX3RoaXM1LmNhcHR1cmVJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoJ1dlYmNhbSBpcyBub3QgYWN0aXZlJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICAgIF90aGlzNS51cHB5LmluZm8oY291bnQgKyAnLi4uJywgJ3dhcm5pbmcnLCA4MDApO1xuICAgICAgICAgIGNvdW50LS07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChjb3VudERvd24pO1xuICAgICAgICAgIF90aGlzNS51cHB5LmluZm8oX3RoaXM1LmkxOG4oJ3NtaWxlJyksICdzdWNjZXNzJywgMTUwMCk7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgIH0sIDE1MDApO1xuICAgICAgICB9XG4gICAgICB9LCAxMDAwKTtcbiAgICB9KTtcbiAgfTtcblxuICBXZWJjYW0ucHJvdG90eXBlLnRha2VTbmFwc2hvdCA9IGZ1bmN0aW9uIHRha2VTbmFwc2hvdCgpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIGlmICh0aGlzLmNhcHR1cmVJblByb2dyZXNzKSByZXR1cm47XG4gICAgdGhpcy5jYXB0dXJlSW5Qcm9ncmVzcyA9IHRydWU7XG5cbiAgICB0aGlzLm9wdHMub25CZWZvcmVTbmFwc2hvdCgpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHZhciBtZXNzYWdlID0gKHR5cGVvZiBlcnIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGVycikpID09PSAnb2JqZWN0JyA/IGVyci5tZXNzYWdlIDogZXJyO1xuICAgICAgX3RoaXM2LnVwcHkuaW5mbyhtZXNzYWdlLCAnZXJyb3InLCA1MDAwKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ29uQmVmb3JlU25hcHNob3Q6ICcgKyBtZXNzYWdlKSk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXM2LmdldEltYWdlKCk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodGFnRmlsZSkge1xuICAgICAgX3RoaXM2LmNhcHR1cmVJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICB2YXIgZGFzaGJvYXJkID0gX3RoaXM2LnVwcHkuZ2V0UGx1Z2luKCdEYXNoYm9hcmQnKTtcbiAgICAgIGlmIChkYXNoYm9hcmQpIGRhc2hib2FyZC5oaWRlQWxsUGFuZWxzKCk7XG4gICAgICB0cnkge1xuICAgICAgICBfdGhpczYudXBweS5hZGRGaWxlKHRhZ0ZpbGUpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIE5vdGhpbmcsIHJlc3RyaWN0aW9uIGVycm9ycyBoYW5kbGVkIGluIENvcmVcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIF90aGlzNi5jYXB0dXJlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfSk7XG4gIH07XG5cbiAgV2ViY2FtLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uIGdldEltYWdlKCkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgdmFyIHZpZGVvID0gdGhpcy5nZXRWaWRlb0VsZW1lbnQoKTtcbiAgICBpZiAoIXZpZGVvKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdObyB2aWRlbyBlbGVtZW50IGZvdW5kLCBsaWtlbHkgZHVlIHRvIHRoZSBXZWJjYW0gdGFiIGJlaW5nIGNsb3NlZC4nKSk7XG4gICAgfVxuXG4gICAgdmFyIG5hbWUgPSAnd2ViY2FtLScgKyBEYXRlLm5vdygpICsgJy5qcGcnO1xuICAgIHZhciBtaW1lVHlwZSA9ICdpbWFnZS9qcGVnJztcblxuICAgIHZhciB3aWR0aCA9IHZpZGVvLnZpZGVvV2lkdGg7XG4gICAgdmFyIGhlaWdodCA9IHZpZGVvLnZpZGVvSGVpZ2h0O1xuXG4gICAgLy8gY29uc3Qgc2NhbGVIID0gdGhpcy5vcHRzLm1pcnJvciA/IC0xIDogMSAvLyBTZXQgaG9yaXpvbnRhbCBzY2FsZSB0byAtMSBpZiBmbGlwIGhvcml6b250YWxcbiAgICAvLyBjb25zdCBzY2FsZVYgPSAxXG4gICAgLy8gY29uc3QgcG9zWCA9IHRoaXMub3B0cy5taXJyb3IgPyB3aWR0aCAqIC0xIDogMCAvLyBTZXQgeCBwb3NpdGlvbiB0byAtMTAwJSBpZiBmbGlwIGhvcml6b250YWxcbiAgICAvLyBjb25zdCBwb3NZID0gMFxuXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGN0eC5kcmF3SW1hZ2UodmlkZW8sIDAsIDApO1xuICAgIC8vIGN0eC5zYXZlKCkgLy8gU2F2ZSB0aGUgY3VycmVudCBzdGF0ZVxuICAgIC8vIGN0eC5zY2FsZShzY2FsZUgsIHNjYWxlVikgLy8gU2V0IHNjYWxlIHRvIGZsaXAgdGhlIGltYWdlXG4gICAgLy8gY3R4LmRyYXdJbWFnZSh2aWRlbywgcG9zWCwgcG9zWSwgd2lkdGgsIGhlaWdodCkgLy8gZHJhdyB0aGUgaW1hZ2VcbiAgICAvLyBjdHgucmVzdG9yZSgpIC8vIFJlc3RvcmUgdGhlIGxhc3Qgc2F2ZWQgc3RhdGVcblxuICAgIHJldHVybiBjYW52YXNUb0Jsb2IoY2FudmFzLCBtaW1lVHlwZSkudGhlbihmdW5jdGlvbiAoYmxvYikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc291cmNlOiBfdGhpczcuaWQsXG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGRhdGE6IG5ldyBGaWxlKFtibG9iXSwgbmFtZSwgeyB0eXBlOiBtaW1lVHlwZSB9KSxcbiAgICAgICAgdHlwZTogbWltZVR5cGVcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgV2ViY2FtLnByb3RvdHlwZS5nZXRWaWRlbyA9IGZ1bmN0aW9uIGdldFZpZGVvKCkge1xuICAgIHZhciBtaW1lVHlwZSA9IHRoaXMucmVjb3JkaW5nQ2h1bmtzWzBdLnR5cGU7XG4gICAgdmFyIGZpbGVFeHRlbnNpb24gPSBnZXRGaWxlVHlwZUV4dGVuc2lvbihtaW1lVHlwZSk7XG5cbiAgICBpZiAoIWZpbGVFeHRlbnNpb24pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0NvdWxkIG5vdCByZXRyaWV2ZSByZWNvcmRpbmc6IFVuc3VwcG9ydGVkIG1lZGlhIHR5cGUgXCInICsgbWltZVR5cGUgKyAnXCInKSk7XG4gICAgfVxuXG4gICAgdmFyIG5hbWUgPSAnd2ViY2FtLScgKyBEYXRlLm5vdygpICsgJy4nICsgZmlsZUV4dGVuc2lvbjtcbiAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKHRoaXMucmVjb3JkaW5nQ2h1bmtzLCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xuICAgIHZhciBmaWxlID0ge1xuICAgICAgc291cmNlOiB0aGlzLmlkLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGRhdGE6IG5ldyBGaWxlKFtibG9iXSwgbmFtZSwgeyB0eXBlOiBtaW1lVHlwZSB9KSxcbiAgICAgIHR5cGU6IG1pbWVUeXBlXG4gICAgfTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmlsZSk7XG4gIH07XG5cbiAgV2ViY2FtLnByb3RvdHlwZS5mb2N1cyA9IGZ1bmN0aW9uIGZvY3VzKCkge1xuICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMub3B0cy5jb3VudGRvd24pIHJldHVybjtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzOC51cHB5LmluZm8oX3RoaXM4LmkxOG4oJ3NtaWxlJyksICdzdWNjZXNzJywgMTUwMCk7XG4gICAgfSwgMTAwMCk7XG4gIH07XG5cbiAgV2ViY2FtLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoc3RhdGUpIHtcbiAgICBpZiAoIXRoaXMud2ViY2FtQWN0aXZlKSB7XG4gICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgfVxuXG4gICAgdmFyIHdlYmNhbVN0YXRlID0gdGhpcy5nZXRQbHVnaW5TdGF0ZSgpO1xuXG4gICAgaWYgKCF3ZWJjYW1TdGF0ZS5jYW1lcmFSZWFkeSkge1xuICAgICAgcmV0dXJuIGgoUGVybWlzc2lvbnNTY3JlZW4sIHsgaWNvbjogQ2FtZXJhSWNvbiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gaChDYW1lcmFTY3JlZW4sIF9leHRlbmRzKHt9LCB3ZWJjYW1TdGF0ZSwge1xuICAgICAgb25TbmFwc2hvdDogdGhpcy50YWtlU25hcHNob3QsXG4gICAgICBvblN0YXJ0UmVjb3JkaW5nOiB0aGlzLnN0YXJ0UmVjb3JkaW5nLFxuICAgICAgb25TdG9wUmVjb3JkaW5nOiB0aGlzLnN0b3BSZWNvcmRpbmcsXG4gICAgICBvbkZvY3VzOiB0aGlzLmZvY3VzLFxuICAgICAgb25TdG9wOiB0aGlzLnN0b3AsXG4gICAgICBpMThuOiB0aGlzLmkxOG4sXG4gICAgICBtb2RlczogdGhpcy5vcHRzLm1vZGVzLFxuICAgICAgc3VwcG9ydHNSZWNvcmRpbmc6IHN1cHBvcnRzTWVkaWFSZWNvcmRlcigpLFxuICAgICAgcmVjb3JkaW5nOiB3ZWJjYW1TdGF0ZS5pc1JlY29yZGluZyxcbiAgICAgIG1pcnJvcjogdGhpcy5vcHRzLm1pcnJvcixcbiAgICAgIHNyYzogdGhpcy5zdHJlYW0gfSkpO1xuICB9O1xuXG4gIFdlYmNhbS5wcm90b3R5cGUuaW5zdGFsbCA9IGZ1bmN0aW9uIGluc3RhbGwoKSB7XG4gICAgdGhpcy5zZXRQbHVnaW5TdGF0ZSh7XG4gICAgICBjYW1lcmFSZWFkeTogZmFsc2VcbiAgICB9KTtcblxuICAgIHZhciB0YXJnZXQgPSB0aGlzLm9wdHMudGFyZ2V0O1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRoaXMubW91bnQodGFyZ2V0LCB0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgV2ViY2FtLnByb3RvdHlwZS51bmluc3RhbGwgPSBmdW5jdGlvbiB1bmluc3RhbGwoKSB7XG4gICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICB0aGlzLnN0b3AoKTtcbiAgICB9XG5cbiAgICB0aGlzLnVubW91bnQoKTtcbiAgfTtcblxuICByZXR1cm4gV2ViY2FtO1xufShQbHVnaW4pOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3VwcG9ydHNNZWRpYVJlY29yZGVyKCkge1xuICByZXR1cm4gdHlwZW9mIE1lZGlhUmVjb3JkZXIgPT09ICdmdW5jdGlvbicgJiYgISFNZWRpYVJlY29yZGVyLnByb3RvdHlwZSAmJiB0eXBlb2YgTWVkaWFSZWNvcmRlci5wcm90b3R5cGUuc3RhcnQgPT09ICdmdW5jdGlvbic7XG59OyIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJjb25zdCBVcHB5ID0gcmVxdWlyZSgnQHVwcHkvY29yZScpXG5jb25zdCBEYXNoYm9hcmQgPSByZXF1aXJlKCdAdXBweS9kYXNoYm9hcmQnKVxuY29uc3QgR29vZ2xlRHJpdmUgPSByZXF1aXJlKCdAdXBweS9nb29nbGUtZHJpdmUnKVxuY29uc3QgRHJvcGJveCA9IHJlcXVpcmUoJ0B1cHB5L2Ryb3Bib3gnKVxuY29uc3QgSW5zdGFncmFtID0gcmVxdWlyZSgnQHVwcHkvaW5zdGFncmFtJylcbmNvbnN0IFVybCA9IHJlcXVpcmUoJ0B1cHB5L3VybCcpXG5jb25zdCBXZWJjYW0gPSByZXF1aXJlKCdAdXBweS93ZWJjYW0nKVxuY29uc3QgVHVzID0gcmVxdWlyZSgnQHVwcHkvdHVzJylcblxuY29uc3QgVVBQWV9TRVJWRVIgPSByZXF1aXJlKCcuLi9lbnYnKVxuXG5mdW5jdGlvbiB1cHB5SW5pdCAoKSB7XG4gIGlmICh3aW5kb3cudXBweSkge1xuICAgIHdpbmRvdy51cHB5LmNsb3NlKClcbiAgfVxuXG4gIGNvbnN0IG9wdHMgPSB3aW5kb3cudXBweU9wdGlvbnNcbiAgY29uc3QgZGFzaGJvYXJkRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuVXBweURhc2hib2FyZCcpXG4gIGlmIChkYXNoYm9hcmRFbCkge1xuICAgIGNvbnN0IGRhc2hib2FyZEVsUGFyZW50ID0gZGFzaGJvYXJkRWwucGFyZW50Tm9kZVxuICAgIGRhc2hib2FyZEVsUGFyZW50LnJlbW92ZUNoaWxkKGRhc2hib2FyZEVsKVxuICB9XG5cbiAgY29uc3QgcmVzdHJpY3Rpb25zID0ge1xuICAgIG1heEZpbGVTaXplOiAxMDAwMDAwLFxuICAgIG1heE51bWJlck9mRmlsZXM6IDMsXG4gICAgbWluTnVtYmVyT2ZGaWxlczogMixcbiAgICBhbGxvd2VkRmlsZVR5cGVzOiBbJ2ltYWdlLyonLCAndmlkZW8vKiddXG4gIH1cblxuICBjb25zdCB1cHB5ID0gVXBweSh7XG4gICAgZGVidWc6IHRydWUsXG4gICAgYXV0b1Byb2NlZWQ6IG9wdHMuYXV0b1Byb2NlZWQsXG4gICAgcmVzdHJpY3Rpb25zOiBvcHRzLnJlc3RyaWN0aW9ucyA/IHJlc3RyaWN0aW9ucyA6ICcnXG4gIH0pXG5cbiAgdXBweS51c2UoRGFzaGJvYXJkLCB7XG4gICAgdHJpZ2dlcjogJy5VcHB5TW9kYWxPcGVuZXJCdG4nLFxuICAgIGlubGluZTogb3B0cy5EYXNoYm9hcmRJbmxpbmUsXG4gICAgdGFyZ2V0OiBvcHRzLkRhc2hib2FyZElubGluZSA/ICcuRGFzaGJvYXJkQ29udGFpbmVyJyA6ICdib2R5JyxcbiAgICByZXBsYWNlVGFyZ2V0Q29udGVudDogb3B0cy5EYXNoYm9hcmRJbmxpbmUsXG4gICAgbm90ZTogb3B0cy5yZXN0cmljdGlvbnMgPyAnSW1hZ2VzIGFuZCB2aWRlbyBvbmx5LCAy4oCTMyBmaWxlcywgdXAgdG8gMSBNQicgOiAnJyxcbiAgICBoZWlnaHQ6IDQ3MCxcbiAgICBzaG93UHJvZ3Jlc3NEZXRhaWxzOiB0cnVlLFxuICAgIG1ldGFGaWVsZHM6IFtcbiAgICAgIHsgaWQ6ICduYW1lJywgbmFtZTogJ05hbWUnLCBwbGFjZWhvbGRlcjogJ2ZpbGUgbmFtZScgfSxcbiAgICAgIHsgaWQ6ICdjYXB0aW9uJywgbmFtZTogJ0NhcHRpb24nLCBwbGFjZWhvbGRlcjogJ2FkZCBkZXNjcmlwdGlvbicgfVxuICAgIF0sXG4gICAgYnJvd3NlckJhY2tCdXR0b25DbG9zZTogb3B0cy5icm93c2VyQmFja0J1dHRvbkNsb3NlXG4gIH0pXG5cbiAgaWYgKG9wdHMuR29vZ2xlRHJpdmUpIHtcbiAgICB1cHB5LnVzZShHb29nbGVEcml2ZSwgeyB0YXJnZXQ6IERhc2hib2FyZCwgc2VydmVyVXJsOiBVUFBZX1NFUlZFUiB9KVxuICB9XG5cbiAgaWYgKG9wdHMuRHJvcGJveCkge1xuICAgIHVwcHkudXNlKERyb3Bib3gsIHsgdGFyZ2V0OiBEYXNoYm9hcmQsIHNlcnZlclVybDogVVBQWV9TRVJWRVIgfSlcbiAgfVxuXG4gIGlmIChvcHRzLkluc3RhZ3JhbSkge1xuICAgIHVwcHkudXNlKEluc3RhZ3JhbSwgeyB0YXJnZXQ6IERhc2hib2FyZCwgc2VydmVyVXJsOiBVUFBZX1NFUlZFUiB9KVxuICB9XG5cbiAgaWYgKG9wdHMuVXJsKSB7XG4gICAgdXBweS51c2UoVXJsLCB7IHRhcmdldDogRGFzaGJvYXJkLCBzZXJ2ZXJVcmw6IFVQUFlfU0VSVkVSIH0pXG4gIH1cblxuICBpZiAob3B0cy5XZWJjYW0pIHtcbiAgICB1cHB5LnVzZShXZWJjYW0sIHsgdGFyZ2V0OiBEYXNoYm9hcmQgfSlcbiAgfVxuXG4gIHVwcHkudXNlKFR1cywgeyBlbmRwb2ludDogJ2h0dHBzOi8vbWFzdGVyLnR1cy5pby9maWxlcy8nLCByZXN1bWU6IHRydWUgfSlcblxuICB1cHB5Lm9uKCdjb21wbGV0ZScsIHJlc3VsdCA9PiB7XG4gICAgY29uc29sZS5sb2coJ3N1Y2Nlc3NmdWwgZmlsZXM6JylcbiAgICBjb25zb2xlLmxvZyhyZXN1bHQuc3VjY2Vzc2Z1bClcbiAgICBjb25zb2xlLmxvZygnZmFpbGVkIGZpbGVzOicpXG4gICAgY29uc29sZS5sb2cocmVzdWx0LmZhaWxlZClcbiAgfSlcbn1cblxudXBweUluaXQoKVxud2luZG93LnVwcHlJbml0ID0gdXBweUluaXRcbiIsImxldCB1cHB5U2VydmVyRW5kcG9pbnQgPSAnaHR0cDovL2xvY2FsaG9zdDozMDIwJ1xuXG5pZiAobG9jYXRpb24uaG9zdG5hbWUgPT09ICd1cHB5LmlvJykge1xuICB1cHB5U2VydmVyRW5kcG9pbnQgPSAnLy9zZXJ2ZXIudXBweS5pbydcbn1cblxuY29uc3QgVVBQWV9TRVJWRVIgPSB1cHB5U2VydmVyRW5kcG9pbnRcbm1vZHVsZS5leHBvcnRzID0gVVBQWV9TRVJWRVJcbiJdfQ==
